/*!
 * @license
 * nanoStream H5Live Player 5.0.0-moq-preview-6.x
 * Build from Thu Aug 28 2025 17:00:07 GMT+0200 (Mitteleurop√§ische Sommerzeit)
 * Copyright (c) 2014-2024 nanocosmos IT GmbH. All rights reserved.
 * http://www.nanocosmos.de
 * sales@nanocosmos.de
 *
 * LEGAL NOTICE:
 * This material is subject to the terms and conditions defined in
 * separate license conditions ('LICENSE.txt')
 * All information contained herein is, and remains the property
 * of nanocosmos GmbH and its suppliers if any. The intellectual and technical concepts
 * contained herein are proprietary to nanocosmos GmbH, and are protected by trade secret
 * or copyright law. Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained from nanocosmos.
 * All modifications will remain property of nanocosmos.
 */

/*!
 * EventEmitter v4.2.11 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */

 /*!
 * @license
 * SWFObject v2.3.20130521 <http://github.com/swfobject/swfobject> is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */

!function(){var e={4216:function(e,t,n){var r,i;r=[n(8478),n(8197),n(2459),n(2437),n(9470),n(7884),n(3293)],void 0===(i=function(e,t,n,r,i,a,o){"use strict";function s(i){var a,s,l,f,m=!1,E=i.source.group,p="https://bintu.nanocosmos.de",h={profile:"player"};return new Promise((function(g,b){if(!i.source.bintu||i.source.entries&&i.source.entries.length||(i.source.entries=[{index:0,bintu:t.copy(i.source.bintu)}],i.source.h5live&&(i.source.entries[0].h5live=t.copy(i.source.h5live),delete i.source.h5live),i.source.hls&&(i.source.entries[0].hls=t.copy(i.source.hls),delete i.source.hls)),a=performance.now(),"object"==typeof E&&E.id){E.apiurl=c(E.apiurl,p);var _=new o(E.apiurl,null,null,"player");s=E.apiurl,l=E.id,_.getStreamgroup(E.id,h).then(function(t,o){try{f=o;var s,u=JSON.parse(f.responseText),c=u.id,l=u.playout,m=l.rtmp,p=l.hls,h=l.h5live,b=u.state;if(m&&!m.length&&!h||h&&!h.length)return void v(new e(r.SETUP.BINTU_STREAM_NOT_LIVE.replace("$streamid$",c),n.SETUP.BINTU_STREAM_NOT_LIVE));i.source.entries=[];var _=i.source.entries;if(h&&h.length)for(var T=0;T<h.length;T+=1){if(_[T]=_[T]||{},p&&p.length){var A=p[T].url;_[T].hls=A}if(_[T].h5live=_[T].h5live||{},!_[T].h5live.server&&(_[T].h5live.server={}))for(s in h[T].server)Object.prototype.hasOwnProperty.call(h[T].server,s)&&(_[T].h5live.server[s]=h[T].server[s].replace("bintu-stream","bintu-h5live"));_[T].index=h[T].index||0;var S={width:0,height:0,bitrate:0,framerate:0},y={width:"width",height:"height",bitrate:"bitrate",framerate:"fps"};for(s in _[T].info=_[T].info||{},S)h[T].info&&Object.keys(h[T].info).length&&void 0!==h[T].info[y[s]]?_[T].info[s]=h[T].info[y[s]]:_[T].info[s]=S[s];h[T].label&&(_[T].label=h[T].label),_[T].h5live.rtmp={},_[T].h5live.rtmp.url=h[T].rtmp.url,_[T].h5live.rtmp.streamname=h[T].rtmp.streamname,E.security&&E.security.jwtoken&&"string"==typeof E.security.jwtoken&&(_[T].h5live.security=_[T].h5live.security||{},_[T].h5live.security.jwtoken=E.security.jwtoken),h[T].server.webtransport&&h[T].server.webtransport.length||(_[T].h5live.server.webtransport=h[T].server.websocket.replace(/^wss:\/\//,"https://"))}if(b&&(i.source.group.state=b),_&&_.length){var R={high:0,"medium-high":Math.round(1*(_.length-1)/5),medium:Math.round(1*(_.length-1)/2),"medium-low":Math.round(4*(_.length-1)/5),low:_.length-1};Object.prototype.hasOwnProperty.call(i.source.group,"startQuality")&&"string"==typeof i.source.group.startQuality&&Object.prototype.hasOwnProperty.call(R,i.source.group.startQuality)?i.source.startIndex=R[i.source.group.startQuality]:i.source.startIndex=R.low}(!i.source.options||i.source.options&&!i.source.options.adaption||i.source.options&&i.source.options.adaption&&!i.source.options.adaption.rule||i.source.options&&i.source.options.adaption&&i.source.options.adaption.rule&&"none"!==i.source.options.adaption.rule&&"deviationOfMean"!==i.source.options.adaption.rule)&&(i.source.options=i.source.options||{},i.source.options.adaption=i.source.options.adaption||{},i.source.options.adaption.rule="deviationOfMean2"),E=!1,d(i,a,g)}catch(e){v(e)}}.bind(this,void 0)).catch(v)}else if(i.source.entries&&i.source.entries.length){for(var T=i.source.entries,A=0;A<T.length;A+=1){var S=T[A];if("object"==typeof S.bintu){if(!S.bintu.streamid){if(S.h5live&&(!S.h5live||S.h5live.rtmp))continue;b(new e(r.SETUP.BINTU_NO_STREAM_ID,n.SETUP.BINTU_NO_STREAM_ID))}S.bintu.apiurl=c(S.bintu.apiurl,p),(m=m||{})[A]=new o(S.bintu.apiurl,null,null,"player"),s=S.bintu.apiurl,l=S.bintu.streamid,S.bintu.streamid&&m[A].getStream(S.bintu.streamid,h).then(y.bind(this,A)).catch(v)}}function y(t,o){try{f=o;var s,u=JSON.parse(f.responseText),c=u.id,l=u.playout,E=l.rtmp,p=l.hls,h=l.h5live,b=u.state;if(E&&!E.length&&!h||h&&!h.length)return void v(new e(r.SETUP.BINTU_STREAM_NOT_LIVE.replace("$streamid$",c),n.SETUP.BINTU_STREAM_NOT_LIVE));if(p&&p.length){var _=p[0].url;T[t].hls=_}if(h&&h.length){if(T[t].h5live=T[t].h5live||{},!T[t].h5live.server&&(T[t].h5live.server={}))for(s in h[0].server)Object.prototype.hasOwnProperty.call(h[0].server,s)&&(T[t].h5live.server[s]=h[0].server[s].replace("bintu-stream","bintu-h5live"));T[t].h5live.rtmp={},T[t].h5live.rtmp.url=h[0].rtmp.url,T[t].h5live.rtmp.streamname=h[0].rtmp.streamname}else E&&E.length&&(T[t].h5live=i.source.h5live||{},T[t].h5live.rtmp={},T[t].h5live.rtmp.url=E[0].url,T[t].h5live.rtmp.streamname=E[0].streamname);b&&(T[t].bintu.state=b),m[t]=!1;var A=!0;for(s in m)if(Object.prototype.hasOwnProperty.call(m,s)&&!1!==m[s]){A=!1;break}A&&d(i,a,g)}catch(e){v(e)}}m||d(i,0,g)}else d(i,a,g);function v(t){f=t.request?t.request:f;var i={error:null,bintu:{responseTime:u(a),apiUrl:s,isGroup:"object"==typeof E,id:l,status:f?f.status:0}};t.code&&t.message?i.error=t:"onstatuserror"===t.error?i.error=new e(r.SETUP.BINTU_STATUS_ERROR.replace("$status$",f.status),n.SETUP.BINTU_STATUS_ERROR):t.error?i.error=new e(t.error):t.message&&(i.error=new e(t.message)),b(i)}}))}function d(e,t,n){var r=0;0!==t&&(r=u(t)),n({config:e,bintu:{responseTime:r}})}function u(e){var t=Math.min(Math.max(0,performance.now()-e),6e4);return Math.floor(t)}function c(e,t){if("string"!=typeof e||""===e)return t;var n=/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,r=/^[^:\/]+[:\/]+\/?/;if(e.match(r)){var i=e.replace(r,"https://"),a=i.replace(/^https?:\/\//,"");return n.test(a)?i:t}return n.test(e)?"https://"+e:t}return{setup:s,updateSource:function(e){return s({source:e})},emptyConfig:i,validConfig:a}}.apply(t,r))||(e.exports=i)},9470:function(e,t){var n;void 0===(n=function(){return{create:function(){return{source:{bintu:{apiurl:"",streamid:""}}}}}}.apply(t,[]))||(e.exports=n)},7884:function(e,t){var n;void 0===(n=function(){return{create:function(){return{source:{bintu:{apiurl:"string",streamid:"string"}}}}}}.apply(t,[]))||(e.exports=n)},2459:function(e,t){var n;void 0===(n=function(){return Object.freeze({SETUP:{BINTU_STREAM_NOT_LIVE:5101,BINTU_NO_STREAM_ID:5102,BINTU_STATUS_ERROR:5103}})}.apply(t,[]))||(e.exports=n)},2437:function(e,t){var n;void 0===(n=function(){return Object.freeze({SETUP:{BINTU_STREAM_NOT_LIVE:"Could not find bintu stream with id $streamid$. The stream is not live.",BINTU_NO_STREAM_ID:"No bintu stream id passed.",BINTU_STATUS_ERROR:"The bintu service rejected with http status $status$."}})}.apply(t,[]))||(e.exports=n)},3293:function(e,t){var n;(function(){"use strict";var t=function(e,t,n,r){if(!(e.length>0&&("string"==typeof e||e instanceof String)))throw new Error('The param "apiUrl" must be of type "string" and also may not be empty string.');if(this.apiUrl=e,t&&("string"==typeof t||t instanceof String)&&(this.apiKey=t),n&&("string"==typeof n||n instanceof String)&&(this.playerKey=n),r&&("string"==typeof r||r instanceof String)){if("api"!==r&&"player"!==r)throw new Error('The param "keyMode" must be "api", "player" or undefined');this.keyMode=r}},r=t.prototype,i=function(e,t,n,r){this.method=e||"GET",this.url=t||"http://localhost:8088",this.header=n||{},this.async=r||!0,this.Send=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;for(var i in r.open(this.method,this.url,this.async),this.header)Object.prototype.hasOwnProperty.call(this.header,i)&&r.setRequestHeader(i,this.header[i]);if(r.onreadystatechange=function(){return 4===r.readyState&&200===r.status?t(r):4===r.readyState&&200!==r.status?n({error:"onstatuserror",request:r}):void 0},r.onabort=function(){return n({error:"onabort",request:r})},r.onerror=function(){return n({error:"onerror",request:r})},r.ontimeout=function(){return n({error:"ontimeout",request:r})},void 0!==e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){return e=null,n({error:"invalid json string",request:r})}if("object"==typeof e)try{e=JSON.stringify(e),r.send(e)}catch(e){return n({error:"invalid json object",request:r})}}else r.send()}.bind(this))}};function a(e){var t="";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];n&&r&&(0===t.length?t+="?":t+="&",t+=n+"="+r)}return t}function o(e,t,n,r){var i={};return t="string"!=typeof t?".":t,n=isNaN(n)?10:n,r=isNaN(r)?0:parseInt(r,10),e&&"object"==typeof e&&function e(a,o,s){if(!(s>=n))for(var d in a){var u=(o?o+t:"")+d;"[object Array]"===Object.prototype.toString.call(a[d])&&0===r||("object"==typeof a[d]?e(a[d],u,s+1):i[u]=a[d].toString())}}(e,"",0),i}r.apiKey=null,r.apiUrl=null,r.playerKey=null,r.keyMode="api",r.createStream=function(e,t,n){return new Promise(function(r,a){if(!this.apiUrl)return a({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey)return a({error:"no api key set",request:{responseText:"no response error"}});if("api"!==this.keyMode)return a({error:"wrong key mode set",request:{responseText:"no response error"}});var o=new i("POST",this.apiUrl+"/stream");o.header={Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey};var s={webrtc:!!e,transcoding:!!t};return"object"==typeof n&&"function"==typeof n.push&&n.length>0&&("string"==typeof n[0]||n[0]instanceof String)&&(s.tags=n),o.Send(s).then(r).catch(a)}.bind(this))},r.getStream=function(e,t){return new Promise(function(n,r){if(!this.apiUrl)return r({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey&&"api"===this.keyMode)return r({error:"no api key set",request:{responseText:"no response error"}});var s=a(o(t,".",10,0)),d=new i("GET",this.apiUrl+"/stream/"+e+s);return d.header="api"===this.keyMode&&this.apiKey?{Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey}:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},d.Send().then(n).catch(r)}.bind(this))},r.getStreamgroup=function(e,t){return new Promise(function(n,r){if(!this.apiUrl)return r({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey&&"api"===this.keyMode)return r({error:"no api key set",request:{responseText:"no response error"}});var s=a(o(t,".",10,0)),d=new i("GET",this.apiUrl+"/stream/"+e+"/group"+s);return d.header="api"===this.keyMode&&this.apiKey?{Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey}:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},d.Send().then(n).catch(r)}.bind(this))},r.getStreams=function(e){return new Promise(function(n,r){if(!this.apiUrl)return r({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey)return r({error:"no api key set",request:{responseText:"no response error"}});var a=this.apiUrl+"/stream";e instanceof t.StreamFilter&&(a+=e.getQueryString(!1));var o=new i("GET",a);return o.header={Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey},o.Send().then(n).catch(r)}.bind(this))},r.getStreamsPublic=function(e){return new Promise(function(n,r){if(!this.apiUrl)return r({error:"no api url set",request:{responseText:"no response error"}});if(!this.playerKey)return r({error:"no player key set",request:{responseText:"no response error"}});var a=this.apiUrl+"/stream/public";e instanceof t.StreamFilter&&(a+=e.getQueryString(!0));var o=new i("GET",a);return o.header={Accept:"application/json","Content-Type":"application/json","X-BINTU-PLAYERKEY":this.playerKey},o.Send().then(n).catch(r)}.bind(this))},r.tagStream=function(e,t){return new Promise(function(n,r){if(!this.apiUrl)return r({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey)return r({error:"no api key set",request:{responseText:"no response error"}});if("api"!==this.keyMode)return r({error:"wrong key mode set",request:{responseText:"no response error"}});if(!e)return r({error:"no stream id set"});var a=new i("PUT",this.apiUrl+"/stream/"+e+"/tag");return a.header={Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey},"object"==typeof t&&"function"==typeof t.push&&t.length>0&&("string"==typeof t[0]||t[0]instanceof String)?a.Send({tags:t}).then(n).catch(r):a.Send().then(n).catch(r)}.bind(this))},r.pushStream=function(e,t){return new Promise(function(n,r){if(!this.apiUrl)return r({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey)return r({error:"no api key set",request:{responseText:"no response error"}});if("api"!==this.keyMode)return r({error:"wrong key mode set",request:{responseText:"no response error"}});if(!e)return r({error:"no stream id set"});var a=new i("PUT",this.apiUrl+"/stream/"+e+"/push_url");return a.header={Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey},a.Send({url:t}).then(n).catch(r)}.bind(this))},r=(t.StreamFilter=function(){this.state=this.setState(t.StreamFilter.STATE.ALL),this.tags=[]}).prototype,t.StreamFilter.STATE=Object.create({LIVE:"live",CREATED:"created",ENDED:"ended",ALL:null}),r.setState=function(e){var n;for(var r in t.StreamFilter.STATE)t.StreamFilter.STATE[r]===e&&(n=t.StreamFilter.STATE[r]);if(void 0===n)throw new Error('The param "state" must be of type "Bintu.StreamFilter.STATE"');return this.state=n,this},r.addTag=function(e){if(!(e.length>0&&("string"==typeof e||e instanceof String)))throw new Error('The param "tag" must be of type "string" and also may not be empty string.');return this.tags.push(e),this.tags=this._reduceDuplicates(this.tags),this},r.addTags=function(e){if("object"!=typeof e||"function"!=typeof e.push||!(0===e.length||e.length>0&&("string"==typeof e[0]||e[0]instanceof String)))throw new Error('The param "tags" must be of type "string array"');return this.tags=this.tags.concat(e),this.tags=this._reduceDuplicates(this.tags),this},r.getQueryString=function(e){var t="";if("object"==typeof this.tags&&"function"==typeof this.tags.push&&this.tags.length>0)for(var n=0;n<this.tags.length;n+=1)"string"==typeof this.tags[n]&&(t+=0===n?"?":"&",t+="tags[]="+this.tags[n]);return!0===e&&""===t&&(t+="?tags[]="),"string"==typeof this.state&&this.state.length>0&&(t+=-1===t.indexOf("?")?"?":"&",t+="state="+this.state),t},r._reduceDuplicates=function(e){if("object"!=typeof e||"function"!=typeof e.push||!(0===e.length||e.length>0&&("string"==typeof e[0]||e[0]instanceof String)))throw new Error('The param "tags" must be of type "string array"');return e.reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[])},void 0===(n=function(){return t}.apply(this,[]))||(e.exports=n)}).call(this)},6965:function(e,t){var n;void 0===(n=function(){return{create:function(){return{playback:{autoplay:!0,automute:!0,muted:!1,metadata:!1,forceTech:"",flashplayer:"",videoId:"",keepConnection:!1,allowSafariHlsFallback:!1,crossOrigin:"not-set",mediaErrorRecoveries:3,metadataLowDelay:!0,reconnect:{minDelay:2,maxDelay:10,delaySteps:10,maxRetries:10},timeouts:{loading:20,buffering:20,connecting:5},latencyControlMode:"balancedadaptive",faststart:!0,enableMediaOverQuic:!1,volume:1},source:{hls:"",h5live:{server:{websocket:"",progressive:"",hls:"",webtransport:""},token:"",rtmp:{url:"",streamname:""},security:{token:"",jwtoken:"",expires:"",options:"",tag:""},params:{}},bintu:{apiurl:"",streamid:"",state:""},startIndex:0,options:{switch:{},adaption:{}},entries:[],defaults:{},group:{apiurl:"",id:"",startQuality:"",state:"",security:{jwtoken:""}},general:{}},events:{onReady:void 0,onPlay:void 0,onPause:void 0,onLoading:void 0,onStartBuffering:void 0,onStopBuffering:void 0,onError:void 0,onMetaData:void 0,onStats:void 0,onMute:void 0,onUnmute:void 0,onVolumeChange:void 0,onServerInfo:void 0,onStreamInfo:void 0,onStreamInfoUpdate:void 0,onWarning:void 0,onDestroy:void 0,onUpdateSourceInit:void 0,onUpdateSourceSuccess:void 0,onUpdateSourceFail:void 0,onUpdateSourceAbort:void 0,onSwitchStreamInit:void 0,onSwitchStreamSuccess:void 0,onSwitchStreamFail:void 0,onSwitchStreamAbort:void 0,onActiveVideoElementChange:void 0},tweaks:{buffer:{min:void 0,start:void 0,max:void 0,target:void 0,limit:void 0},bufferDynamic:{offsetThreshold:void 0,offsetStep:void 0,cooldownTime:void 0}}}}}}.apply(t,[]))||(e.exports=n)},1493:function(e,t){var n;void 0===(n=function(){return{create:function(){return{index:0,label:"high",tag:"high res",info:{bitrate:0,width:0,height:0,framerate:0},hls:"",h5live:{server:{websocket:"",progressive:"",hls:"",webtransport:""},token:"",rtmp:{url:"",streamname:""},params:{},security:{token:"",jwtoken:"",expires:"",options:"",tag:""}},bintu:{apiurl:"",streamid:"",state:""}}}}}.apply(t,[]))||(e.exports=n)},828:function(e,t){var n;void 0===(n=function(){return{create:function(){return{index:"number",label:"string",tag:"string",info:{bitrate:"number",width:"number",height:"number",framerate:"number"},hls:"string",h5live:{server:{websocket:"string",progressive:"string",hls:"string",webtransport:"string"},token:"string",rtmp:{url:"string",streamname:"string"},params:"object",security:{token:"string",jwtoken:"string",expires:"string",options:"string",tag:"string"}},bintu:{apiurl:"string",streamid:"string",state:"string"}}}}}.apply(t,[]))||(e.exports=n)},5055:function(e,t,n){var r,i;r=[n(6637)],void 0===(i=function(e){return{create:function(t,n,r){var i,a={};function o(e){a[e.name]&&a[e.name].forEach((function(t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);n.emit(t,r)}))}return i=[],r.forEach((function(e){i.push({type:e.from,listener:o}),a[e.from]||(a[e.from]=[]),a[e.from].push(e.to)})),e.add({target:t,listeners:i}),{destroy:function(){e.remove({target:t,listeners:i}),i=null,a=null}}}}}.apply(t,r))||(e.exports=i)},1969:function(e,t,n){var r,i;r=[n(9658)],void 0===(i=function(e){"use strict";function t(){this.version=void 0,this.type=void 0}var n=t.prototype=Object.create(e.prototype);return n.setup=function(){throw new Error('"setup" must be implemented or player not initialized')},n.destroy=function(){throw new Error('"destroy" must be implemented or player not initialized')},n.play=function(){throw new Error('"play" must be implemented or player not initialized by call setup')},n.pause=function(){throw new Error('"pause" must be implemented or player not initialized by call setup')},n.mute=function(){throw new Error('"mute" must be implemented or player not initialized by call setup')},n.unmute=function(){throw new Error('"unmute" must be implemented or player not initialized by call setup')},n.setVolume=function(){throw new Error('"setVolume" must be implemented or player not initialized by call setup')},n.updateSource=function(){throw new Error('"updateSource" must be implemented or player not initialized by call setup')},n.switchStream=function(){throw new Error('"switchStream" must be implemented or player not initialized by call setup')},n.setAdaption=function(){throw new Error('"setAdaption" must be implemented or player not initialized by call setup')},t.isSupported=function(){return!1},t.supportedTechniques=[],t}.apply(t,r))||(e.exports=i)},6637:function(e,t,n){var r,i;r=[n(939)],void 0===(i=function(e){"use strict";var t=["addEventListener","addListener","on"],n=["removeEventListener","removeListener","off"];function r(e,t){for(var n=0;n<t.length;++n)if("function"==typeof e[t[n]])return e[t[n]];return null}function i(i,a){!function(i){if(!i.target)throw new Error(e.NO_TARGET);if(!i.listeners||!i.listeners.length)throw new Error(e.NO_LISTENERS);if(!r(i.target,t)||!r(i.target,n))throw new Error(e.NOT_DISPATCHER);for(var a=0;a<i.listeners.length;++a)if(!i.listeners[a].type&&"string"!=typeof i.listeners[a].type||0!==i.listeners[a].type.length){if(!i.listeners[a].type)throw new Error(e.MISSING_TYPE.replace("%index%",a));if("function"!=typeof i.listeners[a].listener)throw new Error(e.MISSING_LISTENER.replace("%index%",a))}else i.listeners.splice(a,1),a--}(a),function(e,t,n){for(var r=0;r<n.length;++r)e.call(t,n[r].type,n[r].listener)}(r(a.target,i),a.target,a.listeners)}return{add:i.bind(null,t),remove:i.bind(null,n)}}.apply(t,r))||(e.exports=i)},8544:function(e,t,n){var r,i;r=[n(1933),n(8478),n(9775),n(182),n(3284),n(3778)],void 0===(i=function(e,t,n,r,i,a){return{create:function(e,o){return new Promise((function(s,d){var u=n;try{s(function(e,t){return new(0,e[0])(t)}(u=function(e,n){var i=[],o=e.filter((function(e){i=i.concat(e.supportedTechniques);var t=!1;return e.supportedTechniques.forEach((function(e){var r,i;!1===t&&(t=!n.playback.forceTech||(r=e,i=n.playback.forceTech,-1!==r.indexOf(i)||-1!==i.indexOf(r)))})),t}));if(!o.length)throw new t(r.FORCE_NOT_SUPPORTED.replace("$tech$",n.playback.forceTech),a.SETUP.FORCE_NOT_SUPPORTED);return o}(u=function(e,n){var o={};o[i.H5LIVE_WSS]="h5live",o[i.H5LIVE_HLS]="h5live",o[i.FLASH]="h5live",o[i.NATIVE]="hls";var s=[],d=e.filter((function(e){var t=!1;return e.supportedTechniques.forEach((function(e){s.push(o[e]),!1===t&&(t=Object.prototype.hasOwnProperty.call(n,"source")&&(Object.prototype.hasOwnProperty.call(n.source,o[e])||function(e,t){if(!Object.prototype.hasOwnProperty.call(e.source,"entries")||!e.source.entries.length)return!1;var n=!0;return e.source.entries.forEach((function(e){Object.prototype.hasOwnProperty.call(e,t)||(n=!1)})),n}(n,o[e])))})),t}));if(!d.length)throw new t(r.SOURCE_NOT_SUPPORTED,a.SETUP.SOURCE_NOT_SUPPORTED);return d}(u=function(e){var n=e.filter((function(e){return e.isSupported()}));if(!n.length)throw new t(r.CLIENT_NOT_SUPPORTED,a.SETUP.CLIENT_NOT_SUPPORTED);return n}(u),o),o),e))}catch(e){d(e)}}))},capabilities:(o=[],n.filter((function(e){return e.isSupported()})).forEach((function(e){o=o.concat(e.supportedTechniques)})),o)};var o}.apply(t,r))||(e.exports=i)},9775:function(e,t,n){var r,i;r=[n(1128),n(1128),n(8985),n(6722)],void 0===(i=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e}.apply(t,r))||(e.exports=i)},5810:function(e,t){var n;void 0===(n=function(){return{create:function(){return{source:{hls:"string",h5live:{server:{websocket:"string",progressive:"string",hls:"string",webtransport:"string"},token:"string",rtmp:{url:"string",streamname:"string"},params:"object",security:{token:"string",jwtoken:"string",expires:"string",options:"string",tag:"string"}},bintu:{apiurl:"string",streamid:"string",state:"string"},startIndex:"number",options:"object",entries:"object",defaults:"object",group:{apiurl:"string",id:"string",startQuality:"string",state:"string",security:{jwtoken:"string"}},general:"object"},playback:{autoplay:"boolean",automute:"boolean",muted:"boolean",forceTech:"string",metadata:"boolean",flashplayer:"string",videoId:"*",keepConnection:"boolean",allowSafariHlsFallback:"boolean",crossOrigin:"string",mediaErrorRecoveries:"number",metadataLowDelay:"boolean",reconnect:{minDelay:"number",maxDelay:"number",delaySteps:"number",maxRetries:"number"},timeouts:{loading:"number",buffering:"number",connecting:"number"},latencyControlMode:"string",faststart:"boolean",enableMediaOverQuic:"boolean",volume:"number"},events:{onReady:"function",onPlay:"function",onPause:"function",onLoading:"function",onStartBuffering:"function",onStopBuffering:"function",onError:"function",onMetaData:"function",onStats:"function",onMute:"function",onUnmute:"function",onVolumeChange:"function",onServerInfo:"function",onStreamInfo:"function",onStreamInfoUpdate:"function",onWarning:"function",onDestroy:"function",onUpdateSourceInit:"function",onUpdateSourceSuccess:"function",onUpdateSourceFail:"function",onUpdateSourceAbort:"function",onSwitchStreamInit:"function",onSwitchStreamSuccess:"function",onSwitchStreamFail:"function",onSwitchStreamAbort:"function",onActiveVideoElementChange:"function"},tweaks:{buffer:{max:"number",min:"number",start:"number",target:"number",limit:"number"},bufferDynamic:{offsetThreshold:"number",offsetStep:"number",cooldownTime:"number"}}}}}}.apply(t,[]))||(e.exports=n)},1313:function(e,t){var n;void 0===(n=function(){return Object.freeze({CONFIG_RTMP:"Configuration error. Could not create player, the rtmp configuration is missing or incomplete. Add an rtmp url and streamname to the configuration.",CONFIG_TOKEN:"Configuration error. Could not create player, with this configuration an security token is required. Add an token to the configuration.",CONFIG_WSS:"Configuration error. Could not create player, the websocket server configuration is missing.",CONFIG_HLS:"Configuration error. Could not create player, the hls server configuration is missing.",CONFIG_METADATA:"Configuration error. Could not create player, the websocket server configuration for metadata is missing.",CONFIG_SOURCE:"The players source configuration is malformed or missing, please check documentation for more information or contact us."})}.apply(t,[]))||(e.exports=n)},3778:function(e,t){var n;void 0===(n=function(){return Object.freeze({PLAYER:{NO_RTMP_URL_SET:1001,NO_SERVER_SET:1002,NOT_CONFIGURED:1003,NOT_PLAYING:1004,INTERACTION_REQUIRED:1005,BUFFER_CONFIG_INVALID:1006,PLAYBACK_SUSPENDED:1007,PLAYBACK_ERROR:1008,VISIBILITY_HIDDEN:1009,INVALID_ENTRY_INDEX:1010},STREAM:{NOT_FOUND:2001,MEDIA_NOT_AVAILABLE:2002,NOT_ENOUGH_DATA:2003,SOURCE_STOPPED:2004,SOURCE_NOT_RETRIEVED:2005,METADATA_WRONG_INDEX:2011,METADATA_INVALID_JSON:2012,METADATA_NO_START_INDEX:2013,METADATA_STILL_PROCESSING:2014},MEDIA:{ABORTED:3001,DOWNLOAD_ERROR:3002,DECODE_ERROR:3003,NOT_SUPPORTED:3004,HLS_VIDEO_DECODE_ERROR:3005,MEDIA_SOURCE_ENDED:3100,HLS_BUFFER_UNDERRUN:3101,HLS_MAX_RANGE:3102,UNSPECIFIC_ERROR:3200,DECODER_STARTUP_ERROR:3201},NETWORK:{COULD_NOT_ESTABLISH_CONNECTION:4001,CONNECTION_ERROR:4002,MAX_RECONNECTS_REACHED:4003,RECONNECTION_CONFIG_INVALID:4004,SOURCE_STREAM_STOPPED:4005,SOURCE_TIMEOUT:4006,PLAYBACK_ACCESS_REJECTED:4401},SETUP:{EXCEPTION:5001,CLIENT_NOT_SUPPORTED:5002,FORCE_NOT_SUPPORTED:5003,SOURCE_NOT_SUPPORTED:5004,CONFIG_RTMP:5005,CONFIG_TOKEN:5006,CONFIG_WSS:5007,CONFIG_HLS:5008,CONFIG_METADATA:5009,EMBED_PLAYER:5010}})}.apply(t,[]))||(e.exports=n)},3890:function(e,t){var n;void 0===(n=function(){return Object.freeze({PLAYER:{NO_RTMP_URL_SET:"No rtmp url set.",NO_SERVER_SET:"No server set.",NOT_CONFIGURED:"Could not play because player has not been configured.",PLAYBACK_ERROR:"Playback error.",VISIBILITY_HIDDEN:"Playback failed because the player was in visibility state 'hidden' at load start.",INVALID_ENTRY_INDEX:"The given stream entry index is not valid.",INTERACTION_REQUIRED:"Playback must be initialized by user gesture.",PLAYBACK_SUSPENDED:"Playback suspended by external reason."},STREAM:{NOT_FOUND:"The requested stream can not be found.",MEDIA_NOT_AVAILABLE:"No media available.",NOT_ENOUGH_DATA:"Not enough media data received.",SOURCE_STOPPED:"The source stream has been stopped.",SOURCE_NOT_RETRIEVED:"The source stream could not be retrieved",METADATA_WRONG_INDEX:"Received metadata with wrong index. Discard.",METADATA_INVALID_JSON:"Received metadata with invalid json string.",METADATA_NO_START_INDEX:"Received metadata but no start index. Discard.",METADATA_STILL_PROCESSING:"Received metadata with start index but currently process another. Discard old one."},MEDIA:{ABORTED:"A fetching process of the media aborted by user.",DOWNLOAD_ERROR:"An error occurred when downloading media.",DECODE_ERROR:"An error occurred when decoding media.",DECODER_STARTUP_ERROR:"An error occurred when starting the decoder.",NOT_SUPPORTED:"The received audio/video is not supported.",HLS_VIDEO_DECODE_ERROR:"An error occurred while hls playback when decoding video.",MEDIA_SOURCE_ENDED:"The media source extension changed the state to 'ended'.",HLS_BUFFER_UNDERRUN:"An error occurred while buffering on hls playback.",HLS_MAX_RANGE:"Buffer range is higher than allowed on hls playback."},NETWORK:{SOURCE_STREAM_STOPPED:"The requested source stream has been stopped.",SOURCE_TIMEOUT:"The source request was aborted by timeout.",PLAYBACK_ACCESS_REJECTED:"Playback access has been rejected"}})}.apply(t,[]))||(e.exports=n)},9583:function(e,t){var n;void 0===(n=function(){return Object.freeze({READY:"Ready",ERROR:"Error",PAUSE:"Pause",LOADING:"Loading",START_BUFFERING:"StartBuffering",STOP_BUFFERING:"StopBuffering",PLAY:"Play",METADATA:"MetaData",STATS:"Stats",PLAYBACK_FINISHED:"PlaybackFinished",MEDIA:"Media",STREAM_INFO:"StreamInfo",STREAM_INFO_UPDATE:"StreamInfoUpdate",MUTE:"Mute",UNMUTE:"Unmute",VOLUME_CHANGE:"VolumeChange",STATE_CHANGE:"StateChange",WARNING:"Warning",DESTROY:"Destroy",UPDATE_SOURCE_INIT:"UpdateSourceInit",UPDATE_SOURCE_SUCCESS:"UpdateSourceSuccess",UPDATE_SOURCE_FAIL:"UpdateSourceFail",UPDATE_SOURCE_ABORT:"UpdateSourceAbort",SWITCH_STREAM_INIT:"SwitchStreamInit",SWITCH_STREAM_SUCCESS:"SwitchStreamSuccess",SWITCH_STREAM_FAIL:"SwitchStreamFail",SWITCH_STREAM_ABORT:"SwitchStreamAbort",SERVER_INFO:"ServerInfo",ACTIVE_VIDEO_ELEMENT_CHANGE:"ActiveVideoElementChange"})}.apply(t,[]))||(e.exports=n)},182:function(e,t){var n;void 0===(n=function(){return{FORCE_NOT_SUPPORTED:'The forced tech "$tech$" is not supported by your browser.',SOURCE_NOT_SUPPORTED:"The players source configuration is malformed or missing, please check documentation for more information or contact us.",CLIENT_NOT_SUPPORTED:"This browser does not fully support HTML5 and H5Live.            Supported are: Chrome >=54 (Windows, MacOSX, Android), Firefox >=48 (Windows, MacOSX, Android), Microsoft Edge (Windows), Microsoft Internet Explorer 11 (at least Windows 8), Safari (MacOSX & at least iOS 10)."}}.apply(t,[]))||(e.exports=n)},166:function(e,t){var n;void 0===(n=function(){return Object.freeze({EMBED_PLAYER:'Could not embed player. Please check the path to the player in the config param "playback.flashplayer" or copy to base directory.'})}.apply(t,[]))||(e.exports=n)},8656:function(e,t){var n;void 0===(n=function(){return Object.freeze({VIDEO_DISPLAY:{CONNECTION_ERROR:"connectionError",LOADING:"loading",PLAYING:"playing",REWINDING:"rewinding",BUFFERING:"buffering",STOPPED:"stopped",DISCONNECTED:"disconnected"},NET_STREAM:{PLAY:{RESET:"NetStream.Play.Reset",UNPUBLISH_NOTIFY:"NetStream.Play.UnpublishNotify",PUBLISH_NOTIFY:"NetStream.Play.PublishNotify",PLAY:"NetStream.Play.Start",STOP:"NetStream.Play.Stop",STREAM_NOT_FOUND:"NetStream.Play.StreamNotFound"}}})}.apply(t,[]))||(e.exports=n)},9474:function(e,t){var n;void 0===(n=function(){return Object.freeze({CLASSIC:"classic",FAST_ADAPTIVE:"fastadaptive",BALANCED_ADAPTIVE:"balancedadaptive"})}.apply(t,[]))||(e.exports=n)},939:function(e,t){var n;void 0===(n=function(){return Object.freeze({NO_TARGET:"No target in config",NO_LISTENERS:"No listeners in config",NOT_DISPATCHER:"Target is not an event dispatcher",MISSING_TYPE:"Missing type in listener #%index%",MISSING_LISTENER:"Missing/invalid listener in listener #%index%"})}.apply(t,[]))||(e.exports=n)},8730:function(e,t){var n;void 0===(n=function(){return Object.freeze({MP4:"video/mp4",MP4_MS:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',HLS:"application/vnd.apple.mpegURL"})}.apply(t,[]))||(e.exports=n)},8405:function(e,t){var n;void 0===(n=function(){return Object.freeze({UNINITIALIZED:1,CONNECTING:2,OPEN:3,CLOSING:4,CLOSED:5})}.apply(t,[]))||(e.exports=n)},5493:function(e,t){var n;void 0===(n=function(){return Object.freeze({NORMAL:"normal",BUFFER:"buffer",CONNECTION_CLOSE:"connectionclose",SERVER_NOT_FOUND:"servernotfound",STREAM_NOT_FOUND:"streamnotfound",INTERACTION_REQUIRED:"interactionrequired",PLAYBACK_SUSPENDED:"playbacksuspended",PLAYBACK_ERROR:"playbackerror",RECONNECTION_IMMINENT:"reconnectionimminent",DESTROY:"destroy",VISIBILITY_HIDDEN:"visibilityhidden",NOT_ENOUGH_DATA:"notenoughdata",SOURCE_STREAM_STOPPED:"sourcestreamstopped",MEDIA_NOT_AVAILABLE:"medianotavailable"})}.apply(t,[]))||(e.exports=n)},492:function(e,t){var n;void 0===(n=function(){return Object.freeze({UNINITIALIZED:1,IDLE:2,READY:3,LOADING:4,PLAYING:5,PAUSED:6,BUFFERING:7,UNKNOWN:8,PLAYBACK_NOT_STARTED:9,PLAYBACK_SUSPENDED:10,PAUSING:11,PLAYBACK_ERROR:12,RECONNECTION_IMMINENT:13,CONNECTION_ERROR:14,DESTROYING:15,MEDIA_NOT_AVAILABLE:16,VISIBILITY_HIDDEN:17,NOT_ENOUGH_DATA:18,SOURCE_STREAM_STOPPED:19})}.apply(t,[]))||(e.exports=n)},7605:function(e,t){var n;void 0===(n=function(){return Object.freeze({HAVE_VIDEO:"haveVideo",HAVE_AUDIO:"haveAudio",VIDEO_INFO:"videoInfo",AUDIO_INFO:"audioInfo",PREROLL_DURATION:"prerollDuration",MIME_TYPE:"mimeType"})}.apply(t,[]))||(e.exports=n)},3284:function(e,t){var n;void 0===(n=function(){return Object.freeze({FLASH:"flash",NATIVE:"hls.native",H5LIVE_WSS:"h5live",H5LIVE_HLS:"h5live.hls"})}.apply(t,[]))||(e.exports=n)},2682:function(e,t){var n;void 0===(n=function(){return{CORE:"5.0.0-moq-preview-6.x"}}.apply(t,[]))||(e.exports=n)},728:function(e,t){var n;void 0===(n=function(){return Object.freeze({1e3:"Normal closure, meaning that the purpose for which the connection was established has been fulfilled.",1001:'An endpoint is "going away", such as a server going down or a browser having navigated away from a page.',1002:"An endpoint is terminating the connection due to a protocol error",1003:"An endpoint is terminating the connection because it has received a type of data it cannot accept (e.g., an endpoint that understands only text data MAY send this if it receives a binary message).",1004:"Reserved. The specific meaning might be defined in the future.",1005:"No status code was actually present.",1006:"Maybe no network, wrong url or server down.",1007:"An endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [http://tools.ietf.org/html/rfc3629] data within a text message).",1008:'An endpoint is terminating the connection because it has received a message that "violates its policy". This reason is given either if there is no other sutible reason, or if there is a need to hide specific details about the policy.',1009:"An endpoint is terminating the connection because it has received a message that is too big for it to process.",1011:"A server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request.",1015:"The connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified).",4005:"The requested source stream has been stopped.",4400:"Bad request. Maybe stream parameters are missing or malformed.",4403:"Access denied. The authentication token is missing or invalid.",4500:"The connection has been rejected due an internal server error.",4503:"The requested service is currently unavailable.",4900:"The security service has been rejected due an internal server error.",4901:"The security service denied access. The authentication token is invalid.",4903:"The security service denied access. The url is expired or a token parameter is missing (expires, token, or options).",4904:"The security service can not be found."})}.apply(t,[]))||(e.exports=n)},9374:function(e,t,n){var r,i;r=[n(8197),n(908),n(4341)],void 0===(i=function(e,t,n){return{check:function(r){var i,a;switch(r&&r.source&&r.source.defaults&&r.source.defaults.service&&(i=r.source.defaults.service),i){case t.service:a=t.preset;break;case n.service:a=n.preset}if(a){var o,s,d=r.source;if(!d||!d.h5live||d.entries&&d.entries.length||(d.entries=[{h5live:e.copy(d.h5live)}]),d&&d.entries&&d.entries.length>0)for(var u=0;u<d.entries.length;u+=1)(o=d.entries[u].h5live)&&c(o.security&&"object"==typeof o.security&&null!==o.security?a.secure.source:a.unsecure.source,o)}function c(e,t){if(t.server&&"object"==typeof t.server&&null!==t.server)for(s in e.h5live.server)t.server[s]&&typeof t.server[s]==typeof e.h5live.server[s]&&""!==t.server[s]||(t.server[s]=e.h5live.server[s]);else t.server=e.h5live.server;t.rtmp&&(!t.rtmp.url||"string"!=typeof t.rtmp.url||t.rtmp.url.length<1)&&(t.rtmp.url=e.h5live.rtmp.url)}}}}.apply(t,r))||(e.exports=i)},908:function(e,t){var n;void 0===(n=function(){return{service:"bintu",preset:{unsecure:{source:{h5live:{server:{websocket:"wss://bintu-play.nanocosmos.de:443/h5live/stream/stream.mp4",hls:"https://bintu-play.nanocosmos.de:443/h5live/http/playlist.m3u8",progressive:"https://bintu-play.nanocosmos.de:443/h5live/http/stream.mp4",webtransport:"https://bintu-play.nanocosmos.de:443/h5live/stream/stream.mp4"},rtmp:{url:"rtmp://localhost/play"}}}},secure:{source:{h5live:{server:{websocket:"wss://bintu-play.nanocosmos.de:443/h5live/authstream/stream.mp4",hls:"https://bintu-play.nanocosmos.de:443/h5live/authhttp/playlist.m3u8",progressive:"https://bintu-play.nanocosmos.de:443/h5live/authhttp/stream.mp4",webtransport:"https://bintu-play.nanocosmos.de:443/h5live/authstream/stream.mp4"},rtmp:{url:"rtmp://localhost/splay"}}}}}}}.apply(t,[]))||(e.exports=n)},4341:function(e,t){var n;void 0===(n=function(){return{service:"bintu-dev",preset:{unsecure:{source:{h5live:{server:{websocket:"wss://bintu-play-dev.nanocosmos.de:443/h5live/stream/stream.mp4",hls:"https://bintu-play-dev.nanocosmos.de:443/h5live/http/playlist.m3u8",progressive:"https://bintu-play-dev.nanocosmos.de:443/h5live/http/stream.mp4",webtransport:"https://bintu-play-dev.nanocosmos.de:443/h5live/stream/stream.mp4"},rtmp:{url:"rtmp://localhost/play"}}}},secure:{source:{h5live:{server:{websocket:"wss://bintu-play-dev.nanocosmos.de:443/h5live/authstream/stream.mp4",hls:"https://bintu-play-dev.nanocosmos.de:443/h5live/authhttp/playlist.m3u8",progressive:"https://bintu-play-dev.nanocosmos.de:443/h5live/authhttp/stream.mp4",webtransport:"https://bintu-play-dev.nanocosmos.de:443/h5live/authstream/stream.mp4"},rtmp:{url:"rtmp://localhost/splay"}}}}}}}.apply(t,[]))||(e.exports=n)},1490:function(e,t,n){var r,i;r=[n(8197),n(9771)],void 0===(i=function(e,t){var n,r,i,a=[];return a.push(t),{apply:function(t){if(n=t.source,r=n.general,!n.h5live||n.entries&&n.entries.length||(n.entries=[{h5live:e.copy(n.h5live)}]),n&&n.entries&&n.entries.length>0&&r&&Object.keys(r).length)for(var o=0;o<n.entries.length;o+=1)if(i=n.entries[o])for(var s=0;s<a.length;s+=1)a[s].apply(r,i)}}}.apply(t,r))||(e.exports=i)},9771:function(e,t){var n;void 0===(n=function(){var e="serverDomain",t=["websocket","hls","progressive","webtransport"];function n(e,t){var n,r,i;try{(n=e.split("://")).length>1&&(r=n[1].split("/")).length>1&&((i=r[0].split(":"))[0]=t,r[0]=i.join(":"),n[1]=r.join("/"),e=n.join("://"))}catch(e){}return e}return{apply:function(r,i){var a=function(t){var n=!1;return t&&"object"==typeof t&&Object.keys(t).length&&t[e]&&"string"==typeof t[e]&&t[e].length&&(n=t[e]),n}(r);if(a){if(i&&i.h5live&&i.h5live.server&&"object"==typeof i.h5live.server)for(var o=0;o<t.length;o+=1){var s=t[o];Object.prototype.hasOwnProperty.call(i.h5live.server,s)&&(i.h5live.server[s]=n(i.h5live.server[s],a))}i&&i.hls&&(i.hls=n(i.hls,a))}}}}.apply(t,[]))||(e.exports=n)},2556:function(e,t){var n;void 0===(n=function(){return{create:function(){return{metrics:{accountId:void 0,accountKey:void 0,serverDomain:void 0,userId:"",eventId:"",statsInterval:10,customField1:void 0,customField2:void 0,customField3:void 0,customField4:void 0,customField5:void 0,customField6:void 0,customField7:void 0,customField8:void 0,customField9:void 0,customField10:void 0}}}}}.apply(t,[]))||(e.exports=n)},7982:function(e,t){var n;void 0===(n=function(){return{create:function(){return{metrics:{accountId:"string",accountKey:"string",serverDomain:"string",userId:"string",eventId:"string",statsInterval:"number",customField1:"*",customField2:"*",customField3:"*",customField4:"*",customField5:"*",customField6:"*",customField7:"*",customField8:"*",customField9:"*",customField10:"*"}}}}}.apply(t,[]))||(e.exports=n)},9914:function(e,t){var n;void 0===(n=function(){return Object.freeze({SETUP:{METRICS_NO_OBJECT:5201,METRICS_NOT_OBJECT:5202,METRICS_EMPTY_OBJECT:5203,METRICS_INDEX_INVALID:5204,METRICS_INDEX_INCORRECT:5205,METRICS_INDEX_RANGE:5206,METRICS_PROPERTY_INVALID:5207,METRICS_NO_CREDENTIALS:5208}})}.apply(t,[]))||(e.exports=n)},5999:function(e,t){var n;void 0===(n=function(){return Object.freeze({METRICS_NO_OBJECT:"Metrics configuration error. No metrics config object passed.",METRICS_NOT_OBJECT:"Metrics configuration error. Metrics config is not from type 'object'.",METRICS_EMPTY_OBJECT:"Metrics configuration error. Metrics config is empty.",METRICS_INDEX_INVALID:"Metrics configuration error. The custom property '$key$' has no valid index number, the range is 1 to 10 e.g. 'customField1'.",METRICS_INDEX_INCORRECT:"Metrics configuration error. The custom property '$key$' is not indexed correctly, the range is 1 to 10 e.g. 'customField1'.",METRICS_INDEX_RANGE:"Metrics configuration error. The custom property '$key$' has an index out of range, the range is 1 to 10 e.g. 'customField1'.",METRICS_PROPERTY_INVALID:"Metrics configuration error. The property '$key$' is not valid.",METRICS_NO_CREDENTIALS:"Metrics configuration error. No credentials passed."})}.apply(t,[]))||(e.exports=n)},27:function(e,t,n){var r,i;r=[n(7080)],void 0===(i=function(e){return{create:function(){var t,n=e.create(),r="statsAdaptive",i={},a={deviationOfMean:{buffer:{delay:{bufferDelaysArithmeticMeans:{calcArrayStats:!0},bufferDelaysStandardDeviations:{calcArrayStats:!0}}}},deviationOfMean2:{buffer:{delay:{bufferDelaysArithmeticMeans:{calcArrayStats:!0},bufferDelaysStandardDeviations:{calcArrayStats:!0}}}}};function o(e){if(Array.isArray(e)&&e.length){for(var t,n=e.length,r=e[0],i=e[0],a=e[0],o=1;o<n;o++)e[o]<r&&(r=e[o]),e[o]>i&&(i=e[o]),a+=e[o];return t=a/n,{min:isNaN(r)?r:r.toFixed(3),max:isNaN(i)?i:i.toFixed(3),avg:isNaN(t)?t:t.toFixed(3),count:n}}return{}}function s(e,t){for(var n in t){if(!e[n])return;Object.prototype.hasOwnProperty.call(t[n],"calcArrayStats")?i[n]=t[n].calcArrayStats?o(e[n]):e[n]:s(e[n],t[n])}}return{setStats:function(e){e&&e.data&&e.data.stats&&e.data.stats.adaptive&&(t=e.data.stats.adaptive)},getStatsFlat:function(){var e=t&&Object.keys(t).length?Object.keys(t)[0]:"";return Object.prototype.hasOwnProperty.call(a,e)?(s(t[e],a[e]),n.get(i,r,5)):n.get(t,r,5)}}}}}.apply(t,r))||(e.exports=i)},3932:function(e,t){var n;void 0===(n=function(){return{create:function(){var e=0,t=0,n=[],r={buffering_duration_current:0,buffering_duration_average:0,buffering_duration_total:0,buffering_count:0};return{start:function(){e=performance.now()},end:function(){t=performance.now()},measure:function(i,a){if(e&&t&&t>e){var o=Math.round(Math.abs(t-e))/1e3;if(t=e=0,o>=1&&o<=a.time_elapsed){for(var s in n.push(o),r.buffering_duration_current=o,r.buffering_duration_total+=o,r.buffering_count+=1,r.buffering_duration_average=Math.round(r.buffering_duration_total/r.buffering_count*1e3)/1e3,r)!/buffering_count/.test(s)&&r[s];return r}}return!1},reset:function(i,a){if(i&&a){for(t=e=0;n.length;)n.pop();var o={};for(var s in r)!/buffering_duration_current/.test(s)&&(o[s]=r[s]),r[s]=0;return o.time_played_total=a.time_played,o.time_elapsed_total=a.time_elapsed,o.time_buffering_total=o.buffering_duration_total,o}}}}}}.apply(t,[]))||(e.exports=n)},4815:function(e,t){var n;void 0===(n=function(){return{create:function(){return{measure:function(e){return function(e,t,n,r){t=t||"_";var i={};return function e(n,r){for(var a in n){var o=r+(r?t:"")+a.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase(),s=o.split(t);o=(s=s.map((function(e){return e.substring(0,10)}))).join(t);var d=n[a];"object"==typeof d&&null!==d?e(d,o):i[o]=d}}(e,n=n||""),i}(e.data,"_","error")}}}}}.apply(t,[]))||(e.exports=n)},4245:function(e,t){var n;void 0===(n=function(){return{create:function(){return{measure:function(e){return{pause_reason:e.data.reason}}}}}}.apply(t,[]))||(e.exports=n)},2247:function(e,t){var n;void 0===(n=function(){return{create:function(){var e=0,t=0,n=0;function r(){e=performance.now()}function i(){t=performance.now(),n+=Math.abs(t-e),e=0,t=0}return{measure:function(e){r();var t,n={connecting:0,connected:0,firstFragmentReceived:0,firstFrameRendered:0,playable:0,playing:0};try{if(e.data&&e.data.stats&&"object"==typeof e.data.stats){var i=e.data.stats;for(t in n)Object.prototype.hasOwnProperty.call(i,t)&&"number"==typeof i[t]&&(n[t]=i[t])}}catch(e){}var a={};return[{start:"connecting",end:"connecting",measurement:"play_connecting",value:0},{start:"connecting",end:"connected",measurement:"play_connected",value:0},{start:"connected",end:"firstFragmentReceived",measurement:"play_first_fragment_received",value:0},{start:"firstFragmentReceived",end:"firstFrameRendered",measurement:"play_first_frame_rendered",value:0},{start:"firstFrameRendered",end:"playable",measurement:"play_playable",value:0},{start:"playable",end:"playing",measurement:"play_playing",value:0}].forEach((function(e){var t=n[e.start],r=n[e.end];r-t>=0&&(e.value=Math.floor(r-t)),a[e.measurement+"_relative"]=e.value,a[e.measurement+"_absolute"]=n[e.end]})),a.play_start_time_total=a.play_playing_absolute,a.play_faststart=e.data.faststart,a.play_preroll_duration=e.data.prerollDuration,a},setTimePlayingStateStart:r,setTimePlayingStateEnd:i,getTimePlayingStateTotal:function(){return e&&!t&&i(),Math.round(n/1e3*100)/100},resetTimePlayingStateSubtotal:function(){n=0}}}}}.apply(t,[]))||(e.exports=n)},7666:function(e,t,n){var r,i;r=[n(7080)],void 0===(i=function(e){return{create:function(){var t=e.create();return{measure:function(e){return t.get(e.data,"ready",10,!0)},flattenCodecs:function(e){var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))if("video"===n||"audio"===n)for(var r="video"===n?"vc_":"ac_",i=Array.isArray(e[n].codecs)?e[n].codecs:[],a=0;a<i.length;a++){var o=i[a];if(o&&"string"==typeof o.codec){var s="ready_bi_"+r+o.codec.replace(/[.]/g,"_");t[s]=o.supported,"video"===n&&o.supported?t[s+"_max"]=o.maxResolution||"N/A":"audio"===n&&o.supported&&(t[s+"_max"]=o.maxConfig||"N/A")}}else"codecs_time"===n&&(t.ready_bi_codecs_time=e[n].execution);return t.ready_bi_moq_supported=void 0!==e.moq_supported&&e.moq_supported,t.ready_bi_webcodecs_vc=void 0!==e.webcodecs_vc&&e.webcodecs_vc,t.ready_bi_webcodecs_ac=void 0!==e.webcodecs_ac&&e.webcodecs_ac,t}}}}}.apply(t,r))||(e.exports=i)},2381:function(e,t,n){var r,i;r=[n(7080)],void 0===(i=function(e){return{create:function(){var t=e.create(),n={};return{measure:function(e){return{server_info_server_application_name:(n=e.data.serverInfo).serverApplicationName,server_info_server_application_version:n.serverApplicationVersion,server_info_hostname:n.hostname}},getFlat:function(){return t.get(n,"serverInfo",5)}}}}}.apply(t,r))||(e.exports=i)},1025:function(e,t,n){var r,i;r=[n(7080),n(8197)],void 0===(i=function(e,t){return{create:function(){var n=e.create(),r={SwitchStreamInit:{removeKeys:["source"]},SwitchStreamSuccess:{removeKeys:["source"],evaluateSwitch:!0},SwitchStreamAbort:{removeKeys:["source"]},SwitchStreamFail:{removeKeys:["source"]},UpdateSourceInit:{removeKeys:["source"]},UpdateSourcAbort:{removeKeys:["source"]},UpdateSourceFail:{removeKeys:["source"]}},i={up:0,down:0,direct:0,recover:0};return{handleEvent:function(e){var a,o;return!!function(e){return e&&e.data&&e.name}(e)&&(a=e.name,o=t.copy(e.data),Object.prototype.hasOwnProperty.call(r,a)&&Object.prototype.hasOwnProperty.call(r[a],"removeKeys")&&r[a].removeKeys.length&&function(e,t){for(var n=0;n<t.length;n++)Object.prototype.hasOwnProperty.call(e,t[n])&&delete e[t[n]]}(o,r[a].removeKeys),Object.prototype.hasOwnProperty.call(r,a)&&Object.prototype.hasOwnProperty.call(r[a],"evaluateSwitch")&&r[a].evaluateSwitch&&function(e){e&&e.type&&Object.keys(i).includes(e.type)&&(i[e.type]+=1)}(o),n.get(o,"e",5,!0))},getSwitchCountFlat:function(){var e=0,t={};return Object.keys(i).forEach((function(n){e+=i[n],t[n]=i[n]})),t.total=e,n.get(t,"switches",2,!0)},resetSwitchCount:function(){Object.keys(i).forEach((function(e){i[e]=0}))}}}}}.apply(t,r))||(e.exports=i)},9555:function(e,t){var n;void 0===(n=function(){return{create:function(e){var t=10;e&&!isNaN(e)&&(e=parseInt(e,10))>=5&&(t=e);var n=10*t,r=0,i=[],a=[],o=[],s=[],d=0,u={stats_buffer_average:0,stats_buffer_min:0,stats_buffer_max:0,stats_bitrate_average:0,stats_bitrate_min:0,stats_bitrate_max:0,stats_frame_rate_average:0,stats_frame_rate_min:0,stats_frame_rate_max:0,stats_playback_rate_average:0,stats_playback_rate_min:0,stats_playback_rate_max:0,stats_playback_rate_frequency:0,stats_buffergoal_real:0,stats_buffergoal_base:0,stats_buffergoal_min:0,stats_buffergoal_max:0,stats_quality_dropped_video_frames:0,stats_quality_dropped_video_frames_current:0,stats_quality_dropped_video_frames_ratio:0,stats_quality_dropped_video_frames_level_max:0,stats_quality_corrupted_video_frames:0,stats_quality_corrupted_video_frames_current:0,stats_quality_creation_time:0,stats_quality_total_video_frames:0,stats_measure_count:0,stats_measure_samples:n,stats_buffer_duration_delta:0};return{measure:function(e){var t={currentTime:0,playout:{start:0,end:0},buffer:{start:0,end:0,delay:{before:0,current:0,avg:0,min:0,max:0,deviation:0},update:{current:0,avg:0,min:0,max:0,deviation:0},durationDelta:0},buffergoal:{real:0,base:0,min:0,max:0},quality:{droppedVideoFrames:0,droppedVideoFramesCurrent:0,droppedVideoFramesLevel:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0},bitrate:{current:0,avg:0,min:0,max:0,deviation:0},framerate:{current:0,avg:0,min:0,max:0,deviation:0},playbackrate:{current:0,avg:0,min:0,max:0,deviation:0}};e.data.stats&&"object"==typeof e.data.stats&&(t=e.data.stats);try{for(r+=1,i.push(t.buffer.delay.current),a.push(t.bitrate.current),o.push(t.framerate.current),s.push(t.playbackrate.current);i.length>n;)i.shift();for(;a.length>n;)a.shift();for(;o.length>n;)o.shift();for(;s.length>n;)s.shift();if(d=Math.max(d,t.quality.droppedVideoFramesLevel),r%n==0){var c=JSON.parse(JSON.stringify(i)).sort((function(e,t){return e-t}),0);u.stats_buffer_average=Math.round(c.reduce((function(e,t){return e+t}),0)/c.length*1e3)/1e3,u.stats_buffer_min=Math.round(1e3*c[0])/1e3,u.stats_buffer_max=Math.round(1e3*c[c.length-1])/1e3,u.stats_buffer_duration_delta=t.buffer.durationDelta;var l=JSON.parse(JSON.stringify(a)).sort((function(e,t){return e-t}),0);u.stats_bitrate_average=Math.round(l.reduce((function(e,t){return e+t}),0)/l.length/1e3),u.stats_bitrate_min=Math.round(l[0]/1e3),u.stats_bitrate_max=Math.round(l[c.length-1]/1e3);var f=JSON.parse(JSON.stringify(o)).sort((function(e,t){return e-t}),0);u.stats_frame_rate_average=Math.round(f.reduce((function(e,t){return e+t}),0)/f.length*1e3)/1e3,u.stats_frame_rate_min=f[0],u.stats_frame_rate_max=f[f.length-1];var m=JSON.parse(JSON.stringify(s)).sort((function(e,t){return e-t}),0),E=s.map((function(e,t,n){return t?e-n[t-1]:0})).filter((function(e){return 0!==e}));u.stats_playback_rate_average=Math.round(m.reduce((function(e,t){return e+t}),0)/m.length*1e3)/1e3,u.stats_playback_rate_min=m[0],u.stats_playback_rate_max=m[m.length-1],u.stats_playback_rate_frequency=Math.round(10*E.length/n*1e3)/1e3,u.stats_buffergoal_real=t.buffergoal.real,u.stats_buffergoal_base=t.buffergoal.base,u.stats_buffergoal_min=t.buffergoal.min,u.stats_buffergoal_max=t.buffergoal.max,u.stats_measure_count+=1;var p=Math.round((t.quality.droppedVideoFrames-u.stats_quality_dropped_video_frames)/(t.quality.totalVideoFrames-u.stats_quality_total_video_frames)*100)/100;return u.stats_quality_dropped_video_frames=t.quality.droppedVideoFrames,u.stats_quality_dropped_video_frames_current=t.quality.droppedVideoFramesCurrent,u.stats_quality_dropped_video_frames_ratio=p,u.stats_quality_dropped_video_frames_level_max=d,u.stats_quality_corrupted_video_frames=t.quality.corruptedVideoFrames,u.stats_quality_corrupted_video_frames_current=t.quality.corruptedVideoFramesCurrent,u.stats_quality_creation_time=t.quality.creationTime,u.stats_quality_total_video_frames=t.quality.totalVideoFrames,d=0,u}return!1}catch(e){return!1}},reset:function(){for(r=0;i.length;)i.shift();for(;a.length;)a.shift();for(;o.length;)o.shift();for(;s.length;)s.shift();for(var e in u)"stats_measure_samples"!==e&&(u[e]=0)}}}}}.apply(t,[]))||(e.exports=n)},4402:function(e,t,n){var r,i;r=[n(7080)],void 0===(i=function(e){return{create:function(){var t=e.create(),n={};return{measure:function(e){return{stream_info_has_audio:(n=e.data.streamInfo).haveAudio,stream_info_has_video:n.haveVideo,stream_info_preroll_duration:n.prerollDuration?n.prerollDuration:0,stream_info_width:n.videoInfo?n.videoInfo.width:0,stream_info_height:n.videoInfo?n.videoInfo.height:0,stream_info_frame_rate:n.videoInfo?n.videoInfo.frameRate:0,stream_info_sample_rate:n.audioInfo?n.audioInfo.sampleRate:0,stream_info_channels:n.audioInfo?n.audioInfo.channels:0,stream_info_bits_per_sample:n.audioInfo?n.audioInfo.bitsPerSample:0,connection_id:n.url.split("&cid=")[1].split("&pid=")[0]}},getFlat:function(){return t.get(n,"streamInfo",5)},reset:function(){n={}},getStreamname:function(){return void((e=n)&&Object.prototype.hasOwnProperty.call(e,"rtmp")&&Object.prototype.hasOwnProperty.call(e.rtmp,"streamname"))?n.rtmp.streamname:"";var e}}}}}.apply(t,r))||(e.exports=i)},6545:function(e,t){var n;void 0===(n=function(){return{create:function(){return{measure:function(e){return{warning_message:e.data.message}}}}}}.apply(t,[]))||(e.exports=n)},2215:function(e,t,n){var r,i;r=[n(1933),n(8818),n(8478),n(8333),n(8197),n(6627),n(9583),n(9914),n(5999),n(2556),n(7982),n(2788),n(4402),n(2381),n(2247),n(9555),n(3932),n(4245),n(4815),n(7666),n(1025),n(27),n(6545)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l,f,m,E,p,h,g,b,_,T,A,S){function y(){var c,y,v,R,O,I,C,N,D,w,U,M,P,L,F,x,k,B=u.create().metrics,H={},V=r.create("NanoMetrics"),G=e,W=t,Y=n,j={},K={},z={},q={},Q=0,J="classic",X=0,$=0,Z=0,ee=a,te=1,ne=0,re=["glog1.nanocosmos.de","metrics.stream360.io","metrics.stream365.io"];function ie(e){try{var t=function(e){var t=q&&q.source&&q.source.entries&&q.source.entries[Q]&&q.source.entries[Q].h5live?q.source.entries[Q].h5live:{},n=t.server||{websocket:"",hls:"",progressive:""},r=t.rtmp&&t.rtmp.url?t.rtmp.url:"",i=function(e){var t=e.split(/\?(.+)/);return 1===t.length?t.push(""):t.pop(),t}(t.rtmp&&t.rtmp.streamname?t.rtmp.streamname:""),a=i[0],o=i[1],s=function(e,t,n){var r,i,a="";return e&&t&&(-1!==e.indexOf("bintu")||n&&n.websocket&&n.websocket.length&&-1!==n.websocket.indexOf("bintu")&&-1!==e.indexOf("localhost"))&&(i=/^[A-Za-z0-9 ]+$/,(r=t.split("-")[0]).length>4&&r.length<=6&&i.test(r))&&(a=t.split("-")[0]),a}(r,a,n),d=void 0!==K.hostname?K.hostname:"";void 0===(L=document.visibilityState)&&(L="unknown"),L=L;var u=(F=ee.isIOSDesktopMode)?"iOS":G.os;x=function(){if(!F||!G.browserVersion)return G.osVersion;var e=G.browserVersion.split("."),t=!0;if(!(e.length<=2))return"unknown";for(var n=0;n<e.length;n++)if(e[n].length<1||e[n].length>2){t=!1;break}return t?G.browserVersion:void 0}();var c={application_name:"h5live-player",application_user_id:""+B.userId,application_event_id:""+B.eventId,application_account_id:""+B.accountId,application_account_key:""+B.accountKey,message:e.name.replace(/\b\w/g,(function(e){return e.toLowerCase()})).replace(/([A-Z])/g,"_$1").toUpperCase(),severity:"info",client_ip:"",timestamp_client:(new Date).toISOString(),referrer:document.location.href,os:u,os_version:x,browser:G.browser,browser_version:G.browserVersion,player_id:y.id,player_type:y.type,player_mediaplaybackapi:y.mediaplaybackapi,player_version:y.version,player_event_name:e.name.replace(/\b\w/g,(function(e){return e.toLowerCase()})).replace(/([A-Z])/g,"_$1").toUpperCase(),server_domain:n.websocket&&n.websocket.length?n.websocket.split("//")[1].split("/")[0]:"",server_hostname:d,rtmp_url:r,rtmp_streamname:a,rtmp_streamparameter:o,connection_id:j&&j.url&&j.url.length?j.url.split("&cid=")[1].split("&pid=")[0]:"",time_played:z.currentTime?Math.round(1e3*z.currentTime)/1e3:0,time_elapsed:X>0?Math.round(performance.now()-X)/1e3:0,bintu_orga_hash:s,latency_control_mode:J,visibility:L,player_event_count:te};for(var l in H)Object.prototype.hasOwnProperty.call(H,l)&&(c[l]=""+H[l]);return c}(e);switch(e.name){case o.READY:J=e.data.config.latencyControlMode,t.latency_control_mode=J,e.data.config.playback.latencyControlMode=q.playback&&q.playback.latencyControlMode?q.playback.latencyControlMode:J,ae(w,"measure",e,t)&&(me(!1)&&de(t,{bintu_response_time:k.responseTime}),de(t,w.flattenCodecs(W.getCodecSupport(),"")),de(t,{ready_bi_webtransport:G.isWebTransportSupported}),oe(t));break;case o.LOADING:C.reset(),I.reset(),oe(t);break;case o.STREAM_INFO:case o.STREAM_INFO_UPDATE:j=e.data.streamInfo,ae(v,"measure",e,t),oe(t);break;case o.PLAY:X=performance.now(),ae(O,"measure",e,t),me(!1)&&de(t,{bintu_response_time:k.responseTime}),oe(t),U.resetSwitchCount();break;case o.STATS:z=e.data.stats;var n=Object.prototype.hasOwnProperty.call(z,"adaptive");n&&M.setStats(e,t),ae(I,"measure",e,t)&&(n&&de(t,M.getStatsFlat()),oe(t));break;case o.START_BUFFERING:O.setTimePlayingStateEnd(),C.start();break;case o.STOP_BUFFERING:C.end(),O.setTimePlayingStateStart(),ae(C,"measure",e,t)&&(t.message=t.player_event_name="BUFFERING",oe(t));break;case o.PAUSE:$=t.time_elapsed,Z+=$,O.setTimePlayingStateEnd();var r=O.getTimePlayingStateTotal();ae(N,"measure",e,t),ae(C,"reset",e,t),de(t,v.getFlat()),de(t,{time_playing_state_total:r,time_elapsed_total_sum:Z,entries_length:q&&Object.prototype.hasOwnProperty.call(q,"source")&&Object.prototype.hasOwnProperty.call(q.source,"entries")?q.source.entries.length:1}),de(t,U.getSwitchCountFlat()),oe(t),j={},z={},O.resetTimePlayingStateSubtotal(),U.resetSwitchCount(),Z=0,X=0;break;case o.ERROR:ae(D,"measure",e,t);var i=me(!0);if(i)switch(e.data.code){case 5101:case 5102:case 5103:de(t,{bintu_response_time:i.responseTime,bintu_api_url:i.apiUrl,bintu_is_group:i.isGroup,bintu_id:i.id,bintu_status:i.status});break;default:de(t,{bintu_response_time:k.responseTime})}oe(t);break;case o.DESTROY:oe(t);break;case o.METADATA:case o.PLAYBACK_FINISHED:case o.MEDIA:case o.MUTE:case o.UNMUTE:case o.VOLUME_CHANGE:case o.STATE_CHANGE:break;case o.WARNING:ae(P,"measure",e,t),oe(t);break;case o.SWITCH_STREAM_INIT:ae(U,"handleEvent",e,t)&&(de(t,M.getStatsFlat()),oe(t));break;case o.SWITCH_STREAM_SUCCESS:ce(e,"entry")&&ue(e.data.entry.index),$=t.time_elapsed,Z+=$,X=performance.now(),ae(U,"handleEvent",e,t)&&(de(t,v.getFlat()),de(t,{time_elapsed_total:$,time_elapsed_total_sum:Z}),oe(t),v.reset());break;case o.SWITCH_STREAM_FAIL:case o.SWITCH_STREAM_ABORT:case o.UPDATE_SOURCE_INIT:ae(U,"handleEvent",e,t)&&oe(t);break;case o.UPDATE_SOURCE_SUCCESS:ce(e,"source")&&((a=e.data.source)&&(q.source=a),ue(e.data.source.startIndex)),$=t.time_elapsed,Z+=$,X=performance.now(),ae(U,"handleEvent",e,t)&&(de(t,v.getFlat()),de(t,{time_elapsed_total:$,time_elapsed_total_sum:Z}),oe(t),v.reset());break;case o.UPDATE_SOURCE_FAIL:case o.UPDATE_SOURCE_ABORT:ae(U,"handleEvent",e,t)&&oe(t);break;case o.SERVER_INFO:K=e.data.serverInfo,ae(R,"measure",e,t)&&(t.server_hostname=void 0!==K.hostname?K.hostname:"",oe(t))}}catch(e){V.debugEnabled()&&V.debug("metrics event error: "+(e.message?e.message:"exception"))}var a}function ae(e,t,n,r){var i=e[t](n,r);if(i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a]);return!0}return!1}function oe(e){V.debugEnabled()&&V.debug("send "+e.player_event_name),c.send(e.player_event_name,e),1e5===te?(te=1,V.debugEnabled()&&V.debug("playerEventCount reached 100000, reset to 1")):te+=1}function se(){if("object"==typeof y&&"function"==typeof y.off)for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&y.off(o[e],ie);c&&(c.destroy(),c=null),v=null,O=null,I=null,C=null,N=null,D=null,w=null,U=null,M=null,P=null}function de(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}function ue(e){Q=isNaN(e)?0:e}function ce(e,t){var n=e&&Object.prototype.hasOwnProperty.call(e,"data");return t?n&&Object.prototype.hasOwnProperty.call(e.data,t):n}function le(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function fe(e,t){if("string"===t)return function(e){return"string"!=typeof e||""===e.trim()?"unknown":e.trim()}(e);if("boolean"===t)return Boolean(e);if("number"===t){var n=Number(e);return isNaN(n)?0:n}return e}function me(e){var t=function(e){if("object"!=typeof k||null===k)return!1;var t={apiUrl:"string",id:"string",isGroup:"boolean",responseTime:"number",status:"string"};if("number"==typeof k.status&&(k.status=k.status.toString()),e){for(var n in t)if(le(t,n)&&(k[n]=fe(k[n],t[n]),!le(k,n)))return!1;return k}if(le(k,"responseTime")){var r=k.responseTime;if("string"==typeof r&&(r=Number(r)),"number"==typeof r&&!isNaN(r))return k.responseTime=r,k}return!1}(e);return!!(t&&t.responseTime>0)&&t}return{setup:function(e,t,n){var r;V.debugEnabled()&&V.debug("setup"),y=t,q=i.copy(e),se(),k=n,!q.source.h5live||q.source.entries&&q.source.entries.length||(q.source.entries=[{h5live:i.copy(q.source.h5live)}],delete q.source.h5live);var a=q.metrics;if(!a)throw new Y(d.METRICS_NO_OBJECT,s.SETUP.METRICS_NO_OBJECT);if("object"!=typeof a)throw new Y(d.METRICS_NOT_OBJECT,s.SETUP.METRICS_NOT_OBJECT);if(!Object.getOwnPropertyNames(a).length)throw new Y(d.METRICS_EMPTY_OBJECT,s.SETUP.METRICS_EMPTY_OBJECT);for(r in a)if(!Object.prototype.hasOwnProperty.call(a,r)||!Object.prototype.hasOwnProperty.call(B,r)||(B[r]=a[r],0===r.indexOf("customField"))){var u,L=r.split("customField");if(!(L.length>1&&0===L[0].length))throw new Y(d.METRICS_PROPERTY_INVALID.replace("$key$",r),s.SETUP.METRICS_PROPERTY_INVALID);if(u=parseInt(L[1],10),isNaN(u))throw new Y(d.METRICS_INDEX_INVALID.replace("$key$",r),s.SETUP.METRICS_INDEX_INVALID);if(u.toString()!==L[1])throw new Y(d.METRICS_INDEX_INCORRECT.replace("$key$",r),s.SETUP.METRICS_INDEX_INCORRECT);if(u<1||u>10)throw new Y(d.METRICS_INDEX_RANGE.replace("$key$",r),s.SETUP.METRICS_INDEX_RANGE);H["application_custom_field_"+L[1]]=a[r]}if(!B.accountId||!B.accountKey)throw new Y(d.METRICS_NO_CREDENTIALS,s.SETUP.METRICS_NO_CREDENTIALS);for(r in a.serverDomain&&a.serverDomain.length>0?B.serverDomain=a.serverDomain:B.serverDomain=re[0],a)V.debugEnabled()&&V.debug("metrics config["+r+"]: "+JSON.stringify(a[r]));for(var F in v=f.create(),R=m.create(),O=E.create(),I=p.create(B.statsInterval),C=h.create(),N=g.create(),D=b.create(),w=_.create(),U=T.create(),M=A.create(),P=S.create(),c=l.create({accountId:B.accountId,accountKey:B.accountKey,serverDomain:B.serverDomain}),o)Object.prototype.hasOwnProperty.call(o,F)&&(y.off(o[F],ie),y.on(o[F],ie));q.source&&q.source.entries&&q.source.entries.length>0&&(ne=q.source.entries.length-1),Q=q.source&&!isNaN(q.source.startIndex)&&q.source.entries&&q.source.startIndex>=0&&q.source.startIndex<q.source.entries.length?q.source.startIndex:ne},destroy:se}}return y.emptyConfig=u,y.validConfig=c,y}.apply(t,r))||(e.exports=i)},2788:function(e,t,n){var r,i;r=[n(8333)],void 0===(i=function(e){return{create:function(t){var n={accountId:void 0,accountKey:void 0,serverDomain:void 0};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t&&Object.prototype.hasOwnProperty.call(t,r)&&void 0!==t[r]&&(n[r]=t[r]);var i=0,a={},o="https://"+n.serverDomain+"/gelf/"+n.accountKey,s=e.create("MetricsLogger"),d=!0;function u(e,t,n){void 0!==a[e]&&(s.detailEnabled()&&s.detail("#"+e+" "+t+" "+n+" "+a[e].status),delete a[e])}return window.addEventListener("unload",(function(){d=!1})),{send:function(e,t){try{i+=1;var n=new XMLHttpRequest;a[i]=n;var r=a[i];if(r.open("POST",o,d),r.onreadystatechange=function(e,t){if(this&&4===this.readyState){var n=this.status>=400?"fail":this.status>=200?"success":"unknown";u.call(null,e,t,n)}}.bind(r,i,e),["abort","error","timeout"].forEach((function(t){r.addEventListener(t,u.bind(null,i,e,t))})),void 0!==t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t=null}if("object"==typeof t)try{t=JSON.stringify(t),s.detailEnabled()&&s.detail("#"+i+" "+e+" send "+t),setTimeout(u.bind(null,i,e,"suspend"),5e3),r.send(t)}catch(e){u.call(null,i,"catch "+e.message)}}else r.send()}catch(e){u.call(null,i,"catch "+e.message)}},destroy:function(){for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&delete a[e]}}}}}.apply(t,r))||(e.exports=i)},7080:function(e,t){var n;void 0===(n=function(){return{create:function(){var e,t,n={},r={source:"src",options:"opt",config:"cfg",playback:"pb",entries:"entr"};function i(t,r){var a;for(var s in t)a=o(s,r),e&&Array.isArray(t[s])?i(t[s].slice(Math.max(t[s].length-e,0)),a):"object"==typeof t[s]?i(t[s],a):n[a]=t[s];return n}function a(e){return isNaN(e)&&e===e.toUpperCase()}function o(e,n){var i,o=n+"_";t&&Object.prototype.hasOwnProperty.call(r,e)&&(e=r[e]);for(var s=0;s<e.length;s++)a(i=e.charAt(s))&&(o+="_"),o+=i.toLowerCase();return o}function s(){n={}}return{get:function(n,r,a,o){return s(),n&&"object"==typeof n?(r=r?r.toLowerCase():"",e=a,t=o,i(n,r)):{}},reset:s}}}}.apply(t,[]))||(e.exports=n)},8209:function(e,t,n){var r,i;r=[n(1969),n(8544),n(6965),n(5810),n(1493),n(828),n(9583),n(492),n(5493),n(2682),n(3778),n(8333),n(6028),n(6725),n(2874)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l,f,m,E){"use strict";var p=l.create("NanoCore");function h(t){m.validatePlayerDivId(t),this.version=u.CORE,this.type="default",this.mediaplaybackapi="default",this.id=Math.round(1e11*Math.random()).toString(),this._playerDivId=t,this._dummyPlayer=new e(this._playerDivId),this._realPlayer=this._dummyPlayer}p.debugEnabled()&&p.debug("NanoCore api version: "+u.CORE);var g=h.prototype=Object.create(e.prototype);return g.setup=function(e){return new E(function(n,r){var i=e&&e.events&&e.events.onError?e.events.onError:null,a=function(e){e.code||(e.code=c.SETUP.EXCEPTION),e.message||(e.message="An unknown error occured during setup.");var t={name:"Error",data:{code:e.code,message:e.message},player:this._playerDivId,id:this.id,version:this.version,state:s.IDLE};i&&this.on(t.name,i),this.emit(t.name,t),r(e)}.bind(this);try{this._realPlayer&&this._realPlayer!==this._dummyPlayer&&(this._realPlayer.destroy(),this._realPlayer=this._dummyPlayer),t.create(this._playerDivId,e).then(function(t){this.version=t.version,this.type=t.type,this._realPlayer=t,this._realPlayer.id=this.id,this._propagator=f.create(t,o,this),this._realPlayer.setup(e).then(function(e){this.mediaplaybackapi=t.mediaplaybackapi,window.onunload=function(){this._realPlayer.destroy()}.bind(this),function(e){n(e)}(e)}.bind(this),a)}.bind(this),(function(e){a(e)}))}catch(e){a(e)}}.bind(this))},g.destroy=function(){this._realPlayer.destroy()},g.play=function(){this._realPlayer.play()},g.pause=function(){this._realPlayer.pause()},g.mute=function(){this._realPlayer.mute()},g.unmute=function(){this._realPlayer.unmute()},g.setVolume=function(e){this._realPlayer.setVolume(e)},g.updateSource=function(e,t){return this._realPlayer.updateSource(e,t)},g.switchStream=function(e){return this._realPlayer.switchStream(e)},g.setAdaption=function(e){this._realPlayer.setAdaption(e)},h.events=o,h.states=s,h.emptyConfig=n,h.validConfig=r,h.entryEmptyConfig=i,h.entryValidConfig=a,h.pauseReasons=d,h.errorCodes=c,h.version=u.CORE,h.capabilities=t.capabilities,h}.apply(t,r))||(e.exports=i)},9921:function(e,t,n){var r,i;r=[n(130),n(8209),n(1583),n(2215),n(4216),n(9374),n(1490),n(8333),n(6028),n(1473),n(6725),n(9658),n(8197)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l,f){"use strict";var m=s.create("NanoPlayer");m.debugEnabled()&&m.debug("NanoPlayer api version: "+e.NANOPLAYER);var E,p=t.events,h=t.states,g=t.emptyConfig,b=t.validConfig,_=t.entryEmptyConfig,T=t.entryValidConfig,A=t.pauseReasons,S=t.errorCodes,y=t.capabilities,v=n.events,R=n.publicEvents,O=n.emptyConfig,I=n.validConfig,C=i.emptyConfig,N=i.validConfig,D=r.emptyConfig,w=r.validConfig,U={};for(E in p)U[E]=p[E];for(E in R)U[E]=R[E];var M={};u.extend(g.create(),M),u.extend(O.create(),M),u.extend(C.create(),M),u.extend(D.create(),M);var P={};u.extend(b.create(),P),u.extend(I.create(),P),u.extend(N.create(),P),u.extend(w.create(),P);var L={};u.extend(_.create(),L);var F={};function x(t){c.validatePlayerDivId(t),this.version=e.NANOPLAYER,this.coreversion="",this.viewversion="",this.type="default",this.mediaplaybackapi="default",this.id=Math.round(1e11*Math.random()).toString(),this._playerDivId=t,this._core=null,this._view=null,this._metrics=null,this.state=h.IDLE}u.extend(T.create(),F);var k=x.prototype=Object.create(l.prototype);return k.setup=function(e){var n=f.copy(e);return new Promise(function(e,s){try{var c={};u.extend(n,c);var l=c&&c.events&&c.events.onError?c.events.onError:null,f=function(e){var t="object"==typeof e.error?e.error:e;t&&!t.code&&(t.code=S.SETUP.EXCEPTION),t&&!t.message&&(t.message="An unknown error occured during setup.");var n={name:"Error",data:{code:t.code,message:t.message},player:this._playerDivId,id:this.id,version:this.version,state:this.state};c.metrics&&(this._metrics||(this._metrics=new r,this._metrics.version=this.version),this._metrics.setup(c,this,e.bintu)),l&&this.on(n.name,l),this._emit(n.name,n),u.merge(c,this._viewConfig),u.extend(this._viewConfig,c),c.style.view&&(this._initView(c),null!==this._view&&this._view.handleView(x.states.UNINITIALIZED)),s(t)}.bind(this);this._bintuConfig=C.create(),this._coreConfig=g.create(),this._viewConfig=O.create(),u.merge(c,this._bintuConfig),u.clean(c),this.destroy();var m={};u.extend(n,m),this._checkConfig(m),i.setup(c).then(function(n){var i=n.config;try{a.check(i),o.apply(i),(c=i).metrics&&(this._metrics&&this._metrics.destroy(),this._metrics=new r,this._metrics.version=this.version,this._metrics.setup(c,this,n.bintu)),u.merge(c,this._viewConfig),u.merge(c,this._coreConfig),u.extend(this._viewConfig,c),u.extend(this._coreConfig,c),u.clean(c),this._initView(c),this._core&&this._core.destroy(),this._core=new t(this._playerDivId),this._core.id=this.id,this._corePropagator=d.create(this._core,x.coreEvents,this),this._connectLayers(),this._core.setup(this._coreConfig).then(function(t){window.removeEventListener("unload",this.destroy.bind(this)),window.addEventListener("unload",this.destroy.bind(this)),this.coreversion=this._core.version,this.type=this._core.type,this.mediaplaybackapi=this._core.mediaplaybackapi,this._view&&this._view.postSetup(),u.extend(this._bintuConfig,t),u.extend(this._viewConfig,t),u.clean(t),e(t)}.bind(this),function(e){this._view&&this._viewConfig.style&&this._viewConfig.style.view&&this._view.handleView(x.states.UNINITIALIZED),s(e)}.bind(this))}catch(e){f(e)}}.bind(this),f)}catch(e){f(e)}}.bind(this))},k.destroy=function(){this._view&&this._view.destroy(),this._view=null,this._core&&this._core.destroy(),this._core=null,this._metrics&&this._metrics.destroy(),this._metrics=null},k._checkConfig=function(e){var t=[];if(e.source&&e.source.bintu){var n=u.check({source:{bintu:e.source.bintu}},N.create());t=t.concat(n)}if(e.style){var r=u.check({style:e.style},I.create());t=t.concat(r)}if(e.source){delete e.source.bintu,delete e.style,delete e.metrics,delete e.events;var i=u.check(e,b.create()).filter((function(e){return-1!==e.indexOf("valid")}));t=t.concat(i)}if(t.length){var a=e&&e.events&&e.events.onWarning?e.events.onWarning:null;a&&this.on(p.WARNING,a),t.forEach(function(e){var t={name:p.WARNING,data:{message:e},player:this._playerDivId,id:this.id,version:this.version,state:this.state};this._emit(t.name,t)}.bind(this))}},k._initView=function(e){this._view&&this._view.destroy(),this._view=new n,this._view.version=this.version,this.viewversion=this._view.version,this._view.setBaseValues(this._playerDivId),this._view.baseSetup(e),this._viewPropagator=d.create(this._view,x.viewPublicEvents,this)},k._connectLayers=function(){var e=[x.coreEvents.MEDIA];function t(e,t,n,r){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&-1===t.indexOf(e[i])&&n.on(e[i],r.bind(this))}t(x.coreEvents,e,this,this._onCoreEvent.bind(this)),this._view&&t(x.viewEvents,[],this._view,this._onViewEvent.bind(this))},k._onCoreEvent=function(e){if(this.state=e.state,this._view&&this._viewConfig.style&&this._viewConfig.style.view){if(e.name===x.coreEvents.STATS)return void this._view.handleStats(e.data.stats);e.name===x.coreEvents.STATE_CHANGE?this._view.update(e):e.name===x.coreEvents.STREAM_INFO?this._view.handleStreamInfo(e):e.name===x.coreEvents.STREAM_INFO_UPDATE?this._view.handleStreamInfoUpdate(e):e.name===x.coreEvents.MUTE||e.name===x.coreEvents.UNMUTE?this._view.handleMute(e.name===x.coreEvents.MUTE):e.name===x.coreEvents.VOLUME_CHANGE?this._view.handleVolume(e.data.volume):e.name===x.coreEvents.READY?this._view.handleConfig(e.data.config):e.name===x.coreEvents.METADATA?this._view.handleMetaData(e):e.name===x.coreEvents.ACTIVE_VIDEO_ELEMENT_CHANGE&&(e.data.activeVideoElement&&"VIDEO"===e.data.activeVideoElement.tagName&&"moq"===this.mediaplaybackapi&&(this.mediaplaybackapi="mse"),this._view.handleActiveVideoElementChange(e))}},k._onViewEvent=function(e){this._core&&(e.name===x.viewEvents.PLAY?this._core.play():e.name===x.viewEvents.PAUSE?this._core.pause():e.name===x.viewEvents.MUTE?this._core.mute():e.name===x.viewEvents.UNMUTE?this._core.unmute():e.name===x.viewEvents.VOLUME_CHANGE?this._core.setVolume(e.data.volume):e.name===x.viewEvents.FULLSCREEN_CHANGE&&this._emit(x.viewPublicEvents.FULLSCREEN_CHANGE,e.data))},k._emit=function(e,t){var n={};t&&t.name&&t.data?n=t:t?(n.data=t,n.name=e||"unknown"):(n.data={},n.name=e||"unknown"),n.player=this._playerDivId,n.id=this.id,n.version=this.version,n.state=this.state,this.emit(n.name,n)},k._callMethod=function(){if(!this._core)throw new Error('"'+arguments[0]+'" must be implemented or player not initialized by call setup.');return this._core[arguments[0]].apply(this._core,Array.prototype.slice.call(arguments,1))},k._callViewMethod=function(){if(!this._view)throw new Error('"'+arguments[0]+'" must be implemented or player not initialized by call setup.');return this._view[arguments[0]].apply(this._view,Array.prototype.slice.call(arguments,1))},k.play=function(){this._callMethod("play")},k.pause=function(){this._callMethod("pause")},k.mute=function(){this._callMethod("mute")},k.unmute=function(){this._callMethod("unmute")},k.setVolume=function(e){this._callMethod("setVolume",e)},k.updateSource=function(e,t){return new Promise(function(n,r){i.updateSource(e,t).then(function(e){var i=e.config;a.check(i),o.apply(i),this._callMethod("updateSource",i.source,t).then((function(e){n(e)}),(function(e){r(e)}))}.bind(this),function(e){var t="object"==typeof e.error?e.error:e,n={name:"Error",data:{code:t.code,message:t.message},player:this._playerDivId,id:this.id,version:this.version,state:this.state};this._emit(n.name,n),r(t)}.bind(this))}.bind(this))},k.switchStream=function(e){return new Promise(function(t,n){this._callMethod("switchStream",e).then((function(e){t(e)}),(function(e){n(e)}))}.bind(this))},k.setAdaption=function(e){this._callMethod("setAdaption",e)},k.requestFullscreen=function(){return this._callViewMethod("requestFullscreen")},k.exitFullscreen=function(){return this._callViewMethod("exitFullscreen")},x.states=h,x.coreEvents=p,x.viewEvents=v,x.viewPublicEvents=R,x.emptyConfig=M,x.validConfig=P,x.entryEmptyConfig=L,x.entryValidConfig=F,x.events=U,x.pauseReasons=A,x.capabilities=y,window.NanoPlayer=x,x}.apply(t,r))||(e.exports=i)},6722:function(e,t,n){var r,i;r=[n(1969),n(3284),n(1313),n(166),n(3778),n(3890),n(2682),n(8053),n(9658),n(9088),n(1473),n(8478),n(8197),n(6965),n(5810),n(9583),n(8656),n(492),n(5493)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l,f,m,E,p,h,g,b){var _=u.log,T=2e4,A=2e4;function S(e){this.version=o.CORE,this.type="flash",this.mediaplaybackapi="flash",this.config=m.create(),this._volume=1,this._muted=!1,this._mediaElement=null,this._mediaSource=null,this._playing=!1,this._playerDivId=e,this._playerDiv=document.getElementById(this._playerDivId),this._mediaElementId="flash-"+e,this.state=this.STATE.IDLE,this._triggered=0,this._stats={currentTime:0,playout:{start:0,end:0},buffer:{start:0,end:0,delay:{before:0,current:0,avg:0,min:0,max:0,deviation:0},update:{current:0,avg:0,min:0,max:0,deviation:0}},quality:{droppedVideoFrames:0,droppedVideoFramesCurrent:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0},bitrate:{current:0,avg:0,min:0,max:0,deviation:0},framerate:{current:0,avg:0,min:0,max:0,deviation:0}},this._intervalEmitStats=0,this._streamInfo=null,this._isSwitchStream=!1,this._isUpdateSource=!1,this._switchCount=0}S.isSupported=function(){return 0!==s.ua.pv[0]||s.ua.pv===[0,0,0]},S.supportedTechniques=[t.FLASH];var y=S.prototype=Object.create(e.prototype);return y.setup=function(e){return new Promise(function(t,r){try{var a=c.check(e,E.create());c.merge(e,this.config),c.clean(this.config),!this.config.source.h5live||this.config.source.entries&&this.config.source.entries.length||(this.config.source.entries=[{h5live:f.copy(this.config.source.h5live)}]);var o=this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live.rtmp,s=this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live.params;if(!(o&&o.url&&o.streamname||s&&s.url&&s.stream))throw new l(n.CONFIG_RTMP,i.SETUP.CONFIG_RTMP);this._emitter=new d,this._setListeners(this.config.events,this),a.forEach(function(e){this._emitWarning(e)}.bind(this)),this._metaDataEnabled=this.config.playback.metadata,this._setupVideoElement(),this._setupFinish().then(t,r)}catch(e){r(e)}}.bind(this))},y.play=function(){this._setMediaElement(),this._mediaElement.Start()},y.pause=function(){this._isSwitchStream&&(this._emit(p.SWITCH_STREAM_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(p.UPDATE_SOURCE_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource}),this._isUpdateSource=!1),this._triggered=arguments.length?arguments[0]:0,clearTimeout(this._bufferTimeout),this._setMediaElement(),this._mediaElement.Stop()},y.mute=function(){this._setMediaElement(),this._muted=!0,this._mediaElement.SetVolume(0),this._emit(p.MUTE)},y.unmute=function(){this._setMediaElement(),this._muted=!1,this._mediaElement.SetVolume(this._volume),this._emit(p.UNMUTE)},y.setVolume=function(e){e<0&&(e=0),e>1&&(e=1),this._setMediaElement(),this._volume=e,this._muted||this._mediaElement.SetVolume(this._volume),this._emit(p.VOLUME_CHANGE,{volume:e})},y.destroy=function(){this._setState(this.STATE.DESTROYING),this._playing&&this.pause(this.state),this._emit(p.DESTROY),this._mediaElement&&(this.pause(),document.getElementById(this._playerDivId).removeChild(this._mediaElement),this._mediaElement=null),clearTimeout(this._bufferTimeout),this.removeAllListeners()},y.updateSource=function(e){return new Promise(function(t,n){try{this._isSwitchStream&&(this._emit(p.SWITCH_STREAM_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream,reason:"superseded"}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(p.UPDATE_SOURCE_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource,reason:"superseded"}),this._isUpdateSource=!1),this._isUpdateSource=Math.round(1e11*Math.random()),this._switchCount++,setTimeout(this._emit.bind(this,p.UPDATE_SOURCE_INIT,{source:this.config.source,entry:this._getEntry(),rule:"none",options:this.config.source.options?this.config.source.options:{},tag:"",count:this._switchCount,type:"direct",id:this._isUpdateSource}),0);var r=!1;this.state!==this.STATE.PLAYING&&this.state!==this.STATE.LOADING&&this.state!==this.STATE.BUFFERING||(r=!0),this.config.source=e,!this.config.source.h5live||this.config.source.entries&&this.config.source.entries.length||(this.config.source.entries=[{h5live:f.copy(this.config.source.h5live)}]),this._setConnectionConfig(this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live),this.config.source.entries.length>1&&this.config.source.options&&this.config.source.options.adaption&&this.config.source.options.adaption.rule&&"none"!==this.config.source.options.adaption.rule&&this._emitWarning("ABR is not supported with flash!"),r?this.play():(setTimeout(this._emit.bind(this,p.UPDATE_SOURCE_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isUpdateSource}),0),this._isUpdateSource=!1),t(f.copy(this.config))}catch(e){n(e)}}.bind(this))},y.switchStream=function(e){return new Promise(function(t,n){if(isNaN(e)||e<0||e>=this.config.source.entries.length)n(new l(a.PLAYER.INVALID_ENTRY_INDEX,i.PLAYER.INVALID_ENTRY_INDEX));else{this._isSwitchStream&&(this._emit(p.SWITCH_STREAM_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream,reason:"superseded"}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(p.UPDATE_SOURCE_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource,reason:"superseded"}),this._isUpdateSource=!1),this._isSwitchStream=Math.round(1e11*Math.random()),this._switchCount++,setTimeout(this._emit.bind(this,p.SWITCH_STREAM_INIT,{source:this.config.source,entry:this._getEntry(),rule:"none",options:this.config.source.options?this.config.source.options:{},tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),0);var r=!1;this.state!==this.STATE.PLAYING&&this.state!==this.STATE.LOADING&&this.state!==this.STATE.BUFFERING||(r=!0),this._setConnectionConfig(this.config.source.entries[e].h5live),r?this.play():(setTimeout(this._emit.bind(this,p.SWITCH_STREAM_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),0),this._isSwitchStream=!1),t(f.copy(this.config))}}.bind(this))},y.setAdaption=function(e){e&&e.rule&&"none"!==e.rule&&this._emitWarning("ABR is not supported with flash!")},y._setupVideoElement=function(){var e="nano.player.swf";void 0!==this.config.playback.flashplayer&&(e=this.config.playback.flashplayer);var t=document.createElement("div");t.setAttribute("id","flashReplace"),this._playerDiv.appendChild(t);var n={};n.id=this._mediaElementId,n.name=this._mediaElementId,n.align="middle",n.wmode="transparent",s.embedSWF(e,"flashReplace","100%","100%","9.0.0",null,{},{quality:"high",bgcolor:"#000000",allowscriptaccess:"always",allowfullscreen:"true",allowfullscreeninteractive:"true",wmode:"transparent"},n)},y._setupFinish=function(){return new Promise(function(e,t){var n=0,a=0;n=setInterval(function(){if(a++,n&&(this._mediaElement=document.getElementById(this._mediaElementId),this._mediaElement&&this._mediaElement.Start)){clearInterval(n);try{if(window._flashPlayers[this._mediaElementId]=this,this._setName(),this._mediaElement.TraceExternalFunctions(),this._setNetStream(!1),this._setConnectionConfig(this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live),this.config.source.entries.length>1&&this.config.source.options&&this.config.source.options.adaption&&this.config.source.options.adaption.rule&&"none"!==this.config.source.options.adaption.rule&&this._emitWarning("ABR is not supported with flash!"),this._setPlayerConfig(this._playerDiv.offsetWidth,this._playerDiv.offsetHeight),this.config.playback.muted&&this.mute(),this.config.playback.timeouts){var o=1e3*this.config.playback.timeouts.loading,s=1e3*this.config.playback.timeouts.buffering;T=Math.max(Math.min(o,6e4),1e4),A=Math.max(Math.min(s,6e4),1e4)}this.config.type=this.type,this._setState(this.STATE.READY),this._emit(p.READY,{config:this.config}),this.config.playback.autoplay&&this.play(),e(f.copy(this.config))}catch(e){t(e)}}a>100&&(clearInterval(n),t(new l(r.EMBED_PLAYER,i.SETUP.EMBED_PLAYER)))}.bind(this),100)}.bind(this))},y._setListeners=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&"function"==typeof e[n]){var r=n.replace("on",""),i=e[n];t.on(r,i)}},y._setState=function(e){this.state=e,_("nanoplayer ("+this._playerDivId+'): set state "'+this._getState()+'"',3),this._emit(p.STATE_CHANGE)},y._getState=function(){for(var e in this.STATE)if(this.STATE[e]===this.state)return e},y._emit=function(e,t){var n={};t&&t.name&&t.data?n=t:t?(n.data=t,n.name=e||"unknown"):(n.data={},n.name=e||"unknown"),n.player=this._playerDivId,n.id=this.id,n.version=this.version,n.state=this.state,"Error"===e&&n.data.code&&n.data.message&&_("nanoplayer ("+this._playerDivId+"): error "+n.data.code+" "+n.data.message,1),this.emit(n.name,n)},y._emitError=function(e,t){this._emit(p.ERROR,{code:e,message:t})},y._emitWarning=function(e){this._emit(p.WARNING,{message:e})},y._setConnectionConfig=function(e){this._setMediaElement();var t=e.rtmp,n=e.params,r=n&&n.url?n.url:t&&t.url?t.url:null,i=n&&n.stream?n.stream:t&&t.streamname?t.streamname:null;r&&i?(this.config.url=r+"/"+i,this._mediaElement.SetServerUrl(r),this._mediaElement.SetStreamName(i)):this.config.url=""},y._setPlayerConfig=function(e,t){this._setMediaElement(),this._mediaElement.SetVideoDisplayResolution(e+","+t),this._mediaElement.SetResize("false"),this._mediaElement.SetOnlyThisResolution(e+","+t)},y._setNetStream=function(e){this._setMediaElement(),this._mediaElement.UseNetstream(e?1:0)},y._setMediaElement=function(){var e=document.getElementById(this._mediaElementId);this._mediaElement=e},y._getPauseReason=function(e){var t="";if(e)switch(this.state){case this.STATE.READY:t=b.SERVER_NOT_FOUND;break;case this.STATE.LOADING:t=b.STREAM_NOT_FOUND;break;case this.STATE.BUFFERING:t=b.BUFFER;break;case this.STATE.UNKNOWN:t=b.UNKNOWN;break;case this.STATE.PLAYING:t=b.NORMAL;break;case this.STATE.DESTROYING:t=b.DESTROY;break;default:t=b.NORMAL}else t=b.NORMAL;return t},y._startIntervals=function(){this._stopIntervals(),this._onStats(!0),this._intervalEmitStats=setInterval(this._onStats.bind(this),100)},y._stopIntervals=function(){this._intervalEmitStats&&(clearInterval(this._intervalEmitStats),this._intervalEmitStats=0)},y._getEntry=function(){var e={},t=this._mediaElement.GetStreamName();return this.config.source.entries.forEach((function(n){n.h5live.rtmp.streamname===t&&(e=f.copy(n))})),e},y._onStreamInfo=function(e){_("nanoplayer ("+this._playerDivId+"): onStreamInfo",2),this._setMediaElement(),this._streamInfo=e,this._streamInfo.url="",this._streamInfo.rtmp={url:this._mediaElement.GetServerUrl(),streamname:this._mediaElement.GetStreamName()},this._isSwitchStream&&(this._emit(p.SWITCH_STREAM_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(p.UPDATE_SOURCE_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource}),this._isUpdateSource=!1),this._emit(p.STREAM_INFO,{streamInfo:this._streamInfo})},y._onStats=function(e){var t=e?0:this._stats.currentTime+.1;this._stats.currentTime=t;var n="stats error";try{n=JSON.stringify(this._stats)}catch(e){}_("nanoplayer ("+this._playerDivId+"): stats - "+n,4),this._emit(p.STATS,{stats:this._stats})},y._onLoading=function(){this._isSwitchStream||this._isUpdateSource||(this._playing=!0,this._setState(this.STATE.LOADING),this._emit(p.LOADING)),this._loadingTimeout=setTimeout(function(){this._isSwitchStream&&(this._emit(p.SWITCH_STREAM_FAIL,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream,code:i.STREAM.NOT_FOUND,message:"The requested stream can not be found."}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(p.UPDATE_SOURCE_FAIL,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource,code:i.STREAM.NOT_FOUND,message:"The requested stream can not be found."}),this._isUpdateSource=!1),this._emitError(i.STREAM.NOT_FOUND,a.STREAM.NOT_FOUND),this.pause(this.state)}.bind(this),T)},y._onPlaying=function(){clearTimeout(this._loadingTimeout),clearTimeout(this._bufferTimeout),this.state===this.STATE.LOADING&&(this._startPlayingTimeout&&clearTimeout(this._startPlayingTimeout),this._startPlayingTimeout=setTimeout(function(){clearTimeout(this._startPlayingTimeout),this._startPlayingTimeout=0,this._setState(this.STATE.PLAYING),this._playing=!0,this.setVolume(this._volume),!this._intervalEmitStats&&this._emit(p.PLAY,{stats:{connecting:0,connected:0,firstFragmentReceived:0,firstFrameRendered:0,playable:0,playing:0}}),!this._intervalEmitStats&&this._startIntervals()}.bind(this),1e3))},y._onStartBuffering=function(){this.state<this.STATE.PLAYING||this._isSwitchStream||this._isUpdateSource||(this._setState(this.STATE.BUFFERING),this._startBufferTimeout&&clearTimeout(this._startBufferTimeout),this._startBufferTimeout=setTimeout(function(){clearTimeout(this._startBufferTimeout),this._startBufferTimeout=0,this.state===this.STATE.BUFFERING&&(this._playing=!1,this._emit(p.START_BUFFERING),this._bufferTimeout=setTimeout(function(){this._emitError(i.STREAM.MEDIA_NOT_AVAILABLE,a.STREAM.MEDIA_NOT_AVAILABLE),this.pause(this.state)}.bind(this),A))}.bind(this),2e3))},y._onStopBuffering=function(){clearTimeout(this._loadingTimeout),clearTimeout(this._bufferTimeout),this._playing=!0,this._setState(this.STATE.PLAYING),this._emit(p.STOP_BUFFERING)},y._onPause=function(){if(!this._isSwitchStream&&!this._isUpdateSource){clearTimeout(this._loadingTimeout),clearTimeout(this._bufferTimeout),this._playing=!1;var e=this._getPauseReason(this._triggered);_("nanoplayer ("+this._playerDivId+'): trigger pause with reason "'+e+'", state "'+this._getState()+'"',3),this._setState(this.STATE.PAUSED),this._stopIntervals(),this._emit(p.PAUSE,{reason:e})}},y._emitMetaData=function(e,t){if(this._metaDataEnabled){_("nanoplayer ("+this._playerDivId+"): onMetaData",2);try{var n=JSON.stringify(t);_("nanoplayer ("+this._playerDivId+"): handlerName="+e+", metaData="+n,2)}catch(e){}var r={handlerName:e,streamTime:0,message:t};this._emit(p.METADATA,r)}},y._onMetaData=function(e){if(Array.isArray(e)){for(var t={},n=0;n<e.length;n+=1)t[e[n].name]=e[n].value;e=t}var r={haveAudio:!!e.audiocodecid,haveVideo:!!e.videocodecid,audioInfo:null,videoInfo:null};r.haveAudio&&(r.audioInfo={sampleRate:e.audiosamplerate,channels:e.stereo?2:1,bitsPerSample:e.audiosamplesize}),r.haveVideo&&(r.videoInfo={width:e.width,height:e.height,frameRate:e.framerate}),this._onStreamInfo(r),this._emitMetaData("MetaData",e)},y._onCuePoint=function(e){this._emitMetaData("CuePoint",e)},y._onVolumeChange=function(){},y._onResize=function(){if(this._streamInfo&&this._streamInfo.haveVideo){this._setMediaElement();var e=this._streamInfo.videoInfo.width,t=this._streamInfo.videoInfo.height,n=this._mediaElement.GetCurrentSizeOfContainer(),r=n[0]/n[1],i=e/t;r<i?(e=n[0],t=Math.round(e/i)):(t=n[1],e=Math.round(t*i)),this._mediaElement.SetResize("true"),this._mediaElement.SetVideoDisplayResolution(e+","+t),this._mediaElement.SetResize("false"),this._mediaElement.SetOnlyThisResolution(e+","+t),this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(function(){this._resizeTimeout=0,this._mediaElement.SetResize("true"),this._mediaElement.SetVideoDisplayResolution(e+","+t),this._mediaElement.SetResize("false"),this._mediaElement.SetOnlyThisResolution(e+","+t)}.bind(this),300)}},y._onDebug=function(e){var t="string"==typeof e?e:e.message?e.message:e.data.message?e.data.message:"unknown";_("nanoplayer ("+this._playerDivId+"): "+t,2)},y._onFlashReady=function(){this._onDebug("flash ready")},y._onFlashState=function(e,t){if(void 0!==e){var n="";if("string"==typeof e||e instanceof String)n=e,this._onDebug("onFlashCallState: "+n+" from "+t);else for(var r in this._onDebug("onFlashCallState: "+t),e)Object.prototype.hasOwnProperty.call(e,r)&&(this._onDebug("onFlashCallState: "+r+" = "+e[r]),"state"!==r&&"code"!==r||(n=e[r]));n===this.FLASH_STATE.VIDEO_DISPLAY.LOADING||n===this.FLASH_STATE.NET_STREAM.PLAY.RESET||n===this.FLASH_STATE.NET_STREAM.PLAY.UNPUBLISH_NOTIFY||n===this.FLASH_STATE.NET_STREAM.PLAY.PUBLISH_NOTIFY?this._onLoading():n===this.FLASH_STATE.VIDEO_DISPLAY.REWINDING||n===this.FLASH_STATE.VIDEO_DISPLAY.PLAYING||n===this.FLASH_STATE.NET_STREAM.PLAY.START?(this.state===this.STATE.LOADING&&this._onPlaying(),this.state===this.STATE.BUFFERING&&this._onStopBuffering()):n===this.FLASH_STATE.VIDEO_DISPLAY.BUFFERING?this._onStartBuffering():n!==this.FLASH_STATE.VIDEO_DISPLAY.CONNECTION_ERROR&&n!==this.FLASH_STATE.VIDEO_DISPLAY.STOPPED&&n!==this.FLASH_STATE.VIDEO_DISPLAY.DISCONNECTED&&n!==this.FLASH_STATE.NET_STREAM.PLAY.STOP&&n!==this.FLASH_STATE.NET_STREAM.PLAY.STREAM_NOT_FOUND||this._onPause(),"error"===e.level?this._onDebug("onFlashCallState: ERROR - "+n):this._onDebug("onFlashCallState: state="+n)}},y._setName=function(){this._setMediaElement(),this._mediaElement.SetName(this._mediaElementId)},y.STATE=g,y.FLASH_STATE=h,y.PAUSE_REASON=b,window._flashPlayers={},window.onFlashCallExternalApplicationReady=function(){return!0},window.onFlashCallInternalApplicationReady=function(e){window._flashPlayers[e]&&window._flashPlayers[e]._onFlashReady()},window.onFlashCallMyTrace=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onDebug(t)},window.onFlashCallAutoResizeContainer=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onResize(t)},window.onFlashCallVolumeChange=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onVolumeChange(t)},window.onFlashCallMetaDataReceived=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onMetaData(t)},window.onFlashCallCuePointReceived=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onCuePoint(t)},window.onFlashCallState=function(e,t,n){window._flashPlayers[e]&&window._flashPlayers[e]._onFlashState(t,n)},S}.apply(t,r))||(e.exports=i)},651:function(e,t,n){var r,i;r=[n(6637),n(3778),n(3890),n(492),n(9583),n(9673),n(594),n(680),n(1376),n(7354),n(8333)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c){return{create:function(a){var u,l,f,m,E,p,h,g,b,_,T=c.create("ErrorSelector");const A="loading",S="error";var y=[{type:s.STATE_CHANGE,listener:function(e){switch(u=e.data.state){case r.LOADING:p=!0,g={loading:void 0,error:void 0},U(A),f=!1,l=null,b={bufferDelayCurrent:0,bitrateCurrent:0,framerateCurrent:0},_=null;break;case r.PLAYING:h=setTimeout((function(){p=!1}),3e4);break;case r.BUFFERING:break;default:clearTimeout(h),p=!1}}},{type:s.DOCUMENT_VISIBLE,listener:v},{type:s.DOCUMENT_HIDDEN,listener:v},{type:s.STREAM_INFO,listener:function(){f=!0}},{type:d.STREAM_STATUS,listener:function(e){l=e.data.onStreamStatus.status}},{type:i.STATS,listener:function(e){p&&(b.bufferDelayCurrent=e.data.stats.buffer.delay.current,b.bitrateCurrent=e.data.stats.bitrate.current,b.framerateCurrent=e.data.stats.framerate.current)}},{type:s.STARTUP_STATS_ADDED,listener:R},{type:s.STARTUP_STATS_COMPLETED,listener:R},{type:s.BUFFER_TWEAKS_ERROR,listener:function(e){N(e.data.code,e.data.message,!1,!0)}},{type:s.LOADING_TIMEOUT,listener:function(){f?m||E?N(t.PLAYER.VISIBILITY_HIDDEN,n.PLAYER.VISIBILITY_HIDDEN):N(t.STREAM.NOT_ENOUGH_DATA,n.STREAM.NOT_ENOUGH_DATA):l&&"stopped"===l?N(t.STREAM.SOURCE_STOPPED,n.STREAM.SOURCE_STOPPED):N(t.STREAM.NOT_FOUND,n.STREAM.NOT_FOUND)}},{type:s.BUFFERING_TIMEOUT,listener:function(){l&&"stopped"===l?N(t.STREAM.SOURCE_STOPPED,n.STREAM.SOURCE_STOPPED):N(t.STREAM.MEDIA_NOT_AVAILABLE,n.STREAM.MEDIA_NOT_AVAILABLE)}},{type:s.MIME_TYPE_UNSUPPORTED,listener:function(){N(t.MEDIA.NOT_SUPPORTED,n.MEDIA.NOT_SUPPORTED)}},{type:s.META_DATA_ERROR,listener:function(e){N(e.data.code,e.data.message,!0,!0)}},{type:s.MISSING_RTMP_ERROR,listener:function(){N(t.PLAYER.NO_RTMP_URL_SET,n.PLAYER.NO_RTMP_URL_SET,!1,!0)}},{type:s.NO_SERVER_ERROR,listener:function(){N(t.PLAYER.NO_SERVER_SET,n.PLAYER.NO_SERVER_SET,!1,!0)}},{type:s.SOURCE_STREAM_STOPPED,listener:function(){N(t.STREAM.SOURCE_STOPPED,n.STREAM.SOURCE_STOPPED)}},{type:s.NOT_CONFIGURED,listener:function(){N(t.PLAYER.NOT_CONFIGURED,n.PLAYER.NOT_CONFIGURED)}},{type:s.UPDATE_SOURCE_INVALID,listener:function(e){N(e.data.code,e.data.message)}},{type:s.INVALID_ENTRY_INDEX,listener:function(e){N(e.data.code,e.data.message,!1,!e.data.pauseOnError)}},{type:o.PLAY_START_NOT_ALLOWED_ERROR,listener:function(e){e.data.automuted||N(t.PLAYER.INTERACTION_REQUIRED,n.PLAYER.INTERACTION_REQUIRED)}},{type:o.MEDIA_ERROR,listener:function(e){switch(e.data.code){case t.MEDIA.ABORTED:N(t.MEDIA.ABORTED,n.MEDIA.ABORTED);break;case t.MEDIA.DOWNLOAD_ERROR:N(t.MEDIA.DOWNLOAD_ERROR,n.MEDIA.DOWNLOAD_ERROR);break;case t.MEDIA.DECODE_ERROR:N(t.MEDIA.DECODE_ERROR,n.MEDIA.DECODE_ERROR);break;case t.MEDIA.DECODER_STARTUP_ERROR:N(t.MEDIA.DECODER_STARTUP_ERROR,n.MEDIA.DECODER_STARTUP_ERROR);break;case t.MEDIA.NOT_SUPPORTED:N(t.MEDIA.NOT_SUPPORTED,n.MEDIA.NOT_SUPPORTED);break;case t.MEDIA.HLS_VIDEO_DECODE_ERROR:N(t.MEDIA.HLS_VIDEO_DECODE_ERROR,n.MEDIA.HLS_VIDEO_DECODE_ERROR);break;case t.MEDIA.MEDIA_SOURCE_ENDED:(m||E)&&u===r.LOADING?N(t.PLAYER.VISIBILITY_HIDDEN,n.PLAYER.VISIBILITY_HIDDEN):N(t.MEDIA.MEDIA_SOURCE_ENDED,n.MEDIA.MEDIA_SOURCE_ENDED);break;case t.PLAYER.PLAYBACK_ERROR:N(t.PLAYER.PLAYBACK_ERROR,n.PLAYER.PLAYBACK_ERROR);break;case t.MEDIA.HLS_BUFFER_UNDERRUN:N(t.MEDIA.HLS_BUFFER_UNDERRUN,n.MEDIA.HLS_BUFFER_UNDERRUN)}}},{type:o.PLAYBACK_SUSPENDED,listener:function(){N(t.PLAYER.PLAYBACK_SUSPENDED,n.PLAYER.PLAYBACK_SUSPENDED)}},{type:o.UPDATE_SOURCE_TIMEOUT,listener:function(e){N(e.data.code,e.data.message)}},{type:d.DISCONNECTED,listener:O},{type:d.INITIALIZATION_ERROR,listener:O},{type:d.CONNECTION_ERROR,listener:O},{type:d.ERROR,listener:O},{type:d.RECONNECTION_CONFIG_INVALID,listener:O}];function v(e){e.name===s.DOCUMENT_HIDDEN?m=!0:(m&&(E=!0),m=!1,setTimeout((function(){E=!1}),1e3))}function R(e){_=e.data.stats}function O(e){4004===e.data.code?N(e.data.code,e.data.message,!0,!0):N(e.data.code,e.data.message)}function I(e,t,n){n?setTimeout(C.bind(this,e,t),0):C(e,t)}function C(e,t){a.emit(e,t)}function N(e,t,n,r){p&&U(S),I(i.ERROR,function(e,t){var n={code:e,message:t};if(p&&_){var r=M(function(){for(var e in delete _.connecting,_.error=g.error-g.loading,b)Object.prototype.hasOwnProperty.call(b,e)&&(_[e]=b[e]);return{playback:{bufferDelayCurrent:_.bufferDelayCurrent,bitrateCurrent:_.bitrateCurrent,framerateCurrent:_.framerateCurrent},state:{connected:_.connected,firstFragmentReceived:_.firstFragmentReceived,firstFrameRendered:_.firstFrameRendered,playable:_.playable,playing:_.playing,error:_.error}}}());for(var i in r)D(r,i)&&!D(n,i)&&(n[i]=r[i])}return n}(e,t),n),r||I(s.ERROR,{state:w(e)},n)}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function w(e){var n;switch(e){case t.PLAYER.INTERACTION_REQUIRED:n=r.PLAYBACK_NOT_STARTED;break;case t.PLAYER.PLAYBACK_SUSPENDED:n=r.PLAYBACK_SUSPENDED;break;case t.PLAYER.VISIBILITY_HIDDEN:n=r.VISIBILITY_HIDDEN;break;case t.STREAM.NOT_ENOUGH_DATA:n=r.NOT_ENOUGH_DATA;break;case t.STREAM.SOURCE_STOPPED:n=r.SOURCE_STREAM_STOPPED;break;case t.STREAM.MEDIA_NOT_AVAILABLE:n=r.MEDIA_NOT_AVAILABLE;break;case t.MEDIA.ABORTED:case t.MEDIA.DOWNLOAD_ERROR:case t.MEDIA.DECODE_ERROR:case t.MEDIA.NOT_SUPPORTED:case t.MEDIA.HLS_VIDEO_DECODE_ERROR:case t.MEDIA.MEDIA_SOURCE_ENDED:case t.PLAYER.PLAYBACK_ERROR:case t.MEDIA.HLS_BUFFER_UNDERRUN:n=r.PLAYBACK_ERROR;break;default:e>=4e3&&e<5e3&&(n=r.CONNECTION_ERROR)}return n}function U(e){-1!==Object.keys(g).indexOf(e)&&(g[e]=Date.now())}function M(e,t){if(t=isNaN(t)?2:parseInt(t,10),"object"==typeof e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];if("object"==typeof r&&null!==r)if(Array.isArray(r))for(var i=0;i<r.length;i++)r[i]=M(r[i],t);else e[n]=M(r,t);else"number"==typeof r&&(e[n]=Math.round(r*Math.pow(10,t))/Math.pow(10,t))}}else e=Math.round(e*Math.pow(10,t))/Math.pow(10,t);return e}return T.debugEnabled()&&T.debug("init"),e.add({target:a,listeners:y}),{destroy:function(){e.remove({target:a,listeners:y})}}}}}.apply(t,r))||(e.exports=i)},6231:function(e,t){var n;void 0===(n=function(){return{BASE:"buffer.",BUFFER_TWEAKS_CREATED:"buffer.tweaksCreated",BUFFER_TWEAKS_ERROR:"buffer.tweaksError"}}.apply(t,[]))||(e.exports=n)},7771:function(e,t){var n;void 0===(n=function(){var e="connection.";return{BASE:e,CONNECT:e+"connect",DISCONNECT:e+"disconnect",VIDEO_SOURCE:e+"videoSource",NETWORK_PLAY:e+"networkPlay",NO_SERVER_ERROR:e+"noServerError",MISSING_RTMP_ERROR:e+"missingRtmpError",SERVER_INFO:e+"serverInfo",NO_KEEP_CONNECTION:e+"noKeepConnection",URL:e+"url",NETWORK_UPDATE_SOURCE:e+"networkUpdateSource",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_FAIL:e+"switchStreamFail",SWITCH_STREAM_ABORT:e+"switchStreamAbort"}}.apply(t,[]))||(e.exports=n)},3937:function(e,t){var n;void 0===(n=function(){return{BASE:"latency.",SEEK:"latency.seek",RATE:"latency.rate",BUFFER_GOAL_STATS:"latency.bufferGoalStats",CONTROL_MODE_SET:"latency.controlModeSet"}}.apply(t,[]))||(e.exports=n)},3019:function(e,t){var n;void 0===(n=function(){var e="logicManager.";return{BASE:e,API_PLAY:e+"apiPlay",API_PAUSE:e+"apiPause",NETWORK_CONNECTING:e+"networkConnecting",NETWORK_CONNECTED:e+"networkConnected",NETWORK_DISCONNECTED:e+"networkDisconnected",NETWORK_CONNECTION_OPEN:e+"networkConnectionOpen",NETWORK_RECONNECTION_IMMINENT:e+"networkReconnectionImminent",NETWORK_RECONNECTING:e+"networkReconnecting",NETWORK_CONNECTION_ERROR:e+"networkConnectionError",NETWORK_INITIALIZATION_ERROR:e+"networkInitializationError",NETWORK_MAX_RETRY_REACHED:e+"networkMaxRetryReached",NETWORK_ERROR:e+"networkError",NETWORK_STATE_CHANGE:e+"networkStateChange",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_QUALITY:e+"streamQuality",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",STREAM_URL:e+"streamUrl",BUFFER_TWEAKS_CREATED:e+"bufferTweaksCreated",PLAYING:e+"playing",PLAYBACK_STARTED:e+"playbackStarted",BUFFERING:e+"buffering",PLAY_STATS:e+"playStats",APPLICATION_STATE_CHANGE:e+"applicationStateChange",DURATION_CHANGE:e+"durationChange",CAN_PLAY:e+"canPlay",CAN_PLAY_THROUGH:e+"canPlayThrough",META_DATA:e+"metaData",FRAME_DROP:e+"frameDrop",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM:e+"switchStream",MEDIA_PLAYING:e+"mediaPlaying",TIME_OFFSET:e+"timeOffset",LOADED_DATA:e+"loadedData",LOADED_META_DATA:e+"loadedMetaData",MEDIA_ERROR:e+"mediaError",MEDIA_ERROR_RECOVER:e+"mediaErrorRecover",ADJUSTED_META_DATA:e+"adjustedMetaData",CONFIG:e+"config",UPDATE_SOURCE:e+"updateSource",STREAM_SWITCH:e+"streamSwitch",SET_ADAPTION:e+"setAdaption",NETWORK_PLAY:e+"networkPlay",PLAY:e+"play",PUBLIC_EVENT:e+"publicEvent"}}.apply(t,[]))||(e.exports=n)},1683:function(e,t){var n;void 0===(n=function(){return{BASE:"metaData.",RECEIVED:"metaData.received",ERROR:"metaData.error"}}.apply(t,[]))||(e.exports=n)},164:function(e,t){var n;void 0===(n=function(){return{BASE:"source.",STATS:"source.stats",STREAM_SWITCH:"source.streamSwitch"}}.apply(t,[]))||(e.exports=n)},519:function(e,t){var n;void 0===(n=function(){var e="startupstats.";return{BASE:e,ADDED:e+"added",COMPLETED:e+"completed"}}.apply(t,[]))||(e.exports=n)},8983:function(e,t){var n;void 0===(n=function(){var e="streamInfo.";return{BASE:e,CREATED:e+"created",UPDATED:e+"updated",MIME_TYPE_UNSUPPORTED:e+"mimetypeUnsupported"}}.apply(t,[]))||(e.exports=n)},3667:function(e,t){var n;void 0===(n=function(){return{BASE:"timeout.",LOADING_TIMEOUT:"timeout.loadingTimeout",BUFFERING_TIMEOUT:"timeout.bufferingTimeout"}}.apply(t,[]))||(e.exports=n)},2450:function(e,t){var n;void 0===(n=function(){var e="visibility.";return{BASE:e,HIDDEN:e+"hidden",VISIBLE:e+"visible"}}.apply(t,[]))||(e.exports=n)},1797:function(e,t,n){var r,i;r=[n(6637),n(9583),n(594),n(680),n(8333),n(8197)],void 0===(i=function(e,t,n,r,i,a){return{create:function(o){var s,d=i.create("FacadePropagator"),u=1,c=!1,l=[{type:n.VOLUME_CHANGE,listener:function(e){e.data.muted!==c?f((c=e.data.muted)?t.MUTE:t.UNMUTE,{volume:u}):e.data.volume!==u&&(u=e.data.volume,f(t.VOLUME_CHANGE,{volume:u}))}},{type:n.QUALITY_STATS,listener:function(e){s||(s={}),s.quality=e.data}},{type:n.PLAY_STATS,listener:function(e){var n,r,i;s&&s.quality&&(n=s.quality),r&&s.adaptive&&(r=s.adaptive),i&&s.buffergoal&&(i=s.buffergoal),s=e.data.stats,n&&!s.quality&&(s.quality=n),r&&!s.adaptive&&(s.adaptive=r),i&&!s.buffergoal&&(s.buffergoal=i);var a,o="stats error";try{o=JSON.stringify(s),delete(a=JSON.parse(o)).buffer.update}catch(e){}f(t.STATS,{stats:a})}},{type:n.PLAYBACK_FINISHED,listener:function(){f(t.PLAYBACK_FINISHED)}},{type:n.ACTIVE_VIDEO_ELEMENT_CHANGE,listener:function(e){setTimeout(f.bind(this,t.ACTIVE_VIDEO_ELEMENT_CHANGE,e.data),0)}},{type:r.META_DATA_RECEIVED,listener:function(e){setTimeout(f.bind(this,t.METADATA,e.data),0)}},{type:r.UPDATE_SOURCE_INIT,listener:function(e){setTimeout(f.bind(this,t.UPDATE_SOURCE_INIT,e.data),0)}},{type:r.UPDATE_SOURCE_SUCCESS,listener:function(e){setTimeout(f.bind(this,t.UPDATE_SOURCE_SUCCESS,e.data),0)}},{type:r.UPDATE_SOURCE_FAIL,listener:function(e){setTimeout(f.bind(this,t.UPDATE_SOURCE_FAIL,e.data),0)}},{type:r.UPDATE_SOURCE_ABORT,listener:function(e){setTimeout(f.bind(this,t.UPDATE_SOURCE_ABORT,e.data),0)}},{type:r.STREAM_INFO,listener:function(e){var n=a.copy(e.data);delete n.streamInfo.mimeType,setTimeout(f.bind(this,t.STREAM_INFO,n),0)}},{type:r.STREAM_INFO_UPDATE,listener:function(e){var n=a.copy(e.data);delete n.streamInfo.mimeType,setTimeout(f.bind(this,t.STREAM_INFO_UPDATE,n),0)}},{type:r.SWITCH_STREAM_INIT,listener:function(e){setTimeout(f.bind(this,t.SWITCH_STREAM_INIT,e.data),0)}},{type:r.SWITCH_STREAM_SUCCESS,listener:function(e){setTimeout(f.bind(this,t.SWITCH_STREAM_SUCCESS,e.data),0)}},{type:r.SWITCH_STREAM_FAIL,listener:function(e){setTimeout(f.bind(this,t.SWITCH_STREAM_FAIL,e.data),0)}},{type:r.SWITCH_STREAM_ABORT,listener:function(e){setTimeout(f.bind(this,t.SWITCH_STREAM_ABORT,e.data),0)}},{type:r.ADAPTIVE_STATS,listener:function(e){s||(s={}),s.adaptive=e.data}},{type:r.BUFFER_GOAL_STATS,listener:function(e){s||(s={}),s.buffergoal=e.data}},{type:r.SERVER_INFO,listener:function(e){var n={serverInfo:a.copy(e.data.onServerInfo)};delete n.serverInfo.capabilities,delete n.serverInfo.events,delete n.serverInfo.interfaceVersion,n.serverInfo.serverApplicationName=n.serverInfo.serverName,n.serverInfo.serverApplicationVersion=n.serverInfo.serverVersion,delete n.serverInfo.serverName,delete n.serverInfo.serverVersion,setTimeout(f.bind(this,t.SERVER_INFO,n),0)}}];function f(e,t){o.emit(e,a.copy(t))}return d.debugEnabled()&&d.debug("init"),e.add({target:o,listeners:l}),{destroy:function(){e.remove({target:o,listeners:l})}}}}}.apply(t,r))||(e.exports=i)},2909:function(e,t,n){var r,i;r=[n(8333),n(9658),n(6627),n(8197),n(6637),n(5055),n(9336),n(9673),n(680),n(594),n(1376),n(7354),n(7771),n(3019),n(3667),n(8983),n(1683),n(2450),n(164),n(3937),n(519),n(6231),n(387),n(5444),n(4600),n(9665),n(4351),n(5620),n(2805),n(8307),n(7831)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l,f,m,E,p,h,g,b,_,T,A,S,y,v,R,O,I,C,N,D){"use strict";return{create:function(n){var w,U,M=new t,P=e.create("LogicManager"),L=[],F=[{from:f.CONNECT,to:s.CONNECT},{from:f.DISCONNECT,to:s.DISCONNECT},{from:f.VIDEO_SOURCE,to:s.VIDEO_SOURCE},{from:f.NETWORK_PLAY,to:s.NETWORK_PLAY},{from:f.NETWORK_UPDATE_SOURCE,to:s.NETWORK_UPDATE_SOURCE},{from:f.NO_SERVER_ERROR,to:d.NO_SERVER_ERROR},{from:f.MISSING_RTMP_ERROR,to:d.MISSING_RTMP_ERROR},{from:f.NO_KEEP_CONNECTION,to:d.NO_KEEP_CONNECTION},{from:f.SERVER_INFO,to:d.SERVER_INFO},{from:f.URL,to:d.STREAM_URL},{from:f.UPDATE_SOURCE_INIT,to:d.UPDATE_SOURCE_INIT},{from:f.UPDATE_SOURCE_SUCCESS,to:d.UPDATE_SOURCE_SUCCESS},{from:f.UPDATE_SOURCE_FAIL,to:d.UPDATE_SOURCE_FAIL},{from:f.UPDATE_SOURCE_ABORT,to:d.UPDATE_SOURCE_ABORT},{from:f.SWITCH_STREAM_INIT,to:d.SWITCH_STREAM_INIT},{from:f.SWITCH_STREAM_SUCCESS,to:d.SWITCH_STREAM_SUCCESS},{from:f.SWITCH_STREAM_FAIL,to:d.SWITCH_STREAM_FAIL},{from:f.SWITCH_STREAM_ABORT,to:d.SWITCH_STREAM_ABORT},{from:E.LOADING_TIMEOUT,to:d.LOADING_TIMEOUT},{from:E.BUFFERING_TIMEOUT,to:d.BUFFERING_TIMEOUT},{from:p.CREATED,to:d.STREAM_INFO},{from:p.UPDATED,to:d.STREAM_INFO_UPDATE},{from:p.MIME_TYPE_UNSUPPORTED,to:d.MIME_TYPE_UNSUPPORTED},{from:h.RECEIVED,to:d.META_DATA_RECEIVED},{from:h.ERROR,to:d.META_DATA_ERROR},{from:g.VISIBLE,to:d.DOCUMENT_VISIBLE},{from:g.HIDDEN,to:d.DOCUMENT_HIDDEN},{from:b.STATS,to:d.ADAPTIVE_STATS},{from:b.STREAM_SWITCH,to:d.STREAM_SWITCH},{from:_.SEEK,to:s.SEEK},{from:_.RATE,to:s.SET_RATE},{from:_.BUFFER_GOAL_STATS,to:d.BUFFER_GOAL_STATS},{from:_.CONTROL_MODE_SET,to:d.LATENCY_CONTROL_MODE_SET},{from:T.ADDED,to:d.STARTUP_STATS_ADDED},{from:T.COMPLETED,to:d.STARTUP_STATS_COMPLETED},{from:A.BUFFER_TWEAKS_CREATED,to:d.BUFFER_TWEAKS_CREATED},{from:A.BUFFER_TWEAKS_ERROR,to:d.BUFFER_TWEAKS_ERROR}],x=[{from:o.PLAY,to:m.API_PLAY},{from:o.PAUSE,to:m.API_PAUSE},{from:u.PLAY_STATS,to:m.PLAY_STATS},{from:u.PLAYING,to:m.PLAYING},{from:u.PLAYBACK_STARTED,to:m.PLAYBACK_STARTED},{from:u.BUFFERING,to:m.BUFFERING},{from:u.DURATION_CHANGE,to:m.DURATION_CHANGE},{from:u.CAN_PLAY,to:m.CAN_PLAY},{from:u.CAN_PLAY_THROUGH,to:m.CAN_PLAY_THROUGH},{from:u.PLAYING,to:m.MEDIA_PLAYING},{from:u.FRAME_DROP,to:m.FRAME_DROP},{from:u.VIEWPORT_VISIBLE,to:m.VIEWPORT_VISIBLE},{from:u.VIEWPORT_HIDDEN,to:m.VIEWPORT_HIDDEN},{from:u.TIME_OFFSET,to:m.TIME_OFFSET},{from:u.LOADED_DATA,to:m.LOADED_DATA},{from:u.LOADED_META_DATA,to:m.LOADED_META_DATA},{from:u.UPDATE_SOURCE_ABORT,to:m.UPDATE_SOURCE_ABORT},{from:u.UPDATE_SOURCE_FAIL,to:m.UPDATE_SOURCE_FAIL},{from:u.MEDIA_ERROR,to:m.MEDIA_ERROR},{from:u.MEDIA_ERROR_RECOVER,to:m.MEDIA_ERROR_RECOVER},{from:u.ADJUSTED_META_DATA,to:m.ADJUSTED_META_DATA},{from:c.CONNECTING,to:m.NETWORK_CONNECTING},{from:c.CONNECTED,to:m.NETWORK_CONNECTED},{from:c.CONNECTION_OPEN,to:m.NETWORK_CONNECTION_OPEN},{from:c.DISCONNECTED,to:m.NETWORK_DISCONNECTED},{from:c.DESTROYED,to:m.NETWORK_DISCONNECTED},{from:c.RECONNECTING,to:m.NETWORK_RECONNECTING},{from:c.RECONNECTION_IMMINENT,to:m.NETWORK_RECONNECTION_IMMINENT},{from:c.INITIALIZATION_ERROR,to:m.NETWORK_INITIALIZATION_ERROR},{from:c.ERROR,to:m.NETWORK_ERROR},{from:c.STATE_CHANGE,to:m.NETWORK_STATE_CHANGE},{from:c.RANDOM_ACCESS_POINT,to:m.RANDOM_ACCESS_POINT},{from:c.STREAM_FRAGMENT,to:m.STREAM_FRAGMENT},{from:c.SERVER_INFO,to:m.SERVER_INFO},{from:c.STREAM_INFO,to:m.STREAM_INFO},{from:c.STREAM_INFO_UPDATE,to:m.STREAM_INFO_UPDATE},{from:c.STREAM_QUALITY,to:m.STREAM_QUALITY},{from:c.META_DATA,to:m.META_DATA},{from:c.UPDATE_SOURCE_SUCCESS,to:m.UPDATE_SOURCE_SUCCESS},{from:c.UPDATE_SOURCE_FAIL,to:m.UPDATE_SOURCE_FAIL},{from:c.UPDATE_SOURCE_ABORT,to:m.UPDATE_SOURCE_ABORT},{from:d.UPDATE_SOURCE_INIT,to:m.UPDATE_SOURCE_INIT},{from:d.STATE_CHANGE,to:m.APPLICATION_STATE_CHANGE},{from:d.STREAM_URL,to:m.STREAM_URL},{from:d.STREAM_SWITCH,to:m.STREAM_SWITCH},{from:d.BUFFER_TWEAKS_CREATED,to:m.BUFFER_TWEAKS_CREATED},{from:s.CONFIG,to:m.CONFIG},{from:s.UPDATE_SOURCE,to:m.UPDATE_SOURCE},{from:s.SWITCH_STREAM,to:m.SWITCH_STREAM},{from:s.SET_ADAPTION,to:m.SET_ADAPTION},{from:s.NETWORK_PLAY,to:m.NETWORK_PLAY},{from:s.PLAY,to:m.PLAY}],k=[{type:m.CONFIG,listener:function(e){e.data.config.playback.metadata&&L.push(R.create(M,e.data.config))}}],B=[];function H(e){M.emit(m.PUBLIC_EVENT,{event:r.copy(e)})}return function(){for(var e in P.debugEnabled()&&P.debug("init"),l)Object.prototype.hasOwnProperty.call(l,e)&&-1===l.STATS.indexOf(l[e])&&B.push({type:l[e],listener:H});w=a.create(n,M,x),U=a.create(M,n,F),i.add({target:M,listeners:k}),i.add({target:n,listeners:B}),L.push(C.create(M)),L.push(y.create(M)),L.push(N.create(M)),L.push(D.create(M)),L.push(S.create(M)),L.push(v.create(M)),L.push(O.create(M)),L.push(I.create(M))}(),{destroy:function(){for(w.destroy(),w=null,U.destroy(),U=null;L.length;)L.pop().destroy();i.remove({target:M,listeners:k}),i.remove({target:n,listeners:B})}}}}}.apply(t,r))||(e.exports=i)},6704:function(e,t,n){var r,i;r=[n(6637),n(9583),n(9673),n(594),n(680),n(1376),n(8333)],void 0===(i=function(e,t,n,r,i,a,o){return{create:function(n){var r=o.create("StateMachine"),a=[{type:i.STATE_CHANGE,listener:function(e){var r,i;r=t.STATE_CHANGE,i=e.data,n.emit(r,i)}}];return r.debugEnabled()&&r.debug("init"),e.add({target:n,listeners:a}),{destroy:function(){e.remove({target:n,listeners:a})}}}}}.apply(t,r))||(e.exports=i)},2805:function(e,t,n){var r,i;r=[n(8333),n(8197),n(6627),n(5337),n(6637),n(9474),n(3778),n(941),n(3019),n(8983),n(6231)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c){return{create:function(l){var f,m,E,p=e.create("BufferTweaker"),h={max:8,min:.2,start:.5,target:1.2,limit:1.7},g=t.copy(h),b=t.copy(h),_=a.CLASSIC,T=0,A=0,S=0,y=-1,v=!1,R=!1,O=[{type:d.FRAME_DROP,listener:function(e){if(p.debugEnabled()&&p.debug("frame drop with type "+e.data.type),!E&&n.isFirefox&&_===a.CLASSIC)switch(p.debugEnabled()&&p.debug("frame drop on firefox in classic mode with type "+e.data.type),e.data.type){case"extreme":case"high":case"medium":p.debugEnabled()&&p.debug("frame drop"),p.debugEnabled()&&p.debug(""+JSON.stringify(e)),p.debugEnabled()&&p.debug("current buffer: "+JSON.stringify(g)),p.debugEnabled()&&p.debug("limit: "+b.limit+", start: "+g.start),g.start<b.limit?(p.debugEnabled()&&p.debug("start lower then limit -> tweaking"),U(g.target-g.start),M()):p.debugEnabled()&&p.debug("start higher then limit -> tweaking denied");break;case"low":p.debugEnabled()&&p.debug("just low, no tweaking necessary")}}},{type:d.CONFIG,listener:function(e){var r;if((E=n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS)||i.add({target:l,listeners:C}),e.data.config.playback.latencyControlMode)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&a[d]===e.data.config.playback.latencyControlMode&&(_=a[d]);e.data.config.tweaks&&(e.data.config.tweaks.buffer&&((r=s.validateBuffer(e.data.config.tweaks.buffer)).success?(g=t.copy(e.data.config.tweaks.buffer),b=t.copy(g),R=!0):l.emit(c.BUFFER_TWEAKS_ERROR,{code:o.PLAYER.BUFFER_CONFIG_INVALID,message:r.reason})),e.data.config.tweaks.bufferDynamic&&!E&&_===a.CLASSIC&&((r=s.validateBuffer(e.data.config.tweaks.bufferDynamic,"dynamic")).success?(T=e.data.config.tweaks.bufferDynamic.offsetThreshold,A=e.data.config.tweaks.bufferDynamic.offsetStep,S=e.data.config.tweaks.bufferDynamic.cooldownTime):l.emit(c.BUFFER_TWEAKS_ERROR,{code:o.PLAYER.BUFFER_CONFIG_INVALID,message:r.reason}))),M()}},{type:u.CREATED,listener:w},{type:u.UPDATED,listener:function(e){w(e)}}],I=[{type:d.PLAY_STATS,listener:function(e){var t=e.data.stats.buffer.delay.current;t&&m.add(t),!v&&n.isTridentBrowser&&t>2&&(g.target=t,g.limit=g.target+1.5,M()),v=!0}},{type:d.BUFFERING,listener:function(){D(!0);var e=((new Date).getTime()-y)/1e3;-1!==y&&e<T&&g.start<b.limit&&(p.warnEnabled()&&p.warn("buffering "+e+" seconds after stream started, raising buffer values"),U(A),M()),N(),clearInterval(f),f=0}}],C=[{type:d.PLAYBACK_STARTED,listener:function(){D(!1),y=(new Date).getTime(),v&&S&&(f=setInterval((function(){p.debugEnabled()&&p.debug("stream running stable since "+S+" sec"),p.debugEnabled()&&p.debug("buffer min: "+m.minimum+", max: "+m.maximum),g.start>b.start?(g.start-b.start<A?(p.debug("normalize cooldown"),U()):(p.debug(-A+" sec cooldown"),U(-A)),M()):(p.debugEnabled()&&p.debug("no cooldown"),clearInterval(f),f=0)}),1e3*S))}}];function N(){m=r.create(10*S)}function D(e){i.add({target:l,listeners:e?C:I}),i.remove({target:l,listeners:e?I:C})}function w(e){e.data.streamInfo.videoInfo&&e.data.streamInfo.haveVideo&&e.data.streamInfo.videoInfo.frameRate<=30&&n.isTridentBrowser&&!R&&(g=t.copy(h),U(Math.sqrt(30)-Math.sqrt(e.data.streamInfo.videoInfo.frameRate),1),g.start+=(g.target-g.start)/2,g.min+=(g.start-g.min)/2,M())}function U(e,t){t=t||1,["start","target","limit"].forEach((function(n){void 0===typeof e||isNaN(t)?g[n]=b[n]:(g[n]*=t,g[n]+=e)}))}function M(){p.debugEnabled()&&p.debug("new buffer: "+JSON.stringify(g)),p.debugEnabled()&&p.debug("latencyControlMode: "+_),l.emit(c.BUFFER_TWEAKS_CREATED,{tweaks:{buffer:t.copy(g)},latencyControlMode:_})}return p.debugEnabled()&&p.debug("initialize"),N(),i.add({target:l,listeners:O}),{destroy:function(){m=null,[O,I,C].forEach((function(e){i.remove({target:l,listeners:e})}))}}}}}.apply(t,r))||(e.exports=i)},387:function(e,t,n){var r,i;r=[n(8333),n(6627),n(6637),n(7771),n(3019),n(2706),n(6432),n(8405),n(492),n(3778),n(8730)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c){return{create:function(l){var f,m,E,p,h,g,b,_=e.create("Connection"),T=a.create(_),A=o.create(),S=[],y={},v=s.UNITIALIZED,R=!1,O=!1,I=!1,C=!1,N=!0,D=!1,w=0,U=[{type:i.NETWORK_STATE_CHANGE,listener:function(e){_.debug(e.name+": network state change from "+B(v)+" to "+B(e.data.connectionState)),v=e.data.connectionState}},{type:i.SERVER_INFO,listener:function(e){if(g=e.data.onServerInfo,O){var t=g.capabilities,n=g.serverVersion,i=parseFloat(n);-1===t.indexOf("onPlay")&&-1===t.indexOf("onPause")&&(O=!1,l.emit(r.NO_KEEP_CONNECTION,{message:i<1.8?"The keepConnection feature is enabled by the players config, but is not supported by this server version ("+n+"). Use at least server version 1.8.0.0. The feature will be disabled.":"The keepConnection feature is enabled by the players config, but is not enabled by this server ("+n+"). The feature will be disabled."}),N||L())}l.emit(r.SERVER_INFO,e.data)}},{type:i.UPDATE_SOURCE_SUCCESS,listener:M},{type:i.UPDATE_SOURCE_FAIL,listener:function(e){S.length>1&&("update"===e.data.type?S.shift():S.pop()),"update"===e.data.type?l.emit(r.UPDATE_SOURCE_FAIL,{source:E.source,entry:E.entry,rule:E.rule,tag:e.data.tag,count:e.data.count,code:e.data.code,message:e.data.message,type:e.data.type,id:e.data.id}):l.emit(r.SWITCH_STREAM_FAIL,{source:E.source,entry:E.entry,rule:E.rule,tag:e.data.tag,count:e.data.count,code:e.data.code,message:e.data.message,type:e.data.type,id:e.data.id}),e.data.code===u.NETWORK.SOURCE_TIMEOUT&&G(E),_.debugEnabled()&&_.debug("set updating to false in onUpdateSourceFail"),H(!1),O&&!N&&(L(!0),P())}},{type:i.UPDATE_SOURCE_ABORT,listener:function(e){var t=!1;S.length>1&&("update"===e.data.type?S.shift():S.pop()),"superseded"===e.data.reason&&p&&(t=!0),"update"===e.data.type?"equalsource"===e.data.reason?l.emit(r.UPDATE_SOURCE_SUCCESS,{source:E.source,entry:E.entry,rule:E.rule,tag:e.data.tag,count:e.data.count,type:e.data.type,id:e.data.id}):l.emit(r.UPDATE_SOURCE_ABORT,{source:t?p.source:E.source,entry:t?p.entry:E.entry,rule:t?p.rule:E.rule,tag:e.data.tag,count:e.data.count,reason:e.data.reason,type:e.data.type,id:e.data.id}):l.emit(r.SWITCH_STREAM_ABORT,{source:I?e.data.source:E.source,entry:I?e.data.entry:E.entry,rule:I?e.data.rule:E.rule,tag:e.data.tag,count:e.data.count,reason:"equalsource"===e.data.reason?"equal":e.data.reason,type:e.data.type,id:e.data.id}),"recover"===e.data.reason?p?(_.debugEnabled()&&_.debug("set updating to updatingPrevious in onUpdateSourceAbort"),H(p),V(!1)):(_.debugEnabled()&&_.debug("recover abort without updatePrevious, do nothing"),_.debugEnabled()&&_.debug("updating in abort is "+JSON.stringify(E))):t?V(!1):(_.debugEnabled()&&_.debug("set updating to false in onUpdateSourceAbort"),H(!1))}},{type:i.CONFIG,listener:function(e){m=e.data.config,f=m.id,R=m.playback.metadata,O=m.playback.keepConnection,N=m.playback.autoplay,I=t.mustUseHLS||m.playback.allowSafariHlsFallback&&t.canUseHLS,C=m.playback.faststart}},{type:i.STREAM_SWITCH,listener:function(e){var t=e.data.entry,n=e.data.options;if("init"===e.data.type){for(;S.length;)S.pop();return F(t.h5live),void(O&&P())}w+=1,n.tag=n.tag||"",n.count=w,"update"===e.data.type?l.emit(r.UPDATE_SOURCE_INIT,{source:e.data.source,entry:t,rule:e.data.rule,options:n,tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}):l.emit(r.SWITCH_STREAM_INIT,{source:e.data.source,entry:t,rule:e.data.rule,options:n,tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}),D?"update"===e.data.type?l.emit(r.UPDATE_SOURCE_ABORT,{source:e.data.source,entry:t,rule:e.data.rule,reason:"frequency",tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}):l.emit(r.SWITCH_STREAM_ABORT,{source:e.data.source,entry:t,rule:e.data.rule,reason:"frequency",tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}):!I||!E||"update"!==E.type&&"recover"!==E.type||"update"===e.data.type?(D=!0,setTimeout((function(){D=!1}),500),E&&V(E),_.debugEnabled()&&_.debug("set updating to e.data in onStreamSwitch"),H(e.data),"update"===e.data.type?_.debugEnabled()&&_.debug("update source: "+JSON.stringify(e.data.source)):_.debugEnabled()&&_.debug("switch stream: "+JSON.stringify(t)),S.length>1&&S.pop(),F(t.h5live),N||O&&!I&&!N?(_.debugEnabled()&&_.debug("connect to new source without terminating the old one"),e.data.options.forcePlay&&!N&&(N=!0),P(e.data)):(S.shift(),_.debugEnabled()&&_.debug("replaced source"),M({data:{tag:e.data.options.tag,count:w,type:e.data.type,id:e.data.id}}))):l.emit(r.SWITCH_STREAM_ABORT,{source:e.data.source,entry:t,rule:e.data.rule,reason:"recover"===E.type?"recover":"updateProgress",tag:n.tag,count:n.count,type:e.data.type,id:e.data.id})}},{type:i.API_PLAY,listener:function(){if(_.debugEnabled()&&_.debug("api play"),N=!0,O?(_.debugEnabled()&&_.debug("send network play"),l.emit(r.NETWORK_PLAY)):P(E&&E.options.forcePlay?E:void 0),I){var e=x("hls").url;l.emit(r.VIDEO_SOURCE,{src:e,type:c.HLS})}}},{type:i.API_PAUSE,listener:function(){_.debugEnabled()&&_.debug("api pause"),N=!1,(!O||E)&&L(),I&&l.emit(r.VIDEO_SOURCE,{src:"",type:c.HLS})}},{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case d.PAUSED:E&&M({data:{tag:E.options.tag,count:E.options.count,type:E.type,id:E.id}})}}},{type:i.CAN_PLAY,listener:function(){E&&I&&(_.debugEnabled()&&_.debug("updating onCanPlay is "+JSON.stringify(E)),clearTimeout(b),M({data:{tag:E.options.tag,count:E.options.count,type:E.type,id:E.id}}))}}];function M(e){S.length>1&&S.shift(),h&&h.id===e.data.id&&(_.debugEnabled()&&_.debug("set updating to updatingTimeoutObject in onUpdateSourceSuccess"),H(h),G(null)),"update"===e.data.type?l.emit(r.UPDATE_SOURCE_SUCCESS,{source:E.source,entry:E.entry,rule:E.rule,tag:e.data.tag,count:e.data.count,type:e.data.type,id:e.data.id}):l.emit(r.SWITCH_STREAM_SUCCESS,{source:E.source,entry:E.entry,rule:E.rule,tag:e.data.tag,count:e.data.count,type:e.data.type,id:e.data.id}),_.debugEnabled()&&_.debug("set updating to false in onUpdateSourceSuccess"),H(!1),clearTimeout(b)}function P(e){var n,i,a=e?S.length-1:0;if(R||S[a].security||!I){k(!N,"paused"),k(R&&I,"metastreamonly"),k(!R&&!!S[a].security&&I,"checkandclose"),k(e?e.faststart:C,"faststart"),n=(i=x(t.isMediaOverQuicSupported&&m.playback.enableMediaOverQuic?"webtransport":"websocket",a)).url;var o=e?r.NETWORK_UPDATE_SOURCE:r.CONNECT;_.debugEnabled()&&_.debug("connect to: "+n,1),l.emit(o,{url:n,config:i,update:e||!1,reconnect:m.playback.reconnect,timeouts:m.playback.timeouts}),I||l.emit(r.URL,{url:n})}I&&(k(e?e.faststart:C,"faststart"),n=(i=x("hls")).url,l.emit(r.URL,{url:n}),l.emit(r.VIDEO_SOURCE,{src:n,type:c.HLS}))}function L(e){_.debugEnabled()&&_.debug("disconnecting"),l.emit(r.DISCONNECT,{silent:!!e})}function F(e){var n=e.rtmp,i=e.params;T.initConfig().setServer(e.server).setToken(e.token).setQueryParams(i).setSecurity(e.security),T.connectionConfig.server.websocket.length||T.connectionConfig.server.hls.length||l.emit(r.NO_SERVER_ERROR),"object"==typeof n&&n.url&&n.url.length&&n.streamname&&n.streamname.length||i?T.setRtmp(n):l.emit(r.MISSING_RTMP_ERROR),(t.isIOSDesktopMode||t.isIOS)&&T.addQueryParam("os","ios"),S.push(T.connectionConfig)}function x(e,t){var n=void 0!==typeof t&&t>-1&&void 0!==typeof S[t]?t:S.length-1,r=S[n];return A.initURL(r,e).processConfigFlags(y).processConfigQuery(f).processSecurity().buildConnectionURL(),A.connectionConfig}function k(e,t){!0===e&&void 0===y[t]?y[t]=!0:!1===e&&y[t]&&delete y[t]}function B(e){for(var t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&s[t]===e)return t}function H(e){_.debugEnabled()&&_.debug("set updating to "+JSON.stringify(e)+" from "+JSON.stringify(E)),E=e}function V(e){_.debugEnabled()&&_.debug("set updatingPrevious to "+JSON.stringify(e)+" from "+JSON.stringify(p)),p=e}function G(e){_.debugEnabled()&&_.debug("set updatingTimeoutObject to "+JSON.stringify(e)+" from "+JSON.stringify(h)),h=e}return _.debugEnabled()&&_.debug("init"),n.add({target:l,listeners:U}),{destroy:function(){n.remove({target:l,listeners:U})}}}}}.apply(t,r))||(e.exports=i)},3445:function(e,t,n){var r,i;r=[n(8333),n(6627),n(1933),n(9474),n(7146),n(561),n(4813)],void 0===(i=function(e,t,n,r,i,a,o){return{create:function(s,d){var u,c,l,f,m,E,p=e.create("AdjustControllerAdapter"),h={default:i,fastadaptive:a,balancedadaptive:a},g="balancedadaptive";return p.debugEnabled()&&p.debug("init"),l=d.playback.latencyControlMode,f=t.isTridentBrowser,m=n.isManagedMediaSourceH264Supported&&t.isIOS,E=t.mustUseHLS||d.playback.allowSafariHlsFallback&&t.canUseHLS,c="default",l!==r.FAST_ADAPTIVE||f?l!==r.BALANCED_ADAPTIVE||f||(c=g):m||E?(c=g,l=r.BALANCED_ADAPTIVE):c="fastadaptive",p.debugEnabled()&&p.debug("use adjustController type "+c),s.emit(o.CONTROL_MODE_SET,{latencyControlMode:l}),u=h[c].create(s,l),{calcBufferGoal:function(e){return u.calcBufferGoal(e)},destroy:function(){u.destroy(),u=null}}}}}.apply(t,r))||(e.exports=i)},561:function(e,t,n){var r,i;r=[n(8333),n(6637),n(492),n(9474),n(4234)],void 0===(i=function(e,t,n,r,i){return{create:function(a,o){var s,d=e.create("AdaptiveAdjustController"),u={real:0,base:0,min:0,max:0},c=0,l=0,f=0,m=0,E=0,p=1e3,h=0,g=0,b=0,_=0,T=.998,A=0,S=0,y={fastadaptive:{minClamp:.3,range:.4},balancedadaptive:{minClamp:.5,range:.7}},v=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case n.PAUSED:c=0,l=0,f=0,m=0,E=0,p=1e3,h=0,g=0,b=0,_=0;break;case n.BUFFERING:case n.PLAYING:}}},{type:i.BUFFER_TWEAKS_CREATED,listener:function(e){s=e.data.tweaks.buffer,u.base||(u.base=s.start),u.min=Math.max(s.min+.1+.125*(s.min-.2),A),u.max=u.min+S}}];return d.debugEnabled()&&d.debug("init"),t.add({target:a,listeners:v}),Object.prototype.hasOwnProperty.call(y,o)||(o=r.FAST_ADAPTIVE,d.debugEnabled()&&d.debug("use default mode fast")),A=y[o].minClamp,S=y[o].range,d.debugEnabled()&&d.debug("use mode "+o),{destroy:function(){t.remove({target:a,listeners:v})},calcBufferGoal:function(e){if(f=e.stats.buffer.end,m=window.performance.now(),_<8)u.base=u.min,_++;else{c&&l&&(E=E*T+(1e3*(f-c)-(m-l)),p=Math.min(p,E)*T,h=Math.max(h,E)*T,g=(h-p)/2,b=Math.max(Math.abs(p),Math.abs(g))),l=m,c=f;var t=s.min+Math.abs(2*b)/1e3;t=Math.min(u.max,t),t=Math.max(u.min,t),t=Math.round(100*t)/100,u.base=t}return u}}}}}.apply(t,r))||(e.exports=i)},7146:function(e,t,n){var r,i;r=[n(8333),n(6637),n(492),n(5337),n(4234)],void 0===(i=function(e,t,n,r,i){return{create:function(r){var a,o=e.create("DefaultAdjustController"),s={real:0,base:0,min:0,max:0},d=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case n.PAUSED:case n.BUFFERING:case n.PLAYING:}}},{type:i.BUFFER_TWEAKS_CREATED,listener:function(e){a=e.data.tweaks.buffer,s.base||(s.base=a.target)}}];return o.debugEnabled()&&o.debug("init"),t.add({target:r,listeners:d}),{destroy:function(){t.remove({target:r,listeners:d})},calcBufferGoal:function(){return s}}}}}.apply(t,r))||(e.exports=i)},4842:function(e,t,n){var r,i;r=[n(8333),n(492),n(6637),n(4234)],void 0===(i=function(e,t,n,r){return{create:function(i,a){var o,s,d,u,c,l,f=e.create("HLSDefaultConservativeLatencyController"),m=0,E=0,p=1,h=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case t.PLAYING:break;case t.PAUSED:b()}}},{type:r.BUFFER_TWEAKS_CREATED,listener:function(e){s=e.data.tweaks.buffer}}];function g(e){var t=0;return e&&l?(t=(window.performance.now()-l)/1e3,l=0):e||l||(l=window.performance.now()),t}function b(){m=0}return f.debugEnabled()&&f.debug("init"),b(),n.add({target:i,listeners:h}),{checkLatency:function(e,t){o=e.stats,p=o.playbackrate.current,d=t.base,c=1,E=o.buffer.delay.avg;var n=Math.abs(p-1)<1e-6;if(u=d+0,m=o.buffer.end>m+.1?o.buffer.end:m,s.limit<E)1.1!==p&&(f.debugEnabled()&&f.debug("avg over limit, set speed to 1.1"),c=1.1,g(),a.setRate(p,c));else if((u-.2>=E||s.min+.2>=E)&&!n){var r=g(!0);r&&f.debugEnabled()&&f.debug("normalize speed after "+r.toFixed(2)+" seconds",2),c=1,a.setRate(p,c)}return u},destroy:function(){n.remove({target:i,listeners:h}),a.destroy(),a=null}}}}}.apply(t,r))||(e.exports=i)},9076:function(e,t,n){var r,i;r=[n(8333),n(492),n(6637),n(4234)],void 0===(i=function(e,t,n,r){return{create:function(i,a){var o,s,d,u,c,l,f,m=e.create("HLSWebkitProgressiveLatencyController"),E=0,p=0,h=1,g=0,b=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case t.PLAYING:break;case t.PAUSED:T()}}},{type:r.BUFFER_TWEAKS_CREATED,listener:function(e){s=e.data.tweaks.buffer}}];function _(e){var t=0;return e&&f?(t=(window.performance.now()-f)/1e3,f=0):e||f||(f=window.performance.now()),t}function T(){E=0,clearTimeout(l),l=0}return m.debugEnabled()&&m.debug("init"),T(),n.add({target:i,listeners:b}),{checkLatency:function(e,t){o=e.stats,h=o.playbackrate.current,d=t.base,c=1,p=o.buffer.delay.avg;var n=Math.abs(h-1)<1e-6;if(g=Math.round(1e3*(n?o.buffer.delay.max-p:p-o.buffer.delay.min))/1e3,u=d+g,E=o.buffer.end>E+.1?o.buffer.end:E,s.limit<p||s.limit<p+.25&&1.1===h)1.1!==h&&(m.debugEnabled()&&m.debug("avg over limit, set speed to 1.1"),c=1.1,_(),a.setRate(h,c));else if(n&&u+.25<p||!n&&u<p&&s.min+.05<p){if(!l){var r=1e3*(f?2+2*Math.random():.5+1.5*Math.random());m.debugEnabled()&&m.debug("avg over bufferGoalReal but under limit, make check in "+r+"ms"),l=setTimeout((function(){m.debugEnabled()&&m.debug("check timeout fired"),l=0,u<p&&s.min+.05<p?(_(),c=1.05,a.setRate(h,c)):m.debugEnabled()&&m.debug("after check timeout avg not over bufferGoalReal, do nothing",2)}),r)}}else if((u-.15>=p||s.min+.05>=p)&&!n){var i=_(!0);i&&m.debugEnabled()&&m.debug("normalize speed after "+i.toFixed(2)+" seconds",2),c=1,a.setRate(h,c)}return u},destroy:function(){n.remove({target:i,listeners:b})}}}}}.apply(t,r))||(e.exports=i)},3184:function(e,t,n){var r,i;r=[n(8333),n(492),n(6637),n(4234)],void 0===(i=function(e,t,n,r){return{create:function(i,a){var o,s,d,u,c,l,f,m=e.create("WSSChromiumProgressiveLatencyController"),E=0,p=0,h=1,g=0,b=0,_=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case t.PLAYING:break;case t.PAUSED:S()}}},{type:r.BUFFER_TWEAKS_CREATED,listener:function(e){s=e.data.tweaks.buffer}}];function T(e){var t=0;return e&&f?(t=(window.performance.now()-f)/1e3,f=0):e||f||(f=window.performance.now()),t}function A(){return 1===h}function S(){E=0,clearTimeout(l),l=0}return m.debugEnabled()&&m.debug("init"),S(),n.add({target:i,listeners:_}),{checkLatency:function(e,t){if(o=e.stats,h=o.playbackrate.current,g=o.currentTime,d=t.base,c=1,p=o.buffer.delay.avg,b=Math.round(1e3*(+A()?o.buffer.delay.max-p:p-o.buffer.delay.min))/1e3,u=d+b,E=o.buffer.end>E+.1?o.buffer.end:E,s.max<p&&function(e){return e&&!isNaN(e.currentTime)&&e.currentTime>0}(o))m.debug("max buffer reached, seeking to goal..."),a.setSeek(g,E-d);else if(s.limit<p)1.1!==h&&(m.debugEnabled()&&m.debug("avg over limit, set speed to 1.1"),c=1.1,T(),a.setRate(h,c));else if(A()&&u+.1<p||!A()&&u<p){if(!l){var n=1e3*(f?2+2*Math.random():.5+1.5*Math.random());m.debugEnabled()&&m.debug("avg over bufferGoalReal but under limit, make check in "+n+"ms"),l=setTimeout((function(){m.debugEnabled()&&m.debug("check timeout fired"),l=0,A()&&u+.1<p||!A()&&u<p?f||(T(),c=function(){var e=s.limit-u,t=Math.max(0,Math.min(e,o.buffer.delay.avg-u)),n=Math.round(t/e*100),r=1+Math.round(.1*Math.sqrt(n/100)*100)/100;return m.debugEnabled()&&m.debug("avg at "+n+"% between target and limit",2),m.debugEnabled()&&m.debug("after check timeout still avg with "+n+"% over target, set speed to "+r+" with sqrt function",2),r}(),a.setRate(h,c)):m.debugEnabled()&&m.debug("after check timeout avg not over bufferGoalReal, do nothing",2)}),n)}}else if(u>=p&&1!==h){var r=T(!0);r&&m.debugEnabled()&&m.debug("normalize speed after "+r.toFixed(2)+" seconds",2),c=1,a.setRate(h,c)}return u},destroy:function(){n.remove({target:i,listeners:_}),a.destroy(),a=null}}}}}.apply(t,r))||(e.exports=i)},2531:function(e,t,n){var r,i;r=[n(8333),n(492),n(6637),n(4234)],void 0===(i=function(e,t,n,r){return{create:function(i,a){var o,s,d,u,c,l,f=e.create("WSSDefaultConservativeLatencyController"),m=0,E=0,p=1,h=0,g=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case t.PLAYING:break;case t.PAUSED:_()}}},{type:r.BUFFER_TWEAKS_CREATED,listener:function(e){s=e.data.tweaks.buffer}}];function b(e){var t=0;return e&&l?(t=(window.performance.now()-l)/1e3,l=0):e||l||(l=window.performance.now()),t}function _(){m=0}return f.debugEnabled()&&f.debug("init"),_(),n.add({target:i,listeners:g}),{checkLatency:function(e,t){if(o=e.stats,p=o.playbackrate.current,h=o.currentTime,d=t.base,c=1,E=o.buffer.delay.avg,u=d+0,m=o.buffer.end>m+.1?o.buffer.end:m,s.max<E&&function(e){return e&&!isNaN(e.currentTime)&&e.currentTime>0}(o))f.debug("max buffer reached, seeking to goal..."),a.setSeek(h,m-d);else if(s.limit<E)1.1!==p&&(f.debugEnabled()&&f.debug("avg over limit, set speed to 1.1"),c=1.1,b(),a.setRate(p,c));else if(u>=E&&1!==p){var n=b(!0);n&&f.debugEnabled()&&f.debug("normalize speed after "+n.toFixed(2)+" seconds",2),c=1,a.setRate(p,c)}return u},destroy:function(){n.remove({target:i,listeners:g}),a.destroy(),a=null}}}}}.apply(t,r))||(e.exports=i)},8538:function(e,t,n){var r,i;r=[n(8333),n(492),n(6637),n(4234)],void 0===(i=function(e,t,n,r){return{create:function(i,a){var o,s,d,u,c,l,f,m,E,p=e.create("WSSFirefoxProgressiveLatencyController"),h=0,g=0,b=1,_=0,T=0,A=0,S=0,y=!1,v=!1,R=1,O=0,I=6e4,C=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case t.PLAYING:break;case t.PAUSED:F()}}},{type:r.BUFFER_TWEAKS_CREATED,listener:function(e){s=e.data.tweaks.buffer}},{type:r.FRAME_DROP,listener:function(e){var t=e.data.type;switch(p.debugEnabled()&&p.debug("framedrop event with type "+t),t){case"extreme":case"high":case"medium":v?p.debugEnabled()&&p.debug("frame drop handle blocked"):(p.debugEnabled()&&p.debug("frame drop handle unblocked, starting"),U(!0,"framedrop event with type "+t),y?(p.debugEnabled()&&p.debug("frame drop handle still activated, restart cooldown timeout"),M()):(p.debugEnabled()&&p.debug("set buffer goal to buffer goal max"),T=u,p.debugEnabled()&&p.debug("check framedrop cooldown factor timeout"),S?(p.debugEnabled()&&p.debug("framedrop cooldown factor timeout is running, clearing"),L(),R<=4?(p.debugEnabled()&&p.debug("framedrop cooldown factor lower or 4, multiply"),R*=2,p.debugEnabled()&&p.debug("new framedrop cooldown factor is "+R.toString())):p.debugEnabled()&&p.debug("framedrop cooldown factor still at max ("+R.toString()+"), do nothing")):p.debugEnabled()&&p.debug("framedrop cooldown factor timeout is not running, use current factor ("+R.toString()+")")))}}}];function N(e){var t=0;return e&&m?(t=(window.performance.now()-m)/1e3,m=0):e||m||(m=window.performance.now()),t}function D(){return 1===b}function w(){return b>1}function U(e,t){p.debugEnabled()&&p.debug("set framedrop blocked to "+e.toString()+" from handle: '"+t+"'"),e?v=!0:(v=!1,M())}function M(){P(),L(),p.debugEnabled()&&p.debug("set framedrop cooldown timeout with "+(I*R/1e3).toString()+" s"),A=setTimeout((function(){p.debugEnabled()&&p.debug("framedrop cooldown timeout reached, set handle to inactive"),P(),y=!1,L(),p.debugEnabled()&&p.debug("set framedrop cooldown factor timeout with "+(I*R/1e3).toString()+" s"),S=setTimeout((function(){p.debugEnabled()&&p.debug("framedrop cooldown factor timeout reached, check for decrease cooldown factor"),L(),R>1?(p.debugEnabled()&&p.debug("framedrop cooldown factor higher 1, divide"),R/=2,p.debugEnabled()&&p.debug("new framedrop cooldown factor is "+R.toString())):p.debugEnabled()&&p.debug("framedrop cooldown factor still at min ("+R.toString()+"), do nothing")}),I*R)}),I*R)}function P(){p.debugEnabled()&&p.debug("clear framedrop cooldown timeout and set to 0"),clearTimeout(A),A=0}function L(){p.debugEnabled()&&p.debug("clear framedrop cooldown factor timeout and set to 0"),clearTimeout(S),S=0}function F(){h=0,clearTimeout(f),f=0,clearTimeout(A),A=0,clearTimeout(S),S=0,y=!1,v=!1,R=1}return p.debugEnabled()&&p.debug("init"),F(),n.add({target:i,listeners:C}),{checkLatency:function(e,t){if(o=e.stats,b=o.playbackrate.current,_=o.currentTime,d=t.base,u=t.max,l=1,g=o.buffer.delay.avg,O=Math.round(1e3*(w()?o.buffer.delay.max-g:g-o.buffer.delay.min))/1e3,v||y||(T*=.998),c=Math.max(d,T)+O,h=o.buffer.end>h+.1?o.buffer.end:h,s.max<g&&function(e){return e&&!isNaN(e.currentTime)&&e.currentTime>0}(o))v&&U(!1,"over buffer max"),p.debug("max buffer reached, seeking to goal..."),a.setSeek(_,h-d);else if(s.limit<g)v&&U(!1,"between buffer limit and max"),1.1!==b&&(p.debugEnabled()&&p.debug("avg over limit, set speed to 1.1"),l=1.1,N(),a.setRate(b,l));else if(D()&&c+.1<g||w()&&c<g){if(!f){var n=1e3*(m?2+2*Math.random():.5+1.5*Math.random());p.debugEnabled()&&p.debug("avg over bufferGoalReal but under limit, make check in "+n+"ms"),f=setTimeout((function(){p.debugEnabled()&&p.debug("check timeout fired"),f=0,D()&&c+.1<g||w()&&c<g?m||(N(),l=function(){var e=s.limit-c,t=Math.max(0,Math.min(e,o.buffer.delay.avg-c)),n=Math.round(t/e*100),r=1+Math.round(.1*Math.sqrt(n/100)*100)/100;return p.debugEnabled()&&p.debug("avg at "+n+"% between target and limit"),p.debugEnabled()&&p.debug("after check timeout still avg with "+n+"% over target, set speed to "+r+" with sqrt function"),r}(),a.setRate(b,l)):p.debugEnabled()&&p.debug("after check timeout avg not over bufferGoalReal, do nothing")}),n)}}else!v&&c>=g&&w()?((E=N(!0))&&p.debugEnabled()&&p.debug("normalize speed after "+E.toFixed(2)+" seconds"),l=1,a.setRate(b,l)):v&&y&&c<=g+.1?((E=N(!0))&&p.debugEnabled()&&p.debug("normalize speed after "+E.toFixed(2)+" seconds"),p.debugEnabled()&&p.debug("normalize speed after reached bufferGoalReal again after frame drop"),v&&U(!1,"buffer target reached after framedrop"),l=1,a.setRate(b,l)):v&&!y&&(p.debugEnabled()&&p.debug("slow speed to reach bufferGoalReal after frame drop"),N(),l=.97,a.setRate(b,l),y=!0);return c},destroy:function(){n.remove({target:i,listeners:C}),a.destroy(),a=null}}}}}.apply(t,r))||(e.exports=i)},9321:function(e,t,n){var r,i;r=[n(8333),n(492),n(6637),n(4234)],void 0===(i=function(e,t,n,r){return{create:function(i,a){var o,s,d,u,c=e.create("WSSTridentConservativeLatencyController"),l=0,f=0,m=0,E=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case t.PLAYING:break;case t.PAUSED:p()}}},{type:r.BUFFER_TWEAKS_CREATED,listener:function(e){s=e.data.tweaks.buffer}}];function p(){l=0}return c.debugEnabled()&&c.debug("init"),p(),n.add({target:i,listeners:E}),{checkLatency:function(e,t){return o=e.stats,m=o.currentTime,d=t.base,f=o.buffer.delay.avg,u=d+0,l=o.buffer.end>l+.1?o.buffer.end:l,s.max<f&&function(e){return e&&!isNaN(e.currentTime)&&e.currentTime>0}(o)?(c.debug("max buffer reached, seeking to goal..."),a.setSeek(m,l-d)):s.limit<f&&(c.debugEnabled()&&c.debug("seek to buffer goal"),a.setSeek(m,l-u)),u},destroy:function(){n.remove({target:i,listeners:E})}}}}}.apply(t,r))||(e.exports=i)},2395:function(e,t,n){var r,i;r=[n(8333),n(492),n(6637),n(4234)],void 0===(i=function(e,t,n,r){return{create:function(i,a){var o,s,d,u,c,l,f=e.create("WSSWebkitConservativeLatencyController"),m=0,E=0,p=1,h=0,g=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case t.PLAYING:break;case t.PAUSED:_()}}},{type:r.BUFFER_TWEAKS_CREATED,listener:function(e){s=e.data.tweaks.buffer}}];function b(e){var t=0;return e&&l?(t=(window.performance.now()-l)/1e3,l=0):e||l||(l=window.performance.now()),t}function _(){m=0}return f.debugEnabled()&&f.debug("init"),_(),n.add({target:i,listeners:g}),{checkLatency:function(e,t){o=e.stats,p=o.playbackrate.current,h=o.currentTime,d=t.base,c=1,E=o.buffer.delay.avg;var n=Math.abs(p-1)<1e-6;if(u=d+0,m=o.buffer.end>m+.1?o.buffer.end:m,s.max<E&&function(e){return e&&!isNaN(e.currentTime)&&e.currentTime>0}(o))f.debug("max buffer reached, seeking to goal..."),a.setSeek(h,m-d);else if(s.limit<E||s.limit<E+.25&&1.1===p)1.1!==p&&(f.debugEnabled()&&f.debug("avg over limit, set speed to 1.1"),c=1.1,b(),a.setRate(p,c));else if((u-.15>=E||s.min+.05>=E)&&!n){var r=b(!0);r&&f.debugEnabled()&&f.debug("normalize speed after "+r.toFixed(2)+" seconds",2),c=1,a.setRate(p,c)}return u},destroy:function(){n.remove({target:i,listeners:g}),a.destroy(),a=null}}}}}.apply(t,r))||(e.exports=i)},4422:function(e,t,n){var r,i;r=[n(8333),n(492),n(6637),n(4234)],void 0===(i=function(e,t,n,r){return{create:function(i,a){var o,s,d,u,c,l,f,m=e.create("WSSWebkitProgressiveLatencyController"),E=0,p=0,h=1,g=0,b=0,_=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case t.PLAYING:break;case t.PAUSED:A()}}},{type:r.BUFFER_TWEAKS_CREATED,listener:function(e){s=e.data.tweaks.buffer}}];function T(e){var t=0;return e&&f?(t=(window.performance.now()-f)/1e3,f=0):e||f||(f=window.performance.now()),t}function A(){E=0,clearTimeout(l),l=0}return m.debugEnabled()&&m.debug("init"),A(),n.add({target:i,listeners:_}),{checkLatency:function(e,t){o=e.stats,h=o.playbackrate.current,g=o.currentTime,d=t.base,c=1,p=o.buffer.delay.avg;var n=Math.abs(h-1)<1e-6;if(b=Math.round(1e3*(n?o.buffer.delay.max-p:p-o.buffer.delay.min))/1e3,u=d+b,E=o.buffer.end>E+.1?o.buffer.end:E,s.max<p&&function(e){return e&&!isNaN(e.currentTime)&&e.currentTime>0}(o))m.debug("max buffer reached, seeking to goal..."),a.setSeek(g,E-d);else if(s.limit<p||s.limit<p+.25&&1.1===h)1.1!==h&&(m.debugEnabled()&&m.debug("avg over limit, set speed to 1.1"),c=1.1,T(),a.setRate(h,c));else if(n&&u+.25<p||!n&&u<p&&s.min+.05<p){if(!l){var r=1e3*(f?2+2*Math.random():.5+1.5*Math.random());m.debugEnabled()&&m.debug("avg over bufferGoalReal but under limit, make check in "+r+"ms"),l=setTimeout((function(){m.debugEnabled()&&m.debug("check timeout fired"),l=0,u<p&&s.min+.05<p?(T(),c=1.05,a.setRate(h,c)):m.debugEnabled()&&m.debug("after check timeout avg not over bufferGoalReal, do nothing",2)}),r)}}else if((u-.15>=p||s.min+.05>=p)&&!n){var i=T(!0);i&&m.debugEnabled()&&m.debug("normalize speed after "+i.toFixed(2)+" seconds",2),c=1,a.setRate(h,c)}return u},destroy:function(){n.remove({target:i,listeners:_})}}}}}.apply(t,r))||(e.exports=i)},4813:function(e,t){var n;void 0===(n=function(){var e="adjustControllerAdapter.";return{BASE:e,CONTROL_MODE_SET:e+"controlModeSet"}}.apply(t,[]))||(e.exports=n)},1148:function(e,t){var n;void 0===(n=function(){var e="adjustLatencyHandler.";return{BASE:e,SEEK:e+"seek",RATE:e+"rate"}}.apply(t,[]))||(e.exports=n)},4234:function(e,t){var n;void 0===(n=function(){var e="latencyManager.";return{BASE:e,BUFFER_TWEAKS_CREATED:e+"bufferTweaksCreated",FRAME_DROP:e+"frameDrop",RANDOM_ACCESS_POINT:e+"randomAccessPoint",TIME_OFFSET:e+"timeOffset",CONFIG:e+"config",PLAY_STATS:e+"playStats",APPLICATION_STATE_CHANGE:e+"applicationStateChange",DOCUMENT_VISIBLE:e+"documentVisible",DOCUMENT_HIDDEN:e+"documentHidden"}}.apply(t,[]))||(e.exports=n)},2158:function(e,t){var n;void 0===(n=function(){var e="liveController.";return{BASE:e,BUFFER_GOAL_STATS:e+"bufferGoalStats"}}.apply(t,[]))||(e.exports=n)},4285:function(e,t,n){var r,i;r=[n(8333),n(6627),n(9474),n(8930),n(2531),n(2395),n(9321),n(3184),n(8538),n(4422),n(4842),n(9076)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l){return{create:function(f,m){var E,p,h,g,b,_,T,A,S=e.create("LatencyControllerAdapter"),y={wssdefaultconservative:i,wsswebkitconservative:a,wsstridentconservative:o,wsschromiumprogressive:s,wssfirefoxprogressive:d,wsswebkitprogressive:u,hlsdefaultconservative:c,hlswebkitprogressive:l},v="wssdefaultconservative",R="wsswebkitconservative",O="wsstridentconservative",I="hlsdefaultconservative",C="wsschromiumprogressive",N="wssfirefoxprogressive",D="wsswebkitprogressive",w="hlswebkitprogressive";return S.debugEnabled()&&S.debug("init"),b=t.mustUseHLS||m.playback.allowSafariHlsFallback&&t.canUseHLS,g=m.playback.latencyControlMode,_=t.isTridentBrowser,T=t.isWebkitBrowser,A=t.isFirefox,h=r.create(f),p=_?O:g===n.FAST_ADAPTIVE||g===n.BALANCED_ADAPTIVE?T&&b?w:T?D:A?N:C:T&&b?I:T?R:v,S.debugEnabled()&&S.debug("use latencyController type "+p),E=y[p].create(f,h),{checkLatency:function(e,t){return E.checkLatency(e,t)},destroy:function(){E.destroy(),E=null,h.destroy(),h=null},seek:function(e,t){return h.setSeek(e,t)}}}}}.apply(t,r))||(e.exports=i)},7831:function(e,t,n){var r,i;r=[n(8333),n(9658),n(5055),n(2450),n(3937),n(3019),n(4234),n(1148),n(4813),n(2158),n(8449)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c){"use strict";return{create:function(l){var f,m,E=new t,p=e.create("LatencyManager"),h=[],g=[{from:s.SEEK,to:i.SEEK},{from:s.RATE,to:i.RATE},{from:u.BUFFER_GOAL_STATS,to:i.BUFFER_GOAL_STATS},{from:d.CONTROL_MODE_SET,to:i.CONTROL_MODE_SET}],b=[{from:a.BUFFER_TWEAKS_CREATED,to:o.BUFFER_TWEAKS_CREATED},{from:a.FRAME_DROP,to:o.FRAME_DROP},{from:a.RANDOM_ACCESS_POINT,to:o.RANDOM_ACCESS_POINT},{from:a.TIME_OFFSET,to:o.TIME_OFFSET},{from:a.CONFIG,to:o.CONFIG},{from:a.PLAY_STATS,to:o.PLAY_STATS},{from:a.APPLICATION_STATE_CHANGE,to:o.APPLICATION_STATE_CHANGE},{from:r.VISIBLE,to:o.DOCUMENT_VISIBLE},{from:r.HIDDEN,to:o.DOCUMENT_HIDDEN}];return p.debugEnabled()&&p.debug("init"),f=n.create(l,E,b),m=n.create(E,l,g),h.push(c.create(E)),{destroy:function(){for(f.destroy(),f=null,m.destroy(),m=null;h.length;)h.pop().destroy()}}}}}.apply(t,r))||(e.exports=i)},8449:function(e,t,n){var r,i;r=[n(8333),n(492),n(6637),n(4234),n(2158),n(3445),n(4285),n(6631)],void 0===(i=function(e,t,n,r,i,a,o,s){return{create:function(d){var u,c,l,f,m,E=e.create("LiveController"),p=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(n.remove({target:d,listeners:h}),e.data.state){case t.LOADING:case t.PLAYING:case t.BUFFERING:n.add({target:d,listeners:h})}}},{type:r.CONFIG,listener:function(e){l=a.create(d,e.data.config),f=o.create(d,e.data.config),m=s.create(d,f,e.data.config)}}],h=[{type:r.PLAY_STATS,listener:function(e){u=e.data,m.disable(),(c=l.calcBufferGoal(u)).real=f.checkLatency(u,c),d.emit(i.BUFFER_GOAL_STATS,{real:Math.round(100*c.real)/100,base:Math.round(100*c.base)/100,min:Math.round(100*c.min)/100,max:Math.round(100*c.max)/100}),m.update(u,c),m.enable()}}];return E.debugEnabled()&&E.debug("init"),n.add({target:d,listeners:p}),{destroy:function(){n.remove({target:d,listeners:p}),l.destroy(),f.destroy(),m.destroy()}}}}}.apply(t,r))||(e.exports=i)},8930:function(e,t,n){var r,i;r=[n(8333),n(6627),n(492),n(6637),n(4234),n(1148)],void 0===(i=function(e,t,n,r,i,a){return{create:function(o){var s=e.create("AdjustLatencyHandler"),d=[],u=0,c=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case n.PLAYING:break;case n.PAUSED:l()}}},{type:i.RANDOM_ACCESS_POINT,listener:function(e){for(d.push(e.data.onRandomAccessPoint.streamTime/1e3+u/1e3);d.length>10;)d.shift()}},{type:i.TIME_OFFSET,listener:function(e){u=e.data.offset}}];function l(){for(;d.length;)d.shift();u=0}return s.debugEnabled()&&s.debug("init"),l(),r.add({target:o,listeners:c}),{setSeek:function(e,n){s.debugEnabled()&&s.debug("should seeking to "+n),t.isTridentBrowser&&(n=function(e,t){for(var n=0;n<d.length;++n)if(d[n]>e&&d[n]<=t)return d[n];return-1}(e,n),s.debugEnabled()&&s.debug("seeking to RAP "+n)),n>=0&&(s.debugEnabled()&&s.debug("seeking to "+n),o.emit(a.SEEK,{position:n}))},setRate:function(e,t){Math.abs(e.toFixed(3)-t)>0&&(s.debugEnabled()&&s.debug("set rate to "+t),o.emit(a.RATE,{rate:t}))},destroy:function(){l(),r.remove({target:o,listeners:c})}}}}}.apply(t,r))||(e.exports=i)},6631:function(e,t,n){var r,i;r=[n(8333),n(6627),n(492),n(6637),n(4234)],void 0===(i=function(e,t,n,r,i){return{create:function(a,o,s){var d,u,c,l,f,m,E=e.create("VisibilityLatencyHandler"),p=0,h=t.mustUseHLS||s.playback.allowSafariHlsFallback&&t.canUseHLS,g=!0,b=!0,_=0,T=[150,500,2e3,4e3,6e3],A=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(d=e.data.state){case n.PLAYING:g=!0;break;case n.PAUSED:g=!1}}},{type:i.DOCUMENT_HIDDEN,listener:S},{type:i.DOCUMENT_VISIBLE,listener:S}];function S(e){l=e.name===i.DOCUMENT_HIDDEN,E.debug(l?"hidden":"visible"),O(u)&&I()?y(l):E.debug("seek is not allowed or possible")}function y(e){if(!g&&!e&&!b)return E.debug("handling visibility skipped, saved for later"),void(b=!0);if(e)R(),m=performance.now(),p=u.buffer.delay.avg,E.debug("stored bufferValue hidden state: "+p);else{var t=performance.now()-m;E.debug("checking latency on visibility handler"),t<1e3&&(_=1),v(p+.15)}}function v(e){_>=5?R():(f&&clearTimeout(f),f=setTimeout((function(){if(E.debug("latencyCheckpointIndex: "+_),E.debug("bufferThreshold: "+e),E.debug("buffer delay: "+u.buffer.delay.avg),!O(u)||!I())return E.debug("seek is not allowed or possible"),void R();u.buffer.delay.avg>e&&(E.debug("visibility seek done"),o.seek(u.currentTime,u.buffer.end-c.base),v(e))}),T[_]),_++)}function R(){g=!0,_=0,clearTimeout(f),p=0,m=0}function O(e){return e&&!isNaN(e.currentTime)&&e.currentTime>0}function I(){return!h&&c&&u.duration&&!isNaN(u.duration.current)&&d!==n.PAUSED}return E.debugEnabled()&&E.debug("init"),r.add({target:a,listeners:A}),{destroy:function(){r.remove({target:a,listeners:A}),R()},disable:function(){g=!1},enable:function(){g=!0,b&&(E.debug("handling previously skipped event"),y(l),b=!1)},update:function(e,t){u=e.stats,c=t}}}}}.apply(t,r))||(e.exports=i)},9665:function(e,t,n){var r,i;r=[n(8333),n(6627),n(6637),n(3778),n(3890),n(492),n(3019),n(7771),n(1683)],void 0===(i=function(e,t,n,r,i,a,o,s,d){return{create:function(u,c){var l,f,m,E,p,h,g,b,_,T,A,S,y,v=e.create("MetaData"),R=0,O=[{type:o.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case a.LOADING:C(),n.add({target:u,listeners:I});break;case a.PAUSING:n.remove({target:u,listeners:I})}}},{type:o.TIME_OFFSET,listener:function(e){R=e.data.offset}},{type:o.STREAM_INFO,listener:function(){C()}},{type:s.UPDATE_SOURCE_SUCCESS,listener:function(){C()}},{type:s.SWITCH_STREAM_SUCCESS,listener:function(){C()}}],I=[{type:o.META_DATA,listener:N},{type:o.ADJUSTED_META_DATA,listener:N},{type:o.PLAY_STATS,listener:function(e){for(T=e.data.stats.currentTime,A=e.data.stats.buffer.delay.current;p.length;)(g=p.shift()).streamTime<=T?u.emit(d.RECEIVED,g):h.push(g);for(;h.length;)p.push(h.shift())}}];function C(){T=0,A=0,m=!0,E={handlerName:"",streamTime:0,serverTime:0,diffTime:0,message:[]},p=[],h=[]}function N(e){v.debugEnabled()&&v.debug("onMetaData");var t,n,a=e.data[e.data.eventType];if(1===a.chunkIndex)"function"==typeof E.message.push&&0!==E.message.length&&u.emit(d.ERROR,{code:r.STREAM.METADATA_STILL_PROCESSING,message:i.STREAM.METADATA_STILL_PROCESSING}),m=!0,t=l&&f?T+A+.25:a.streamTime+R/1e3,n=isNaN(n)?3:parseInt(n,10),S=Math.floor(t*Math.pow(10,n))/Math.pow(10,n),y=a.handlerName,E={handlerName:y,streamTime:S,message:[]};else{if(0===E.message.length||"function"!=typeof E.message.push)return void(m&&(u.emit(d.ERROR,{code:r.STREAM.METADATA_NO_START_INDEX,message:i.STREAM.METADATA_NO_START_INDEX}),m=!1,E.message=[]));if(!m)return}if(E.message.push(a.message),E.message.length!==a.chunkIndex)m&&(u.emit(d.ERROR,{code:r.STREAM.METADATA_WRONG_INDEX,message:i.STREAM.METADATA_WRONG_INDEX}),m=!1,E.message=[]);else if(a.chunkCount-a.chunkIndex==0)try{b=E.message.join(""),y=E.handlerName,v.debugEnabled()&&v.debug("handlerName="+y+", metaData="+b),b=JSON.parse(b),E.message=b,_={handlerName:E.handlerName,streamTime:E.streamTime,message:E.message},p.push(_)}catch(e){u.emit(d.ERROR,{code:r.STREAM.METADATA_INVALID_JSON,message:i.STREAM.METADATA_INVALID_JSON})}}return v.debugEnabled()&&v.debug("init"),l=t.mustUseHLS||c.playback.allowSafariHlsFallback&&t.canUseHLS,f=c.playback.metadataLowDelay,n.add({target:u,listeners:O}),{destroy:function(){n.remove({target:u,listeners:O})}}}}}.apply(t,r))||(e.exports=i)},6701:function(e,t,n){var r,i;r=[n(6637),n(8333),n(4762),n(708),n(5739),n(7844),n(6627)],void 0===(i=function(e,t,n,r,i,a,o){return{create:function(r){var s=t.create("Adaptive.AdaptionController"),d=!1,u={},c=[{type:n.CONFIG,listener:function(e){var t=e.data.config.source.options.adaption.rule,n=e.data.config.source.options.adaption;d=o.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&o.canUseHLS,n.useHLS=d,f(t)}},{type:n.UPDATE_SOURCE,listener:function(e){var t=e.data.source.options.adaption.rule,n=e.data.source.options.adaption;n.useHLS=d,f(t)}},{type:n.SWITCH_STREAM,listener:function(e){"direct"===e.data.type&&f("none")}},{type:n.SET_ADAPTION,listener:function(e){var t=e.data.adaption.rule,n=e.data.adaption;n.useHLS=d,f(t)}}],l={deviationOfMean:i,deviationOfMean2:a};function f(e,t){for(var n in u){const t=u[n];n!==e?(s.debugEnabled()&&s.debug("component disabled: "+n),t.disable()):(s.debugEnabled()&&s.debug("component enabled: "+n),t.enable())}}return function(){for(var t in s.debugEnabled()&&s.debug("initialize"),e.add({target:r,listeners:c}),l)u[t]=l[t].create(r)}(),{destroy:function(){for(var t in u)u[t].destroy();e.remove({target:r,listeners:c})}}}}}.apply(t,r))||(e.exports=i)},708:function(e,t){var n;void 0===(n=function(){var e="adaptionController.";return{BASE:e,SWITCH_SUGGESTION:e+"switchSuggestion"}}.apply(t,[]))||(e.exports=n)},8134:function(e,t){var n;void 0===(n=function(){var e="ressourceController.";return{BASE:e,STATS:e+"stats",BUFFERING:e+"buffering",INITIAL_SWITCH_UP:e+"initialSwitchUp",STREAM_INFO:e+"streamInfo",STREAM_QUALITY:e+"streamQuality",PAUSED:e+"paused",BUFFERING_LONG:e+"longBuffering"}}.apply(t,[]))||(e.exports=n)},3049:function(e,t,n){var r,i;r=[n(6637),n(8333),n(8197),n(4762),n(8134),n(3349),n(6400)],void 0===(i=function(e,t,n,r,i,a,o){return{create:function(n){var i=t.create("Adaptive.RessourceController"),s=[],d=[{type:r.CONFIG,listener:function(e){c(e.data.config.source.options.adaption.rule,e.data.config.source.options.adaption)}},{type:r.UPDATE_SOURCE,listener:function(e){c(e.data.source.options.adaption.rule,e.data.source.options.adaption)}},{type:r.SWITCH_STREAM,listener:function(e){"direct"===e.data.type&&c("none")}},{type:r.SET_ADAPTION,listener:function(e){c(e.data.adaption.rule,e.data.adaption)}}],u={deviationOfMean:a,deviationOfMean2:o};function c(e,t){for(;s.length;)s.pop().destroy();Object.prototype.hasOwnProperty.call(u,e)&&s.push(u[e].create(n,t))}return i.debugEnabled()&&i.debug("initialize"),e.add({target:n,listeners:d}),{destroy:function(){for(;s.length;)s.pop().destroy();e.remove({target:n,listeners:d})}}}}}.apply(t,r))||(e.exports=i)},7844:function(e,t,n){var r,i;r=[n(6637),n(8333),n(4762),n(708),n(8134),n(4035)],void 0===(i=function(e,t,n,r,i,a){return{create:function(o){var s,d,u=t.create("Adaptive.DeviationOfMean2.Adaption"),c=!0,l=!1,f=void 0,m=!1,E=0,p=!1,h=!1,g=!1,b=[{type:n.UPDATE_SOURCE_SUCCESS,listener:R},{type:n.UPDATE_SOURCE_FAIL,listener:O},{type:n.UPDATE_SOURCE_ABORT,listener:O},{type:n.SWITCH_STREAM_SUCCESS,listener:R},{type:n.SWITCH_STREAM_FAIL,listener:O},{type:n.SWITCH_STREAM_ABORT,listener:O},{type:n.LOADED_DATA,listener:function(){u.debugEnabled()&&u.debug("onLoadedData"),h=!0}},{type:n.TIME_OFFSET,listener:function(){u.debugEnabled()&&u.debug("onFirstFragmentRendered"),g=!0}},{type:i.STATS,listener:function(e){f&&(p||R(!1),function(e){if(!c){u.debugEnabled()&&u.debug("making switch suggestion allowed");var t,n,i=e.buffer.delay.bufferDelaysStandardDeviationsDev.length;u.debugEnabled()&&u.debug("bufferDelaysStandardDeviationsLength >= 5 && !wasAbortedHighest ?"),i>=5&&!C()&&(u.debugEnabled()&&u.debug("bufferDelaysStandardDeviationsLength >= 5 && !wasAbortedHighest !"),t=S(e.buffer.delay.bufferDelaysStandardDeviationsDev,5),n=S(e.buffer.delay.bufferDelaysArithmeticMeans,5),u.debugEnabled()&&u.debug("bufferDevationAboveValue && bufferCurrentHasMinimumValue ?"),function(e,t){u.debugEnabled()&&u.debug("bufferDevationAboveValue with limit 0.045");for(var n=!0,r=0;r<=e.length-1;r++)if(!T(e[r],.045)){n=!1;break}return n}(t)&&function(e,t){for(var n=!1,r=0;r<=e.length-1;r++)if(_(e[r],.5)){n=!0;break}return n}(n)&&(u.debugEnabled()&&u.debug("make suggestion to switch down"),y(!0),v(r.SWITCH_SUGGESTION,{suggestion:"down"}))),u.debugEnabled()&&u.debug("bufferDelaysStandardDeviationsLength >= 8 && !wasAbortedLowest ?"),i>=8&&!N()&&(u.debugEnabled()&&u.debug("bufferDelaysStandardDeviationsLength >= 8 && !wasAbortedLowest !"),function(e,t){u.debugEnabled()&&u.debug("bufferDevationBelowValue with limit 0.016");for(var n=!0,r=0;r<=e.length-1;r++)if(!_(e[r],.016)){n=!1;break}return n}(t=S(e.buffer.delay.bufferDelaysStandardDeviationsDev,8))&&(u.debugEnabled()&&u.debug("make suggestion to switch up"),y(!0),v(r.SWITCH_SUGGESTION,{suggestion:"up"})))}}(e.data.deviationOfMean2))}},{type:i.BUFFERING,listener:function(e){f&&(function(e){var t,n=e.data.startBufferings.length;c||C()||(u.debugEnabled()&&u.debug("evaluating buffering events allowed"),n>=2&&(u.debugEnabled()&&u.debug("startBufferingsLength "+n),t=S(e.data.startBufferings,3),u.debugEnabled()&&u.debug("startBufferingsCutOffLength >= 3 && isCriticalEventHistory ?"),t.length>=3&&A(t,10)?(u.debugEnabled()&&u.debug("startBufferingsCutOffLength >= 3 && isCriticalEventHistory !"),y(!0),v(r.SWITCH_SUGGESTION,{suggestion:"down",priority:1})):t.length>=2&&(t=S(e.data.startBufferings,2),u.debugEnabled()&&u.debug("startBufferingsCutOffLength >= 2 && isCriticalEventHistory ?"),A(t,10)&&(u.debugEnabled()&&u.debug("startBufferingsCutOffLength >= 2 && isCriticalEventHistory !"),y(!0),v(r.SWITCH_SUGGESTION,{suggestion:"down",priority:0})))))}(e),I())}},{type:i.STREAM_INFO,listener:function(){f&&R(!1)}},{type:i.STREAM_QUALITY,listener:function(e){f&&(E=e.data.streamQuality.timestamp.standardDeviation,u.debugEnabled()&&u.debug("serverStandardDeviation "+E))}},{type:i.PAUSED,listener:function(){f&&(D(),I())}},{type:i.BUFFERING_LONG,listener:function(){f&&(u.debugEnabled()&&u.debug("onBufferingLong"),y(!0),v(r.SWITCH_SUGGESTION,{suggestion:"down",priority:1}))}},{type:a.SUGGESTION_ABORT,listener:function(e){f&&(D(e.data.reason),O())}}];function _(e,t){return e<t}function T(e,t){return e>t}function A(e,t){u.debugEnabled()&&u.debug("isCriticalEventHistory with allowedTimeDifferenceSeconds "+t);var n=e.length;return function(e,t,n){return(t-e)/1e3<n}(e[0].timestamp,e[n-1].timestamp,t)}function S(e,t){var n=e.length;return n>0?e.slice(Math.max(n-t,0),n):[]}function y(e){u.debug((e?"allow":"deny")+" prediction"),e?(u.debugEnabled()&&u.debug("deny prediction"),clearTimeout(d),d=0,c=!0):d?u.debugEnabled()&&u.debug("allow prediction already in timeout"):(u.debugEnabled()&&u.debug("allow prediction in 3 seconds"),d=setTimeout((function(){u.debugEnabled()&&u.debug("allow prediction after timeout"),c=!1,d=0}),3e3))}function v(e,t){u.debugEnabled()&&u.debug("make suggestion to switch "+t.suggestion+(t.priority?" with priority "+t.priority:" without priority")),o.emit(e,t)}function R(e){f&&(u.debugEnabled()&&u.debug("success"),l||e||(p=!0,s&&clearTimeout(s),s=setTimeout((function(){u.debugEnabled()&&u.debug("initialSwitchUpTimeout elapsed"),(h||g)&&(u.debugEnabled()&&u.debug("initialSwitchUpTimeout to switch up"),y(!0),v(r.SWITCH_SUGGESTION,{suggestion:"up"}),g=!1,h=!1)}),5e3)),D(),y(!1))}function O(){f&&(u.debugEnabled()&&u.debug("error"),y(!1),I())}function I(){u.debugEnabled()&&u.debug("destroy initial switch up"),clearTimeout(s),l=!0}function C(){return"highest"===m}function N(){return"lowest"===m}function D(e){(m=e||!1)?u.debugEnabled()&&u.debug("aborted with reason: "+m):u.debugEnabled()&&u.debug("reset abort reason"),N()&&I()}return u.debugEnabled()&&u.debug("initialize"),e.add({target:o,listeners:b}),{destroy:function(){e.remove({target:o,listeners:b})},enable:function(){f=!0,u.debugEnabled()&&u.debug("enable initial switch up"),p=!1,l=!1,clearTimeout(s)},disable:function(){f=!1,I()}}}}}.apply(t,r))||(e.exports=i)},6400:function(e,t,n){var r,i;r=[n(492),n(6637),n(8333),n(5337),n(4762),n(8134)],void 0===(i=function(e,t,n,r,i,a){return{create:function(o){var s,d,u,c,l,f,m,E=n.create("Adaptive.DeviationOfMean2.Ressource"),p=!1,h=[],g=[],b=[],_=[],T=[{type:i.APPLICATION_STATE_CHANGE,listener:function(t){for(s||E.debugEnabled()&&E.debug("initial player state"),(s=t.data.state)===e.PAUSED&&"playbackrestart"!==t.data.reason&&(v(),o.emit(a.PAUSED,{paused:{}})),s===e.PLAYING&&g.length&&g[g.length-1].state===e.LOADING&&(E.debugEnabled()&&E.debug("setRessourceBlockTimeout from playing"),S());g.length>100;)g.shift();g.push({state:s,timestamp:performance.now()}),c&&R()}},{type:i.PLAY_STATS,listener:function(e){var t,n;p||(l.add(e.data.stats.buffer.delay.current),l.count%10==0&&(f.add(l.arithmetic),m.add(f.values[f.values.length-1]),b.add(m.deviation),_.add(b.deviation),t=l,(n=d.adaptive.buffer.delay).avg=t.arithmetic,n.min=t.minimum,n.max=t.maximum,n.deviation=t.deviation,n.samples=t.values.length,n.count=t.count,n.bufferDelaysArithmeticMeans=f.values,n.bufferDelaysStandardDeviations=b.values,n.bufferDelaysStandardDeviationsDev=_.values,o.emit(a.STATS,{deviationOfMean2:d.adaptive})))}},{type:i.BUFFERING,listener:function(t){for(E.debugEnabled()&&E.debug("push startBuffering!"),h.push({event:t.data,timestamp:performance.now()});h.length>10;)h.shift();p?E.debugEnabled()&&E.debug("block emit startBuffering!"):(E.debugEnabled()&&E.debug("emit startBuffering!"),o.emit(a.BUFFERING,{startBufferings:h})),E.debugEnabled()&&E.debug("setBufferingLongTimeout"),R(),c=setTimeout((function(){E.debugEnabled()&&E.debug("setBufferingLongTimeout fired"),s===e.BUFFERING?(E.debugEnabled()&&E.debug("setBufferingLongTimeout fired and still in buffering state"),o.emit(a.BUFFERING_LONG)):E.debugEnabled()&&E.debug("setBufferingLongTimeout fired and not in buffering state")}),3e3)}},{type:i.STREAM_INFO,listener:function(){o.emit(a.STREAM_INFO,{streamInfo:{}}),v()}},{type:i.STREAM_QUALITY,listener:function(e){o.emit(a.STREAM_QUALITY,{streamQuality:e.data.onStreamQuality})}},{type:i.UPDATE_SOURCE_SUCCESS,listener:A},{type:i.SWITCH_STREAM_SUCCESS,listener:A}];function A(){E.debugEnabled()&&E.debug("setRessourceBlockTimeout from success"),S()}function S(){E.debugEnabled()&&E.debug("setRessourceBlockTimeout"),y(!0),clearTimeout(u),u=setTimeout((function(){E.debugEnabled()&&E.debug("setRessourceBlockTimeout fired"),y(!1),s===e.BUFFERING?(E.debugEnabled()&&E.debug("setRessourceBlockTimeout fired but in buffering state"),o.emit(a.BUFFERING,{startBufferings:h})):(E.debugEnabled()&&E.debug("setRessourceBlockTimeout fired & not in buffering state"),v())}),2e3)}function y(e){E.debugEnabled()&&E.debug("setRessourceBlock "+(e?"true":"false")),p=e}function v(){for(E.debugEnabled()&&E.debug("reset stats"),d={adaptive:{buffer:{delay:{samples:0,frequency:1,avg:0,min:0,max:0,deviation:0,count:0}}}},f=r.create(20,1),m=r.create(10,1),l=r.create(10,1),b=r.create(10,1),_=r.create(10,1);h.length;)h.pop()}function R(){E.debugEnabled()&&E.debug("clearBufferingLongTimeout"),clearTimeout(c),c=0}return E.debugEnabled()&&E.debug("initialize"),v(),t.add({target:o,listeners:T}),{destroy:function(){t.remove({target:o,listeners:T})}}}}}.apply(t,r))||(e.exports=i)},5739:function(e,t,n){var r,i;r=[n(6637),n(8333),n(4762),n(708),n(8134),n(4035)],void 0===(i=function(e,t,n,r,i,a){return{create:function(o,s){var d,u,c=t.create("Adaptive.DeviationOfMean.Adaption"),l=!0,f=s&&s.useHLS?.035:.02,m=!1,E=void 0,p=!1,h=0,g=!1,b=!1,_=!1,T=[{type:n.UPDATE_SOURCE_SUCCESS,listener:I},{type:n.UPDATE_SOURCE_FAIL,listener:C},{type:n.UPDATE_SOURCE_ABORT,listener:C},{type:n.SWITCH_STREAM_SUCCESS,listener:I},{type:n.SWITCH_STREAM_FAIL,listener:C},{type:n.SWITCH_STREAM_ABORT,listener:C},{type:n.LOADED_DATA,listener:function(){c.debugEnabled()&&c.debug("onLoadedData"),b=!0}},{type:n.TIME_OFFSET,listener:function(){c.debugEnabled()&&c.debug("onFirstFragmentRendered"),_=!0}},{type:i.STATS,listener:function(e){E&&(g||I(!0),function(e){if(c.debugEnabled()&&c.debug("make switch suggestion ?"),!l){c.debugEnabled()&&c.debug("making switch suggestion allowed");var t,n,i=e.buffer.delay.bufferDelaysStandardDeviations.length;c.debugEnabled()&&c.debug("bufferDelaysStandardDeviationsLength >= 5 && !wasAbortedHighest ?"),i>=5&&!D()&&(c.debugEnabled()&&c.debug("bufferDelaysStandardDeviationsLength >= 5 && !wasAbortedHighest !"),t=v(e.buffer.delay.bufferDelaysStandardDeviations,5),n=v(e.buffer.delay.bufferDelaysArithmeticMeans,5),c.debugEnabled()&&c.debug("bufferDevationAboveValue && bufferCurrentHasMinimumValue ?"),function(e,t){c.debugEnabled()&&c.debug("bufferDevationAboveValue with limit 0.075");for(var n=!0,r=0;r<=e.length-1;r++)if(!S(e[r],.075)){n=!1;break}return n}(t)&&function(e,t){c.debugEnabled()&&c.debug("bufferCurrentHasMinimumValue with limit 0.5");for(var n=!1,r=0;r<=e.length-1;r++)if(A(e[r],.5)){n=!0;break}return n}(n)&&(c.debugEnabled()&&c.debug("bufferDevationAboveValue && bufferCurrentHasMinimumValue !"),c.debugEnabled()&&c.debug("make suggestion to switch down"),R(!0),O(r.SWITCH_SUGGESTION,{suggestion:"down"}))),c.debugEnabled()&&c.debug("bufferDelaysStandardDeviationsLength >= 8 && !wasAbortedLowest ?"),i>=8&&!w()&&(c.debugEnabled()&&c.debug("bufferDelaysStandardDeviationsLength >= 8 && !wasAbortedLowest !"),t=v(e.buffer.delay.bufferDelaysStandardDeviations,8),c.debugEnabled()&&c.debug("bufferDevationBelowValue ?"),function(e,t){c.debugEnabled()&&c.debug("bufferDevationBelowValue with limit "+t);for(var n=!0,r=0;r<=e.length-1;r++)if(!A(e[r],t)){n=!1;break}return n}(t,f)&&(c.debugEnabled()&&c.debug("bufferDevationBelowValue !"),c.debugEnabled()&&c.debug("make suggestion to switch up"),R(!0),O(r.SWITCH_SUGGESTION,{suggestion:"up"})))}}(e.data.deviationOfMean))}},{type:i.BUFFERING,listener:function(e){E&&(function(e){var t,n=e.data.startBufferings.length;c.debugEnabled()&&c.debug("evaluate buffering events ?"),l||D()||(c.debugEnabled()&&c.debug("evaluating buffering events allowed"),n>=2&&(c.debugEnabled()&&c.debug("startBufferingsLength "+n),t=v(e.data.startBufferings,3),c.debugEnabled()&&c.debug("startBufferingsCutOffLength >= 3 && isCriticalEventHistory ?"),t.length>=3&&y(t,10)?(c.debugEnabled()&&c.debug("startBufferingsCutOffLength >= 3 && isCriticalEventHistory !"),R(!0),O(r.SWITCH_SUGGESTION,{suggestion:"down",priority:1})):t.length>=2&&(t=v(e.data.startBufferings,2),c.debugEnabled()&&c.debug("startBufferingsCutOffLength >= 2 && isCriticalEventHistory ?"),y(t,10)&&(c.debugEnabled()&&c.debug("startBufferingsCutOffLength >= 2 && isCriticalEventHistory !"),R(!0),O(r.SWITCH_SUGGESTION,{suggestion:"down",priority:0})))))}(e),N())}},{type:i.STREAM_INFO,listener:function(){E&&I(!0)}},{type:i.STREAM_QUALITY,listener:function(e){E&&(h=e.data.streamQuality.timestamp.standardDeviation,c.debugEnabled()&&c.debug("serverStandardDeviation "+h))}},{type:i.PAUSED,listener:function(){E&&(U(),N())}},{type:i.BUFFERING_LONG,listener:function(){E&&(c.debugEnabled()&&c.debug("onBufferingLong"),R(!0),O(r.SWITCH_SUGGESTION,{suggestion:"down",priority:1}))}},{type:a.SUGGESTION_ABORT,listener:function(e){E&&(U(e.data.reason),C())}}];function A(e,t){return e<t}function S(e,t){return e>t}function y(e,t){c.debugEnabled()&&c.debug("isCriticalEventHistory with allowedTimeDifferenceSeconds "+t);var n=e.length;return function(e,t,n){return(t-e)/1e3<n}(e[0].timestamp,e[n-1].timestamp,t)}function v(e,t){var n=e.length;return n>0?e.slice(Math.max(n-t,0),n):[]}function R(e){c.debug((e?"allow":"deny")+" prediction"),e?(c.debugEnabled()&&c.debug("deny prediction"),clearTimeout(u),u=0,l=!0):u?c.debugEnabled()&&c.debug("allow prediction already in timeout"):(c.debugEnabled()&&c.debug("allow prediction in 3 seconds"),u=setTimeout((function(){c.debugEnabled()&&c.debug("allow prediction after timeout"),l=!1,u=0}),3e3))}function O(e,t){c.debugEnabled()&&c.debug("make suggestion to switch "+t.suggestion+(t.priority?" with priority "+t.priority:" without priority")),o.emit(e,t)}function I(e){E&&(c.debugEnabled()&&c.debug("success"),m||e||(g=!0,d&&clearTimeout(d),d=setTimeout((function(){c.debugEnabled()&&c.debug("initialSwitchUpTimeout elapsed"),(b||_)&&(c.debugEnabled()&&c.debug("initialSwitchUpTimeout to switch up"),R(!0),O(r.SWITCH_SUGGESTION,{suggestion:"up"}),_=!1,b=!1)}),5e3)),U(),R(!1))}function C(){E&&(c.debugEnabled()&&c.debug("error"),R(!1),N())}function N(){c.debugEnabled()&&c.debug("destroy initial switch up"),clearTimeout(d),m=!0}function D(){return"highest"===p}function w(){return"lowest"===p}function U(e){(p=e||!1)?c.debugEnabled()&&c.debug("aborted with reason: "+p):c.debugEnabled()&&c.debug("reset abort reason"),w()&&N()}return c.debugEnabled()&&c.debug("initialize"),e.add({target:o,listeners:T}),{destroy:function(){e.remove({target:o,listeners:T})},enable:function(){E=!0,c.debugEnabled()&&c.debug("reset initial switch up"),g=!1,m=!1,clearTimeout(d)},disable:function(){E=!1,N()}}}}}.apply(t,r))||(e.exports=i)},3349:function(e,t,n){var r,i;r=[n(492),n(6637),n(8333),n(8197),n(5337),n(4762),n(8134)],void 0===(i=function(e,t,n,r,i,a,o){return{create:function(r){var s,d,u,c,l,f,m,E=n.create("Adaptive.DeviationOfMean.Ressource"),p=!1,h=[],g=[],b=[],_=[{type:a.APPLICATION_STATE_CHANGE,listener:function(t){for(s||E.debugEnabled()&&E.debug("initial player state"),(s=t.data.state)===e.PAUSED&&"playbackrestart"!==t.data.reason&&(y(),r.emit(o.PAUSED,{paused:{}})),s===e.PLAYING&&g.length&&g[g.length-1].state===e.LOADING&&(E.debugEnabled()&&E.debug("setRessourceBlockTimeout from playing"),A());g.length>100;)g.shift();g.push({state:s,timestamp:performance.now()}),c&&v()}},{type:a.PLAY_STATS,listener:function(e){var t,n;p||(l.add(e.data.stats.buffer.delay.current),l.count%10==0&&(f.add(l.arithmetic),m.add(f.values[f.values.length-1]),b.add(m.deviation),t=l,(n=d.adaptive.buffer.delay).avg=t.arithmetic,n.min=t.minimum,n.max=t.maximum,n.deviation=t.deviation,n.samples=t.values.length,n.count=t.count,n.bufferDelaysArithmeticMeans=f.values,n.bufferDelaysStandardDeviations=b.values,r.emit(o.STATS,{deviationOfMean:d.adaptive})))}},{type:a.BUFFERING,listener:function(t){for(E.debugEnabled()&&E.debug("push startBuffering!"),h.push({event:t.data,timestamp:performance.now()});h.length>10;)h.shift();p?E.debugEnabled()&&E.debug("block emit startBuffering!"):(E.debugEnabled()&&E.debug("emit startBuffering!"),r.emit(o.BUFFERING,{startBufferings:h})),E.debugEnabled()&&E.debug("setBufferingLongTimeout"),v(),c=setTimeout((function(){E.debugEnabled()&&E.debug("setBufferingLongTimeout fired"),s===e.BUFFERING?(E.debugEnabled()&&E.debug("setBufferingLongTimeout fired and still in buffering state"),r.emit(o.BUFFERING_LONG)):E.debugEnabled()&&E.debug("setBufferingLongTimeout fired and not in buffering state")}),3e3)}},{type:a.STREAM_INFO,listener:function(){r.emit(o.STREAM_INFO,{streamInfo:{}}),y()}},{type:a.STREAM_QUALITY,listener:function(e){r.emit(o.STREAM_QUALITY,{streamQuality:e.data.onStreamQuality})}},{type:a.UPDATE_SOURCE_SUCCESS,listener:T},{type:a.SWITCH_STREAM_SUCCESS,listener:T}];function T(){E.debugEnabled()&&E.debug("setRessourceBlockTimeout from success"),A()}function A(){E.debugEnabled()&&E.debug("setRessourceBlockTimeout"),S(!0),clearTimeout(u),u=setTimeout((function(){E.debugEnabled()&&E.debug("setRessourceBlockTimeout fired"),S(!1),s===e.BUFFERING?(E.debugEnabled()&&E.debug("setRessourceBlockTimeout fired but in buffering state"),r.emit(o.BUFFERING,{startBufferings:h})):(E.debugEnabled()&&E.debug("setRessourceBlockTimeout fired & not in buffering state"),y())}),2e3)}function S(e){E.debugEnabled()&&E.debug("setRessourceBlock "+(e?"true":"false")),p=e}function y(){for(E.debugEnabled()&&E.debug("reset stats"),d={adaptive:{buffer:{delay:{samples:0,frequency:1,avg:0,min:0,max:0,deviation:0,count:0}}}},f=i.create(20,1),m=i.create(10,1),l=i.create(10,1),b=i.create(20,1);h.length;)h.pop()}function v(){E.debugEnabled()&&E.debug("clearBufferingLongTimeout"),clearTimeout(c),c=0}return E.debugEnabled()&&E.debug("initialize"),y(),t.add({target:r,listeners:_}),{destroy:function(){t.remove({target:r,listeners:_})}}}}}.apply(t,r))||(e.exports=i)},4762:function(e,t){var n;void 0===(n=function(){var e="sourceManager.";return{BASE:e,SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_QUALITY:e+"streamQuality",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",STREAM_URL:e+"streamUrl",CONFIG:e+"config",PLAYING:e+"playing",BUFFERING:e+"buffering",PLAY_STATS:e+"playStats",APPLICATION_STATE_CHANGE:e+"applicationStateChange",UPDATE_SOURCE:e+"updateSource",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM:e+"switchStream",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_FAIL:e+"switchStreamFail",SWITCH_STREAM_ABORT:e+"switchStreamAbort",SET_ADAPTION:e+"setAdaption",LOADED_DATA:e+"loadedData",TIME_OFFSET:e+"timeOffset",PUBLIC_EVENT:e+"publicEvent"}}.apply(t,[]))||(e.exports=n)},4035:function(e,t){var n;void 0===(n=function(){var e="switchController.";return{BASE:e,STREAM_SWITCH:e+"streamSwitch",SUGGESTION_ABORT:e+"suggestionAbort"}}.apply(t,[]))||(e.exports=n)},8307:function(e,t,n){var r,i;r=[n(8333),n(9658),n(6627),n(8197),n(6637),n(5055),n(164),n(3019),n(8983),n(7771),n(4762),n(708),n(8134),n(4035),n(6701),n(3049),n(4122)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l,f,m,E,p,h){"use strict";return{create:function(n){var r,i,l=new t,g=e.create("SourceManager"),b=[],_=[{from:f.STATS,to:o.STATS},{from:m.STREAM_SWITCH,to:o.STREAM_SWITCH}],T=[{from:s.CONFIG,to:c.CONFIG},{from:s.PLAY_STATS,to:c.PLAY_STATS},{from:s.FRAME_DROP,to:c.FRAME_DROP},{from:s.RANDOM_ACCESS_POINT,to:c.RANDOM_ACCESS_POINT},{from:s.STREAM_QUALITY,to:c.STREAM_QUALITY},{from:s.APPLICATION_STATE_CHANGE,to:c.APPLICATION_STATE_CHANGE},{from:s.UPDATE_SOURCE,to:c.UPDATE_SOURCE},{from:s.SWITCH_STREAM,to:c.SWITCH_STREAM},{from:s.PUBLIC_EVENT,to:c.PUBLIC_EVENT},{from:s.BUFFERING,to:c.BUFFERING},{from:s.SET_ADAPTION,to:c.SET_ADAPTION},{from:s.LOADED_DATA,to:c.LOADED_DATA},{from:s.TIME_OFFSET,to:c.TIME_OFFSET},{from:u.SERVER_INFO,to:c.SERVER_INFO},{from:u.UPDATE_SOURCE_INIT,to:c.UPDATE_SOURCE_INIT},{from:u.UPDATE_SOURCE_SUCCESS,to:c.UPDATE_SOURCE_SUCCESS},{from:u.UPDATE_SOURCE_FAIL,to:c.UPDATE_SOURCE_FAIL},{from:u.UPDATE_SOURCE_ABORT,to:c.UPDATE_SOURCE_ABORT},{from:u.SWITCH_STREAM_INIT,to:c.SWITCH_STREAM_INIT},{from:u.SWITCH_STREAM_SUCCESS,to:c.SWITCH_STREAM_SUCCESS},{from:u.SWITCH_STREAM_FAIL,to:c.SWITCH_STREAM_FAIL},{from:u.SWITCH_STREAM_ABORT,to:c.SWITCH_STREAM_ABORT},{from:d.CREATED,to:c.STREAM_INFO},{from:d.UPDATED,to:c.STREAM_INFO_UPDATE}];return g.debugEnabled()&&g.debug("init"),r=a.create(n,l,T),i=a.create(l,n,_),b.push(h.create(l)),b.push(E.create(l)),b.push(p.create(l)),{destroy:function(){for(r.destroy(),r=null,i.destroy(),i=null;b.length;)b.pop().destroy()}}}}}.apply(t,r))||(e.exports=i)},4122:function(e,t,n){var r,i;r=[n(6637),n(8333),n(8197),n(492),n(4762),n(4035),n(708)],void 0===(i=function(e,t,n,r,i,a,o){return{create:function(s){var d,u,c,l,f,m,E,p,h,g,b,_,T,A,S,y,v,R,O,I,C=t.create("SwitchRequestController"),N={},D=0,w=!1,U={},M=0,P=!1,L=0,F=0,x=[],k=0,B=60,H=120,V=null,G=!1,W=0,Y=!1,j=[{type:i.CONFIG,listener:function(e){var t;K(e.data.config.source),t=e.data.config.playback,c=t.faststart,z("init")}},{type:i.SWITCH_STREAM,listener:function(e){if("recover"===e.data.type){for(var t=0;t<Object.keys(U).length;t+=1){var n=Object.keys(U)[t];if(Object.prototype.hasOwnProperty.call(U,n)&&"down"===U[n][0]){e.data.index=U[n][1];break}}void 0===e.data.index&&(e.data.index=l)}var r;C.debugEnabled()&&C.debug("forced to switch to stream with index "+e.data.index),C.debugEnabled()&&C.debug("current stream has index "+l+" of "+(m-1)),(r=e.data.index)<m&&r>-1&&(f=e.data.index,"direct"===(w=e.data.type)&&(d.options.adaption.rule="none"),z(w))}},{type:i.UPDATE_SOURCE,listener:function(e){K(e.data.source),z(w="update")}},{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(u||C.debugEnabled()&&C.debug("initial player state"),u=e.data.state){case r.PAUSED:ne()}}},{type:i.UPDATE_SOURCE_SUCCESS,listener:function(){w=!1,ne()}},{type:i.UPDATE_SOURCE_FAIL,listener:function(){w=!1}},{type:i.UPDATE_SOURCE_ABORT,listener:function(){w=!1}},{type:i.SWITCH_STREAM_INIT,listener:function(e){var t=e.data.tag;C.debugEnabled()&&C.debug('stream switch init with tag "'+t+'"')}},{type:i.SWITCH_STREAM_SUCCESS,listener:function(e){delete U[e.data.id];var t=e.data.tag,n=t.split(" streamSwitch "),r=e.data.type;"down"===r&&(P=!0,L=Q()),"up"===r&&(F=Q(),x.push(F)),C.debugEnabled()&&C.debug('stream switch success with tag "'+t+'"'),C.debugEnabled()&&C.debug("switch with id "+n[1]+" was successful, switch index changed from "+l+" to "+N[n[1]]),q(N[n[1]]),w=!1,ne()}},{type:i.SWITCH_STREAM_FAIL,listener:function(e){delete U[e.data.id];var t=e.data.tag,n=t.split(" streamSwitch ");C.debugEnabled()&&C.debug('stream switch fail with tag "'+t+'"'),C.debugEnabled()&&C.debug("switch with id "+n[1]+" has been failed with code "+e.data.code+", switch index stays at "+l),w=!1,V=e.data.entry.index,R=e.data.type,ee("switchStreamFailCount"),C.debugEnabled()&&C.debug("switchStreamFailCount: "+W)}},{type:i.SWITCH_STREAM_ABORT,listener:function(e){delete U[e.data.id];var t=e.data.tag,n=t.split(" streamSwitch ");C.debugEnabled()&&C.debug('stream switch abort with tag "'+t+'"'),C.debugEnabled()&&C.debug("switch with id "+n[1]+" has been aborted"+(e.data&&e.data.reason?" with reason '"+e.data.reason+"'":"")+", switch index stays at "+l),w=!1}},{type:i.SET_ADAPTION,listener:function(e){d.options.adaption=e.data.adaption}},{type:o.SWITCH_SUGGESTION,listener:function(e){var t,n=(t=e.data.suggestion,C.debugEnabled()&&C.debug("lastFailedSwitchID: "+V+", nextStreamIndex: "+f),(null===V||V===f)&&t===R||(ne(),!1));if(C.debugEnabled()&&C.debug("suggest stream to switch "+e.data.suggestion),C.debugEnabled()&&C.debug("current stream has index "+l+" of "+(m-1)),w&&(!e.data.priority||e.data.priority&&1!==e.data.priority))C.debugEnabled()&&C.debug("switch already initialized, abort"),ie("initialized");else if(w&&f===m-1&&e.data.priority)C.debugEnabled()&&C.debug("switch with priority to highest index already initialized, abort"),ie("initialized");else if((W>=3||1===W&&k>0)&&n)!function(){if(G||Y){if(G&&Y){ie("switch fail timeout in progress");var e=Q()-y,t=X()-e;C.debugEnabled()&&C.debug("switchSuggestionTime "+M.toFixed(2)+"; timeout in sec: "+E+"; time left in sec: "+t.toFixed(2))}}else!function(){Y=!0;var e=X();C.debugEnabled()&&C.debug("timeout value based on retryCooldownCounter: "+e),y=Q(),ie("switch fail timeout started"),ee("retryCooldownCounter"),v=setTimeout((function(){te(),G=!1}),1e3*e)}()}();else{if(w=void 0,e.data.suggestion)if("down"===e.data.suggestion)l<m-1?void 0===(f=J("down",e.data.priority,d.options.adaption.downStep))?(C.debugEnabled()&&C.debug("suggest to switch down to the next possible quality but not possible due to omitted qualities, abort"),ie("omitted")):(w="down",G=!1,C.debugEnabled()&&C.debug("downswitch suggestion, no timeout applied")):(C.debugEnabled()&&C.debug("suggest to switch down but highest index reached, abort"),ie("highest"));else if("up"===e.data.suggestion){M=Q(),h=Math.max(F,L),E=P?X():0,g=F>L?"up":"down";var r=M-h;if(0===l)C.debugEnabled()&&C.debug("suggest to switch up but lowest index reached, abort"),ie("lowest"),G=!1;else if(P&&r<E)switch(b=E-r,C.debugEnabled()&&C.debug("switchSuggestionTime "+M.toFixed(2)+"; lastSwitchTime "+h.toFixed(2)+"; timeout in sec: "+E+"; timeLeft: "+b.toFixed(2)),g){case"down":C.debugEnabled()&&C.debug("suggest to switch up but too less time passed since the last switch down"),ie("toofast");break;case"up":C.debugEnabled()&&C.debug("suggest to switch up but too less time passed since the last upswitch"),ie("toofast")}else void 0===(f=J("up"))?(C.debugEnabled()&&C.debug("suggest to switch up to the next possible quality but not possible due to omitted qualities, abort"),ie("omitted")):(w="up",G=!1,C.debugEnabled()&&C.debug("after upswitch, no timeout applied"),I=H)}w?z(w):C.debugEnabled()&&C.debug("switch not initialized")}}}];function K(e){m=(d=e).entries.length,l=d.startIndex,f=d.startIndex}function z(e){C.debugEnabled()&&C.debug("apply switch to stream with index "+f),D=Math.round(1e11*Math.random()),N[D]=f,U[D]=[e,f],C.debugEnabled()&&C.debug("switch with id "+D+" should change switch index from "+l+" to "+f);var t,r,i=n.copy(d.options.switch);"recover"===e&&(i.timeout=10,i.method="client"),i.tag="update"===e?i.tag:(t=f,((r=d.entries[t].h5live).rtmp?r.rtmp.streamname:r.params&&r.params.stream)+" streamSwitch "+D),i.pauseOnError="update"===e||i.pauseOnError,C.debugEnabled()&&C.debug('switch has tag "'+i.tag+'"');var o={source:n.copy(d),rule:n.copy(d.options.adaption.rule),downStep:n.copy(d.options.adaption.downStep),entry:n.copy(d.entries[f]),options:n.copy(i),faststart:("init"===e||"update"===e)&&c,type:e,id:D};switch(s.emit(a.STREAM_SWITCH,o),e){case"init":C.debugEnabled()&&C.debug('stream switch init with tag "'+i.tag+'"'),C.debugEnabled()&&C.debug("switch with id "+D+" is type 'init', set initial index to "+f),q(f),re();break;case"update":case"direct":case"recover":re()}}function q(e){l=e}function Q(){return(new Date).getTime()/1e3}function J(e,t,n){C.debugEnabled()&&C.debug("getPossibleNextStreamIndex switchType: "+e+", priority: "+t);var r,i,a,o=(r=d.options.adaption.omitRenditions,i=[],a={high:0,"medium-high":Math.round(1*(m-1)/5),medium:Math.round(1*(m-1)/2),"medium-low":Math.round(4*(m-1)/5),low:m-1},Array.isArray(r)&&(i=(i=r.map((function(e){return isNaN(e)?a[e]:parseInt(e,10)}))).filter((function(e){return"number"==typeof e&&e>=0&&e<m})).filter((function(e,t,n){return n.indexOf(e)==t}))),i),s="down"===e,u=s?1===t?m-1:Math.min(l+n,m-1):l-1;if(!o||0===o.length)return C.debugEnabled()&&C.debug("no omitted qualities, return startIndex: "+u),u;for(var c=new Array(m),f=0;f<m;f++)c[f]=!0;for(var E=0;E<o.length;E++)c[o[E]]=!1;var p=s?function(e,t){var n;for(C.debugEnabled()&&C.debug("findDownSwitchCandidate downwards from startIndex: "+e),n=e;n<m;n++)if(t[n])return n;for(C.debugEnabled()&&C.debug("findDownSwitchCandidate upwards from startIndex: "+e),n=e-1;n>l;n--)if(t[n])return n}(u,c):function(e,t){C.debugEnabled()&&C.debug("findUpSwitchCandidate upwards from startIndex: "+e);for(var n=e;n>=0;n--)if(t[n])return n}(u,c);return C.debugEnabled()&&C.debug("indexCandidate: "+p),p}function X(){if(p=Q(),O=E,Y){if(G)E=O;else switch(k){case 0:$(30);break;case 1:$(60);break;case 2:default:$(90)}return E}if(p<h)return 0;var e=Z(p,L),t=Math.abs(F-L);S=Z(p,_),A=Z(p,T);var n=O+10<e,r=!!(e>(O<=B?B:I+60));if(G)E=O;else if(F>0&&!G)if(t<30&&e<=I+10)$(_&&(F-_||F-T>0)&&(S>60&&S<180||A<300)?240:H);else if(!G&&n&&r)switch(O){case 30:case B:$(30);break;case H:$(B);break;case 240:$(H)}else $(B);else $(B);return E}function $(e){E=e,I=30===e?B:e,G=!0,C.debugEnabled()&&C.debug("applied timeout: "+e),240===E?T=Q():E===H&&(_=Q())}function Z(e,t){return e-t}function ee(e){if(null===V||V===f)switch(e){case"switchStreamFailCount":W++;break;case"retryCooldownCounter":k++}}function te(){W=0,Y=!1}function ne(){v&&(clearTimeout(v),v=null),te(),k=0}function re(){M=0,L=0,F=0,h=0,P=!1,G=!1,x=[],I=0,te(),k=0,C.debugEnabled()&&C.debug("reset time values")}function ie(e){s.emit(a.SUGGESTION_ABORT,{reason:e})}return C.debugEnabled()&&C.debug("initialize"),e.add({target:s,listeners:j}),{destroy:function(){e.remove({target:s,listeners:j})}}}}}.apply(t,r))||(e.exports=i)},5620:function(e,t,n){var r,i;r=[n(4556),n(8333),n(6627),n(6637),n(492),n(3019),n(519),n(8983)],void 0===(i=function(e,t,n,r,i,a,o,s){return{create:function(d){var u,c,l,f=t.create("StartupStatsCollector"),m=[],E=m[0]="connecting",p=m[1]="connected",h=m[2]="firstFragmentReceived",g=m[3]="firstFrameRendered",b=m[4]="playable",_=m[5]="playing",T={},A=null,S=!1,y=0,v=!1,R=[{type:a.APPLICATION_STATE_CHANGE,listener:function(e){switch(c=e.data.state){case i.LOADING:w(),r.add({target:d,listeners:u?N:O});break;default:w(),r.remove({target:d,listeners:u?N:O})}}},{type:a.CONFIG,listener:function(e){l=e.data.config.id,u=n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS,v=e.data.config.playback.keepConnection,!u&&(O=O.concat(v?C:I)),S=e.data.config.playback.faststart}},{type:s.CREATED,listener:function(e){y=e.data.streamInfo.prerollDuration?e.data.streamInfo.prerollDuration:0}}],O=[{type:a.STREAM_FRAGMENT,listener:L},{type:a.LOADED_DATA,listener:F},{type:a.CAN_PLAY_THROUGH,listener:x},{type:a.PLAYING,listener:k}],I=[{type:a.NETWORK_CONNECTING,listener:M},{type:a.NETWORK_CONNECTED,listener:P}],C=[{type:a.NETWORK_PLAY,listener:M},{type:a.NETWORK_PLAY,listener:P}],N=[{type:a.PLAY,listener:M},{type:a.DURATION_CHANGE,listener:P},{type:a.LOADED_META_DATA,listener:L},{type:a.LOADED_DATA,listener:F},{type:a.CAN_PLAY_THROUGH,listener:x},{type:a.PLAYING,listener:k}];function D(t){if(c===i.LOADING)if(f.debugEnabled()&&f.debug("enabled, should set stat: "+t),-1===T[t])for(var n=function(e){for(var t=[],n=m.indexOf(e);n>=0;)-1===T[m[n]]&&(e!==_||e===_&&-1!==[h,g,b].indexOf(A))?(t.unshift(m[n]),n--):n=-1;return t.length&&(A=e),f.debugEnabled()&&f.debug(t.length?'valid labels are "'+t.join('", "')+'"':"no valid labels found"),t}(t),r=0,a=n.length;r<a;r+=1)t=n[r],-1===T[t]&&(f.debugEnabled()&&f.debug("set stat: "+t),T[t]=e.now(),e.mark(["nano",l,t].join(".")),f.debug(t+": "+T[t]),U(t));else f.debugEnabled()&&f.debug("stat already set");else f.debugEnabled()&&f.debug("disabled, shouldn't set stat: "+t)}function w(){A=null;for(var e=0;e<m.length;e++)T[m[e]]=-1}function U(e){for(var t=m.length-1;t>0;t--)(T[m[t]]<T[m[t-1]]||-1===T[m[t-1]])&&-1!==T[m[t]]&&(T[m[t-1]]=T[m[t]]);var n=T[E],r={};for(var i in T)Object.prototype.hasOwnProperty.call(T,i)&&-1!==T[i]&&(r[i]=Math.round(T[i]-n));var a={stats:r,faststart:S,prerollDuration:1e3*y};e===_&&A===_?function(e){d.emit(o.COMPLETED,e),f.debugEnabled()&&f.debug("created startup stats: "+JSON.stringify(e))}(a):function(e){d.emit(o.ADDED,e),f.debugEnabled()&&f.debug("added startup stats: "+JSON.stringify(e))}(a)}function M(e){(!u||u&&e.data.external)&&D(E)}function P(){D(p),u&&B("remove",a.DURATION_CHANGE,P)}function L(){D(h),!u&&B("remove",a.STREAM_FRAGMENT,L)}function F(){D(g)}function x(){D(b)}function k(){D(_)}function B(e,t,n){r[e]({target:d,listeners:[{type:t,listener:n}]})}return w(),r.add({target:d,listeners:R}),{destroy:function(){r.remove({target:d,listeners:R})}}}}}.apply(t,r))||(e.exports=i)},5444:function(e,t,n){var r,i;r=[n(8333),n(1933),n(6627),n(6637),n(3019),n(8983),n(492),n(7605),n(8730)],void 0===(i=function(e,t,n,r,i,a,o,s,d){return{create:function(t){var u,c,l,f,m,E,p=e.create("StreamInfo"),h=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){u=e.data.state}},{type:i.CONFIG,listener:function(e){c=n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS,l=n.isMediaOverQuicSupported&&e.data.config.playback.enableMediaOverQuic}},{type:i.STREAM_INFO,listener:function(e){u!==o.READY&&g(a.CREATED,e)}},{type:i.STREAM_INFO_UPDATE,listener:function(e){u!==o.BUFFERING&&u!==o.PLAYING||g(a.UPDATED,e)}},{type:i.STREAM_URL,listener:function(e){m=e.data.url,E=function(e){for(var t={},n=e.indexOf("?")+1,r=("&"+e.substring(n)).split("&"),i=0;i<r.length;i+=1){var a=r[i].split("=");2===a.length&&(t[a[0]]=decodeURIComponent(a[1]))}return t}(m)}},{type:i.CAN_PLAY,listener:function(e){c&&(p.debugEnabled()&&p.debug("create streamInfo for hls on canPlay"),(f={haveAudio:e.data.haveAudio,haveVideo:e.data.haveVideo,prerollDuration:0,audioInfo:e.data.haveAudio?{bitsPerSample:null,channels:null,sampleRate:null}:null,videoInfo:e.data.haveVideo?{width:e.data.videoWidth,height:e.data.videoHeight,frameRate:null}:null}).url=m,f.rtmp=b(),p.debugEnabled()&&p.debug("created streamInfo for hls: "+JSON.stringify(f)),setTimeout((function(){t.emit(a.CREATED,{streamInfo:f})}),0))}}];function g(e,n){f=n.data.onStreamInfo,p.debugEnabled()&&p.debug("handle streamInfo with "+e+": "+JSON.stringify(f));var r=f&&f.mimeType?f.mimeType:d.MP4_MS;if(window.MediaSource&&window.MediaSource.isTypeSupported(r)||window.ManagedMediaSource&&window.ManagedMediaSource.isTypeSupported(r)||l){var i={},o=[];for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){var c=s[u];Object.prototype.hasOwnProperty.call(s,u)&&Object.prototype.hasOwnProperty.call(f,c)&&-1===o.indexOf(c)&&(i[c]=f[c])}(f=i).url=m,f.rtmp=b(),p.debugEnabled()&&p.debug("parsed streamInfo with "+e+": "+JSON.stringify(f)),t.emit(e,{streamInfo:f})}else t.emit(a.MIME_TYPE_UNSUPPORTED)}function b(){return{streamname:E.stream?E.stream:"",url:E.url?E.url:""}}return p.debugEnabled()&&p.debug("init"),r.add({target:t,listeners:h}),{destroy:function(){r.remove({target:t,listeners:h})}}}}}.apply(t,r))||(e.exports=i)},4600:function(e,t,n){var r,i;r=[n(8333),n(6627),n(6637),n(3019),n(3667),n(492)],void 0===(i=function(e,t,n,r,i,a){var o=2e4,s=2e4;return{create:function(t){var d,u=e.create("Timeout"),c=0,l=0,f=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(d=e.data.state){case a.READY:case a.PLAYING:case a.PAUSED:clearTimeout(c),clearTimeout(l)}var n;d===a.BUFFERING?(clearTimeout(l),l=setTimeout((function(){t.emit(i.BUFFERING_TIMEOUT,{delay:s})}),s)):clearTimeout(l),d===a.LOADING&&(n=e.data.connectDelay,clearTimeout(c),c=setTimeout((function(){t.emit(i.LOADING_TIMEOUT,{delay:o+n})}),o+n))}},{type:r.CONFIG,listener:function(e){var t=e.data.config,n=1e3*t.playback.timeouts.loading,r=1e3*t.playback.timeouts.buffering;o=Math.max(Math.min(n,6e4),1e4),s=Math.max(Math.min(r,6e4),1e4)}},{type:r.UPDATE_SOURCE_INIT,listener:function(){clearTimeout(c),clearTimeout(l)}},{type:r.MEDIA_ERROR_RECOVER,listener:function(){clearTimeout(c),clearTimeout(l)}}];return u.debugEnabled()&&u.debug("init"),n.add({target:t,listeners:f}),{destroy:function(){clearTimeout(c),clearTimeout(l),n.remove({target:t,listeners:f})}}}}}.apply(t,r))||(e.exports=i)},4351:function(e,t,n){var r,i;r=[n(6637),n(8333),n(3019),n(2450)],void 0===(i=function(e,t,n,r){return{create:function(i){var a,o,s,d=t.create("VisibilityProxy"),u=!1,c=[{type:n.APPLICATION_STATE_CHANGE,listener:function(e){s||(d.debugEnabled()&&d.debug("initial player state"),l()),s=e.data.state}}];function l(){u=document[a],d.debug(u?"hidden":"visible"),i.emit(u?r.HIDDEN:r.VISIBLE)}return d.debugEnabled()&&d.debug("initialize"),e.add({target:i,listeners:c}),void 0!==document.hidden?(a="hidden",o="visibilitychange"):void 0!==document.msHidden?(a="msHidden",o="msvisibilitychange"):void 0!==document.webkitHidden&&(a="webkitHidden",o="webkitvisibilitychange"),document.addEventListener(o,l),{destroy:function(){e.remove({target:i,listeners:c}),document.removeEventListener(o,l)}}}}}.apply(t,r))||(e.exports=i)},941:function(e,t){var n;void 0===(n=function(){return{validateBuffer:function(e,t){var n="dynamic"===(t=t||"")?["offsetThreshold","offsetStep","cooldownTime"]:["min","start","target","limit","max"],r=n.filter((function(t){return!Object.prototype.hasOwnProperty.call(e,t)}));if(r.length)return{success:!1,reason:"The buffer config is invalid, it must contain "+r.join(", ")+". Reset to default."};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&"number"!=typeof e[n[i]])return{success:!1,reason:"The "+(t.length?t+" ":t)+"buffer config is invalid, the value '"+n[i]+"' have to be a number. Reset to default."};return{success:!0}}}}.apply(t,[]))||(e.exports=n)},6432:function(e,t,n){var r,i;r=[n(8197)],void 0===(i=function(e){var t="?",n=null,r=null;return{create:function(){var i=function(){n=null,t="?",r=null};return{initURL:function(a,o){return i(),r=e.copy(a),n=r.server[o],t="?",this},processConfigQuery:function(e){for(var n in r.query)if(!1!==r.query[n]&&Object.prototype.hasOwnProperty.call(r.query,n)){let i=null;i="cid"===n?Math.round(1e6*Math.random()).toString():"pid"!==n||r.query[n].length?r.query[n]:e,null===i&&void 0!==i||!i.length||(t+=n+"="+encodeURIComponent(i)+"&",r.query[n]=i)}return this},processConfigFlags:function(e){return r.query.flags=Object.keys(e).join(","),this},processSecurity:function(){for(var e in r.security)Object.prototype.hasOwnProperty.call(r.security,e)&&r.security[e].length&&(t+=e+"="+encodeURIComponent(r.security[e])+"&");return this},buildConnectionURL:function(){return t.lastIndexOf("&")===t.length-1&&(t=t.substring(0,t.length-1)),r.url=n+t,this},reset:i,get connectionConfig(){return r}}}}}.apply(t,r))||(e.exports=i)},2706:function(e,t){var n;void 0===(n=function(){var e=null;function t(){return{server:{websocket:"",hls:"",progressive:"",webtransport:""},query:{url:"",stream:"",cid:"",pid:"",token:"",flags:""},security:null}}return{create:function(n){var r=function(){e=null};return{initConfig:function(){return r(),e=new t,n.debugEnabled()&&n.debug("set connection config",3),this},setServer:function(t){if("object"!=typeof t)return this;for(var r=["websocket","hls","progressive","webtransport"],i=0;i<r.length;i++)t[r[i]]&&"string"==typeof t[r[i]]&&0!==t[r[i]].length&&(e.server[r[i]]=t[r[i]]);return n.debugEnabled()&&n.debug("set connection server: "+JSON.stringify(e.server),3),this},setRtmp:function(t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=r.replace("name","");Object.prototype.hasOwnProperty.call(e.query,i)&&(e.query[i]=t[r],n.debugEnabled()&&n.debug("set connection config rtmp: "+i+":"+e.query[i]))}return this},setToken:function(t){return t?(Object.prototype.hasOwnProperty.call(e.query,"token")&&(e.query.token=t,n.debugEnabled()&&n.debug("set connection config token: "+e.query.token)),this):this},setQueryParams:function(t){if("object"!=typeof t)return this;for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e.query[r]=t[r],n.debugEnabled()&&n.debug("set connection param: "+r+":"+e.query[r]));return this},addQueryParam:function(t,n){return t&&(e.query[t]=n),this},setSecurity:function(t){if(t)for(var r in e.security={},n.debugEnabled()&&n.debug("set security config",3),t)Object.prototype.hasOwnProperty.call(t,r)&&t[r].length&&(e.security[r]=t[r],n.debugEnabled()&&n.debug("set security config "+r+": "+e.security[r]));return this},reset:r,get connectionConfig(){return e}}}}}.apply(t,[]))||(e.exports=n)},3763:function(e,t){var n;void 0===(n=function(){return{BASE:"",LOAD_START:"loadstart",PROGRESS:"progress",SUSPEND:"suspend",ABORT:"abort",EMPTIED:"emptied",STALLED:"stalled",PLAY:"play",PAUSE:"pause",LOADED_META_DATA:"loadedmetadata",LOADED_DATA:"loadeddata",WAITING:"waiting",ERROR:"error",PLAYING:"playing",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",ENDED:"ended",RATE_CHANGE:"ratechange",DURATION_CHANGE:"durationchange",VOLUME_CHANGE:"volumechange"}}.apply(t,[]))||(e.exports=n)},5304:function(e,t){var n;void 0===(n=function(){return{ABORT_ERROR:"AbortError",NOT_ALLOWED_ERROR:"NotAllowedError"}}.apply(t,[]))||(e.exports=n)},855:function(e,t){var n;void 0===(n=function(){return Object.freeze({MEDIA_ERR_ABORTED:MediaError.MEDIA_ERR_ABORTED,MEDIA_ERR_NETWORK:MediaError.MEDIA_ERR_NETWORK,MEDIA_ERR_DECODE:MediaError.MEDIA_ERR_DECODE,MEDIA_ERR_SRC_NOT_SUPPORTED:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED,MEDIA_ERR_HLS_VIDEO_DECODE:5,MEDIA_ERR_MEDIA_SOURCE_ENDED:100,MEDIA_ERR_HLS_BUFFER_UNDERRUN:101,MEDIA_ERR_HLS_MAX_RANGE:102,MEDIA_ERR_HLS_JUMP:1008,MEDIA_ERR_DECODE_CONFIG_ERROR:3003})}.apply(t,[]))||(e.exports=n)},5865:function(e,t){var n;void 0===(n=function(){return{BASE:"",SOURCE_OPEN:"sourceopen",SOURCE_ENDED:"sourceended",SOURCE_CLOSED:"sourceclosed"}}.apply(t,[]))||(e.exports=n)},7990:function(e,t){var n;void 0===(n=function(){return{BASE:"",ABORT:"abort",ERROR:"error",UPDATE:"update",UPDATE_START:"updatestart",UPDATE_END:"updateend"}}.apply(t,[]))||(e.exports=n)},8250:function(e,t){var n;void 0===(n=function(){var e="mediaControl.";return{BASE:e,CREATE_VIDEO:e+"createVideo",DESTROY_VIDEO:e+"destroyVideo",VIDEO_SOURCE:e+"videoSource",UPDATE_SOURCE:e+"updateSource",PLAY:e+"play",PAUSE:e+"pause",SEEK:e+"seek",MUTE:e+"mute",UNMUTE:e+"unmute",SET_VOLUME:e+"volume",SET_RATE:e+"playbackRate"}}.apply(t,[]))||(e.exports=n)},6273:function(e,t){var n;void 0===(n=function(){var e="mediaErrorHandler.";return{BASE:e,ERROR:e+"error",RECOVER:e+"recover",RECOVERED:e+"recovered",QUEUED:e+"queued",UNQUEUED:e+"unqueued"}}.apply(t,[]))||(e.exports=n)},9437:function(e,t){var n;void 0===(n=function(){var e="mediaManager.";return{BASE:e,CONFIG:e+"config",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",APPLICATION_STATE_CHANGE:e+"applicationStateChange",STARTUP_STATS_ADDED:e+"startupStatsAdded",STARTUP_STATS_COMPLETED:e+"startupStatsCompleted",DOCUMENT_VISIBLE:e+"documentVisible",DOCUMENT_HIDDEN:e+"documentHidden",NETWORK_ONLINE:e+"networkOnline",NETWORK_OFFLINE:e+"networkOffline",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_ABORT:e+"switchStreamAbort",SWITCH_STREAM_FAIL:e+"switchStreamFail",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",UPDATE_SOURCE_FAIL:e+"updateSourceFail",BUFFER_TWEAKS_CREATED:e+"bufferTweaksCreated",WEB_TRANSPORT_META_DATA:e+"wtMetaData",BUFFER_GOAL_STATS:e+"bufferGoalStats"}}.apply(t,[]))||(e.exports=n)},1667:function(e,t){var n;void 0===(n=function(){var e="statsCollector.";return{BASE:e,PLAY_STATS:e+"playStats",MEDIA_ERROR_RECOVER_STATS:e+"mediaErrorRecoverStats"}}.apply(t,[]))||(e.exports=n)},1358:function(e,t,n){var r,i;r=[n(9658),n(6627),n(6637),n(5055),n(9673),n(680),n(594),n(1376),n(8250),n(9437),n(1667),n(4856),n(5075),n(2657),n(3242),n(711),n(1264),n(6273)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l,f,m,E,p,h,g){"use strict";return{create:function(n,b){var _,T,A=new e,S=[],y=[{from:f.LOADED_META_DATA,to:o.LOADED_META_DATA},{from:f.LOADED_DATA,to:o.LOADED_DATA},{from:f.PLAYING,to:o.PLAYING},{from:f.CAN_PLAY,to:o.CAN_PLAY},{from:f.CAN_PLAY_THROUGH,to:o.CAN_PLAY_THROUGH},{from:f.DURATION_CHANGE,to:o.DURATION_CHANGE},{from:f.VOLUME_CHANGE,to:o.VOLUME_CHANGE},{from:f.PLAY_START_ABORT_ERROR,to:o.PLAY_START_ABORT_ERROR},{from:f.PLAY_START_NOT_ALLOWED_ERROR,to:o.PLAY_START_NOT_ALLOWED_ERROR},{from:f.VIEWPORT_VISIBLE,to:o.VIEWPORT_VISIBLE},{from:f.VIEWPORT_HIDDEN,to:o.VIEWPORT_HIDDEN},{from:f.UPDATE_SOURCE_ABORT,to:o.UPDATE_SOURCE_ABORT},{from:f.UPDATE_SOURCE_FAIL,to:o.UPDATE_SOURCE_FAIL},{from:f.UPDATE_SOURCE_TIMEOUT,to:o.UPDATE_SOURCE_TIMEOUT},{from:f.ACTIVE_VIDEO_ELEMENT_CHANGE,to:o.ACTIVE_VIDEO_ELEMENT_CHANGE},{from:f.SWITCH_STREAM,to:d.SWITCH_STREAM},{from:f.PLAYBACK_SUSPENDED,to:o.PLAYBACK_SUSPENDED},{from:f.OFFLINE_BUFFER_UNDERRUN,to:o.OFFLINE_BUFFER_UNDERRUN},{from:f.QUALITY_STATS,to:o.QUALITY_STATS},{from:f.FRAME_DROP,to:o.FRAME_DROP},{from:f.FRAME_CORRUPTED,to:o.FRAME_CORRUPTED},{from:f.SOURCE_ENDED,to:o.PLAYBACK_FINISHED},{from:f.PLAYBACK_STARTED,to:o.PLAYBACK_STARTED},{from:f.BUFFERING,to:o.BUFFERING},{from:f.TIME_OFFSET,to:o.TIME_OFFSET},{from:E.LOADED_META_DATA,to:o.LOADED_META_DATA},{from:E.ADJUSTED_META_DATA,to:o.ADJUSTED_META_DATA},{from:E.LOADED_DATA,to:o.LOADED_DATA},{from:E.PLAYING,to:o.PLAYING},{from:E.CAN_PLAY,to:o.CAN_PLAY},{from:E.CAN_PLAY_THROUGH,to:o.CAN_PLAY_THROUGH},{from:E.DURATION_CHANGE,to:o.DURATION_CHANGE},{from:E.VOLUME_CHANGE,to:o.VOLUME_CHANGE},{from:E.PLAY_START_ABORT_ERROR,to:o.PLAY_START_ABORT_ERROR},{from:E.PLAY_START_NOT_ALLOWED_ERROR,to:o.PLAY_START_NOT_ALLOWED_ERROR},{from:E.VIEWPORT_VISIBLE,to:o.VIEWPORT_VISIBLE},{from:E.VIEWPORT_HIDDEN,to:o.VIEWPORT_HIDDEN},{from:E.UPDATE_SOURCE_ABORT,to:o.UPDATE_SOURCE_ABORT},{from:E.UPDATE_SOURCE_FAIL,to:o.UPDATE_SOURCE_FAIL},{from:E.UPDATE_SOURCE_TIMEOUT,to:o.UPDATE_SOURCE_TIMEOUT},{from:E.ACTIVE_VIDEO_ELEMENT_CHANGE,to:o.ACTIVE_VIDEO_ELEMENT_CHANGE},{from:E.SWITCH_STREAM,to:d.SWITCH_STREAM},{from:E.PLAYBACK_SUSPENDED,to:o.PLAYBACK_SUSPENDED},{from:E.OFFLINE_BUFFER_UNDERRUN,to:o.OFFLINE_BUFFER_UNDERRUN},{from:E.QUALITY_STATS,to:o.QUALITY_STATS},{from:E.FRAME_DROP,to:o.FRAME_DROP},{from:E.FRAME_CORRUPTED,to:o.FRAME_CORRUPTED},{from:E.SOURCE_ENDED,to:o.PLAYBACK_FINISHED},{from:E.PLAYBACK_STARTED,to:o.PLAYBACK_STARTED},{from:E.BUFFERING,to:o.BUFFERING},{from:E.TIME_OFFSET,to:o.TIME_OFFSET},{from:c.PLAY_STATS,to:o.PLAY_STATS},{from:c.MEDIA_ERROR_RECOVER_STATS,to:o.MEDIA_ERROR_RECOVER_STATS},{from:g.ERROR,to:o.MEDIA_ERROR},{from:g.RECOVER,to:o.MEDIA_ERROR_RECOVER},{from:g.RECOVERED,to:o.MEDIA_ERROR_RECOVERED}],v=[{from:i.CREATE_VIDEO,to:d.CREATE_VIDEO},{from:i.DESTROY_VIDEO,to:d.DESTROY_VIDEO},{from:i.VIDEO_SOURCE,to:d.VIDEO_SOURCE},{from:i.PLAY,to:d.PLAY},{from:i.PAUSE,to:d.PAUSE},{from:i.SEEK,to:d.SEEK},{from:i.MUTE,to:d.MUTE},{from:i.UNMUTE,to:d.UNMUTE},{from:i.SET_VOLUME,to:d.SET_VOLUME},{from:i.SET_RATE,to:d.SET_RATE},{from:i.UPDATE_SOURCE,to:d.UPDATE_SOURCE},{from:i.CONFIG,to:u.CONFIG},{from:s.SERVER_INFO,to:u.SERVER_INFO},{from:s.STREAM_FRAGMENT,to:u.STREAM_FRAGMENT},{from:s.RANDOM_ACCESS_POINT,to:u.RANDOM_ACCESS_POINT},{from:s.ONLINE,to:u.NETWORK_ONLINE},{from:s.OFFLINE,to:u.NETWORK_OFFLINE},{from:s.WEB_TRANSPORT_META_DATA,to:u.WEB_TRANSPORT_META_DATA},{from:a.STATE_CHANGE,to:u.APPLICATION_STATE_CHANGE},{from:a.STARTUP_STATS_ADDED,to:u.STARTUP_STATS_ADDED},{from:a.STARTUP_STATS_COMPLETED,to:u.STARTUP_STATS_COMPLETED},{from:a.DOCUMENT_VISIBLE,to:u.DOCUMENT_VISIBLE},{from:a.DOCUMENT_HIDDEN,to:u.DOCUMENT_HIDDEN},{from:a.STREAM_INFO,to:u.STREAM_INFO},{from:a.STREAM_INFO_UPDATE,to:u.STREAM_INFO_UPDATE},{from:a.SWITCH_STREAM_INIT,to:u.SWITCH_STREAM_INIT},{from:a.SWITCH_STREAM_SUCCESS,to:u.SWITCH_STREAM_SUCCESS},{from:a.SWITCH_STREAM_ABORT,to:u.SWITCH_STREAM_ABORT},{from:a.SWITCH_STREAM_FAIL,to:u.SWITCH_STREAM_FAIL},{from:a.UPDATE_SOURCE_INIT,to:u.UPDATE_SOURCE_INIT},{from:a.UPDATE_SOURCE_SUCCESS,to:u.UPDATE_SOURCE_SUCCESS},{from:a.BUFFER_TWEAKS_CREATED,to:u.BUFFER_TWEAKS_CREATED},{from:a.BUFFER_GOAL_STATS,to:u.BUFFER_GOAL_STATS}];return _=r.create(n,A,v),T=r.create(A,n,y),t.isMediaOverQuicSupported&&b.playback.enableMediaOverQuic?S.push(p.create(A)):S.push(m.create(A)),S.push(h.create(A)),S.push(l.create(A)),{destroy:function(){for(;S.length;)S.pop().destroy();_.destroy(),_=null,T.destroy(),T=null}}}}}.apply(t,r))||(e.exports=i)},476:function(e,t,n){var r,i;r=[n(8333),n(6637),n(5698),n(291)],void 0===(i=function(e,t,n,r){return{create:function(i){var a,o=e.create("FakeAudioContext"),s=[{type:n.STREAM_INFO,listener:function(e){d(),e.data.streamInfo.haveAudio||(window.AudioContext=window.AudioContext||window.webkitAudioContext||function(){return{close:function(){}}},a=new AudioContext)}},{type:r.PAUSE,listener:d}];function d(){a&&"function"==typeof a.close&&(a.close(),a=null)}return o.debugEnabled()&&o.debug("initialize"),t.add({target:i,listeners:s}),{destroy:function(){d(),t.remove({target:i,listeners:s})}}}}}.apply(t,r))||(e.exports=i)},4972:function(e,t,n){var r,i;r=[n(8333),n(6627),n(6637),n(6273),n(5698),n(9804),n(1447),n(855),n(492)],void 0===(i=function(e,t,n,r,i,a,o,s,d){return{create:function(r){var u,c=e.create("FrameCorruptedHandler"),l=!1,f=!1,m=!1,E=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(u=e.data.state){case d.PLAYING:case d.BUFFERING:break;case d.PAUSED:m=!1}}},{type:i.CONFIG,listener:function(e){f=t.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&t.canUseHLS}},{type:i.DOCUMENT_VISIBLE,listener:p},{type:i.DOCUMENT_HIDDEN,listener:p},{type:o.FRAME_CORRUPTED,listener:function(e){if(!m&&(c.debugEnabled()&&c.debug("frame corrupted"),c.debugEnabled()&&c.debug(JSON.stringify(e.data)),"extreme"===e.data.type&&!l&&f&&u===d.PLAYING)){c.debugEnabled()&&c.debug("visible and extreme frame corrupted detected (hls)");var t={code:s.MEDIA_ERR_HLS_VIDEO_DECODE};r.emit(a.ERROR,t)}}},{type:i.MEDIA_ERROR_RECOVER,listener:function(){c.debugEnabled()&&c.debug("media error recover"),m=!0}},{type:i.MEDIA_ERROR_RECOVERED,listener:function(){c.debugEnabled()&&c.debug("media error recovered"),m=!1}}];function p(e){l=e.name===i.DOCUMENT_HIDDEN,c.debug(l?"hidden":"visible")}return c.debugEnabled()&&c.debug("initialize"),n.add({target:r,listeners:E}),{destroy:function(){n.remove({target:r,listeners:E})}}}}}.apply(t,r))||(e.exports=i)},1705:function(e,t,n){var r,i;r=[n(8333),n(6637),n(5698),n(683),n(1447),n(5997),n(492)],void 0===(i=function(e,t,n,r,i,a,o){return{create:function(s){var d,u=e.create("FrameDropHandler"),c=[],l=!1,f=0,m=[{type:n.APPLICATION_STATE_CHANGE,listener:function(e){switch(d=e.data.state){case o.PLAYING:case o.BUFFERING:break;case o.PAUSED:h()}}},{type:n.RANDOM_ACCESS_POINT,listener:function(e){for(c.push(e.data.onRandomAccessPoint.streamTime/1e3+f/1e3);c.length>10;)c.shift()}},{type:r.TIME_OFFSET,listener:function(e){f=e.data.offset}},{type:i.FRAME_DROP,listener:function(e){var t;u.debugEnabled()&&u.debug("frame drop"),u.debugEnabled()&&u.debug(JSON.stringify(e.data)),"extreme"!==e.data.type||l||d!==o.PLAYING||(u.debugEnabled()&&u.debug("visible and extreme frame drop detected (edge)"),u.debugEnabled()&&u.debug("try seeking to last RAP to get stable playback"),t=c.length?c[c.length-1]:0,u.debugEnabled()&&u.debug("seeking to "+t),s.emit(n.SEEK,{position:t}))}}],E=[{type:a.VIEWPORT_VISIBLE,listener:p},{type:a.VIEWPORT_HIDDEN,listener:p}];function p(e){l=e.name!==a.VIEWPORT_VISIBLE,u.debugEnabled()&&u.debug("viewport changed to "+(l?"hidden":"visible"))}function h(){for(;c.length;)c.shift();f=0}return u.debugEnabled()&&u.debug("initialize"),h(),t.add({target:s,listeners:m}),t.add({target:s,listeners:E}),{destroy:function(){t.remove({target:s,listeners:m}),t.remove({target:s,listeners:E})}}}}}.apply(t,r))||(e.exports=i)},2885:function(e,t,n){var r,i;r=[n(8333),n(6627),n(6637),n(5698),n(291),n(5980),n(492)],void 0===(i=function(e,t,n,r,i,a,o){return{create:function(s){var d,u,c=.3,l=e.create("GapHandler"),f=0,m=0,E=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){d=e.data.state,n.remove({target:s,listeners:p}),(t.isTridentBrowser&&d===o.PLAYING||!t.isTridentBrowser&&d!==o.BUFFERING&&d!==o.PAUSED)&&(f=0,n.add({target:s,listeners:p}))}}],p=[{type:a.PRIVATE_MEDIA_STATS,listener:function(e){if(function(e){return e&&e.length>0}(e.data.mediaStats.buffered)){var t=e.data.mediaStats.buffered,n=e.data.mediaStats.exactCurrentTime,r=g(n,t),a=function(e,t){for(var n=0;t&&n<t.length-1&&t.start(n)<=e;)n++;return n}(n,t),o=function(e){return e&&e.length-1}(t),d=(v=u,R=n,Math.abs(v-R)<.001),E=function(e,t){var n=g(e,t);return t&&n<t.length-1&&e>t.end(n)&&e<t.start(n+1)}(n,t);if(0<m&&m--,d||E){var p=!1,_="",T=void 0;if(f<10&&f++,0<m||f<2)return;var A=.1*f;if(a>r&&b(t,a)>c&&h(n,t,A)?(p=!0,_="next",T=t.start(a)):a>r&&o>a&&b(t,a)<c&&b(t,o)>c&&h(n,t,A)?(p=!0,_="last",T=t.start(o)):a===r&&b(t,o)>c&&function(e,t){return t&&e<t.start(g(e,t))}(n,t)?(p=!0,_="current",T=t.start(r)):10===f&&(p=!0,_="max",T=n+.1),p&&!isNaN(T)){if(l.debugEnabled()){var S=T-n,y=t.end(r)-n;l.debug("seek from/to "+n.toFixed(3)+"/"+T.toFixed(3)+" equalTime:"+d+" betweenRanges:"+E+" target:"+_+" "+S.toFixed(3)+" "+y.toFixed(3),3),function(e,t){for(var n=e,r="ranges";n<t.length;)r+=" "+t.start(n).toFixed(3)+"-"+t.end(n).toFixed(3),n++;l.debug(r,3)}(r,t)}s.emit(i.SEEK,{position:T}),s.emit(i.PLAY,{external:!1}),m=10,f=0}}else f=0;u=n}var v,R}}];function h(e,t,n){return t&&e+n>=t.end(g(e,t))}function g(e,t){for(var n=0;t&&n<t.length-1&&t.start(n+1)<=e;)n++;return n}function b(e,t){return e&&t<e.length?e.end(t)-e.start(t):0}return l.debugEnabled()&&l.debug("initialize"),n.add({target:s,listeners:E}),{destroy:function(){n.remove({target:s,listeners:E}),n.remove({target:s,listeners:p})}}}}}.apply(t,r))||(e.exports=i)},3824:function(e,t,n){var r,i;r=[n(8333),n(6627),n(8197),n(6835),n(6637),n(6273),n(5698),n(5997),n(4210),n(291),n(7628),n(3778),n(3890),n(492),n(5493)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l,f,m,E){var p=e.create("MediaElementHandler");return{create:function(e){var a,h,g,b,_,T,A,S,y,v,R,O,I,C,N,D,w,U,M,P,L,F,x,k,B,H=[{type:o.CONFIG,listener:function(e){var n;Se(e)&&(n=e.data.config,_=n,a=t.mustUseHLS||_.playback.allowSafariHlsFallback&&t.canUseHLS,h=0,L=0,Ke(A=_.source.startIndex),_.playback&&(Y=!!_.playback.muted,q=!!_.playback.automute,Q=_.playback.crossOrigin,z=_.playback.volume))}},{type:u.CREATE_VIDEO,listener:function(t){var n,r;Se(t)&&(t.data.elementIds&&(N=t.data.elementIds),t.data.container&&(D=t.data.container)),L=N.length;for(var i=0;i<L;i++)r={elementId:N[i],index:i},n=c.create(e,r.elementId,D,r.index,a,Y,q,!1,z,Q),G.push(n),ae[i]=[];e.emit(s.ELEMENT_CREATED,{video:pe(G[h])}),he(G[h],z),e.emit(s.VOLUME_CHANGE,{muted:Y,volume:z}),ge(G[h]),Ve(h),_e(G[h]),k=je(),B=je()}},{type:u.DESTROY_VIDEO,listener:function(){for(var e=0;e<G.length;e++)(t=G[e])?t.destroyVideo():p.debugEnabled()&&p.debug("mediaElement could not be found");var t}},{type:u.VIDEO_SOURCE,listener:function(e){var t,n,r=Be();p.debugEnabled()&&p.debug("received video source"),p.debugEnabled()&&p.debug("src: "+e.data.src),p.debugEnabled()&&p.debug("type: "+e.data.type),Se(e)&&(O=R||e.data.src,t=!(R=e.data.src).length,I=e.data.type,n=(r||j)&&W?C:h,p.debugEnabled()&&p.debug("sourceTemplate set"),G.length&&(!a||a&&(t||!F&&(W&&j||!W&&!j)))&&(Me(G[n]),Pe(G[n]),a||Ae(G[n]),a&&j&&fe(G[C]),W&&!t&&(p.debugEnabled()&&p.debug("call play while playing after video source received"),ce(G[n],void 0,r)),ve(),Re(),t||(p.debugEnabled()&&p.debug("add time update interval for play stats"),Oe(),void 0!==Ee(G[n])&&(p.debugEnabled()&&p.debug("add quality update interval"),Ie()))))}},{type:u.PLAY,listener:function(e){if(G[h]){if(a){ge(G[h]);var t=h?0:1;be(G[t]),(!e||e&&e.data.external)&&((n=G[t])?(n.setMute(),n.unlock()):p.debugEnabled()&&p.debug("mediaElement could not be found")),(!e||e&&e.data.external)&&!Y&&ue()}var n;p.debugEnabled()&&p.debug("onPlay index: "+h),ce(G[h],e,!1),!isNaN(C)&&Te(G[C])&&e.data.buffer&&(p.debugEnabled()&&p.debug("call raw play on paused switch element after buffering during switch"),ce(G[C],e,!1))}else p.debugEnabled()&&p.debug("mediaElement could not be found")}},{type:u.PAUSE,listener:function(e){p.debugEnabled()&&p.debug("onPause index: "+h),le(G[h],e,e.data.buffer),isNaN(C)||le(G[C],e,e.data.buffer),e.data.buffer||(Ye(),p.debugEnabled()&&p.debug("reset time offset"),k=je()),function(){for(var e in ae)if(Object.prototype.hasOwnProperty.call(ae,e))for(;ae[e].length;)ae[e].pop()}()}},{type:u.MUTE,listener:function(){p.debugEnabled()&&p.debug("mute index: "+h),fe(G[h],!0)}},{type:u.UNMUTE,listener:ue},{type:u.SEEK,listener:function(e){p.debugEnabled()&&p.debug("onSeek index: "+h),function(e,t){e?e.seek(t):p.debugEnabled()&&p.debug("mediaElement could not be found")}(G[h],e)}},{type:u.SET_VOLUME,listener:function(e){Se(e)&&(p.debugEnabled()&&p.debug("onSetVolume index: "+h),z=Math.min(1,Math.max(0,e.data.volume)),he(G[h],z))}},{type:u.SET_RATE,listener:function(e){if(Se(e)){p.debugEnabled()&&p.debug("onSetRate index: "+h);var t=e.data.rate;!function(e,t){e?e.setRate(t):p.debugEnabled()&&p.debug("mediaElement could not be found")}(G[h],t)}}},{type:d.LOAD_START,listener:de},{type:d.PROGRESS,listener:de},{type:d.SUSPEND,listener:de},{type:d.ABORT,listener:de},{type:d.EMPTIED,listener:de},{type:d.STALLED,listener:de},{type:d.PLAY,listener:de},{type:d.PAUSE,listener:de},{type:d.LOADED_META_DATA,listener:de},{type:d.LOADED_DATA,listener:de},{type:d.WAITING,listener:de},{type:d.ERROR,listener:de},{type:d.PLAYING,listener:de},{type:d.CAN_PLAY,listener:de},{type:d.CAN_PLAY_THROUGH,listener:de},{type:d.SEEKING,listener:de},{type:d.SEEKED,listener:de},{type:d.TIME_UPDATE,listener:de},{type:d.QUALITY_UPDATE,listener:de},{type:d.ENDED,listener:de},{type:d.RATE_CHANGE,listener:de},{type:d.DURATION_CHANGE,listener:de},{type:d.VOLUME_CHANGE,listener:de},{type:d.ELEMENT_CREATED,listener:de},{type:d.PLAY_START_SUCCESS,listener:de},{type:d.PLAY_START_ABORT_ERROR,listener:de},{type:d.PLAY_START_NOT_ALLOWED_ERROR,listener:de},{type:d.VIEWPORT_VISIBLE,listener:de},{type:d.VIEWPORT_HIDDEN,listener:de},{type:o.SWITCH_STREAM_INIT,listener:function(e){W&&Le(e)}},{type:o.SWITCH_STREAM_SUCCESS,listener:function(e){a&&Se(e)&&(W?w&&e.data.id===w.id&&j&&(K=!0,j=!1,(J=!0)&&p.debugEnabled()&&p.debug("initialized true - onSwitchStreamSuccess"),Ke(w.entry.index)):Object.prototype.hasOwnProperty.call(e.data,"entry")&&Object.prototype.hasOwnProperty.call(e.data.entry,"index")&&Ke(e.data.entry.index))}},{type:o.UPDATE_SOURCE_INIT,listener:function(e){W&&(Le(e),M=void 0)}},{type:o.UPDATE_SOURCE_SUCCESS,listener:function(e){a&&Se(e)&&(W?w&&e.data.id===w.id&&j&&(K=!0,j=!1,(J=!0)&&p.debugEnabled()&&p.debug("initialized true - onUpdateSourceSuccess"),Ke(P)):Object.prototype.hasOwnProperty.call(e.data,"source")&&Object.prototype.hasOwnProperty.call(e.data.source,"startIndex")&&Ke(e.data.source.startIndex))}},{type:o.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case m.PAUSED:(j||K)&&void 0!==C&&-1===[E.BUFFER,E.STREAM_NOT_FOUND].indexOf(e.data.reason)?(ge(G[C]),be(G[h]),Ve(C),h=C,F?(Ke(F.source.startIndex),A=F.source.startIndex):Ke(P),we(),De(),F=void 0):(be(G[C]),we(),De(),E.STREAM_NOT_FOUND===e.data.reason&&M&&(Ke(M),M=void 0)),W=!1,(J=!1)&&p.debugEnabled()&&p.debug("initialized true - mediaElementPrepareSwitch"),ie=!1,ze(!1),Qe(!1),Je(!1),Xe(!1),$e(!1),Ze(!1),qe(!1);break;case m.PLAYING:}}},{type:o.MEDIA_ERROR_RECOVER,listener:function(t){if(p.debugEnabled()&&p.debug("media error recover"),a)switch(p.debugEnabled()&&p.debug("recovering..."),ze(t.data.code),t.data.code){case l.MEDIA.DECODE_ERROR:p.debugEnabled()&&p.debug("switch stream to recover after media error decode error"),e.emit(s.SWITCH_STREAM,{type:"recover"});break;case l.MEDIA.HLS_VIDEO_DECODE_ERROR:p.debugEnabled()&&p.debug("switch stream to recover after media error hls video decode error"),e.emit(s.SWITCH_STREAM,{type:"recover"});break;case l.MEDIA.HLS_BUFFER_UNDERRUN:t.data.reconnect?(p.debugEnabled()&&p.debug("get timeOffset from previous stats after media error hls ended"),Ge(V[0]),p.debugEnabled()&&p.debug("switch stream to recover after media error hls ended"),e.emit(s.SWITCH_STREAM,{type:"recover"})):(p.debugEnabled()&&p.debug("call raw play to recover after media error hls ended"),Ge(),ce(G[h],{data:{hlsended:!0}},!1),te&&ne&&(p.debugEnabled()&&p.debug("was canPlay during switch & media error queued"),Ze(!1),Qe(!0)));break;case l.MEDIA.HLS_MAX_RANGE:p.debugEnabled()&&p.debug("get timeOffset from previous stats after media error playback error"),Ge(V[0]),p.debugEnabled()&&p.debug("switch stream to recover after media error hls max range"),e.emit(s.SWITCH_STREAM,{type:"recover"});break;case l.PLAYER.PLAYBACK_ERROR:p.debugEnabled()&&p.debug("get timeOffset from previous stats after media error playback error"),Ge(V[0]),p.debugEnabled()&&p.debug("call raw pause after media error playback error"),le(G[h],{data:{error:!0}},!0),p.debugEnabled()&&p.debug("switch stream to recover after media error playback error"),e.emit(s.SWITCH_STREAM,{type:"recover"})}}},{type:o.MEDIA_ERROR_QUEUED,listener:function(e){if(p.debugEnabled()&&p.debug("media error queued"),qe(!0),j)switch(p.debugEnabled()&&p.debug("media error queued & switch initialized"),e.data.code){case l.MEDIA.HLS_VIDEO_DECODE_ERROR:case l.MEDIA.HLS_BUFFER_UNDERRUN:break;case l.PLAYER.PLAYBACK_ERROR:le(G[h],{data:{error:!0}},!0)}}},{type:o.MEDIA_ERROR_UNQUEUED,listener:function(){p.debugEnabled()&&p.debug("media error unqueued"),qe(!1),Ze(!1)}}],V=[],G=[],W=!1,Y=!1,j=!1,K=!1,z=1,q=!1,Q="not-set",J=!1,X=!1,$=!1,Z=!1,ee=!1,te=!1,ne=!1,re=!1,ie=!1,ae={0:[]},oe=!1,se=!1;function de(t){if(t&&t.name&&t.data){var n=t.data.index;v=_e(G[n]);var i=t.data,o=tt(v,t.data,!1),u=t.name,c=function(e){return"mediaElementHandler."+function(e){var t=e.indexOf(".")+1;return e.substring(t)}(e)}(u);if(u!==d.TIME_UPDATE)for(ae[n].unshift(u);ae[n].length>20;)ae[n].pop();if(h===n)switch(u){case d.SEEKING:ie===l.MEDIA.HLS_BUFFER_UNDERRUN&&Xe(!0),e.emit(c,o);break;case d.SEEKED:ie===l.MEDIA.HLS_BUFFER_UNDERRUN&&$e(!0),e.emit(c,o);break;case d.CAN_PLAY:if(ie===l.MEDIA.HLS_BUFFER_UNDERRUN){if(Te(G[n])&&(p.debugEnabled()&&p.debug("video paused at can play in recovery on current media element"),p.debugEnabled()&&p.debug("call raw play"),ce(G[n],{data:{hlsended:!0}},!1)),ee&&V[0].currentTime>i.currentTime&&i.currentTime<1)return Xe(!1),$e(!1),p.debugEnabled()&&p.debug("pause because seek back during buffer recovery detected"),le(G[h],{data:{error:!0}},!0),p.debugEnabled()&&p.debug("switch stream to recover after seek back during buffering"),void e.emit(s.SWITCH_STREAM,{index:U,type:"recover"});p.debugEnabled()&&p.debug("now wait for progress for completion"),Qe(!0)}J||(!a||j||!W)&&a||(e.emit(c,o),(J=!0)&&p.debugEnabled()&&p.debug("initialized true - onMediaElementEvent CAN_PLAY on currentMediaElementIndex: "+h),we()),Ze(!(!j||!ne));break;case d.PROGRESS:ie&&!j&&ie===l.MEDIA.HLS_BUFFER_UNDERRUN&&X&&(Te(G[n])||(p.debugEnabled()&&p.debug("video not paused & wait for progress in recovery on current media element"),Z&&!ee?p.debugEnabled()&&p.debug("ongoing seek, wait for seeked in next progress"):Z&&ee?(p.debugEnabled()&&p.debug("media error "+ie+" recovered in progress after seek"),Xe(!1),$e(!1),e.emit(s.MEDIA_ERROR_RECOVERED,{data:{code:ie}}),ze(!1),Qe(!1),p.debugEnabled()&&p.debug("merge pending time offset after seeked"),We(!0),Ye()):Z||ee||(p.debugEnabled()&&p.debug("media error "+ie+" recovered in progress without seek"),e.emit(s.MEDIA_ERROR_RECOVERED,{data:{code:ie}}),ze(!1),Qe(!1),Ye()))),e.emit(c,o);break;case d.PAUSE:ie===l.MEDIA.HLS_BUFFER_UNDERRUN&&p.debugEnabled()&&p.debug("pause event during recovery of 3101"),e.emit(c,o);break;default:e.emit(c,o)}else if(n===C&&C!==h&&W)switch(p.debugEnabled()&&p.debug("onMediaElementEvent switchMediaElementIndex: "+C),u){case d.PLAY:case d.DURATION_CHANGE:case d.LOADED_META_DATA:case d.LOADED_DATA:e.emit(c,o);break;case d.CAN_PLAY:p.debugEnabled()&&p.debug("onMediaElementEvent CAN_PLAY on switchMediaElementIndex: "+C),J||(p.debugEnabled()&&p.debug("onMediaElementEvent emit CAN_PLAY"),e.emit(c,o),(J=!0)&&p.debugEnabled()&&p.debug("initialized true - onMediaElementEvent CAN_PLAY on switchMediaElementIndex: "+C));break;case d.CAN_PLAY_THROUGH:p.debugEnabled()&&p.debug("onMediaElementEvent CAN_PLAY_THROUGH on switchMediaElementIndex: "+C),K&&(p.debugEnabled()&&p.debug("onMediaElementEvent CAN_PLAY_THROUGH wait for progress"),Je(!0),e.emit(c,o));break;case d.PROGRESS:p.debugEnabled()&&p.debug("onMediaElementEvent PROGRESS on switchMediaElementIndex: "+C),K&&$&&(p.debugEnabled()&&p.debug("onMediaElementEvent PROGRESS call mediaElementSwitch"),Je(!1),function(){if(a&&void 0!==C&&K)if(p.debugEnabled()&&p.debug("switch mediaElement after successfull "+(Be()?"updateSource":"switchStream")),se)p.debugEnabled()&&p.debug("there is a lock on media element switch, skipping the execution");else{p.debugEnabled()&&p.debug("starting to complete switch"),et(!0),De();var e=Ue.bind(this,G[C]),t=ye.bind(this,G[C]);r.performInSyncedUIBehavior(e,t,150).then((function(){try{p.debugEnabled()&&p.debug("switch mediaElement UI preparation is done"),Fe(),et(!1)}catch(e){p.debugEnabled()&&p.debug("error in performInSyncedUIBehavior success calback")}})).catch((function(){try{p.debugEnabled()&&p.debug("switch mediaElement UI preparation is failed"),Fe(),et(!1)}catch(e){p.debugEnabled()&&p.debug("error in performInSyncedUIBehavior catch calback")}}))}}());break;case d.PLAYING:e.emit(c,o)}}}function ue(){p.debugEnabled()&&p.debug("unmute index: "+h);for(var e=0;e<G.length;e++)me(G[e],!0);setTimeout((function(){for(var e=0;e<G.length;e++)e!==h&&fe(G[e],!1)}),50)}function ce(e,t,n){e?(e.play(t),n||(W=!0)):p.debugEnabled()&&p.debug("mediaElement could not be found")}function le(e,t,n){e?(e.pause(t),n||(W=!1)):p.debugEnabled()&&p.debug("mediaElement could not be found")}function fe(e,t){e?(t&&(Y=!0),e.setMute()):p.debugEnabled()&&p.debug("mediaElement could not be found")}function me(e,t){e?(t&&(Y=!1),e.setUnmute()):p.debugEnabled()&&p.debug("mediaElement could not be found")}function Ee(e){if(e)return e.getVideoPlaybackQuality();p.debugEnabled()&&p.debug("mediaElement could not be found")}function pe(e){if(e)return e.getVideoElement();p.debugEnabled()&&p.debug("mediaElement could not be found")}function he(e,t){e?(e.setVolume(t),z=t):p.debugEnabled()&&p.debug("mediaElement could not be found")}function ge(e){e?e.show():p.debugEnabled()&&p.debug("mediaElement could not be found")}function be(e){e?e.hide():p.debugEnabled()&&p.debug("mediaElement could not be found")}function _e(e){return e?(oe||(x=e.getMediaElementPayload()),x.timeOffset=k,x):(p.debugEnabled()&&p.debug("mediaElement could not be found"),{index:0})}function Te(e){if(e)return e.getVideoPausedState();p.debugEnabled()&&p.debug("mediaElement could not be found")}function Ae(e){e?e.loadVideo():p.debugEnabled()&&p.debug("mediaElement could not be found")}function Se(e,t){var n=e&&Object.prototype.hasOwnProperty.call(e,"data");return t?n&&Object.prototype.hasOwnProperty.call(e.data,t):n}function ye(e){return e?e.isShownOnTop():(p.debugEnabled()&&p.debug("mediaElement could not be found"),!1)}function ve(){clearInterval(g),g=void 0}function Re(){clearInterval(b),b=void 0}function Oe(){g=setInterval(Ce,100)}function Ie(){b=setInterval(Ne,1e3)}function Ce(){for(S=_e(G[h]);V.length>2;)V.shift();V.push(S),e.emit(d.TIME_UPDATE,S)}function Ne(){(y=_e(G[h])).quality=Ee(G[h]),e.emit(d.QUALITY_UPDATE,y)}function De(){T&&(clearTimeout(T),T=0)}function we(){p.debugEnabled()&&p.debug("reset switch variables"),C=void 0,(J=!0)&&p.debugEnabled()&&p.debug("initialized true - resetSwitchVariables"),j=!1,K=!1,w=void 0,P=void 0}function Ue(e){e&&e.showOnTop()}function Me(e,t){e&&e.setSource({source:t?O:R})}function Pe(e){e&&e.setType({type:I})}function Le(e){var t,r,i,o;if(a&&Se(e)&&Object.prototype.hasOwnProperty.call(e.data,"entry"))if(i=e.data.entry.index,t=F?"update"===F.type:Be(),r="update"===e.data.type,p.debugEnabled()&&p.debug((r?"updateSourceInit":"switchStreamInit")+" with entryIndex: "+i),re)p.debugEnabled()&&p.debug((r?"updating":"switching")+" is disabled, abort");else{if(!r&&ie&&"recover"!==e.data.type)return p.debugEnabled()&&p.debug("abort switch attempt during recovery"),(o=n.copy(e.data)).reason="recover",void ke(o);if(j&&(!t||t&&r)||F&&(!t||t&&r))p.debugEnabled()&&p.debug("abort ongoing "+(t?"update":"switch")+" process"),(o=n.copy(F||w)).reason="superseded",ke(o),De(),F?F=void 0:(le(G[C],void 0,!0),we());else if(j&&t&&!r||F&&t&&!r)return void(p.debugEnabled()&&p.debug("ongoing updateSource process!"));r||U!==i||"recover"===e.data.type?(p.debugEnabled()&&p.debug("new "+(r?"update":"switch")),K?(p.debugEnabled()&&p.debug("do not handle switch, still ongoing switch!"),p.debugEnabled()&&p.debug("add to queue!"),F=e.data):(p.debugEnabled()&&p.debug("handle switch without ongoing"),He(e.data,i,r))):(p.debugEnabled()&&p.debug("abort switch attempt on equal index"),(o=n.copy(e.data)).reason="equalsource",we(),De(),ke(o)),re=!0,setTimeout((function(){re=!1}),500)}}function Fe(){p.debugEnabled()&&p.debug("starting to swap media elements"),ge(G[C]),be(G[h]),Ve(C),pe(G[h])&&(Y=pe(G[h]).muted),fe(G[h]),Y?fe(G[C]):me(G[C]),ie&&(p.debugEnabled()&&p.debug("media error "+ie+" recovered in switch success"),e.emit(s.MEDIA_ERROR_RECOVERED,{data:{code:ie}}),ze(!1)),oe||Ge(),We(!0),Ye(),p.debugEnabled()&&p.debug("handle switch pause on currentMediaElementIndex: "+h),le(G[h],void 0,!0),he(G[C],z),h=C,F?(K=!1,function(){if(F){var e="update"===F.type,t=F.entry.index,r=n.copy(F);F=void 0,p.debugEnabled()&&p.debug("handleQueuedSwitch"),He(r,t,e,!0)}}()):we()}function xe(){if(void 0!==C&&C!==h&&j&&!K){var t=n.copy(w);le(G[C],void 0,!0),Be()&&(Ke(void 0),e.emit(s.UPDATE_SOURCE_TIMEOUT,{code:l.STREAM.MEDIA_NOT_AVAILABLE,message:f.STREAM.MEDIA_NOT_AVAILABLE})),F=void 0,we(),function(t){e.emit(s.UPDATE_SOURCE_FAIL,{tag:t.options.tag,count:t.options.count,code:l.NETWORK.SOURCE_TIMEOUT,message:f.NETWORK.SOURCE_TIMEOUT,type:t.type,id:t.id})}(t)}}function ke(t){setTimeout((function(){e.emit(s.UPDATE_SOURCE_ABORT,{source:t.source,entry:t.entry,rule:t.rule,reason:t.reason,tag:t.tag,count:t.count,type:t.type,id:t.id})}),0)}function Be(){return w&&Object.prototype.hasOwnProperty.call(w,"type")&&"update"===w.type}function He(e,t,n,r){C=h?0:1,p.debugEnabled()&&p.debug("mediaElementPrepareSwitch on switchMediaElementIndex: "+C),(J=!1)&&p.debugEnabled()&&p.debug("initialized true - mediaElementPrepareSwitch"),j=!0,w=e,n?(A=w.source.startIndex,P=A,r&&(Me(G[C],A),Pe(G[C]),a||Ae(G[C]),a&&j&&fe(G[C]),ce(G[C],void 0,!0),ve(),Re(),R.length&&(p.debugEnabled()&&p.debug("add time update interval for play stats"),Oe(),void 0!==Ee(G[C])&&(p.debugEnabled()&&p.debug("add quality update interval"),Ie())))):W&&(C=h?0:1,P=t,r&&(Me(G[C],t),Pe(G[C]),a||Ae(G[C]),a&&j&&fe(G[C]),ce(G[C],void 0,!0))),W&&function(e){T&&De();var t=e&&Object.prototype.hasOwnProperty.call(e,"options")&&Object.prototype.hasOwnProperty.call(e.options,"timeout")?1e3*e.options.timeout:1e4;T=setTimeout((function(){xe()}),t)}(w)}function Ve(t){for(var n=G.map((function(e){return e.getVideoElement()})),r=0;r<n.length;r+=1)void 0!==typeof n[r]&&n[r]||n.pop();n.length-1<t&&(t=-1),e.emit(s.ACTIVE_VIDEO_ELEMENT_CHANGE,{videoElementList:n,activeVideoElement:t<0?null:n[t]})}function Ge(e){p.debugEnabled()&&p.debug("set pending time offset"),e||(e=_e(G[h])),oe=!0,B.currentTime=e.currentTime,p.debugEnabled()&&p.debug("new pending time offset: "+JSON.stringify(B))}function We(e){p.debugEnabled()&&p.debug("apply pending time offset"),k=tt(k,B,e),p.debugEnabled()&&p.debug("new time offset: "+JSON.stringify(k))}function Ye(){p.debugEnabled()&&p.debug("reset pending time offset"),oe=!1,B=je()}function je(){return!!a&&{currentTime:0}}function Ke(e){M=U,U=e}function ze(e){p.debugEnabled()&&p.debug("set inRecovery to "+e),ie=e}function qe(e){p.debugEnabled()&&p.debug("set isMediaErrorQueued to "+e),ne=e}function Qe(e){p.debugEnabled()&&p.debug("set waitForProgress to "+e),X=e}function Je(e){p.debugEnabled()&&p.debug("set waitForProgressSwitch to "+e),$=e}function Xe(e){p.debugEnabled()&&p.debug("set wasSeeking to "+e),Z=e}function $e(e){p.debugEnabled()&&p.debug("set wasSeeked to "+e),ee=e}function Ze(e){p.debugEnabled()&&p.debug("set wasCanPlayDuringSwitch to "+e),te=e}function et(e){p.debugEnabled()&&p.debug("set lockMediaElementSwitch to "+e),se=e}function tt(e,t,n){for(var r in t)"object"!=typeof t[r]?Object.prototype.hasOwnProperty.call(e,r)&&!n||(n?e[r]+=t[r]:e[r]=t[r]):(Object.prototype.hasOwnProperty.call(e,r)||(e[r]={}),tt(e[r],t[r],n));return e}return i.add({target:e,listeners:H}),{destroy:function(){Re(),ve(),i.remove({target:e,listeners:H}),function(e){if(e){for(var t=0;t<e.length;t++)e[t].destroy();Ve(-1),e=[]}else p.debugEnabled()&&p.debug("mediaElement could not be found")}(G)}}}}}.apply(t,r))||(e.exports=i)},7022:function(e,t,n){var r,i;r=[n(8333),n(6627),n(6637),n(6273),n(5698),n(560),n(5980),n(291),n(492)],void 0===(i=function(e,t,n,r,i,a,o,s,d){return{create:function(r){var u,c,l=e.create("MediaElementPlaybackControl"),f={},m={},E=!1,p=!0,h=!1,g=!1,b=-1,_=null,T=[],A=[],S=!0,y=0,v=!1,R=.2,O=.2,I=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(u=e.data.state,_=null,u){case d.PLAYING:c=!1;break;case d.LOADING:l.debugEnabled()&&l.debug("add play state listeners"),n.add({target:r,listeners:C});break;case d.PAUSED:c=!1;break;case d.PAUSING:n.remove({target:r,listeners:C}),l.warnEnabled()&&l.warn("entering paused state"),b=-1,E=!1,S=!1,p=!0,v=!1}}},{type:i.STARTUP_STATS_COMPLETED,listener:function(e){_=e.data}},{type:i.STREAM_INFO,listener:N},{type:i.STREAM_INFO_UPDATE,listener:N},{type:i.CONFIG,listener:function(e){h=t.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&t.canUseHLS}},{type:i.BUFFER_TWEAKS_CREATED,listener:function(e){l.debugEnabled()&&l.debug("buffer tweaks created"),u===d.PLAYING&&f.buffer&&f.buffer.start<e.data.tweaks.buffer.start&&setTimeout((function(){S=!1,p=!0,l.debugEnabled()&&l.debug("new tweaks, pausing to raise buffer"),M(),w()}),10),f.buffer=e.data.tweaks.buffer,O=f.buffer.start-f.buffer.min>=.5?.2:0}},{type:s.PLAY,listener:function(e){l.debugEnabled()&&l.debug("on play"),setTimeout((function(){-1===b&&e.data.external&&!e.data.invalidState&&(h?g=!0:D())}),10)}},{type:i.MEDIA_ERROR_RECOVER,listener:function(){l.debugEnabled()&&l.debug("media error recover"),c=!0}},{type:i.MEDIA_ERROR_RECOVERED,listener:function(){l.debugEnabled()&&l.debug("media error recovered"),c=!1}}],C=[{type:o.PRIVATE_MEDIA_STATS,listener:function(e){if(!(m=e.data.mediaStats).buffered||!m.buffered.length)return l.detailEnabled()&&l.detail("no data in play stats"),void(h&&g&&isFinite(m.duration)&&(g=!1,D()));var n=m.exactCurrentTime;L(T,n,5);var i=P(T),o=m.buffered,d=function(e,n){for(var r=0;e&&r<e.length;++r)if(e.start(r)<=n+1e-6&&e.end(r)>=n-1e-6||t.isTridentBrowser&&n<=.3&&e.start(r)<=5&&e.end(r)-e.start(r)>.2)return r;return-1}(o,n),u={startRange:o.start(o.length-1),endRange:o.end(o.length-1),rangeLength:o.end(o.length-1)-o.start(o.length-1),rangeIndex:d,hasRangeIndex:-1!==d,bufferedPartsCount:o.length},I=h&&!E?u.endRange-n:m.bufferDelay;L(A,m.bufferEnd,5);var C=P(A),N={currentTime:n,bufferDelayCurrent:I,hasEnoughToStart:I>=f.buffer.start-R,hasEnoughToResume:I>=f.buffer.start-O,hasEnoughPrerollToStart:I>=y-(f.buffer.start-R-f.buffer.min),hasStartHigherPreroll:f.buffer.start-R>y,hasEnoughToPlay:I>f.buffer.min,bufferLength:m.bufferEnd-m.bufferStart,bothCurrentTimeAndBufferEndNotMoving:i&&C,currentTimeNotMoving:i,bufferEndNotMoving:C};null===function(e,n){var r=null;return!h&&!e.hasRangeIndex&&!E&&n.bufferLength>.45?(r=Math.min(e.startRange+.3,e.endRange),U(t.isTridentBrowser?0:r,"seek to range: "+e.startRange+" < "+r+" > "+e.endRange+", currentTime: "+n.currentTime)):!h&&!E&&t.isFirefox&&e.bufferedPartsCount>1&&e.rangeIndex!==e.bufferedPartsCount-1&&e.rangeLength>.3&&U(r=e.startRange,"seek to startable range start: "+r),r}(u,N)&&(function(e,n,r,i){if(-1===b&&e.hasRangeIndex&&n.hasEnoughToStart){l.debugEnabled()&&l.debug("start buffer of "+(r.buffer.start-R)+" reached");var a=!h&&t.isSafari,o=a&&n.currentTime<.2;if(!y||y&&n.hasStartHigherPreroll){if(l.debugEnabled()&&l.debug(" start buffer case"),o)return U(b=.3,"initial safari stream startTime set to "+b+", seeking",!0),!0;b=n.currentTime,l.debugEnabled()&&l.debug("default stream startTime set to "+b)}else if(y&&n.hasEnoughPrerollToStart&&!n.hasStartHigherPreroll&&(l.debugEnabled()&&l.debug("preroll buffer of "+y+" reached"),U(b=a?i.bufferEnd-.15:y-(r.buffer.start-r.buffer.min),"initial preroll stream startTime set to "+b+", seeking",!0),a))return!0}}(u,N,f,m)||function(e,t){p&&v&&(!E&&e.hasEnoughToStart||E&&e.hasEnoughToResume&&!e.bufferEndNotMoving)&&-1!==b&&(l.debugEnabled()&&l.debug("on operatePlayback : starting stream at "+b+" with latency "+e.bufferDelayCurrent),r.emit(s.PLAY,{external:!1,buffer:!0}),p=!1,E&&(l.debugEnabled()&&l.debug("on operatePlayback : resuming playback, emitting playbackStarted"),r.emit(a.PLAYBACK_STARTED))),p||(!E&&-1!==b&&b<e.currentTime-.1&&(E=!0,h&&e.currentTime<1&&t.duration>1&&(l.debugEnabled()&&l.debug("useHLS: buffer higher 1 at start"),e.currentTime<.5&&U(1,"useHLS: maybe preroll detected, seek to 1"))),E&&_&&(l.debugEnabled()&&l.debug("on operatePlayback : starting playback, emitting playbackStarted with stats"),r.emit(a.PLAYBACK_STARTED,_)),e.currentTime>f.buffer.start&&!c&&(!e.hasEnoughToPlay||E&&e.bothCurrentTimeAndBufferEndNotMoving)&&(S?(S=!1,p=!0,l.debugEnabled()&&l.debug("pausing to buffer during playback"),M(),w()):S=!0))}(N,m))}}];function N(e){y=e.data.streamInfo.prerollDuration?e.data.streamInfo.prerollDuration:0,v=!0}function D(){l.debugEnabled()&&l.debug("pausing to raise buffer at start"),w()}function w(){r.emit(s.PAUSE,{external:!1,buffer:!0})}function U(e,t,n){l.warnEnabled()&&l.warn(t),r.emit(s.SEEK,{position:e,fast:!0===n})}function M(){r.emit(a.BUFFERING)}function P(e){var t=!0;if(e.length){for(var n=e[0],r=1;r<e.length;r++)if(e[r]!==n){t=!1;break}}else t=!1;return t}function L(e,t,n){e.length===n&&e.shift(),e.push(t)}return n.add({target:r,listeners:I}),{destroy:function(){n.remove({target:r,listeners:I})}}}}}.apply(t,r))||(e.exports=i)},7628:function(e,t,n){var r,i;r=[n(8333),n(6627),n(803),n(6637),n(5304),n(3763),n(4210)],void 0===(i=function(e,t,n,r,i,a,o){return{create:function(s,d,u,c,l,f,m,E,p,h){var g,b,_,T,A,S,y=e.create("MediaElementProxy "+d),v=!1,R=0,O=!0,I=!1,C="10",N=[];function D(){g&&(r.remove({target:g,listeners:N}),t.isTridentBrowser&&(S=void 0,["scroll","resize"].forEach((function(e){window.removeEventListener&&window.removeEventListener(e,x,!1),window.detachEvent&&window.detachEvent("on"+e,x)}))),G({source:""}),W(),g.firstChild&&g.removeChild(g.firstChild),g.parentNode&&g.parentNode.removeChild(g),v&&(y.debugEnabled()&&y.debug("releasing external video"),g.style.cssText=T,T=null,A&&A.appendChild(g)),g=null,_&&(_.parentNode&&_.parentNode.removeChild(_),_=null))}function w(){y.debugEnabled()&&y.debug("mute"),g&&(g.muted=!0)}function U(){y.debugEnabled()&&y.debug("unmute"),g&&(g.muted=!1)}function M(e){y.debugEnabled()&&y.debug("onPlay"),function(e){return new Promise((function(t){l&&(!e||K(e,"external",!0)||K(e,"unlocked",!0)||K(e,"buffer",!1))?R||(y.debugEnabled()&&y.debug("set load timeout before call play"),R=setTimeout((function(){if(R=0,g){y.debugEnabled()&&y.debug("load before call play");try{W(),L(1)}catch(e){y.debugEnabled()&&y.debug("err in onPlay Promise resolve")}t(e)}}),250)):t(e)}))}(e).then((function e(t){if(l&&(O=!1),g)return y.debugEnabled()&&y.debug("call play at currentTime "+g.currentTime),n.play(g).then((function(){K(t,"unlocked",!0)?(I=!0,y.debugEnabled()&&y.debug("unlocked set to true"),y.debugEnabled()&&y.debug("play promise resolved, video element unlocked"),P(t)):K(t,"invalidState",!0)?(y.debugEnabled()&&y.debug("invalid state set to true"),y.debugEnabled()&&y.debug("play promise resolved, media source open"),s.emit(o.PLAY_START_SUCCESS,k())):(y.debugEnabled()&&y.debug("play promise resolved"),E=!1,K(t,"buffer",!0)&&y.debugEnabled()&&y.debug("play hook after buffering"),y.debugEnabled()&&y.debug("resolve play at currentTime "+g.currentTime))})).catch((function(n){var r;if(K(t,"unlocked",!0))y.debugEnabled()&&y.debug("play promise rejected, video element not activated");else if(g)if(n.error.name===i.ABORT_ERROR){y.debugEnabled()&&y.debug("play promise rejected, abort error: "+n.error.message);var d="unknown";/video-only background media was paused/.test(n.error.message)?d="background":/paused by a call to pause/.test(n.error.message)&&(d="pausecall"),(r=k()).error=n.error,r.reason=d,s.emit(o.PLAY_START_ABORT_ERROR,r)}else n.error.name===i.NOT_ALLOWED_ERROR&&(y.debugEnabled()&&y.debug("play promise rejected, not allowed error: "+n.error.message),K(t,"invalidState",!0)||g.muted||!m||E?!K(t,"invalidState",!0)&&g.muted&&E&&(y.debugEnabled()&&y.debug("unmute to reset"),U(),g.muted||(F({type:a.VOLUME_CHANGE}),E=!1)):(y.debugEnabled()&&y.debug("mute to play"),w(),g.muted&&(E=!0,setTimeout(e.bind(null,{data:{external:!1}}),0))),(K(t,"external",!1)||E||(!g.muted&&!m||g.muted)&&l)&&((r=k()).error=n.error,r.automuted=E,s.emit(o.PLAY_START_NOT_ALLOWED_ERROR,r)));else y.debugEnabled()&&y.debug("play promise rejected, video element reference not valid");y.debugEnabled()&&y.debug(n.error.name+": "+n.error.message)}))}))}function P(e){y.debugEnabled()&&y.debug("onPause"),g&&(R&&(clearTimeout(R),R=0),g.pause(),!l||e&&!K(e,"buffer",void 0)||(O=!0,K(e,"unlocked",!0)?y.debugEnabled()&&y.debug("paused after state check"):K(e,"error",!0)&&y.debugEnabled()&&y.debug("pause after media error"),G({source:""}),W(),_&&_.tagName&&"IFRAME"===_.tagName&&(_.contentWindow&&_.contentWindow.location?(u.appendChild(g),_.contentWindow.location.reload(!0)):B())),L(1))}function L(e){(l||t.isIOS||t.isIOSDesktopMode)&&1===e&&(e=1+1e-7),g&&e&&g.playbackRate!==e&&(y.debugEnabled()&&y.debug("set rate to: "+e),g.playbackRate=e)}function F(e){var t=k();switch(e.type){case a.ERROR:t.code=g.error&&"number"==typeof g.error.code?g.error.code:200;break;case a.VOLUME_CHANGE:t.muted=g.muted,t.volume=g.volume;break;case a.CAN_PLAY:t.haveVideo=void 0!==g.videoTracks&&g.videoTracks.length>0,t.haveAudio=void 0!==g.audioTracks&&g.audioTracks.length>0,t.videoWidth=g.videoWidth,t.videoHeight=g.videoHeight}y.detailEnabled()&&y.detail(e.type+" - (index: "+c+", paused: "+Y()+", currentTime: "+t.currentTime+", latency: "+((t.useDuration?t.duration:t.buffered.length?t.buffered.end(t.buffered.length-1):0)-t.currentTime)+")"),(!l||e.type!==a.CAN_PLAY||l&&e.type===a.CAN_PLAY&&!O)&&s.emit("mediaElementProxy."+e.type,t)}function x(){var e=g&&"function"==typeof g.getBoundingClientRect?g.getBoundingClientRect():{top:0,left:0,bottom:0,right:0},t=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,r=e.top<=t&&e.top+e.height>=0,i=e.left<=n&&e.left+e.width>=0,a=r&&i;a!==S&&(y.debugEnabled()&&y.debug("viewport changed to "+(a?"visible":"hidden")),S=a,s.emit(a?o.VIEWPORT_VISIBLE:o.VIEWPORT_HIDDEN,k()))}function k(){return{currentTime:g.currentTime,buffered:g.buffered,played:g.played,playbackRate:g.playbackRate,index:c,duration:g.duration,useDuration:l&&Number.isFinite(g.duration)&&g.duration<4e6,paused:g.paused}}function B(){y.debugEnabled()&&y.debug("iOS11 detected, using iframe hack");var e={name:"h5live-iframe-"+c,frameBorder:0,scrolling:"no",style:{cssText:"z-index: 0;width: 100%;height: 100%;position: absolute;display: none;top: 0;left: 0;"},h5liveIndex:c,h5liveActive:!1};_||(_=u.querySelector('iframe[name="'+e.name+'"]')),_&&_.name===e.name&&(_.contentDocument&&_.contentDocument.body&&_.contentDocument.body.firstChild&&_.contentDocument.body.removeChild(_.contentDocument.body.firstChild),_.removeEventListener("load",H),_.parentNode&&_.parentNode.removeChild(_),_=null),V(_=document.createElement("iframe"),e),_.addEventListener("load",H),u.appendChild(_)}function H(e){var t=e.target.contentDocument.body;t&&(V(t,{style:{height:"100%",width:"100%",overflow:"hidden",position:"absolute",margin:"0",padding:"0"}}),t.firstChild||(t.appendChild(g),r.remove({target:g,listeners:N}),r.add({target:g,listeners:N})))}function V(e,t){Object.keys(t).forEach((function(n){"object"!=typeof t[n]?e[n]=t[n]:Object.keys(t[n]).forEach((function(r){e[n][r]=t[n][r]}))}))}function G(e){e&&Object.prototype.hasOwnProperty.call(e,"source")&&(b.src=e.source)}function W(){g&&g.load()}function Y(){return g?g.paused:void 0}function j(e,t){e.h5liveActive=t}function K(e,t,n){return!!e&&"object"==typeof e.data&&e.data[t]===n}return function(){var e=[a.TIME_UPDATE];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&-1===e.indexOf(a[t])&&N.push({type:a[t],listener:F})}(),function(){var e={id:d,autoplay:!1,controls:!1,playsInline:!0,muted:f,volume:1,style:{backgroundColor:"transparent"},h5liveIndex:c,h5liveActive:!1};switch(h){case"anonymous":case"use-credentials":e.crossOrigin=h}t.mustUseHLS&&(e.style.width="100vw",e.style.height="100vh"),(g=document.getElementById(d))&&(g.disableRemotePlayback=!0),v=!!g,y.debugEnabled()&&y.debug("using "+(v?"external ":"generated ")+"video element"),v?(A=g.parentNode,T=g.style.cssText,g.style.cssText=""):(g=document.createElement("video"))&&(g.disableRemotePlayback=!0),V(g,e)}(),b=document.createElement("source"),g.appendChild(b),t.mustUseHLS?B():(y.debugEnabled()&&y.debug("appending video to container"),u.appendChild(g),r.add({target:g,listeners:N}),t.isTridentBrowser&&(["scroll","resize"].forEach((function(e){window.addEventListener&&window.addEventListener(e,x,!1),window.attachEvent&&window.attachEvent("on"+e,x)})),x())),{destroy:function(){D()},play:M,pause:P,loadVideo:W,setSource:G,setType:function(e){g&&e&&(g.type=e)},setVolume:function(e){g&&!isNaN(e)&&e>=0&&e<=1&&g.volume!==e&&(y.debugEnabled()&&y.debug("set volume: "+e),g.volume=e)},setMute:w,setUnmute:U,setRate:L,destroyVideo:D,seek:function(e){if(g&&e&&e.data&&!isNaN(e.data.position)&&e.data.position>=0){var t=Math.round(1e6*e.data.position)/1e6;y.debugEnabled()&&y.debug("seek to: "+e.data.position+" (rounded: "+t+"), from: "+g.currentTime),e.data.fast&&void 0!==g.fastSeek?g.fastSeek(t):g.currentTime=t}},getVideoPlaybackQuality:function(){return g&&"function"==typeof g.getVideoPlaybackQuality?g.getVideoPlaybackQuality():void 0},getVideoElement:function(){return g||void 0},getMediaElementPayload:k,show:function(){_&&(_.style.display="block",_.style.zIndex="1",j(_,!0)),g&&(g.style.display="block",g.style.zIndex="1",j(g,!0))},hide:function(){_&&(_.style.display="block",_.style.zIndex="0",j(_,!1)),g&&(g.style.display="block",g.style.zIndex="0",j(g,!1))},getIndex:function(){return c},setIndex:function(e){c=e},showOnTop:function(){y.debugEnabled()&&y.debug("show index "+c+" on top"),_?(_.style.display="block",_.style.zIndex=C):g&&(g.style.display="block",g.style.zIndex=C)},isShownOnTop:function(){var e=!1;return _?e=_.style.zIndex===C:g&&(e=g.style.zIndex===C),e},unlock:function(){I?y.debugEnabled()&&y.debug("skip check because is unlocked"):(y.debugEnabled()&&y.debug("2nd vid try unlock with silent play attempt"),M({data:{unlocked:!0}}))},getVideoPausedState:Y}}}}.apply(t,r))||(e.exports=i)},232:function(e,t,n){var r,i;r=[n(6637),n(8333),n(6627),n(492),n(6273),n(5698),n(5997),n(5980)],void 0===(i=function(e,t,n,r,i,a,o,s){return{create:function(i){var d,u,c,l,f,m,E,p=t.create("MediaElementStatsCreator"),h=[],g=!1,b=!1,_=!1,T=!1,A=[{type:a.APPLICATION_STATE_CHANGE,listener:function(t){switch(c=t.data.state){case r.PAUSED:p.debugEnabled()&&p.debug("remove stats listener"),e.remove({target:i,listeners:S});break;case r.PLAYING:break;case r.LOADING:O(),p.debugEnabled()&&p.debug("hls: add stats listener"),l&&e.add({target:i,listeners:S})}}},{type:a.CONFIG,listener:function(e){l=n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS}}],S=[{type:o.TIME_UPDATE,listener:function(e){E!==e.data.index&&(p.debugEnabled()&&p.debug("new mediaElementIndex, changed from "+E+" to "+e.data.index),E=e.data.index);var t,n,i=e.data.played.length-1,a=e.data.buffered.length-1,o=e.data.currentTime;if(f=o,e.data.timeOffset&&(m=e.data.timeOffset,f+=m.currentTime),c!==r.PLAYING&&c!==r.BUFFERING||0!==f?f=c===r.LOADING?0:f:p.detailEnabled()&&p.detail("playing but currentTime = 0"),0===f&&p.detailEnabled()&&p.detail("currentTime = 0"),i>=0&&(d.playedStart=0,d.playedEnd=o),a>=0){var s=e.data.buffered.start(a),A=e.data.buffered.end(a),S=e.data.duration?e.data.duration:0;if(n=A,2===(t=h).length&&t.shift(),t.push(n),!function(e){var t=!0;if(e.length){for(var n=e[0],r=1;r<e.length;r++)if(e[r]!==n){t=!1;break}}else t=!1;return t}(h)){var y=l?parseFloat((S-A).toFixed(3)):0;d.durationDelta=y}e.data.useDuration&&(A=S,g||(g=e.data.useDuration)),e.data.timeOffset&&(s+=m.currentTime,A+=m.currentTime),function(e,t){var n=!0;return l&&!g&&(n=!1),R(d.bufferEnd,e)?(b=R(d.currentTime,t),_=e-t<0,b||_?T||(b&&p.debugEnabled()&&p.debug("bufferEnd & currentTime not moving, do update (bufferEnd old/new: "+d.bufferEnd.toFixed(3)+" - "+e.toFixed(3)+", currentTime old/new: "+d.currentTime.toFixed(3)+" - "+t.toFixed(3)+")"),_&&p.debugEnabled()&&p.debug("bufferEnd not moving & buffer dried out, do update (bufferEnd old/new: "+d.bufferEnd.toFixed(3)+" - "+e.toFixed(3)+", currentTime old/new: "+d.currentTime.toFixed(3)+" - "+t.toFixed(3)+")"),T=!0,n=!0):T&&(p.debugEnabled()&&p.debug("bufferEnd not moving, but currentTime is no longer stuck (bufferEnd old/new: "+d.bufferEnd.toFixed(3)+" - "+e.toFixed(3)+", currentTime old/new: "+d.currentTime.toFixed(3)+" - "+t.toFixed(3)+")"),T=!1)):(n=!0,T&&(p.debugEnabled()&&p.debug("bufferEnd is no longer stuck (bufferEnd old/new: "+d.bufferEnd.toFixed(3)+"/"+e.toFixed(3)+")"),T=!1)),n}(A,f)&&(d.bufferUpdate=A-d.bufferEnd,d.bufferStart=s,d.bufferEnd=A,d.bufferDelay=A-f)}d.currentTime=f,d.playbackRate=e.data.playbackRate,d.duration=e.data.duration,u.exactCurrentTime=o,u.buffered=e.data.buffered,u.mediaElementIndex=E,v()}},{type:a.MEDIA_ERROR_RECOVER,listener:function(){i.emit(s.MEDIA_ERROR_RECOVER_STATS,{bufferEnd:d.bufferEnd})}}],y=[{type:a.STREAM_INFO,listener:function(){l||(p.debugEnabled()&&p.debug("wss: add stats listener"),e.add({target:i,listeners:S}))}}];function v(){i.emit(s.PRIVATE_MEDIA_STATS,{mediaStats:{bufferStart:d.bufferStart,bufferEnd:d.bufferEnd,bufferDelay:d.bufferDelay,bufferUpdate:d.bufferUpdate,duration:d.duration,durationDelta:d.durationDelta,currentTime:d.currentTime,playbackRate:d.playbackRate,playedStart:d.playedStart,playedEnd:d.playedEnd,buffered:u.buffered,exactCurrentTime:u.exactCurrentTime,mediaElementIndex:u.mediaElementIndex}}),i.emit(s.PUBLIC_MEDIA_STATS,{mediaStats:{bufferStart:d.bufferStart,bufferEnd:d.bufferEnd,bufferDelay:d.bufferDelay,bufferUpdate:d.bufferUpdate,duration:d.duration,durationDelta:d.durationDelta,currentTime:d.currentTime,playbackRate:d.playbackRate,playedStart:d.playedStart,playedEnd:d.playedEnd}})}function R(e,t){return e-t==0}function O(){d={bufferStart:0,bufferEnd:0,bufferDelay:0,bufferUpdate:0,duration:0,durationDelta:0,currentTime:0,playbackRate:0,playedStart:0,playedEnd:0},u={buffered:null,exactCurrentTime:0,mediaElementIndex:null},v()}return O(),e.add({target:i,listeners:A}),e.add({target:i,listeners:y}),{destroy:function(){e.remove({target:i,listeners:A}),e.remove({target:i,listeners:y})}}}}}.apply(t,r))||(e.exports=i)},1833:function(e,t,n){var r,i;r=[n(1933),n(8333),n(6627),n(6637),n(6273),n(9804),n(5698),n(5997),n(5980),n(291),n(855),n(492)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l){return{create:function(i){var f,m,E=t.create("PauseHandler"),p=0,h=0,g=0,b=!1,_=!1,T=!1,A=[],S=!1,y=!1,v=!1,R=!1,O=[{type:s.PAUSE,listener:N},{type:s.WAITING,listener:N},{type:s.ENDED,listener:N},{type:s.PLAY_START_ABORT_ERROR,listener:N},{type:s.VOLUME_CHANGE,listener:function(e){y&&!e.data.muted&&(v=!0,setTimeout((function(){v=!1}),50)),y=e.data.muted}},{type:o.APPLICATION_STATE_CHANGE,listener:function(e){switch(f=e.data.state){case l.PLAYING:for(D(),w();A.length;)A.pop();S=!1;break;case l.LOADING:E.debugEnabled()&&E.debug("add play state listeners"),r.add({target:i,listeners:I});break;case l.PAUSING:r.remove({target:i,listeners:I});break;case l.PAUSED:for(D(),w();A.length;)A.pop();T=!1,S=!1}}},{type:o.CONFIG,listener:function(e){m=n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS,y=e.data.config.playback.muted}},{type:o.DOCUMENT_VISIBLE,listener:C},{type:o.DOCUMENT_HIDDEN,listener:C},{type:o.MEDIA_ERROR_RECOVER,listener:function(){E.debugEnabled()&&E.debug("media error recover"),T=!0}},{type:o.MEDIA_ERROR_RECOVERED,listener:function(){E.debugEnabled()&&E.debug("media error recovered"),T=!1}},{type:u.PAUSE,listener:function(e){e.data.buffer&&(R=!0,setTimeout((function(){R=!1}),50))}}],I=[{type:d.PRIVATE_MEDIA_STATS,listener:function(e){g=e.data.mediaStats.bufferDelay}}];function C(t){b=t.name===o.DOCUMENT_HIDDEN,_=t.name===o.DOCUMENT_VISIBLE,E.debug(b?"hidden":"visible"),_&&y&&!0===S&&f===l.LOADING?(E.debugEnabled()&&E.debug("was hidden playback attempt, now visible, loading, play hook"),i.emit(u.PLAY,{external:!1})):b&&(e.mobile||n.isIOSDesktopMode&&!n.isIPadDesktopMode)&&(f===l.PLAYING||f===l.LOADING||f===l.BUFFERING)&&i.emit(a.SUSPENDED)}function N(t){var n=t.name;if(E.debugEnabled()&&E.debug(n+" triggered while isRecovering = "+T.toString()+", pauseTimeout = "+(h?"true":"false")+", waitTimeout = "+(p?"true":"false")),T)E.debugEnabled()&&E.debug("skip check while recovery is ongoing");else{var r=A.length;if(b&&e.mobile&&f===l.PLAYING)E.debugEnabled()&&E.debug("hidden, suspend"),i.emit(a.SUSPENDED);else if(n===s.PLAY_START_ABORT_ERROR)"background"===t.data.reason&&b&&(S=!0);else if(n===s.PAUSE){if(v)return E.debugEnabled()&&E.debug("was unmuted right before pause, make play hook to check if allowed"),void i.emit(u.PLAY,{external:!1});if(m){if(E.debugEnabled()&&E.debug("hls pause"),!R)return E.debugEnabled()&&E.debug("pause but not triggered"),w(),E.debugEnabled&&E.debug("setPauseTimeout"),void(h=setTimeout((function(){D(),f===l.PLAYING?(E.debugEnabled()&&E.debug("pause timeout fired"),A[0]===s.PAUSE?(E.debugEnabled()&&E.debug("last event still pause, emit error"),i.emit(a.ERROR,{code:c.MEDIA_ERR_HLS_BUFFER_UNDERRUN})):E.debugEnabled()&&E.debug("last event not pause after pause timeout fired ("+A[0]+")")):E.debugEnabled()&&E.debug("pause timeout fired, but not playing or buffering")}),200));E.debugEnabled()&&E.debug("pause seems to be triggered by buffer, do nothing")}}else{if(m&&n===s.ENDED&&r>=1&&A[0]===s.PAUSE)return void(f===l.PLAYING||f===l.BUFFERING?(E.debugEnabled()&&E.debug("pause ended case, clear all timeouts"),D(),w(),i.emit(a.ERROR,{code:c.MEDIA_ERR_HLS_BUFFER_UNDERRUN})):E.debugEnabled()&&E.debug("pause ended case, but not playing or buffering"));if(!p&&!m)return E.debugEnabled()&&E.debug("set wait timeout on "+n),D(),void function(e,t){E.debugEnabled&&E.debug("setWaitTimeout"),p=setTimeout(function(e,t){w(),f===l.PLAYING?(E.debugEnabled()&&E.debug("nanoplayer: recover unexpected pause type "+e+", bufferDelay = "+t,3),i.emit(u.PLAY,{external:!1})):E.debugEnabled()&&E.debug("wait timeout fired, but not playing")}.bind(null,e,t),200)}(n,g)}A.unshift(n)}}function D(){E.debugEnabled&&E.debug("clearPauseTimeout"),clearTimeout(h),h=0}function w(){E.debugEnabled&&E.debug("clearWaitTimeout"),clearTimeout(p),p=0}return E.debugEnabled()&&E.debug("initialize"),r.add({target:i,listeners:O}),{destroy:function(){r.remove({target:i,listeners:O})}}}}}.apply(t,r))||(e.exports=i)},230:function(e,t,n){var r,i;r=[n(8333),n(6637),n(492),n(6273),n(5698),n(5997),n(1447)],void 0===(i=function(e,t,n,r,i,a,o){return{create:function(r){var s,d,u=e.create("QualityHandler"),c={extreme:{ratioThreshold:.95,samplesRange:3,samplesMatchAllowed:1,level:4},high:{ratioThreshold:.2,samplesRange:5,samplesMatchAllowed:1,level:3},medium:{ratioThreshold:.1,samplesRange:10,samplesMatchAllowed:3,level:2},low:{ratioThreshold:.02,samplesRange:10,samplesMatchAllowed:1,level:1}},l={extreme:{ratioThreshold:.9,samplesRange:1,samplesMatchAllowed:0,level:4}},f=[],m=[],E=!1,p=["extreme","high","medium","low"],h=0,g=0,b=0,_=["extreme"],T=0,A=0,S=0,y=0,v=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(d=e.data.state){case n.PLAYING:E&&C();break;case n.PAUSED:N()}}},{type:i.STREAM_INFO,listener:I},{type:i.STREAM_INFO_UPDATE,listener:function(e){I(e)}},{type:i.MEDIA_ERROR_RECOVER,listener:function(){u.detailEnabled()&&u.detail("media error recover"),N()}},{type:i.MEDIA_ERROR_RECOVERED,listener:function(){u.detailEnabled()&&u.detail("media error recovered"),C()}}],R=[{type:a.QUALITY_UPDATE,listener:function e(t){for(var i in t.data.quality)if(Object.prototype.hasOwnProperty.call(s,i)){if("totalVideoFrames"===i&&(s.totalVideoFramesCurrent=t.data.quality.totalVideoFrames-s.totalVideoFrames,y=s.totalVideoFramesCurrent),"droppedVideoFrames"===i){for(s.droppedVideoFramesCurrent=t.data.quality.droppedVideoFrames-s.droppedVideoFrames;f.length>9;)f.shift();f.push({count:s.droppedVideoFramesCurrent,time:t.data.currentTime})}if("corruptedVideoFrames"===i){for(s.corruptedVideoFramesCurrent=t.data.quality.corruptedVideoFrames-s.corruptedVideoFrames;m.length>0;)m.shift();m.push({count:s.corruptedVideoFramesCurrent,time:t.data.currentTime})}s[i]=t.data.quality[i]}if(s.droppedVideoFramesLevel=b,s.corruptedVideoFramesLevel=S,y<0)return O(),e(t);y>0&&function(){var e,t,i=0,a=0,s=0;if(d===n.PLAYING){for(u.detailEnabled()&&u.detail("check with current dropped level "+h),u.detailEnabled()&&u.detail("skip check lower "+(h+1)),i=0;i<p.length-h;i+=1)if(e=D(p[i])){u.detailEnabled()&&u.detail("frame drop detected with type '"+e.type+"'"),u.detail(e.frames.dropped+" frames in last "+e.samples.all.length+" seconds dropped"),r.emit(o.FRAME_DROP,e),a=e.level,u.detailEnabled()&&u.detail("change current dropped level "+h+" to "+a),h=a,g&&u.detailEnabled()&&u.detail("reset dropped level timeout running, clear timeout"),clearTimeout(g),g=setTimeout((function(){u.detailEnabled()&&u.detail("reset current dropped level "+h+" to 0"),g=0,h=0}),1e3*e.samples.all.length),u.detailEnabled()&&u.detail("reset dropped level in "+e.samples.all.length+" sec");break}for(u.detailEnabled()&&u.detail("check with current corrupted level "+T),u.detailEnabled()&&u.detail("skip check lower "+(T+1)),i=0;i<_.length-T;i+=1)if(t=w(_[i])){u.detailEnabled()&&u.detail("frame drop detected with type '"+t.type+"'"),u.detail(t.frames.corrupted+" frames in last "+t.samples.all.length+" seconds corrupted"),r.emit(o.FRAME_CORRUPTED,t),s=t.level,u.detailEnabled()&&u.detail("change current corrupted level "+T+" to "+s),T=s,A&&u.detailEnabled()&&u.detail("reset corrupted level timeout running, clear timeout"),clearTimeout(A),A=setTimeout((function(){u.detailEnabled()&&u.detail("reset current corrupted level "+T+" to 0"),A=0,T=0}),1e3*t.samples.all.length),u.detailEnabled()&&u.detail("reset corrupted level in "+t.samples.all.length+" sec");break}}b=a,S=s}(),r.emit(o.QUALITY_STATS,s)}}];function O(){for(s={droppedVideoFrames:0,droppedVideoFramesCurrent:0,droppedVideoFramesLevel:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,corruptedVideoFramesLevel:0,creationTime:0,totalVideoFrames:0,totalVideoFramesCurrent:0},clearTimeout(g),h=0,g=0,b=0;f.length;)f.pop();for(clearTimeout(A),T=0,A=0,S=0;m.length;)m.pop();y=0}function I(e){E=e.data.streamInfo.haveVideo}function C(){N(),t.add({target:r,listeners:R})}function N(){t.remove({target:r,listeners:R}),O()}function D(e){if(u.detailEnabled()&&u.detail("check dropped type '"+e+"'"),f.length>c[e].samplesRange-1){var t=f.slice(-c[e].samplesRange),n=t.filter((function(t){return t.count>=y*c[e].ratioThreshold}));if(n.length>c[e].samplesMatchAllowed){var r=0;return t.forEach((function(e){r+=e.count})),{type:e,level:c[e].level,framerate:y,samples:{all:t,matched:n,limit:Math.ceil(y*c[e].ratioThreshold)},frames:{dropped:r}}}}return!1}function w(e){if(u.detailEnabled()&&u.detail("check corrupted type '"+e+"'"),m.length>l[e].samplesRange-1){var t=m.slice(-l[e].samplesRange),n=t.filter((function(t){return t.count>=y*l[e].ratioThreshold}));if(n.length>l[e].samplesMatchAllowed){var r=0;return t.forEach((function(e){r+=e.count})),{type:e,level:l[e].level,framerate:y,samples:{all:t,matched:n,limit:Math.ceil(y*l[e].ratioThreshold)},frames:{corrupted:r}}}}return!1}return t.add({target:r,listeners:v}),{destroy:function(){t.remove({target:r,listeners:v}),t.remove({target:r,listeners:R}),O()}}}}}.apply(t,r))||(e.exports=i)},42:function(e,t,n){var r,i;r=[n(5698)],void 0===(i=function(e){return{create:function(t){function n(e){window.fragments||(window.fragments=[]),window.fragments.push(e.data.fragment)}var r;return r="nanoDump",-1!==document.cookie.indexOf(r+"=")&&document.cookie.split(r+"=")[1].split(";")[0]&&t.addListener(e.STREAM_FRAGMENT,n),{destroy:function(){t.removeListener(e.STREAM_FRAGMENT,n)}}}}}.apply(t,r))||(e.exports=i)},291:function(e,t){var n;void 0===(n=function(){var e="mediaElementControl.";return{BASE:e,CREATE_VIDEO:e+"createVideo",DESTROY_VIDEO:e+"destroyVideo",VIDEO_SOURCE:e+"videoSource",UPDATE_SOURCE:e+"updateSource",PLAY:e+"play",PAUSE:e+"pause",SEEK:e+"seek",MUTE:e+"mute",UNMUTE:e+"unmute",SET_VOLUME:e+"volume",SET_RATE:e+"playbackRate"}}.apply(t,[]))||(e.exports=n)},5997:function(e,t){var n;void 0===(n=function(){var e="mediaElementHandler.";return{BASE:e,LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",ERROR:e+"error",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange",QUALITY_UPDATE:e+"qualityupdate",VIDEO_SOURCE:e+"videoSource",ELEMENT_CREATED:e+"elementCreated",PLAY_START_SUCCESS:e+"playStartSuccess",PLAY_START_NOT_ALLOWED_ERROR:e+"playStartNotAllowedError",PLAY_START_ABORT_ERROR:e+"playStartAbortError",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_TIMEOUT:e+"updateSourceTimeout",MEDIA_ERROR_RECOVERED:e+"recovered",ACTIVE_VIDEO_ELEMENT_CHANGE:e+"activeVideoElementChange",SWITCH_STREAM:e+"switchStream"}}.apply(t,[]))||(e.exports=n)},5698:function(e,t){var n;void 0===(n=function(){var e="mediaElementManager.";return{BASE:e,CONFIG:e+"config",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",APPLICATION_STATE_CHANGE:e+"applicationStateChange",STARTUP_STATS_ADDED:e+"startupStatsAdded",STARTUP_STATS_COMPLETED:e+"startupStatsCompleted",DOCUMENT_VISIBLE:e+"documentVisible",DOCUMENT_HIDDEN:e+"documentHidden",NETWORK_ONLINE:e+"networkOnline",NETWORK_OFFLINE:e+"networkOffline",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_ABORT:e+"switchStreamAbort",SWITCH_STREAM_FAIL:e+"switchStreamFail",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",UPDATE_SOURCE_FAIL:e+"updateSourceFail",BUFFER_TWEAKS_CREATED:e+"bufferTweaksCreated",MEDIA_ERROR:e+"mediaError",MEDIA_ERROR_RECOVER:e+"mediaErrorRecover",MEDIA_ERROR_RECOVERED:e+"mediaErrorRecovered",MEDIA_ERROR_QUEUED:e+"mediaErrorQueued",MEDIA_ERROR_UNQUEUED:e+"mediaErrorUnqueued"}}.apply(t,[]))||(e.exports=n)},560:function(e,t){var n;void 0===(n=function(){var e="mediaElementPlaybackControl.";return{BASE:e,PLAYBACK_STARTED:e+"playbackStarted",BUFFERING:e+"buffering"}}.apply(t,[]))||(e.exports=n)},5075:function(e,t){var n;void 0===(n=function(){var e="mediaElementPlayback.";return{BASE:e,LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",MEDIA_ERROR:e+"mediaerror",MEDIA_ERROR_RECOVER:e+"mediaerrorrecover",MEDIA_ERROR_RECOVERED:e+"mediaerrorrecovered",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange",ELEMENT_CREATED:e+"elementCreated",QUALITY_STATS:e+"qualitystats",PLAY_STATS:e+"playStats",MEDIA_ERROR_RECOVER_STATS:e+"mediaErrorRecoverStats",FRAME_DROP:e+"framedrop",PLAYBACK_FINISHED:e+"playbackFinished",PLAYBACK_ERROR:e+"playbackError",PLAYBACK_STARTED:e+"playbackStarted",PLAYBACK_SUSPENDED:e+"playbackSuspended",BUFFERING:e+"buffering",PLAY_START_SUCCESS:e+"playStartSuccess",PLAY_START_NOT_ALLOWED_ERROR:e+"playStartNotAllowedError",PLAY_START_ABORT_ERROR:e+"playStartAbortError",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden",ELEMENTS_UPDATED:e+"elementsUpdated",TIME_OFFSET:e+"timeOffset",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_TIMEOUT:e+"updateSourceTimeout",ACTIVE_VIDEO_ELEMENT_CHANGE:e+"activeVideoElementChange",OFFLINE_BUFFER_UNDERRUN:e+"offlinebufferunderrun",SOURCE_ENDED:e+"sourceEnded",SWITCH_STREAM:e+"switchStream",FRAME_CORRUPTED:e+"frameCorrupted"}}.apply(t,[]))||(e.exports=n)},4210:function(e,t){var n;void 0===(n=function(){var e="mediaElementProxy.";return{BASE:e,LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",ERROR:e+"error",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange",QUALITY_UPDATE:e+"qualityupdate",ELEMENT_CREATED:e+"elementCreated",PLAY_START_SUCCESS:e+"playStartSuccess",PLAY_START_NOT_ALLOWED_ERROR:e+"playStartNotAllowedError",PLAY_START_ABORT_ERROR:e+"playStartAbortError",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden"}}.apply(t,[]))||(e.exports=n)},5980:function(e,t){var n;void 0===(n=function(){var e="mediaElementStatsCreator.";return{BASE:e,PUBLIC_MEDIA_STATS:e+"publicMediaStats",PRIVATE_MEDIA_STATS:e+"privateMediaStats",MEDIA_ERROR_RECOVER_STATS:e+"mediaErrorRecoverStats"}}.apply(t,[]))||(e.exports=n)},9804:function(e,t){var n;void 0===(n=function(){var e="mediaHandler.";return{BASE:e,ERROR:e+"error",SUSPENDED:e+"suspended",OFFLINE_BUFFER_UNDERRUN:e+"offlinebufferunderrun"}}.apply(t,[]))||(e.exports=n)},391:function(e,t){var n;void 0===(n=function(){var e="mediaSourceHandler.";return{BASE:e,SOURCE_OPEN:e+"sourceopen",SOURCE_ENDED:e+"sourceended",SOURCE_CLOSED:e+"sourceclosed",SOURCE_READY:e+"sourceready",ERROR:e+"error",MEDIA_ERROR_RECOVERED:e+"mediaerrorrecovered"}}.apply(t,[]))||(e.exports=n)},1447:function(e,t){var n;void 0===(n=function(){var e="qualityHandler.";return{BASE:e,QUALITY_STATS:e+"qualitystats",FRAME_DROP:e+"framedrop",FRAME_CORRUPTED:e+"framecorrupted"}}.apply(t,[]))||(e.exports=n)},683:function(e,t){var n;void 0===(n=function(){var e="sourceBufferQueue.";return{BASE:e,TIME_OFFSET:e+"timeOffset",FIRST_FRAGMENT:e+"firstFragment"}}.apply(t,[]))||(e.exports=n)},1137:function(e,t,n){var r,i;r=[n(8333),n(6637),n(6273),n(9804),n(5698),n(855),n(492)],void 0===(i=function(e,t,n,r,i,a,o){return{create:function(s){var d,u,c,l,f,m=e.create("HLSInterruptHandler"),E=!1,p=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(d=e.data.state){case o.LOADING:m.debugEnabled()&&m.debug("loading"),E||(m.debugEnabled()&&m.debug("not online at loading, set waitForOnline to true"),u=!0,h(!0));break;case o.PLAYING:m.debugEnabled()&&m.debug("playing"),g();break;case o.BUFFERING:m.debugEnabled()&&m.debug("buffering"),f||(m.debugEnabled()&&m.debug("set buffering timeout"),f=setTimeout((function(){m.debugEnabled()&&m.debug("buffering timeout fired"),clearTimeout(f),f=0,d!==o.BUFFERING||l||(E?(m.debugEnabled()&&m.debug("online at buffering timeout"),performance.now()-c.online<5e3&&(m.debugEnabled()&&m.debug("was offline before buffering timeout"),h(!1))):(m.debugEnabled()&&m.debug("not online at buffering timeout, set waitForOnline to true"),u=!0,h(!0)))}),2e3))}}},{type:i.NETWORK_ONLINE,listener:function(){m.debugEnabled()&&m.debug("network online"),E=!0,c.online=performance.now(),d!==o.LOADING&&d!==o.BUFFERING||!u||l||(m.debugEnabled()&&m.debug("active state & waited for online"),h(!1))}},{type:i.NETWORK_OFFLINE,listener:function(){m.debugEnabled()&&m.debug("network offline"),E=!1,c.offline=performance.now()}},{type:n.RECOVER,listener:function(){m.debugEnabled()&&m.debug("media error recover"),l=!0}},{type:n.RECOVERED,listener:function(){m.debugEnabled()&&m.debug("media error recovered"),l=!1}}];function h(e){m.debugEnabled()&&m.debug("emit buffer underrun"),setTimeout((function(){s.emit(r.ERROR,{code:a.MEDIA_ERR_HLS_BUFFER_UNDERRUN,reconnect:!0,waiting:!!e}),!e&&g()}),200)}function g(){m.debugEnabled()&&m.debug("reset"),u=!1,c={online:0,offline:0},l=!1}return m.debugEnabled()&&m.debug("initialize"),t.add({target:s,listeners:p}),g(),{destroy:function(){t.remove({target:s,listeners:p})}}}}}.apply(t,r))||(e.exports=i)},4601:function(e,t,n){var r,i;r=[n(8333),n(8197),n(6637),n(492),n(855),n(6273),n(9804),n(5698),n(5980)],void 0===(i=function(e,t,n,r,i,a,o,s,d){return{create:function(u){var c,l,f,m=8,E=e.create("HLSJumpHandler"),p=!1,h=[{type:s.APPLICATION_STATE_CHANGE,listener:function(e){switch(n.remove({target:u,listeners:g}),e.data.state){case r.PAUSED:f=!1;break;case r.BUFFERING:E.debugEnabled()&&E.debug("entering buffering state"),c=null;break;case r.PAUSING:E.debugEnabled()&&E.debug("entering paused state"),c=null;break;case r.PLAYING:n.add({target:u,listeners:g})}}},{type:s.BUFFER_TWEAKS_CREATED,listener:function(e){m=Math.max(e.data.tweaks.buffer.max,m)}},{type:a.RECOVER,listener:function(){E.debugEnabled()&&E.debug("media error recover"),f=!0,c=null}},{type:a.RECOVERED,listener:function(){E.debugEnabled()&&E.debug("media error recovered"),f=!1}},{type:a.QUEUED,listener:function(){E.debugEnabled()&&E.debug("media error queued"),p=!0}},{type:a.UNQUEUED,listener:function(){E.debugEnabled()&&E.debug("media error unqueued"),p=!1}}],g=[{type:d.PRIVATE_MEDIA_STATS,listener:function(e){if(!f&&!p){if(l===e.data.mediaStats.mediaElementIndex&&c&&void 0!==c.currentTime){var n=e.data.mediaStats.currentTime<c.currentTime-2,r=e.data.mediaStats.currentTime+m<e.data.mediaStats.bufferEnd&&c.currentTime+m<c.bufferEnd;if(n||r){var a={code:!1,currentTime:{last:c.currentTime,current:e.data.mediaStats.currentTime}};n?(a.code=i.MEDIA_ERR_HLS_JUMP,E.debugEnabled()&&E.debug("hls jump")):r&&(a.code=i.MEDIA_ERR_HLS_MAX_RANGE,E.debugEnabled()&&E.debug("hls max range")),u.emit(o.ERROR,a)}}l=e.data.mediaStats.mediaElementIndex,c=t.copy(e.data.mediaStats)}}}];return E.debugEnabled()&&E.debug("initialize"),n.add({target:u,listeners:h}),{destroy:function(){n.remove({target:u,listeners:h})}}}}}.apply(t,r))||(e.exports=i)},2657:function(e,t,n){var r,i;r=[n(8333),n(6627),n(9658),n(1933),n(6637),n(5055),n(8250),n(9437),n(6273),n(5698),n(5075),n(560),n(9804),n(391),n(1447),n(5980),n(683),n(5997),n(291),n(7022),n(476),n(2885),n(1833),n(230),n(1705),n(4972),n(232),n(42),n(3824),n(2869),n(4601),n(1137)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l,f,m,E,p,h,g,b,_,T,A,S,y,v,R,O,I,C,N,D,w){"use strict";return{create:function(e){var r,U,M=new n,P=[],L=[{type:u.CONFIG,listener:function(e){t.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&t.canUseHLS?(P.push(D.create(M)),P.push(w.create(M))):(P.push(N.create(M)),P.push(A.create(M)),P.push(I.create(M)))}}],F=[{from:g.LOAD_START,to:c.LOAD_START},{from:g.PROGRESS,to:c.PROGRESS},{from:g.SUSPEND,to:c.SUSPEND},{from:g.ABORT,to:c.ABORT},{from:g.EMPTIED,to:c.EMPTIED},{from:g.STALLED,to:c.STALLED},{from:g.PLAY,to:c.PLAY},{from:g.PAUSE,to:c.PAUSE},{from:g.LOADED_META_DATA,to:c.LOADED_META_DATA},{from:g.LOADED_DATA,to:c.LOADED_DATA},{from:g.WAITING,to:c.WAITING},{from:g.PLAYING,to:c.PLAYING},{from:g.CAN_PLAY,to:c.CAN_PLAY},{from:g.CAN_PLAY_THROUGH,to:c.CAN_PLAY_THROUGH},{from:g.SEEKING,to:c.SEEKING},{from:g.SEEKED,to:c.SEEKED},{from:g.TIME_UPDATE,to:c.TIME_UPDATE},{from:g.ENDED,to:c.ENDED},{from:g.RATE_CHANGE,to:c.RATE_CHANGE},{from:g.DURATION_CHANGE,to:c.DURATION_CHANGE},{from:g.VOLUME_CHANGE,to:c.VOLUME_CHANGE},{from:g.ELEMENT_CREATED,to:c.ELEMENT_CREATED},{from:g.PLAY_START_SUCCESS,to:c.PLAY_START_SUCCESS},{from:g.PLAY_START_ABORT_ERROR,to:c.PLAY_START_ABORT_ERROR},{from:g.PLAY_START_NOT_ALLOWED_ERROR,to:c.PLAY_START_NOT_ALLOWED_ERROR},{from:g.VIEWPORT_VISIBLE,to:c.VIEWPORT_VISIBLE},{from:g.VIEWPORT_HIDDEN,to:c.VIEWPORT_HIDDEN},{from:g.UPDATE_SOURCE_ABORT,to:c.UPDATE_SOURCE_ABORT},{from:g.UPDATE_SOURCE_FAIL,to:c.UPDATE_SOURCE_FAIL},{from:g.UPDATE_SOURCE_TIMEOUT,to:c.UPDATE_SOURCE_TIMEOUT},{from:g.ACTIVE_VIDEO_ELEMENT_CHANGE,to:c.ACTIVE_VIDEO_ELEMENT_CHANGE},{from:g.ERROR,to:c.MEDIA_ERROR},{from:g.MEDIA_ERROR_RECOVERED,to:c.MEDIA_ERROR_RECOVERED},{from:g.SWITCH_STREAM,to:c.SWITCH_STREAM},{from:f.SUSPENDED,to:c.PLAYBACK_SUSPENDED},{from:f.OFFLINE_BUFFER_UNDERRUN,to:c.OFFLINE_BUFFER_UNDERRUN},{from:E.QUALITY_STATS,to:c.QUALITY_STATS},{from:E.FRAME_DROP,to:c.FRAME_DROP},{from:E.FRAME_CORRUPTED,to:c.FRAME_CORRUPTED},{from:p.PUBLIC_MEDIA_STATS,to:c.PLAY_STATS},{from:p.MEDIA_ERROR_RECOVER_STATS,to:c.MEDIA_ERROR_RECOVER_STATS},{from:m.SOURCE_ENDED,to:c.PLAYBACK_FINISHED},{from:m.ERROR,to:c.MEDIA_ERROR},{from:m.MEDIA_ERROR_RECOVERED,to:c.MEDIA_ERROR_RECOVERED},{from:l.PLAYBACK_STARTED,to:c.PLAYBACK_STARTED},{from:l.BUFFERING,to:c.BUFFERING},{from:h.TIME_OFFSET,to:c.TIME_OFFSET}],x=[{from:o.CREATE_VIDEO,to:b.CREATE_VIDEO},{from:o.DESTROY_VIDEO,to:b.DESTROY_VIDEO},{from:o.VIDEO_SOURCE,to:b.VIDEO_SOURCE},{from:o.PLAY,to:b.PLAY},{from:o.PAUSE,to:b.PAUSE},{from:o.SEEK,to:b.SEEK},{from:o.MUTE,to:b.MUTE},{from:o.UNMUTE,to:b.UNMUTE},{from:o.SET_VOLUME,to:b.SET_VOLUME},{from:o.SET_RATE,to:b.SET_RATE},{from:o.UPDATE_SOURCE,to:b.UPDATE_SOURCE},{from:s.CONFIG,to:u.CONFIG},{from:s.SERVER_INFO,to:u.SERVER_INFO},{from:s.STREAM_FRAGMENT,to:u.STREAM_FRAGMENT},{from:s.RANDOM_ACCESS_POINT,to:u.RANDOM_ACCESS_POINT},{from:s.NETWORK_ONLINE,to:u.NETWORK_ONLINE},{from:s.NETWORK_OFFLINE,to:u.NETWORK_OFFLINE},{from:d.ERROR,to:u.MEDIA_ERROR},{from:d.RECOVER,to:u.MEDIA_ERROR_RECOVER},{from:d.RECOVERED,to:u.MEDIA_ERROR_RECOVERED},{from:d.QUEUED,to:u.MEDIA_ERROR_QUEUED},{from:d.UNQUEUED,to:u.MEDIA_ERROR_UNQUEUED},{from:s.APPLICATION_STATE_CHANGE,to:u.APPLICATION_STATE_CHANGE},{from:s.STARTUP_STATS_ADDED,to:u.STARTUP_STATS_ADDED},{from:s.STARTUP_STATS_COMPLETED,to:u.STARTUP_STATS_COMPLETED},{from:s.DOCUMENT_VISIBLE,to:u.DOCUMENT_VISIBLE},{from:s.DOCUMENT_HIDDEN,to:u.DOCUMENT_HIDDEN},{from:s.STREAM_INFO,to:u.STREAM_INFO},{from:s.STREAM_INFO_UPDATE,to:u.STREAM_INFO_UPDATE},{from:s.SWITCH_STREAM_INIT,to:u.SWITCH_STREAM_INIT},{from:s.SWITCH_STREAM_SUCCESS,to:u.SWITCH_STREAM_SUCCESS},{from:s.SWITCH_STREAM_ABORT,to:u.SWITCH_STREAM_ABORT},{from:s.SWITCH_STREAM_FAIL,to:u.SWITCH_STREAM_FAIL},{from:s.UPDATE_SOURCE_INIT,to:u.UPDATE_SOURCE_INIT},{from:s.UPDATE_SOURCE_SUCCESS,to:u.UPDATE_SOURCE_SUCCESS},{from:s.BUFFER_TWEAKS_CREATED,to:u.BUFFER_TWEAKS_CREATED}];return i.add({target:M,listeners:L}),r=a.create(e,M,x),U=a.create(M,e,F),P.push(C.create(M)),P.push(O.create(M)),P.push(_.create(M)),P.push(S.create(M)),P.push(y.create(M)),P.push(R.create(M)),t.useFakeAudio&&P.push(T.create(M)),t.isTridentBrowser&&P.push(v.create(M)),{destroy:function(){for(;P.length;)P.pop().destroy();r.destroy(),r=null,U.destroy(),U=null}}}}}.apply(t,r))||(e.exports=i)},2869:function(e,t,n){var r,i;r=[n(8333),n(6637),n(8730),n(3778),n(492),n(5865),n(855),n(6273),n(5698),n(5997),n(391),n(683),n(5980),n(291),n(8072)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l,f,m,E){return{create:function(s){var p,h,g,b,_,T,A,S=e.create("MediaSourceHandler"),y=!1,v=i.IDLE,R=!1,O=0,I=!1,C=!1,N=[{type:d.STREAM_INFO,listener:F},{type:d.STREAM_INFO_UPDATE,listener:F},{type:d.APPLICATION_STATE_CHANGE,listener:function(e){switch(v=e.data.state){case i.PAUSED:O=0,C=!1;break;case i.PLAYING:}}},{type:d.DOCUMENT_VISIBLE,listener:x},{type:d.DOCUMENT_HIDDEN,listener:x},{type:u.ELEMENT_CREATED,listener:function(){P()}},{type:u.PLAY_START_SUCCESS,listener:function(){S.debugEnabled()&&S.debug("onPlayStartSuccess"),I=!0,R=!0,L()}},{type:d.MEDIA_ERROR,listener:function(e){(A=e.data.code)===r.MEDIA.DECODE_ERROR?_=!0:A===r.MEDIA.MEDIA_SOURCE_ENDED&&(T=!0)}},{type:d.MEDIA_ERROR_RECOVER,listener:function(e){A=e.data.code,S.debugEnabled()&&S.debug("media error recover after error "+A),C=!0,I=!0,R=!0,L()}},{type:l.FIRST_FRAGMENT,listener:function(e){b=e.data,!1===y&&s.emit(m.PLAY,{external:!1,invalidState:!0})}},{type:f.MEDIA_ERROR_RECOVER_STATS,listener:function(e){O=e.data.bufferEnd}}],D=[{type:a.SOURCE_OPEN,listener:function(){S.debugEnabled()&&S.debug("open"),y=!0,C&&s.emit(c.MEDIA_ERROR_RECOVERED,{code:A})}},{type:a.SOURCE_ENDED,listener:function(){var e;S.debugEnabled()&&S.debug("ended"),y=!1,s.emit(c.ERROR,{code:o.MEDIA_ERR_MEDIA_SOURCE_ENDED}),s.emit(c.SOURCE_ENDED,((e=e||{}).readyState=p.readyState,e))}},{type:a.SOURCE_CLOSED,listener:function(){y=!1,S.debugEnabled()&&S.debug("closed")}}],w=[];function U(){S.debugEnabled()&&S.debug("create mediasource"),p=window.ManagedMediaSource?new window.ManagedMediaSource:new window.MediaSource,t.add({target:p,listeners:D}),w.push(E.create(s,p,O,R?h:null,I?b:null,v)),R=!1,I=!1,_=!1,T=!1}function M(){if(p){for(S.debugEnabled()&&S.debug("destroy mediasource"),t.remove({target:p,listeners:D});w.length;)w.pop().destroy();p=null}}function P(){S.debugEnabled()&&S.debug("bind mediasource"),s.emit(m.VIDEO_SOURCE,{src:window.URL.createObjectURL(p),type:n.MP4})}function L(){S.debugEnabled()&&S.debug("resetMediaSourceOnTheFly");var e=p&&p.activeSourceBuffers.length,t=e&&p.activeSourceBuffers[p.activeSourceBuffers.length-1].buffered.length,n=t?p.activeSourceBuffers[p.activeSourceBuffers.length-1].buffered.end(p.activeSourceBuffers[p.activeSourceBuffers.length-1].buffered.length-1):0;S.debugEnabled()&&S.debug("hasActiveSourceBuffer "+e),S.debugEnabled()&&S.debug("hasActiveSourceBufferData "+t),S.debugEnabled()&&S.debug("lastBufferEndActiveSourceBuffer "+n),S.debugEnabled()&&S.debug("old lastBufferEnd "+O),n&&(S.debugEnabled()&&S.debug("set lastBufferEnd to lastBufferEndActiveSourceBuffer"),O=n),S.debugEnabled()&&S.debug("new lastBufferEnd "+O),S.debugEnabled()&&S.debug("resetMediaSource"),M(),U(),P()}function F(e){S.debugEnabled()&&S.debug("streamInfo"),S.debugEnabled()&&S.debug("lastBufferEnd "+O),h&&h.mimeType!==e.data.streamInfo.mimeType||_||T?(S.debugEnabled()&&S.debug(_?T?"was media source error":"was media decode error":"new mime type received"),h=e.data.streamInfo,R=!0,L()):h=e.data.streamInfo}function x(e){g=e.name===d.DOCUMENT_HIDDEN,S.debug(g?"hidden":"visible")}return S.debugEnabled()&&S.debug("create"),t.add({target:s,listeners:N}),U(),{destroy:function(){S.debugEnabled()&&S.debug("destroy"),M(),t.remove({target:s,listeners:N})}}}}}.apply(t,r))||(e.exports=i)},8072:function(e,t,n){var r,i;r=[n(8333),n(6627),n(6637),n(7990),n(5865),n(5980),n(5698),n(391),n(683),n(291),n(492)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c){return{create:function(l,f,m,E,p,h){var g,b,_,T,A,S=e.create("SourceBufferQueue "+(new Date).getTime()),y=0,v=0,R=0,O=!1,I=[],C="append",N="remove",D="reset",w="seek",U="offset",M=!1,P=0,L=!1,F=-1,x=null,k="",B=0,H=0,V=!1,G=[{type:o.STREAM_INFO,listener:ee},{type:o.STREAM_INFO_UPDATE,listener:ee},{type:o.STREAM_FRAGMENT,listener:j},{type:o.RANDOM_ACCESS_POINT,listener:K}],W=[{type:a.PRIVATE_MEDIA_STATS,listener:function(e){b=e.data.mediaStats.exactCurrentTime,h!==c.PAUSED&&S.detailEnabled()&&S.detail("current time "+b)}},{type:o.APPLICATION_STATE_CHANGE,listener:function(e){(h=e.data.state)===c.PAUSED&&function(){for(S.debugEnabled()&&S.debug("pause"),L=!1,V=!1,M=!1;I.length;)I.pop();z(0,1/0),y=0,m=0}()}}],Y=[{type:r.UPDATE_END,listener:Z}];function j(e){if("mp4"===e.data.type){if(T=e.data.fragment,!L){if(e.data.id)S.debugEnabled()&&S.debug("initializing from RAP with stored "+e.data.boxType+" "+e.data.id),L=!0;else{for(var t="",n=4;n<8;++n)t+=String.fromCharCode(T[n]);if(-1===["moov","ftyp"].indexOf(t))return void(S.debugEnabled()&&S.debug("dropping fragment: "+t));S.debugEnabled()&&S.debug("initialized with "+t),x={boxType:t,fragment:T,id:Math.floor(1e11*(Math.random()+1))},S.debugEnabled()&&S.debug("set & emit first fragment with id "+x.id),l.emit(d.FIRST_FRAGMENT,x),L=!0}L&&B&&(ie(!0,'"initialized with prerollDuration"',!0),V=!0)}!function(e){J({command:C,fragment:e})}(T),V&&2==++H&&(V=!1,S.debugEnabled()&&S.debug("prerollFragment equals prerollFragmentsCount"),Z())}}function K(e){if(S.debugEnabled()&&S.debug("random access point streamtime "+e.data.onRandomAccessPoint.streamTime),!L&&k!==o.STREAM_INFO_UPDATE){x&&(S.debugEnabled()&&S.debug("not initialized & have first fragment at RAP with id "+x.id),j({data:x})),(F=Math.floor(e.data.onRandomAccessPoint.streamTime))>0&&F<=500&&(S.debugEnabled()&&S.debug("start time "+F+" within a range of 500 ms, normalize to 0"),F=0),F=Math.floor(F)/1e3,S.debugEnabled()&&S.debug("set start time to random access point");var t=parseFloat(F.toString());g&&g.buffered&&g.buffered.length&&(F=-1),t>0?(S.debugEnabled()&&S.debug("time !== 0, from stream info update?"),F=m,Q(m-t)):0===t&&(S.debugEnabled()&&S.debug("time === 0, from stream info?"),g&&g.buffered&&g.buffered.length?Q(g.buffered.end(g.buffered.length-1)):Q(m))}}function z(e,t){J({command:N,from:e,to:t})}function q(e){J({command:w,position:e})}function Q(e){J({command:U,offset:e})}function J(e){e.count=v++,O?function(e){if(S.detailEnabled()&&S.detail("queue "+e.command+" "+e.count),e.force)I.unshift(e);else if(e.command===C&&I.length&&I[I.length-1].command===C){if(R+1<30){var t=I[I.length-1].fragment,n=e.fragment,r=new Uint8Array(t.byteLength+n.byteLength);r.set(new Uint8Array(t),0),r.set(new Uint8Array(n),t.byteLength),I[I.length-1].fragment=r,I[I.length-1].count=I[I.length-1].count.toString()+" & "+e.count,R++}else R=0,S.detailEnabled()&&S.detail("joined fragments threshold (30) reached so begin new one"),I.push(e);S.detailEnabled()&&S.detail("joined fragments count "+R)}else R=0,S.detailEnabled()&&S.detail("joined fragments count "+R),I.push(e)}(e):$(e)}function X(e,t){return e&&t&&"open"===e.readyState}function $(e){if(S.detailEnabled()&&S.detail("execute "+e.command+" "+e.count),S.detailEnabled()){var t="ranges ";if(!g||g&&!g.buffered.length)t+="0";else for(var n=0,r=g.buffered.length;n<r;n+=1)t+=n+" "+g.buffered.start(n)+" - "+g.buffered.end(n),n!==r-1&&(t+=", ");S.detail(t)}switch(e.command){case C:if(!X(f,g))return void(S.debugEnabled()&&S.debug("Invalid source buffer for APPEND"));if(ie(!0,'"APPEND"'),M){S.detailEnabled()&&S.detail("append "+e.count);try{g.appendBuffer(e.fragment)}catch(e){S.debugEnabled()&&S.debug("sourceBuffer append exception"),S.debugEnabled()&&S.debug(e.message)}re()||y++}else S.debugEnabled()&&S.debug("append disabled"),S.debugEnabled()&&S.debug("trigger manual update end from append"),Z();break;case N:if(!X(f,g))return void(S.debugEnabled()&&S.debug("Invalid source buffer for REMOVE"));if(ie(!0,'"REMOVE"'),g.buffered.length&&g.buffered.end(g.buffered.length-1)>0)try{g.remove(e.from,e.to)}catch(t){S.debugEnabled()&&S.debug("removed buffer from "+e.from+" to "+e.to+" "+e.count)}else S.debugEnabled()&&S.debug("no buffered range or end is zero"),S.debugEnabled()&&S.debug("trigger manual update end from remove"),Z();break;case D:ie(!0,'"RESET"'),P=1,S.debugEnabled()&&S.debug("append enabled after reset"),M=!0,e.zeroing?(S.debugEnabled()&&S.debug("zeroing mse duration"),f.duration=0):(S.debugEnabled()&&S.debug("no zeroing of duration"),S.debugEnabled()&&S.debug("trigger manual update end from reset"),Z());break;case w:if(!X(f,g))return void(S.debugEnabled()&&S.debug("Invalid source buffer for SEEK"));ie(!0,'"SEEK"'),S.debugEnabled()&&S.debug("seek to position "+e.position+" "+e.count);try{g.buffered.length&&g.buffered.start(g.buffered.length-1)>e.position&&(e.position=g.buffered.start(g.buffered.length-1),S.debugEnabled()&&S.debug("out of last buffer range, seek to buffer start "+e.position)),l.emit(u.SEEK,{position:e.position}),S.debugEnabled()&&S.debug("seeked"),S.debugEnabled()&&S.debug("trigger manual update end from seek"),Z()}catch(e){S.debugEnabled()&&S.debug("seek err")}break;case U:if(!X(f,g))return void(S.debugEnabled()&&S.debug("Invalid source buffer for OFFSET"));if(ie(!0,'"OFFSET"'),g)try{S.debugEnabled()&&S.debug("offset "+e.offset+" "+e.count),g.timestampOffset=e.offset,l.emit(d.TIME_OFFSET,{offset:Math.round(1e3*g.timestampOffset)}),S.debugEnabled()&&S.debug("offset added")}catch(e){S.debugEnabled()&&S.debug("offset err")}else S.debugEnabled()&&S.debug("no source buffer for offset");S.debugEnabled()&&S.debug("trigger manual update end from offset"),Z()}}function Z(){if(F>-1&&g&&g.buffered&&g.buffered.length){var e=parseFloat(F.toString());F=-1,S.debugEnabled()&&S.debug("have buffer and start time on update end"),e>0?(S.debugEnabled()&&S.debug("update end && time !== 0, from stream info update?"),q(e)):0===e&&(S.debugEnabled()&&S.debug("update end && time === 0, from stream info?"),S.debugEnabled()&&S.debug("seek to lastBufferEnd"),q(m))}ie(!1,'"onUpdateEnd"'),P&&(P=0,S.debugEnabled()&&S.debug("source ready"),l.emit(s.SOURCE_READY)),I.length?$(I.shift()):!A&&g&&g.buffered.length&&g.buffered.start(0)<b-30&&re()&&(A=setTimeout((function(){clearTimeout(A),A=0}),1e4),S.debugEnabled()&&S.debug("remove buffer"),z(g.buffered.start(0),b-20))}function ee(e,n){S.debugEnabled()&&S.debug("stream info"),E=e.data.streamInfo,_=E&&E.mimeType?E.mimeType:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',k=e.name,B=E.prerollDuration?E.prerollDuration:0,H=0,V=!1,n?S.debugEnabled()&&S.debug("triggered streamInfo"):(S.debugEnabled()&&S.debug("untriggered streamInfo"),x&&(S.debugEnabled()&&S.debug("deleting stored first fragment"),x=null)),f&&"open"===f.readyState?(S.debugEnabled()&&S.debug("playerState "+Object.keys(c)[h-1]),S.debugEnabled()&&S.debug("sourceBuffer "+(g?"existing":"not existing")),-1!==[c.PLAYING,c.BUFFERING].indexOf(h)?(S.debugEnabled()&&S.debug("initialized false after stream info"),L=!1,V=!1):g?(S.debugEnabled()&&S.debug("reset after stream info"),J({command:D,zeroing:t.isTridentBrowser&&!isNaN(f.duration)&&f.duration>0})):(S.debugEnabled()&&S.debug("init sourcebuffer after stream info"),ne())):(S.debugEnabled()&&S.debug("add source open listener after stream info"),f.addEventListener(i.SOURCE_OPEN,te)),E.haveVideo||K({data:{onRandomAccessPoint:{streamTime:0}}})}function te(){S.debugEnabled()&&S.debug("mediasource open"),f.removeEventListener(i.SOURCE_OPEN,te),S.debugEnabled()&&S.debug("init sourcebuffer"),ne()}function ne(){!g&&f&&"open"===f.readyState&&(S.debugEnabled()&&S.debug("create source buffer with mime type '"+_+"'"),g=f.addSourceBuffer(_),n.add({target:l,listeners:W}),n.add({target:g,listeners:Y}),S.debugEnabled()&&S.debug("append enabled init source buffer"),M=!0,O&&Z(),l.emit(s.SOURCE_READY))}function re(){return 300<y}function ie(e,t,n){O=e,n?S.debugEnabled()&&S.debug("set updating to "+e+" from "+(t||"unknown")):S.detailEnabled()&&S.detail("set updating to "+e+" from "+(t||"unknown"))}return S.debugEnabled()&&S.debug("init sourceBufferQueue"),S.debugEnabled()&&S.debug("lastBufferEnd "+m),S.debugEnabled()&&S.debug("streamInfo "+JSON.stringify(E)),S.debugEnabled()&&S.debug("firstFragment "+!!p),S.debugEnabled()&&S.debug("playerState "+Object.keys(c)[h-1]),p&&(x=p,S.debugEnabled()&&S.debug("created with first fragment "+x.id)),n.add({target:l,listeners:G}),E&&(ie(!0,'"init with streamInfo"',!0),ee({data:{streamInfo:E}},!0)),{destroy:function(){for(;I.length;)I.pop();n.remove({target:l,listeners:G}),n.remove({target:l,listeners:W}),g&&n.remove({target:g,listeners:Y}),f.removeEventListener(i.SOURCE_OPEN,te),g=null}}}}}.apply(t,r))||(e.exports=i)},1264:function(e,t,n){var r,i;r=[n(8333),n(3778),n(3890),n(492),n(6637),n(855),n(9437),n(6273),n(9804),n(5075),n(3242)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c){return{create:function(l){var f=e.create("MediaErrorHandler"),m=null,E=0,p=0,h=0,g=[],b=[t.MEDIA.DECODE_ERROR,t.MEDIA.HLS_VIDEO_DECODE_ERROR,t.MEDIA.MEDIA_SOURCE_ENDED,t.MEDIA.HLS_BUFFER_UNDERRUN,t.MEDIA.HLS_MAX_RANGE,t.PLAYER.PLAYBACK_ERROR],_=[],T=[],A=null,S=0,y=3,v=[{type:u.MEDIA_ERROR,listener:R},{type:u.MEDIA_ERROR_RECOVERED,listener:O},{type:c.MEDIA_ERROR,listener:R},{type:c.MEDIA_ERROR_RECOVERED,listener:O},{type:d.ERROR,listener:R},{type:o.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case r.PAUSED:!function(){for(f.debugEnabled()&&f.debug("reset media error recover values");g.length;)g.shift();m=null,E=0,p=0,F()}();break;case r.PLAYING:}}},{type:o.CONFIG,listener:function(e){var t;isNaN(e.data.config.playback.mediaErrorRecoveries)?y=0:(0,1/0,t=e.data.config.playback.mediaErrorRecoveries,y=isNaN(t)?0:Math.min(Infinity,Math.max(0,t)))}},{type:o.SWITCH_STREAM_INIT,listener:function(e){M(e.data.type)?F():(F(),x(_,e.data.id))}},{type:o.SWITCH_STREAM_SUCCESS,listener:function(e){M(e.data.type)||(k(_,e.data.id),F(),L())}},{type:o.SWITCH_STREAM_FAIL,listener:function(e){M(e.data.type)?I():(k(_,e.data.id),P())}},{type:o.SWITCH_STREAM_ABORT,listener:function(e){M(e.data.type)?I():(k(_,e.data.id),P())}},{type:o.UPDATE_SOURCE_INIT,listener:function(e){F(),L(),x(T,e.data.id)}},{type:o.UPDATE_SOURCE_SUCCESS,listener:function(e){F(),L(),k(T,e.data.id)}},{type:o.UPDATE_SOURCE_FAIL,listener:function(e){F(),L(),k(T,e.data.id)}},{type:o.UPDATE_SOURCE_ABORT,listener:function(e){F(),L(),k(T,e.data.id)}}];function R(e){switch(m=e.data,f.debugEnabled()&&f.debug("media error occured with native code "+m.code),m.code){case a.MEDIA_ERR_ABORTED:m.code=t.MEDIA.ABORTED,m.message=n.MEDIA.ABORTED;break;case a.MEDIA_ERR_NETWORK:m.code=t.MEDIA.DOWNLOAD_ERROR,m.message=n.MEDIA.DOWNLOAD_ERROR;break;case a.MEDIA_ERR_DECODE:w()&&f.debugEnabled()&&f.debug("in switch or update, but continue handling from error "+m.code),m.code=t.MEDIA.DECODE_ERROR,m.message=n.MEDIA.DECODE_ERROR;break;case a.MEDIA_ERR_HLS_VIDEO_DECODE:if(w())return void(f.debugEnabled()&&f.debug("return from error "+m.code));m.code=t.MEDIA.HLS_VIDEO_DECODE_ERROR,m.message=n.MEDIA.HLS_VIDEO_DECODE_ERROR;break;case a.MEDIA_ERR_SRC_NOT_SUPPORTED:m.code=t.MEDIA.NOT_SUPPORTED,m.message=n.MEDIA.NOT_SUPPORTED;break;case a.MEDIA_ERR_MEDIA_SOURCE_ENDED:w()&&f.debugEnabled()&&f.debug("in switch or update, but continue handling from error "+m.code),m.code=t.MEDIA.MEDIA_SOURCE_ENDED,m.message=n.MEDIA.MEDIA_SOURCE_ENDED;break;case a.MEDIA_ERR_HLS_JUMP:if(U(e,t.PLAYER.PLAYBACK_ERROR))return void(f.debugEnabled()&&f.debug("return from error "+m.code));m.code=t.PLAYER.PLAYBACK_ERROR,m.message=n.PLAYER.PLAYBACK_ERROR;break;case a.MEDIA_ERR_HLS_BUFFER_UNDERRUN:if(m.waiting&&E<y)return void l.emit(d.OFFLINE_BUFFER_UNDERRUN);if(!m.reconnect&&U(e,t.MEDIA.HLS_BUFFER_UNDERRUN))return void(f.debugEnabled()&&f.debug("return from error "+m.code));m.code=t.MEDIA.HLS_BUFFER_UNDERRUN,m.message=n.MEDIA.HLS_BUFFER_UNDERRUN;break;case a.MEDIA_ERR_HLS_MAX_RANGE:if(U(e,t.MEDIA.HLS_MAX_RANGE))return void(f.debugEnabled()&&f.debug("return from error "+m.code));m.code=t.MEDIA.HLS_MAX_RANGE,m.message=n.MEDIA.HLS_MAX_RANGE}(function(e){var t;if(-1===b.indexOf(e))t=!1,f.debugEnabled()&&f.debug("media error with code "+e+" not recoverable, trigger error");else if(E>=y)t=!1,f.debugEnabled()&&f.debug("media error with code "+e+" recoverable, but recover threshold "+y+" reached within "+(E?(Math.floor(performance.now())-g[0])/1e3:0)+" seconds, trigger error");else{for(t=!0,g.push(Math.floor(performance.now()));g[g.length-1]-g[0]>6e4;)g.shift();E=g.length,p++;var n=6e4-(g[E-1]-g[0]),r=y-E;f.debugEnabled()&&f.debug("recovering from media error "+e+", recovery "+E+"/"+y+" within the last 60 seconds ("+p+" total)"),f.debugEnabled()&&f.debug(r+(r<=1?" recoveries":" recovery")+" allowed within remaining time of "+n/1e3+" seconds"),F(),h=setTimeout(I,1e4),l.emit(s.RECOVER,{count:E,max:y,total:p,code:e,remainingTime:n,reconnect:!!m.reconnect})}return t})(m.code)||(f.debugEnabled()&&f.debug('trigger "'+s.ERROR+'" with translated code '+m.code+' and message "'+m.message+'"'),l.emit(s.ERROR,m))}function O(e){f.debugEnabled()&&f.debug("recovery succeed from error "+e.data.code),F(),l.emit(s.RECOVERED,{data:{code:e.data.code}})}function I(){F(),f.debugEnabled()&&f.debug("recovery failed from error with translated code "+m.code+' and message "'+m.message+'"'),setTimeout(C,200)}function C(){l.emit(s.ERROR,m)}function N(){f.debugEnabled()&&f.debug("inSwitch has length "+_.length);var e=!1;return _.length&&(e=!0),e}function D(){f.debugEnabled()&&f.debug("inUpdate has length "+T.length);var e=!1;return T.length&&(e=!0),e}function w(){f.debugEnabled()&&f.debug("check if switch or update");var e=!1;return N()?(f.debugEnabled()&&f.debug("still in switch"),e=!0):D()&&(f.debugEnabled()&&f.debug("still in update"),e=!0),e}function U(e,t){var n=!1;return N()?(f.debugEnabled()&&f.debug("still in switch, queue error with transformed code "+t),function(e,t){f.debugEnabled()&&f.debug("media error with code "+t+'" queued during ongoing switch or update'),A||l.emit(s.QUEUED,{code:t}),A=e}(e,t),n=!0):D()&&(f.debugEnabled()&&f.debug("still in update, do nothing"),n=!0),n}function M(e){return"recover"===e}function P(){f.debugEnabled()&&f.debug("check queued media error"),w()?f.debugEnabled()&&f.debug("abort queued check, still ongoing switch or update"):A&&!S&&(f.debugEnabled()&&f.debug("set timeout for handling queued media error again"),S=setTimeout((function(){f.debugEnabled()&&f.debug("timeout fired queued media error"),clearTimeout(S),S=0,R(A),L()}),250))}function L(){A=null,l.emit(s.UNQUEUED)}function F(){clearTimeout(h),h=0}function x(e,t){return e.push(t),e}function k(e,t){for(var n=0;n<e.length;)e[n]===t?e.splice(n,1):++n;return e}return f.debugEnabled()&&f.debug("initialize"),i.add({target:l,listeners:v}),{destroy:function(){i.remove({target:l,listeners:v})}}}}}.apply(t,r))||(e.exports=i)},4221:function(e,t,n){var r,i;r=[n(8333)],void 0===(i=function(e){return{create:function(t,n){var r=e.create("MoQBufferQueue"+(n?"-"+n:"")),i=[],a=[],o=240,s=240,d=["Audio","Video"],u=null,c={audioMaxSize:0,videoMaxSize:0,audioOverflowCount:0,videoOverflowCount:0,lastMonitoringTime:Date.now(),MONITORING_INTERVAL_MS:2e3},l=null,f=null,m=!1;function E(){i=[],a=[],l=null,f=null,u=null,m=!1}function p(){g(h())}function h(){for(var e=i,t=-1,n=e.length-1;n>=0;n--)if(e[n].isKeyframe){t=n;break}return-1!==t?e.splice(0,t):e.length>1&&e.splice(0,e.length-1),l&&e.unshift(l),e.length>1?e[1].timestamp:0}function g(e){var t=a;if(e>=0)for(;t.length>0&&t[0].timestamp<e;)t.shift();else t.length>1&&t.splice(0,t.length-1);f&&t.unshift(f)}function b(){return u}function _(){var e,t=null;for(e=0;e<i.length;e++)i[e].isCodecConfig||i[e].timestamp>=0&&(!t||i[e].timestamp<t)&&(t=i[e].timestamp);for(e=0;e<a.length;e++)a[e].timestamp>=0&&(!t||a[e].timestamp<t)&&(t=a[e].timestamp);return t}function T(){var e=Date.now(),n=a.length,d=i.length;if(n>c.audioMaxSize&&(c.audioMaxSize=n),d>c.videoMaxSize&&(c.videoMaxSize=d),e-c.lastMonitoringTime>=c.MONITORING_INTERVAL_MS){var u=Math.round(n/s*100),l=Math.round(d/o*100);r.detailEnabled()&&r.detail("Buffer Status - Audio: "+n+"/240 ("+u+"%), Video: "+d+"/240 ("+l+"%)"),r.detailEnabled()&&r.detail("Buffer Max - Audio: "+c.audioMaxSize+", Video: "+c.videoMaxSize),r.detailEnabled()&&r.detail("Buffer Overflows - Audio: "+c.audioOverflowCount+", Video: "+c.videoOverflowCount),t.emit("bufferMonitoring",{audio:{current:n,max:s,fillPercentage:u,maxReached:c.audioMaxSize,overflowCount:c.audioOverflowCount},video:{current:d,max:o,fillPercentage:l,maxReached:c.videoMaxSize,overflowCount:c.videoOverflowCount}}),c.lastMonitoringTime=e}}return r.debugEnabled()&&r.debug("init"),{destroy:function(){r.debugEnabled()&&r.debug("destroying"),E()},setReferenceType:function(e){-1!==d.indexOf(e)&&(u=e)},getReferenceType:b,getNextVideoFrame:function(){return 0===i.length?null:i.shift()},getNextAudioFrame:function(){return 0===a.length?null:a.shift()},getNextVideoFrameByTimestamp:function(e){return i.length&&i[0].timestamp<=e?i.shift():null},getNextAudioFrameByTimestamp:function(e){return a.length&&a[0].timestamp<=e?a.shift():null},getNextTimestamp:_,getLastTimestamp:function(){var e=null;return i.length&&(e=i[i.length-1].timestamp),a.length&&(!e||a[a.length-1].timestamp>e)&&(e=a[a.length-1].timestamp),e},appendVideoFragment:function(e){i.length>=o&&(c.videoOverflowCount++,r.debugEnabled()&&r.debug("Video buffer overflow, dropping frame")),i.push(e),e.isCodecConfig&&(l=e),T()},appendVideoFragmentToTheFront:function(e){i.unshift(e),e.isCodecConfig&&(l=e)},appendAudioFragment:function(e){a.length>=s&&(c.audioOverflowCount++,r.debugEnabled()&&r.debug("Audio buffer overflow, dropping frame")),1===a.length&&a[0].isCodecConfig&&(a[0].timestamp=e.timestamp,f.timestamp=e.timestamp),a.push(e),e.isCodecConfig&&(f=e),T()},getVideoBufferedTimeRange:function(){var e={start:0,end:0,length:0},t=i;if(t.length>0){var n=t[0].timestamp,r=t[t.length-1].timestamp;e.start=n,e.end=r,e.length=t.length}return e},getAudioBufferedTimeRange:function(){var e={start:0,end:0,length:0},t=a;if(t.length>0){var n=t[0].timestamp,r=t[t.length-1].timestamp;e.start=n,e.end=r,e.length=t.length}return e},getBufferedTimeRange:function(){var e={start:0,end:0,length:0},t="Audio"===u?a:i;if(t.length>0){var n=t[0].timestamp,r=t[t.length-1].timestamp;e.start=n,e.end=r,e.length=t.length}return e},setPlaybackRate:function(){},reset:function(){E()},seek:function(e){for(var t=-1,n=0;n<i.length&&(i[n].isKeyframe&&i[n].timestamp<=e&&(t=n),!(i[n].timestamp>e));n++);if(-1!==t){i.splice(0,t);var r=i[0].timestamp,o=a.findIndex((e=>e.timestamp>=r));return-1!==o&&a.splice(0,o),{success:!0,timestamp:i[0].timestamp}}return E(),{success:!1,timestamp:e}},clearBuffers:E,getSeekableRange:function(){var e="Audio"===u?a:i;return 0===e.length?null:{start:e[0].timestamp,end:e[e.length-1].timestamp}},reduceBuffers:p,ready:function(){return null!==b()&&m},prepareBuffers:function(){return p(),m=!0,t.emit("ready"),_()},trimVideoFrames:h,trimAudioFrames:g,getVideoBuffer:function(){return i},getAudioBuffer:function(){return a},getVideoBufferLength:function(){return i.length},getAudioBufferLength:function(){return a.length},getBufferMonitoringStats:function(){return{audio:{current:a.length,max:s,fillPercentage:Math.round(a.length/s*100),maxReached:c.audioMaxSize,overflowCount:c.audioOverflowCount},video:{current:i.length,max:o,fillPercentage:Math.round(i.length/o*100),maxReached:c.videoMaxSize,overflowCount:c.videoOverflowCount}}}}}}}.apply(t,r))||(e.exports=i)},4545:function(e,t,n){var r,i;r=[n(8333),n(6637),n(3778),n(492),n(1520),n(907),n(9623),n(3038),n(2628)],void 0===(i=function(e,t,n,r,i,a,o,s,d){var u=e.create("MoqHandler");return{create:function(e){var c,l,f,m,E,p,h=[{type:i.CONFIG,listener:function(e){var t;P(e)&&(t=e.data.config,l=t,function(){_=0,v=0,l.playback&&(T=!!l.playback.muted,S=!!l.playback.automute,y=!!l.playback.autoplay,A=l.playback.volume||1),l.tweaks&&l.tweaks.buffer&&(I=l.tweaks.buffer);var e=N[l.playback.latencyControlMode].min;C=void 0!==I.start?I.start:e,C=Math.max(.1,C)}())}},{type:i.STREAM_FRAGMENT,listener:function(e){P(e)&&b[_].addStreamFragment(e)}},{type:i.STREAM_INFO,listener:function(e){P(e)&&b[_].addStreamInfo(e)}},{type:i.MEDIA_ERROR_RECOVER,listener:function(){var t=b[_],n=t.getLastError();n&&!O&&(O=!0,t.recoverFromError(n)?e.emit(a.MEDIA_ERROR_RECOVERED,{data:{code:O}}):w(t,{data:{buffer:!1}}))}},{type:i.MEDIA_ERROR_RECOVERED,listener:function(){O=!1}},{type:i.MEDIA_ERROR_QUEUED,listener:function(){}},{type:i.MEDIA_ERROR_UNQUEUED,listener:function(){}},{type:i.WEB_TRANSPORT_META_DATA,listener:function(e){P(e)&&b[_].addWtMetaData(e)}},{type:s.CREATE_VIDEO,listener:function(t){var n,r;P(t)&&(t.data.elementIds&&(E=t.data.elementIds),t.data.container&&(p=t.data.container)),v=E.length;for(var i=0;i<v;i++)r={elementId:E[i],index:i},n=d.create(e,r.elementId,p,r.index,T,S,y,A,C),b.push(n),R[i]=[];e.emit(a.ELEMENT_CREATED,{video:U(b[_])}),F(_),M(b[_]),u.debugEnabled()&&u.debug("add time update interval for play stats"),c=setInterval(L,100)}},{type:s.DESTROY_VIDEO,listener:function(){}},{type:s.VIDEO_SOURCE,listener:function(){}},{type:s.PLAY,listener:function(e){!function(e,t){e?e.play(t):u.debugEnabled()&&u.debug("moqElement could not be found")}(b[_],e)}},{type:s.PAUSE,listener:function(e){u.debugEnabled()&&u.debug("onPause index: "+_),w(b[_],e,e.data.buffer),function(){for(var e in R)if(Object.prototype.hasOwnProperty.call(R,e))for(;R[e].length;)R[e].pop()}()}},{type:s.MUTE,listener:function(){var e;u.debugEnabled()&&u.debug("mute index: "+_),(e=b[_])?(T=!0,e.setMute()):u.debugEnabled()&&u.debug("moqElement could not be found")}},{type:s.UNMUTE,listener:function(){u.debugEnabled()&&u.debug("unmute index: "+_);for(var e=0;e<b.length;e++)t=b[e],n=!0,t?(n&&(T=!1),t.setUnmute()):u.debugEnabled()&&u.debug("moqElement could not be found");var t,n}},{type:s.SEEK,listener:function(){}},{type:s.SET_VOLUME,listener:function(e){var t,n;P(e)&&(u.debugEnabled()&&u.debug("onSetVolume index: "+_),A=Math.min(1,Math.max(0,e.data.volume)),t=b[_],n=A,t?(t.setVolume(n),A=n):u.debugEnabled()&&u.debug("moqElement could not be found"))}},{type:s.SET_RATE,listener:function(){}},{type:o.LOAD_START,listener:D},{type:o.PROGRESS,listener:D},{type:o.SUSPEND,listener:D},{type:o.ABORT,listener:D},{type:o.EMPTIED,listener:D},{type:o.STALLED,listener:D},{type:o.PLAY,listener:D},{type:o.PAUSE,listener:D},{type:o.LOADED_META_DATA,listener:D},{type:o.LOADED_DATA,listener:D},{type:o.WAITING,listener:D},{type:o.ERROR,listener:D},{type:o.PLAYING,listener:D},{type:o.CAN_PLAY,listener:D},{type:o.CAN_PLAY_THROUGH,listener:D},{type:o.SEEKING,listener:D},{type:o.SEEKED,listener:D},{type:o.TIME_UPDATE,listener:D},{type:o.ENDED,listener:D},{type:o.RATE_CHANGE,listener:D},{type:o.DURATION_CHANGE,listener:D},{type:o.VOLUME_CHANGE,listener:D},{type:o.ELEMENT_CREATED,listener:D},{type:o.PLAY_START_SUCCESS,listener:D},{type:o.PLAY_START_ABORT_ERROR,listener:D},{type:o.PLAY_START_NOT_ALLOWED_ERROR,listener:D},{type:o.VIEWPORT_VISIBLE,listener:D},{type:o.VIEWPORT_HIDDEN,listener:D},{type:o.VIDEO_DECODE_ERROR,listener:D},{type:o.AUDIO_DECODE_ERROR,listener:D},{type:o.VIDEO_DECODER_STARTUP_ERROR,listener:D},{type:o.AUDIO_DECODER_STARTUP_ERROR,listener:D},{type:o.ADJUSTED_META_DATA,listener:D},{type:i.SWITCH_STREAM_INIT,listener:function(){}},{type:i.SWITCH_STREAM_SUCCESS,listener:function(){}},{type:i.UPDATE_SOURCE_INIT,listener:function(){}},{type:i.UPDATE_SOURCE_SUCCESS,listener:function(){}},{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case r.PAUSED:case r.PLAYING:}}}],g=[],b=[],_=0,T=!1,A=1,S=!1,y=!1,v=0,R={0:[]},O=!1,I={},C=null,N={classic:{min:.6},fastadaptive:{min:.3-.075},balancedadaptive:{min:.375}};function D(t){if(t&&t.name&&t.data){var r=_;m=M(b[r]),t.name===o.VIDEO_DECODE_ERROR||t.name===o.AUDIO_DECODE_ERROR?m={code:n.MEDIA.DECODE_ERROR,message:t.data.error.message}:t.name!==o.VIDEO_DECODER_STARTUP_ERROR&&t.name!==o.AUDIO_DECODER_STARTUP_ERROR||(m={code:n.MEDIA.DECODER_STARTUP_ERROR,message:t.data.error.message});var i=x(m,t.data,!1),a=t.name,s=function(e){return"moqHandler."+function(e){var t=e.indexOf(".")+1;return e.substring(t)}(e)}(a);if(a!==o.TIME_UPDATE)for(R[r].unshift(a);R[r].length>20;)R[r].pop();e.emit(s,i)}}function w(e,t){e?e.pause(t):u.debugEnabled()&&u.debug("moqElement could not be found")}function U(e){if(e)return e.getVideoElement();u.debugEnabled()&&u.debug("moqElement could not be found")}function M(e){return e?e.getMoqPayload():(u.debugEnabled()&&u.debug("moqElement could not be found"),{index:0})}function P(e,t){var n=e&&Object.prototype.hasOwnProperty.call(e,"data");return t?n&&Object.prototype.hasOwnProperty.call(e.data,t):n}function L(){for(f=M(b[_]);g.length>2;)g.shift();g.push(f),e.emit(o.TIME_UPDATE,f)}function F(t){for(var n=b.map((function(e){return e.getVideoElement()})),r=0;r<n.length;r+=1)void 0!==typeof n[r]&&n[r]||n.pop();n.length-1<t&&(t=-1),e.emit(a.ACTIVE_VIDEO_ELEMENT_CHANGE,{videoElementList:n,activeVideoElement:t<0?null:n[t]})}function x(e,t,n){for(var r in t)"object"!=typeof t[r]?Object.prototype.hasOwnProperty.call(e,r)&&!n||(n?e[r]+=t[r]:e[r]=t[r]):(Object.prototype.hasOwnProperty.call(e,r)||(e[r]={}),x(e[r],t[r],n));return e}return t.add({target:e,listeners:h}),{destroy:function(){clearInterval(c),c=void 0,t.remove({target:e,listeners:h}),function(e){if(e){for(var t=0;t<e.length;t++)e[t].destroy();F(-1),e=[]}else u.debugEnabled()&&u.debug("moqElement could not be found")}(b)}}}}}.apply(t,r))||(e.exports=i)},5082:function(e,t,n){var r,i;r=[n(8333),n(6627),n(492),n(6637),n(1520),n(3038),n(907),n(738),n(3701)],void 0===(i=function(e,t,n,r,i,a,o,s,d){return{create:function(t){var o=e.create("MoQPlaybackControl"),u=!1,c=!0,l=!1,f=null,m=null,E={},p=null,h=[{type:i.CONFIG,listener:function(e){e.data.config.tweaks&&e.data.config.tweaks.buffer&&(E=e.data.config.tweaks.buffer)}},{type:i.STARTUP_STATS_COMPLETED,listener:function(e){m=e.data}},{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(f=e.data.state,m=null,f){case n.PLAYING:l=!1;break;case n.LOADING:o.debugEnabled()&&o.debug("add play state listeners"),r.add({target:t,listeners:g});break;case n.PAUSED:l=!1,m=null;break;case n.PAUSING:r.remove({target:t,listeners:g}),o.warnEnabled()&&o.warn("entering paused state"),u=!1,c=!0}}},{type:a.PLAY,listener:function(e){o.debugEnabled()&&o.debug("on play")}},{type:i.BUFFER_GOAL_STATS,listener:function(e){p=e.data}}],g=[{type:s.PRIVATE_MEDIA_STATS,listener:function(e){if(p||void 0!==E.start){var n=e.data.mediaStats,r=n.bufferDelay,i=n.timeLag,a=void 0!==E.start?E.start:null===p||0===p.min?.6:p.min-p.min/4;a=Math.max(.1,a);var s=void 0!==E.min?E.min:.09;a<=0&&(a=.6);var f=i>a+a/4,h=i<=(s=Math.max(.09,s))||i<a&&!f;o.detailEnabled()&&o.detail("timeLag: "+i+" referenceThreshold: "+a+" resumeThreshold: "+s),function(e){var n=e.needToBuffer,r=e.needToResume;e.canStart&&!l&&!u&&m?(o.debugEnabled()&&o.debug("Starting playback"),u=!0,t.emit(d.PLAYBACK_STARTED,m),c=!1,o.debugEnabled()&&o.debug("Buffer sufficient for playback, current delay: "+e.timeLag)):u&&!c&&n&&!l?(o.debugEnabled()&&o.debug("Need to buffer, current delay: "+e.timeLag),c=!0,t.emit(d.BUFFERING)):u&&c&&r&&!n&&!l&&(o.debugEnabled()&&o.debug("Resuming playback"),t.emit(d.PLAYBACK_STARTED),c=!1,o.debugEnabled()&&o.debug("Buffer sufficient for playback, current delay: "+e.timeLag))}({bufferDelay:r,timeLag:i,needToBuffer:f,needToResume:h,canStart:r>=a||r<a&&!f})}}}];return o.debugEnabled()&&o.debug("init"),r.add({target:t,listeners:h}),{destroy:function(){r.remove({target:t,listeners:h})},reset:function(){u=!1,c=!0,l=!1,m=null}}}}}.apply(t,r))||(e.exports=i)},2628:function(e,t,n){var r,i;r=[n(8333),n(6627),n(6637),n(9623),n(4283),n(6660),n(4286),n(7894),n(4221),n(9467),n(6415)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c){var l=i.VideoDecoderModule,f=a.VideoRenderer,m=o.AudioDecoderModule,E=s.AudioRenderer;return{create:function(t,i,a,o,s,p,h,g,b){var _,T,A,S,y=e.create("MoQProxy"),v=!1,R=!1,O=!1,I=null,C=null,N=null,D=null,w=!1,U=!1,M=!0,P=!1,L=null,F=1e6*b,x=!1,k=0,B=0,H=new Map,V=new Map,G=new Map,W=new Map,Y=0,j={videoLatencies:new Map,audioLatencies:new Map,syncHistory:[],maxHistorySize:50,syncThresholdMs:40,correctionThresholdMs:100,lastSyncCheck:0,syncCheckInterval:1e3,currentSyncOffset:0,syncCorrectionActive:!1,baselineTimeLag:{audio:0,video:0},avSyncAdjustments:{audio:0,video:0},inSyncCounter:0,latencyReductionThreshold:5,latencyReductionRate:.1,lastStatusString:"",lastCorrectionString:"",lastCleanup:0,renderMetrics:{videoFrames:0,audioFrames:0,videoSizeTotal:0,audioSizeTotal:0,videoDurationTotal:0,audioDurationTotal:0,renderRatio:0,avgVideoSize:0,avgAudioSize:0,avgVideoDurationMs:0,avgAudioDurationMs:0},lastMetricsReport:0,metricsReportInterval:1e3},K=null,z=NaN,q=0,Q=!1,J=0,X=0,$=c.create(t),Z=d.create(t,"Decode"),ee=u.create(t,"Render"),te=[{type:"bufferMonitoring",listener:function(e){e&&e.audio&&e.video&&(y.debugEnabled()&&y.debug("MoQ buffer monitoring: "+JSON.stringify(e)),t.emit("moqBufferStats",{type:"moq-buffers",data:e}))}}],ne=[{type:"frameDecoded",listener:function(e){var t=Math.round(e.timestamp),n=G.get(t);n&&(G.delete(t),e.frameId=n),ee.appendVideoFragment(e)}},{type:"decodeError",listener:function(e){y.debugEnabled()&&y.debug("Video decode error:"+JSON.stringify(e));var n=Date.now();n-se<1e3?y.debugEnabled()&&y.debug("Skipping duplicate error emission"):(se=n,Oe(e,"video"),w?t.emit(r.VIDEO_DECODE_ERROR,{error:e}):t.emit(r.VIDEO_DECODER_STARTUP_ERROR,{error:e}))}},{type:"configured",listener:function(e){y.debugEnabled()&&y.debug("VideoDecoder configured:"+JSON.stringify(e)),w=!0,oe&&(oe=!1,ae=!1)}}],re=[{type:"frameDecoded",listener:function(e,t){var n=W.get(t);n&&W.delete(t),ee.appendAudioFragment(e,t,n)}},{type:"decodeError",listener:function(e){y.debugEnabled()&&y.debug("Audio decode error:"+JSON.stringify(e));var n=Date.now();n-se<1e3?y.debugEnabled()&&y.debug("Skipping duplicate error emission"):(se=n,Oe(e,"audio"),U?t.emit(r.AUDIO_DECODE_ERROR,{error:e}):t.emit(r.AUDIO_DECODER_STARTUP_ERROR,{error:e}))}},{type:"configured",listener:function(e){y.debugEnabled()&&y.debug("AudioDecoder configured:"+JSON.stringify(e)),U=!0,oe&&(oe=!1,ae=!1)}}],ie=null,ae=!1,oe=!1,se=0,de=void 0;function ue(){y.debugEnabled()&&y.debug("reset"),v=!1,R=!1,O=!1,K=null,z=NaN,q=0,J=0,X=0,x=!1,H.clear(),V.clear(),G.clear(),W.clear(),k=0,B=0,Y=0,j.videoLatencies.clear(),j.audioLatencies.clear(),j.syncHistory=[],j.lastSyncCheck=0,j.currentSyncOffset=0,j.syncCorrectionActive=!1,j.baselineTimeLag={audio:0,video:0},j.avSyncAdjustments={audio:0,video:0},j.inSyncCounter=0,j.renderMetrics.videoFrames=0,j.renderMetrics.audioFrames=0,j.renderMetrics.videoSizeTotal=0,j.renderMetrics.audioSizeTotal=0,j.renderMetrics.videoDurationTotal=0,j.renderMetrics.audioDurationTotal=0,j.renderMetrics.renderRatio=0,j.renderMetrics.avgVideoSize=0,j.renderMetrics.avgAudioSize=0,j.renderMetrics.avgVideoDurationMs=0,j.renderMetrics.avgAudioDurationMs=0,j.lastMetricsReport=0}function ce(){I||(I=new l,n.add({target:I,listeners:ne}))}function le(){N||(N=new m,n.add({target:N,listeners:re}))}function fe(){y.debugEnabled()&&y.debug("Creating video renderer"),y.debugEnabled()&&y.debug("Canvas dimensions: "+_.width+"x"+_.height),C=new f(_,{autoResize:!1}),y.debugEnabled()&&y.debug("VideoRenderer created successfully")}function me(){D||(D=new E({schedulingLatencySecs:.05,startTimeoutMs:100,startBufferMs:F/1e3,volume:g,muted:s,allowDelayedRendering:!0,enableFrameMonitoring:!1,forceWebCodecsFallback:!1,events:{frameScheduled:function(e,t,n,r,i){X=1e6*e,y.debugEnabled()&&y.debug("Audio frame scheduled at "+e.toFixed(2)+" s, current time: "+t.toFixed(2)+", external sync time: "+n.toFixed(2)+", delta deviation: "+(t-n-r).toFixed(2)+", timeLag: "+(i||0).toFixed(3))},audioError:function(e){y.debugEnabled()&&y.debug("AudioRenderer error: "+JSON.stringify(e))},audioLag:function(e,t){y.debugEnabled()&&y.debug("Audio lag: "+e+", lag: "+t.toFixed(2))},underrun:function(){y.debugEnabled()&&y.debug("Audio underrun: chunk too late to schedule")},closed:function(){y.debugEnabled()&&y.debug("Audio closed")},frameRemoved:function(e,t,n){y.detailEnabled()&&y.detail("Audio frame removed at "+e.toFixed(2)+" s, current time: "+t.toFixed(2)+", reason: "+n)},stateChanged:function(e){y.debugEnabled()&&y.debug("Audio ctx state changed to "+e)},startSuccess:function(){y.debugEnabled()&&y.debug("Audio started")},startError:function(e){switch(y.debugEnabled()&&y.debug("Audio error: "+JSON.stringify(e)),e.code){case 1005:!p||s||P||(P=!0,be()),t.emit(r.PLAY_START_NOT_ALLOWED_ERROR,{error:e,automuted:P}),P=!1}},volumeChanged:function(e,n){g=e,s=n,y.debugEnabled()&&y.debug("Volume changed to "+g+", muted: "+s),t.emit(r.VOLUME_CHANGE,{volume:g,muted:s})},trace:function(e){y.debugEnabled&&y.debug("Audio trace: "+e)},frameMonitoring:function(e){y.debugEnabled()&&y.debug("Audio frame monitoring: "+JSON.stringify(e)),t.emit("bufferMonitoring",{type:"audio-renderer-"+(e.type||"unknown"),data:e})},frameRendered:function(e,n,r,i,a,o,s){var d=null,u=null;o&&V.has(o)?(u=V.get(o),V.delete(o),y.detailEnabled()&&y.detail("Audio arrival time found for frameId "+o+": "+u+"us")):y.debugEnabled()&&y.debug("No audio arrival time found for frameId: "+o),null!==u?(d=(1e6*a-u)/1e3,y.detailEnabled()&&y.detail("Audio frame rendered: "+e.toFixed(3)+"s, duration: "+n.toFixed(3)+"s, frames: "+r+", mode: "+i+", latency: "+d.toFixed(1)+"ms"),t.emit("frameLatency",{type:"audio",timestamp:e,latencyMs:d,mode:i,frames:r})):y.detailEnabled()&&y.detail("Audio frame rendered: "+e.toFixed(3)+"s, duration: "+n.toFixed(3)+"s, frames: "+r+", mode: "+i+" (no arrival time)"),function(e,t,n,r){var i=j.renderMetrics;i.audioFrames++,i.audioSizeTotal+=r,i.audioDurationTotal+=n;var a=i.audioFrames;i.avgAudioSize=a>0?i.audioSizeTotal/a:0,i.avgAudioDurationMs=a>0?i.audioDurationTotal/a:0,i.renderRatio=i.audioFrames>0?i.videoFrames/i.audioFrames:0}(0,0,1e3*n,s||4*r)}},getExternalSyncTime:function(){return($.getTargetTime()+Re().targetTimeOffset)/1e6}}))}function Ee(){I&&(n.remove({target:I,listeners:ne}),I.close(),I=null),w=!1}function pe(){C&&(C.close(),C=null)}function he(){N&&(n.remove({target:N,listeners:re}),N.close(),N=null),U=!1}function ge(){D&&(D.close(),D=null)}function be(){_e(!0)}function _e(e){D?D.setMute(e):t.emit(r.VOLUME_CHANGE,{volume:g,muted:e})}function Te(){Ae(),L=requestAnimationFrame(Se),M=!1,v=!0}function Ae(){L&&(cancelAnimationFrame(L),L=null),M=!0,v=!1}function Se(){L=null,M&&y.debugEnabled()&&y.debug("exit playback loop"),ve(),L=requestAnimationFrame(Se)}function ye(e){z=Number(e),y.debugEnabled()&&y.debug("referenceTimeOffset: "+z)}function ve(){var e=$.getTargetTime(),n=Re().targetTimeOffset,i=F-n;if(!ae){var a=.001*performance.now();a-Y>10&&(function(e){var t=1e6*(e-10);function n(e){var n=0;for(var r of e.entries()){var i=r[0];r[1]<t&&(e.delete(i),n++)}return n}var r=n(H),i=n(V);(r>0||i>0)&&y.debugEnabled()&&y.debug("Cleaned old arrival times - Video: "+r+" (remaining: "+H.size+"), Audio: "+i+" (remaining: "+V.size+")")}(a),Y=a);var o,s=ee.getVideoBufferedTimeRange();if(!R||s.length>0){var d=ee.getNextVideoFrameByTimestamp(R?e-i:Number.MAX_SAFE_INTEGER);d&&(R?O||(O=!0,t.emit(r.LOADED_DATA),t.emit(r.CAN_PLAY_THROUGH),t.emit(r.PLAYING)):R=!0,$.setLastRenderedVideoFrameTimestamp(d.timestamp),C.renderFrame(d,d.timestamp/1e3,d.frameId))}if((o=x?ee.getNextAudioFrameByTimestamp(e+n):ee.getNextAudioFrameByTimestamp(e-i))&&(x||o.isCodecConfig||(x=!0),o.timestamp>=X&&($.setLastRenderedAudioFrameTimestamp(X),!O&&x&&"Audio"===K&&(O=!0,t.emit(r.LOADED_DATA),t.emit(r.CAN_PLAY_THROUGH),t.emit(r.PLAYING))),D.renderAudioData(o.frame,o.timestamp,o.frameId)),!R||s.length<5){var u=Z.getNextVideoFrame();if(u){if(!u.isCodecConfig&&!w)return y.debugEnabled()&&y.debug("video decoder not configured, skipping to decode frame and re-pushing to the front of the queue"),Z.appendVideoFragmentToTheFront(u),u;u.isCodecConfig?(w=!1,I.configureDecoder(u)):I.decodeChunk(u)}}var c=Z.getNextAudioFrame();c&&N.decodeChunk(c)}}function Re(){var e=$.getStateInSeconds(),t=e.lastRenderedFrameTimestamp-e.firstDecodeFrameTimestamp,n=e.lastReceivedFrameTimestamp-e.firstDecodeFrameTimestamp,r=0===n?0:n-e.currentTime,i=$.getTargetTimeInSeconds(),a=i+J/1e6-e.currentTime-F/1e6;return n>i&&(J=1e6*(n-i)),{currentTime:e.currentTime,targetTime:i,targetTimeOffset:J,bufferStart:t,bufferEnd:n,bufferDelay:r,timeLag:a,playbackRate:1,index:o,paused:M,started:v}}function Oe(e,t){ie||(ie={error:e,type:t},ae=!0)}function Ie(){ie=null,ae=!1,oe=!1}return y.debugEnabled()&&y.debug("init"),ue(),T=i,A=a.clientWidth,S=a.clientHeight,(_=document.createElement("canvas")).id=T,_.width=A,_.height=S,_.style.width=A+"px",_.style.height=S+"px",n.add({target:t,listeners:te}),h&&(ce(),le(),fe(),me()),a.appendChild(_),{destroy:function(){y.debugEnabled()&&y.debug("destroy"),ue(),Ee(),he(),pe(),ge(),_&&_.parentNode===a&&a.removeChild(_),_=null,n.remove({target:t,listeners:te})},play:function(e){M&&(y.debugEnabled()&&y.debug("onPlay"),(!e||e.data&&!e.data.buffer)&&(I||ce(),N||le(),C||fe(),D||me()),y.debugEnabled()&&!de&&(de=setInterval((()=>{var e=Re();y.debug("Timing  CC: "+e.currentTime.toFixed(3)+" TT: "+e.targetTime.toFixed(3)+" BE: "+e.bufferEnd.toFixed(3)+" BD: "+e.bufferDelay.toFixed(3)+" TL: "+e.timeLag.toFixed(3))}),1e3)))},pause:function(e){M||(y.debugEnabled()&&y.debug("onPause"),e.data.buffer||(Ae(),Ie(),pe(),ge(),Ee(),he(),K=null,$.reset(),Z.clearBuffers(),ee.clearBuffers(),ue()),de&&(clearInterval(de),de=void 0))},setVolume:function(e){g=e,D?D.setVolume(g):t.emit(r.VOLUME_CHANGE,{volume:g,muted:s})},setMute:be,setUnmute:function(){_e(!1)},addStreamFragment:function(e){var t,n,r,i,a,o;t=e.data.fragment,n=e.data.type,i=function(e,t){var n=Number(e.time);if(("aac"===t&&"Audio"===K||"avc"===t)&&e.flagsParsed&&!e.flagsParsed.IsCodecConfig){if(Q){var r=isNaN(e.startDelay)?0:Math.max(0,e.startDelay),i=Re(),a=i?1e6*i.timeLag+1*F-1e6*i.bufferDelay:0;!isNaN(z)&&q?(ye(n+r+z-q-a),Q=!1):(ye(n+r),Q=!1)}q=n}n=isNaN(z)?-1:Math.max(0,n-z);var o={payloadUnit:e.payload,dtsUs:n,timestamp:n,isCodecConfig:e.flagsParsed&&e.flagsParsed.IsCodecConfig,normalized:!1};return"avc"===t&&(o.isKeyframe=e.flagsParsed&&e.flagsParsed.IsKeyframe),o}(t,n),a=i.timestamp,o=1e3*performance.now(),"avc"===n?(r=++k,i.frameId=r,H.set(r,o),G.set(a,r)):"aac"===n&&(r=++B,i.frameId=r,V.set(r,o),W.set(a,r)),"avc"===n?(Z.appendVideoFragment(i),M&&"Video"===K&&i.isKeyframe?null!==(a=Z.prepareBuffers())&&($.setFirstDecodeFrameTimestamp(a),$.setLastReceivedVideoFrameTimestamp(a,!0),Te(),y.debugEnabled()&&y.debug("onReady")):i.isCodecConfig||$.setLastReceivedVideoFrameTimestamp(a)):"aac"===n&&(Z.appendAudioFragment(i),M&&"Audio"===K&&!i.isCodecConfig?null!==(a=Z.prepareBuffers())&&($.setFirstDecodeFrameTimestamp(a),$.setLastReceivedAudioFrameTimestamp(a,!0),Te(),y.debugEnabled()&&y.debug("onReady")):i.isCodecConfig||$.setLastReceivedAudioFrameTimestamp(a)),v&&ve()},addStreamInfo:function(e){var t;Q=!0,t=e.data.streamInfo,K=t.haveVideo?"Video":"Audio",$.setReferenceType(K),Z.setReferenceType(K),ee.setReferenceType(K),t.haveVideo&&C&&t.video&&t.video.frameRate&&(y.debugEnabled()&&y.debug("Setting video frame rate: "+t.video.frameRate+" FPS"),C.setFrameRate(t.video.frameRate)),y.debugEnabled()&&y.debug("addStreamInfo: "+JSON.stringify(t))},addWtMetaData:function(e){if(!0===Q||isNaN(z))y.debugEnabled()&&y.debug(e.data.onMetaData.referenceTime);else{var n=(e.data.onMetaData.originalMetadaTime-z)/1e6;y.debugEnabled()&&y.debug("adjustedTime: "+n),e.data.onMetaData.streamTime=n,t.emit(r.ADJUSTED_META_DATA,e.data)}},getVideoElement:function(){return _},getMoqPayload:Re,recoverFromError:function(e){if(!ie||!e)return y.debugEnabled()&&y.debug("No matching error to recover from"),!1;var t="video"===ie.type,n="audio"===ie.type,r=t?I:N;return r?t&&!w||n&&!U?(y.debugEnabled()&&y.debug("Decoder is not configured, skipping recovery"),!1):r.isBeingConfigured()?(y.debugEnabled()&&y.debug("Decoder is being configured, skipping recovery"),!1):(oe=!0,r.configureDecoder(),Ie(),!0):(y.debugEnabled()&&y.debug("No decoder available for recovery"),!1)},getLastError:function(){return ie}}}}}.apply(t,r))||(e.exports=i)},9467:function(e,t,n){var r,i;r=[n(8333)],void 0===(i=function(e){return{create:function(t,n){var r=e.create("MoQRenderQueue"+(n?"-"+n:"")),i=[],a=[],o=["Audio","Video"],s=null,d=null,u=null,c=!1;function l(){for(;i.length;)i.shift().close();for(;a.length;)a.shift().frame.close();d&&(d.close(),d=null),u&&(u.frame.close(),u=null),s=null,c=!1}function f(){return s}return r.debugEnabled()&&r.debug("init"),{destroy:function(){r.debugEnabled()&&r.debug("destroying"),l()},setReferenceType:function(e){-1!==o.indexOf(e)&&(s=e)},getReferenceType:f,getNextVideoFrame:function(){return 0===i.length?null:i.shift()},getNextAudioFrame:function(){return 0===a.length?null:a.shift()},getNextVideoFrameByTimestamp:function(e){return i.length&&i[0].timestamp<=e?i.shift():null},getNextAudioFrameByTimestamp:function(e){return a.length&&a[0].timestamp<=e?a.shift():null},getNextTimestamp:function(){var e,t=null;for(e=0;e<i.length;e++)i[e].isCodecConfig||i[e].timestamp>=0&&(!t||i[e].timestamp<t)&&(t=i[e].timestamp);for(e=0;e<a.length;e++)a[e].timestamp>=0&&(!t||a[e].timestamp<t)&&(t=a[e].timestamp);return t},getLastTimestamp:function(){var e=null;return i.length&&(e=i[i.length-1].timestamp),a.length&&(!e||a[a.length-1].timestamp>e)&&(e=a[a.length-1].timestamp),e},appendVideoFragment:function(e){i.length,i.push(e)},appendAudioFragment:function(e,t,n){a.length,a.push({frame:e,timestamp:t,frameId:n})},getVideoBufferedTimeRange:function(){var e={start:0,end:0,length:0},t=i;if(t.length>0){var n=t[0].timestamp,r=t[t.length-1].timestamp;e.start=n,e.end=r,e.length=t.length}return e},getAudioBufferedTimeRange:function(){var e={start:0,end:0,length:0},t=a;if(t.length>0){var n=t[0].timestamp,r=t[t.length-1].timestamp;e.start=n,e.end=r,e.length=t.length}return e},getBufferedTimeRange:function(){var e={start:0,end:0,length:0},t="Audio"===s?a:i;if(t.length>0){var n=t[0].timestamp,r=t[t.length-1].timestamp;e.start=n,e.end=r,e.length=t.length}return e},setPlaybackRate:function(){},reset:function(){l()},clearBuffers:l,ready:function(){return null!==f()&&c},getVideoBuffer:function(){return i},getAudioBuffer:function(){return a},getVideoBufferLength:function(){return i.length},getAudioBufferLength:function(){return a.length}}}}}.apply(t,r))||(e.exports=i)},6636:function(e,t,n){var r,i;r=[n(4556),n(492),n(6637),n(8333),n(1520),n(9623),n(738)],void 0===(i=function(e,t,n,r,i,a,o){return{create:function(e){var s,d=r.create("MoQStatsCreator"),u=[{type:i.APPLICATION_STATE_CHANGE,listener:function(r){switch(r.data.state){case t.PAUSED:m(),n.remove({target:e,listeners:c})}}},{type:i.CONFIG,listener:function(){}}],c=[{type:a.TIME_UPDATE,listener:function(e){s.currentTime=e.data.currentTime,s.playbackRate=e.data.playbackRate,s.playedStart=0,s.playedEnd=e.data.currentTime,s.bufferStart=e.data.bufferStart,s.bufferEnd=e.data.bufferEnd,s.duration=e.data.bufferEnd-e.data.bufferStart,s.bufferDelay=e.data.bufferDelay,s.timeLag=e.data.timeLag,f()}}],l=[{type:i.STREAM_INFO,listener:function(){d.debugEnabled()&&d.debug("onStreamInfo"),n.add({target:e,listeners:c})}}];function f(){e.emit(o.PRIVATE_MEDIA_STATS,{mediaStats:{bufferStart:s.bufferStart,bufferEnd:s.bufferEnd,bufferDelay:s.bufferDelay,timeLag:s.timeLag,bufferUpdate:s.bufferUpdate,duration:s.duration,currentTime:s.currentTime,playbackRate:s.playbackRate,playedStart:s.playedStart,playedEnd:s.playedEnd}}),e.emit(o.PUBLIC_MEDIA_STATS,{mediaStats:{bufferStart:s.bufferStart,bufferEnd:s.bufferEnd,bufferDelay:s.bufferDelay,bufferUpdate:s.bufferUpdate,duration:s.duration,currentTime:s.currentTime,playbackRate:s.playbackRate,playedStart:s.playedStart,playedEnd:s.playedEnd}})}function m(){s={bufferStart:0,bufferEnd:0,bufferDelay:0,bufferUpdate:0,duration:0,currentTime:0,playbackRate:1,playedStart:0,playedEnd:0},f()}return m(),n.add({target:e,listeners:u}),n.add({target:e,listeners:l}),{destroy:function(){n.remove({target:e,listeners:u}),n.add({target:e,listeners:l})}}}}}.apply(t,r))||(e.exports=i)},6415:function(e,t,n){var r,i;r=[n(8333)],void 0===(i=function(e){return{create:function(){var t,n=e.create("TimeControl"),r=["Audio","Video"],i=null;function a(){return i}function o(e){if(!e){if(!i)return 0;e=i}var n=(t["lastRendered"+e+"FrameTimestamp"]-t["firstRendered"+e+"FrameTimestamp"])/1e6;return isNaN(n)?0:n}function s(){return t.firstDecodeFrameTimestamp+1e3*(performance.now()-t.firstDecodeFrameTimestampReal)}function d(e){if(!e){if(!i)return 0;e=i}return Math.abs(t["lastReceived"+e+"FrameTimestamp"]-t["lastRendered"+e+"FrameTimestamp"])/1e6}function u(){t={firstRenderedAudioFrameTimestampReal:NaN,firstRenderedAudioFrameTimestamp:NaN,lastRenderedAudioFrameTimestamp:NaN,firstReceivedAudioFrameTimestampReal:NaN,firstReceivedAudioFrameTimestamp:NaN,lastReceivedAudioFrameTimestamp:NaN,firstRenderedVideoFrameTimestampReal:NaN,firstRenderedVideoFrameTimestamp:NaN,lastRenderedVideoFrameTimestamp:NaN,firstReceivedVideoFrameTimestampReal:NaN,firstReceivedVideoFrameTimestamp:NaN,lastReceivedVideoFrameTimestamp:NaN,firstDecodeFrameTimestamp:NaN,firstDecodeFrameTimestampReal:NaN},i=null}function c(){return{firstRenderedFrameTimestampReal:t["firstRendered"+i+"FrameTimestampReal"]||0,firstRenderedFrameTimestamp:t["firstRendered"+i+"FrameTimestamp"]||0,lastRenderedFrameTimestamp:t["lastRendered"+i+"FrameTimestamp"]||0,firstReceivedFrameTimestampReal:t["firstReceived"+i+"FrameTimestampReal"]||0,firstReceivedFrameTimestamp:t["firstReceived"+i+"FrameTimestamp"]||0,lastReceivedFrameTimestamp:t["lastReceived"+i+"FrameTimestamp"]||0,firstRenderedAudioFrameTimestampReal:t.firstRenderedAudioFrameTimestampReal,firstRenderedAudioFrameTimestamp:t.firstRenderedAudioFrameTimestamp,lastRenderedAudioFrameTimestamp:t.lastRenderedAudioFrameTimestamp,firstReceivedAudioFrameTimestampReal:t.firstReceivedAudioFrameTimestampReal,firstReceivedAudioFrameTimestamp:t.firstReceivedAudioFrameTimestamp,lastReceivedAudioFrameTimestamp:t.lastReceivedAudioFrameTimestamp,firstRenderedVideoFrameTimestampReal:t.firstRenderedVideoFrameTimestampReal,firstRenderedVideoFrameTimestamp:t.firstRenderedVideoFrameTimestamp,lastRenderedVideoFrameTimestamp:t.lastRenderedVideoFrameTimestamp,firstReceivedVideoFrameTimestampReal:t.firstReceivedVideoFrameTimestampReal,firstReceivedVideoFrameTimestamp:t.firstReceivedVideoFrameTimestamp,lastReceivedVideoFrameTimestamp:t.lastReceivedVideoFrameTimestamp,firstDecodeFrameTimestamp:t.firstDecodeFrameTimestamp,firstDecodeFrameTimestampReal:t.firstDecodeFrameTimestampReal,currentTime:o(),timeOffset:d(),type:a()}}return u(),n.debugEnabled()&&n.debug("TimeControl initialized"),{setLastRenderedAudioFrameTimestamp:function(e){isNaN(t.firstRenderedAudioFrameTimestamp)&&(t.firstRenderedAudioFrameTimestamp=e),t.lastRenderedAudioFrameTimestamp=e,isNaN(t.firstRenderedAudioFrameTimestampReal)&&(t.firstRenderedAudioFrameTimestampReal=performance.now())},getLastRenderedAudioFrameTimestamp:function(){return t.lastRenderedAudioFrameTimestamp},setLastReceivedAudioFrameTimestamp:function(e,n){(n||isNaN(t.firstReceivedAudioFrameTimestamp))&&(t.firstReceivedAudioFrameTimestamp=e),t.lastReceivedAudioFrameTimestamp=e,(n||isNaN(t.firstReceivedAudioFrameTimestampReal))&&(t.firstReceivedAudioFrameTimestampReal=performance.now())},getLastReceivedAudioFrameTimestamp:function(){return t.lastReceivedAudioFrameTimestamp},setLastRenderedVideoFrameTimestamp:function(e){isNaN(t.firstRenderedVideoFrameTimestamp)&&(t.firstRenderedVideoFrameTimestamp=e),t.lastRenderedVideoFrameTimestamp=e,isNaN(t.firstRenderedVideoFrameTimestampReal)&&(t.firstRenderedVideoFrameTimestampReal=performance.now())},getLastRenderedVideoFrameTimestamp:function(){return t.lastRenderedVideoFrameTimestamp},setLastReceivedVideoFrameTimestamp:function(e,n){(n||isNaN(t.firstReceivedVideoFrameTimestamp))&&(t.firstReceivedVideoFrameTimestamp=e),t.lastReceivedVideoFrameTimestamp=e,(n||isNaN(t.firstReceivedVideoFrameTimestampReal))&&(t.firstReceivedVideoFrameTimestampReal=performance.now())},getLastReceivedVideoFrameTimestamp:function(){return t.lastReceivedVideoFrameTimestamp},setFirstDecodeFrameTimestamp:function(e,n){(n||isNaN(t.firstDecodeFrameTimestamp))&&(t.firstDecodeFrameTimestamp=e),(n||isNaN(t.firstDecodeFrameTimestampReal))&&(t.firstDecodeFrameTimestampReal=performance.now())},setReferenceType:function(e){-1!==r.indexOf(e)&&(i=e)},getReferenceType:a,getCurrentTime:o,getTargetTime:s,getTargetTimeInSeconds:function(){return Math.round(s()/1e6*1e3)/1e3},getTimeOffset:d,getState:c,getStateInSeconds:function(){var e=c();for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&"number"==typeof e[t]&&-1!==t.indexOf("Timestamp")&&(e[t]/=1e6,e[t]=Math.round(1e3*e[t])/1e3);return e},reset:u}}}}.apply(t,r))||(e.exports=i)},3038:function(e,t){var n;void 0===(n=function(){var e="moqControl.";return{BASE:e,CREATE_VIDEO:e+"createVideo",DESTROY_VIDEO:e+"destroyVideo",VIDEO_SOURCE:e+"videoSource",UPDATE_SOURCE:e+"updateSource",PLAY:e+"play",PAUSE:e+"pause",SEEK:e+"seek",MUTE:e+"mute",UNMUTE:e+"unmute",SET_VOLUME:e+"volume",SET_RATE:e+"playbackRate"}}.apply(t,[]))||(e.exports=n)},907:function(e,t){var n;void 0===(n=function(){var e="moqHandler.";return{BASE:e,LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",ERROR:e+"error",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange",QUALITY_UPDATE:e+"qualityupdate",VIDEO_SOURCE:e+"videoSource",ELEMENT_CREATED:e+"elementCreated",PLAY_START_SUCCESS:e+"playStartSuccess",PLAY_START_NOT_ALLOWED_ERROR:e+"playStartNotAllowedError",PLAY_START_ABORT_ERROR:e+"playStartAbortError",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden",VIDEO_DECODER_CONFIGURED:e+"videoDecoderConfigured",AUDIO_DECODER_CONFIGURED:e+"audioDecoderConfigured",VIDEO_DECODE_ERROR:e+"videoDecodeError",AUDIO_DECODE_ERROR:e+"audioDecodeError",VIDEO_DECODER_STARTUP_ERROR:e+"videoDecoderStartupError",AUDIO_DECODER_STARTUP_ERROR:e+"audioDecoderStartupError",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_TIMEOUT:e+"updateSourceTimeout",MEDIA_ERROR_RECOVERED:e+"recovered",ACTIVE_VIDEO_ELEMENT_CHANGE:e+"activeVideoElementChange",SWITCH_STREAM:e+"switchStream",TIME_OFFSET:e+"timeOffset",ADJUSTED_META_DATA:e+"adjustedMetaData"}}.apply(t,[]))||(e.exports=n)},1520:function(e,t){var n;void 0===(n=function(){var e="moqManager.";return{BASE:e,CONFIG:e+"config",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",WEB_TRANSPORT_META_DATA:e+"wtMetaData",APPLICATION_STATE_CHANGE:e+"applicationStateChange",STARTUP_STATS_ADDED:e+"startupStatsAdded",STARTUP_STATS_COMPLETED:e+"startupStatsCompleted",DOCUMENT_VISIBLE:e+"documentVisible",DOCUMENT_HIDDEN:e+"documentHidden",NETWORK_ONLINE:e+"networkOnline",NETWORK_OFFLINE:e+"networkOffline",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_ABORT:e+"switchStreamAbort",SWITCH_STREAM_FAIL:e+"switchStreamFail",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",UPDATE_SOURCE_FAIL:e+"updateSourceFail",BUFFER_TWEAKS_CREATED:e+"bufferTweaksCreated",MEDIA_ERROR:e+"mediaError",MEDIA_ERROR_RECOVER:e+"mediaErrorRecover",MEDIA_ERROR_RECOVERED:e+"mediaErrorRecovered",MEDIA_ERROR_QUEUED:e+"mediaErrorQueued",MEDIA_ERROR_UNQUEUED:e+"mediaErrorUnqueued",BUFFER_GOAL_STATS:e+"bufferGoalStats"}}.apply(t,[]))||(e.exports=n)},3701:function(e,t){var n;void 0===(n=function(){var e="moqPlaybackControl.";return{BASE:e,PLAYBACK_STARTED:e+"playbackStarted",BUFFERING:e+"buffering"}}.apply(t,[]))||(e.exports=n)},3242:function(e,t){var n;void 0===(n=function(){var e="moqPlayback.";return{BASE:e,LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",MEDIA_ERROR:e+"mediaerror",MEDIA_ERROR_RECOVER:e+"mediaerrorrecover",MEDIA_ERROR_RECOVERED:e+"mediaerrorrecovered",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange",ELEMENT_CREATED:e+"elementCreated",QUALITY_STATS:e+"qualitystats",PLAY_STATS:e+"playStats",MEDIA_ERROR_RECOVER_STATS:e+"mediaErrorRecoverStats",FRAME_DROP:e+"framedrop",PLAYBACK_FINISHED:e+"playbackFinished",PLAYBACK_ERROR:e+"playbackError",PLAYBACK_STARTED:e+"playbackStarted",PLAYBACK_SUSPENDED:e+"playbackSuspended",BUFFERING:e+"buffering",PLAY_START_SUCCESS:e+"playStartSuccess",PLAY_START_NOT_ALLOWED_ERROR:e+"playStartNotAllowedError",PLAY_START_ABORT_ERROR:e+"playStartAbortError",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden",ELEMENTS_UPDATED:e+"elementsUpdated",TIME_OFFSET:e+"timeOffset",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_TIMEOUT:e+"updateSourceTimeout",ACTIVE_VIDEO_ELEMENT_CHANGE:e+"activeVideoElementChange",OFFLINE_BUFFER_UNDERRUN:e+"offlinebufferunderrun",SOURCE_ENDED:e+"sourceEnded",SWITCH_STREAM:e+"switchStream",ERROR:e+"error",FRAME_CORRUPTED:e+"frameCorrupted",RECOVER:e+"recover",RECOVERED:e+"recovered",ADJUSTED_META_DATA:e+"adjustedMetaData"}}.apply(t,[]))||(e.exports=n)},9623:function(e,t){var n;void 0===(n=function(){return{BASE:"moqProxy.",LOAD_START:"moqProxy.loadstart",PROGRESS:"moqProxy.progress",SUSPEND:"moqProxy.suspend",ABORT:"moqProxy.abort",EMPTIED:"moqProxy.emptied",STALLED:"moqProxy.stalled",PLAY:"moqProxy.play",PAUSE:"moqProxy.pause",LOADED_META_DATA:"moqProxy.loadedmetadata",LOADED_DATA:"moqProxy.loadeddata",WAITING:"moqProxy.waiting",ERROR:"moqProxy.error",VIDEO_DECODER_CONFIGURED:"moqProxy.videoDecoderConfigured",AUDIO_DECODER_CONFIGURED:"moqProxy.audioDecoderConfigured",VIDEO_DECODE_ERROR:"moqProxy.videoDecodeError",AUDIO_DECODE_ERROR:"moqProxy.audioDecodeError",VIDEO_DECODER_STARTUP_ERROR:"moqProxy.videoDecoderStartupError",AUDIO_DECODER_STARTUP_ERROR:"moqProxy.audioDecoderStartupError",PLAYING:"moqProxy.playing",CAN_PLAY:"moqProxy.canplay",CAN_PLAY_THROUGH:"moqProxy.canplaythrough",SEEKING:"moqProxy.seeking",SEEKED:"moqProxy.seeked",TIME_UPDATE:"moqProxy.timeupdate",ENDED:"moqProxy.ended",RATE_CHANGE:"moqProxy.ratechange",DURATION_CHANGE:"moqProxy.durationchange",VOLUME_CHANGE:"moqProxy.volumechange",QUALITY_UPDATE:"moqProxy.qualityupdate",ELEMENT_CREATED:"moqProxy.elementCreated",PLAY_START_SUCCESS:"moqProxy.playStartSuccess",PLAY_START_NOT_ALLOWED_ERROR:"moqProxy.playStartNotAllowedError",PLAY_START_ABORT_ERROR:"moqProxy.playStartAbortError",VIEWPORT_VISIBLE:"moqProxy.viewportvisible",VIEWPORT_HIDDEN:"moqProxy.viewporthidden",WEB_TRANSPORT_META_DATA:"moqProxy.wtMetaData",TIME_OFFSET:"moqProxy.timeOffset",ADJUSTED_META_DATA:"moqProxy.adjustedMetaData"}}.apply(t,[]))||(e.exports=n)},738:function(e,t){var n;void 0===(n=function(){var e="moqStatsCreator.";return{BASE:e,PUBLIC_MEDIA_STATS:e+"publicMediaStats",PRIVATE_MEDIA_STATS:e+"privateMediaStats",MEDIA_ERROR_RECOVER_STATS:e+"mediaErrorRecoverStats"}}.apply(t,[]))||(e.exports=n)},4286:function(e){var t;self,t=()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{AudioDecoderModule:()=>i});const n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3];function r(e){if(e.byteLength<2)throw new Error("Insufficient MP4A config length");const t=(248&e[0])>>3,r=((7&e[0])<<1)+((128&e[1])>>7);if(r<0||r>=n.length)throw new Error(`Invalid sampleRateIdc ${r}`);const i=(120&e[1])>>3;if(i<=0)throw new Error(`Invalid AAC config: numberOfChannels=${i}`);return{profileIdc:t,sampleRate:n[r],numberOfChannels:i}}class i extends class{constructor(){this.listeners=new Map}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){const n=this.listeners.get(e);if(n){const r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&this.listeners.delete(e)}}emit(e,...t){const n=this.listeners.get(e)||[];for(const e of n)e(...t)}}{constructor(){super(),this._isConfigured=!1,this._decConfig=null,this._timestampQueue=[],this._isBeingConfigured=!1,this._pendingDecoder=null,this._onAudioOutput=e=>{if(!this._timestampQueue.length)return void e.close();const t=(n=this._timestampQueue).length?n.shift():NaN;var n;this.emit("frameDecoded",e,t)},this._onAudioError=e=>{console.error("AudioDecoder error:",e),this.emit("decodeError",e)},this._decoder=new AudioDecoder({output:this._onAudioOutput.bind(this),error:this._onAudioError.bind(this)})}isConfigured(){return this._isConfigured}isBeingConfigured(){return this._isBeingConfigured}configureDecoder(e){if(this._isBeingConfigured)return;if(null===e&&null===this._decConfig)return void this.emit("decodeError",new Error("No chunk or config."));this._isBeingConfigured=!0,this._pendingDecoder=new AudioDecoder({...this._getAudioDecoderConstructorOptions()});const{numberOfChannels:t,sampleRate:n}=null!==e?r(e.payloadUnit):this._decConfig,i={codec:"mp4a.40.2",numberOfChannels:t,sampleRate:n,description:null!==e&&e.isCodecConfig?e.payloadUnit:this._decConfig?.description};AudioDecoder.isConfigSupported(i).then((e=>e.supported?(this._pendingDecoder.configure(i),"configured"!==this._pendingDecoder.state?(this._pendingDecoder=null,void this.emit("decodeError",new Error("AudioDecoder configure failed."))):("closed"!==this._decoder.state&&this._decoder.close(),this._decoder=this._pendingDecoder,this._isBeingConfigured=!1,this._pendingDecoder=null,this._isConfigured=!0,this._decConfig=i,void this.emit("configured",i))):(this._pendingDecoder=null,void this.emit("decodeError",new Error("AudioDecoder config not supported."))))).catch((e=>{this._pendingDecoder=null,this.emit("decodeError",e)}))}decodeChunk(e){const{payloadUnit:t,dtsUs:n,isCodecConfig:i}=e;if(!this._decoder)return;if(i&&!this._isBeingConfigured){const{numberOfChannels:e,sampleRate:n}=r(t),i={codec:"mp4a.40.2",numberOfChannels:e,sampleRate:n,description:t};return this._isBeingConfigured=!0,this._pendingDecoder=new AudioDecoder({...this._getAudioDecoderConstructorOptions()}),void AudioDecoder.isConfigSupported(i).then((e=>e.supported?(this._pendingDecoder.configure(i),"configured"!==this._pendingDecoder.state?(this._pendingDecoder=null,void this.emit("decodeError",new Error("AudioDecoder configure failed."))):(this._decoder&&this._decoder.close(),this._decoder=this._pendingDecoder,this._isBeingConfigured=!1,this._pendingDecoder=null,this._isConfigured=!0,this._decConfig=i,void this.emit("configured",i))):(this._pendingDecoder=null,void this.emit("decodeError",new Error(`AudioDecoder config not supported: ${JSON.stringify(i)}`))))).catch((e=>{this._pendingDecoder=null,this.emit("decodeError",e)}))}if(!this._isConfigured)return;if(this._isBeingConfigured)return void console.log("Skipping audio frame because it is after the configuration frame while being configured");const a=new EncodedAudioChunk({data:t,timestamp:n,type:"key"});this._timestampQueue.push(n),"configured"===this._decoder.state?this._decoder.decode(a):"closed"===this._decoder.state&&this._isConfigured?this.emit("decodeError",new Error("AudioDecoder closed.")):this.emit("decodeError",new Error("AudioDecoder not configured or configuration changed after startup."))}_getAudioDecoderConstructorOptions(){return{output:this._onAudioOutput.bind(this),error:this._onAudioError.bind(this)}}get config(){return this._isConfigured?this._decConfig:null}close(){this._decoder&&"closed"!==this._decoder.state&&this._decoder.close(),this.emit("closed")}}return t})(),e.exports=t()},7894:function(e){var t;self,t=()=>(()=>{"use strict";var e,t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{AudioRenderer:()=>i}),function(e){e.RUNNING="running",e.SUSPENDED="suspended",e.CLOSED="closed"}(e||(e={}));class r extends Error{constructor(e,t,n){super(t),this.code=n,this.name=e||"AudioError",this.code=n}}class i extends class{constructor(){this.listeners=new Map}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){const n=this.listeners.get(e);if(n){const r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&this.listeners.delete(e)}}emit(e,...t){const n=this.listeners.get(e)||[];for(const e of n)e(...t)}removeAllListeners(e){e?this.listeners.delete(e):this.listeners.clear()}}{constructor(t={}){super(),this._state=e.CLOSED,this._allowed=void 0,this._allowedTimer=void 0,this._muted=!1,this._volume=1,this._lastFrameScheduledSecond=-1,this._startedWhileMuted=!1,this._audioWorkletNode=null,this._useWebCodecsFallback=!1,this._clockRefUs=NaN,this._dtsOffsetUs=NaN,this._deltaInternalExternalTimeUs=NaN,this._syncTimeDeviationUsArr=[],this._syncTimeDeviationUsMean=NaN,this.SYNC_TIME_DEVIATION_THRESHOLD_US=5e5,this.SYNC_TIME_DEVIATION_TO_HIGH_US=5e4,this.SYNC_TIME_DEVIATION_NORMALIZE_US=1e5,this.DROP_FRAME_DISTANCE_NORMAL=8,this._nextTimestamp=NaN,this._sourceNodesPending=[],this._sourceNodeIndexMap=new Map,this.SOURCE_NODE_PENDING_CLEAN_TIMEOUT_MS=5e3,this._sourceNodePendingCleanTimer=void 0,this._timeLag=0,this._framesRenderedSinceDrop=0,this._lastSampleSecond=-1,this._float32ArrayPool=[],this._arrayPool=[],this.MAX_POOL_SIZE=20,this._webCodecsBufferMonitoring={maxBufferSize:0,currentBufferSize:0,underrunCount:0,overflowCount:0,lastBufferCheck:0,bufferFillHistory:[],HISTORY_SIZE:100,MONITORING_INTERVAL_MS:1e3,MAX_BUFFER_THRESHOLD:50};const n=t.forceWebCodecsFallback||function(){const e="undefined"!=typeof window&&window.location?new URLSearchParams(window.location.search).get("audioWorklet"):null;return"false"===e||"0"===e}();this._config=Object.assign({schedulingLatencySecs:.05,startTimeoutMs:100,startBufferMs:500,volume:1,muted:!1,allowDelayedRendering:!1,events:{},getExternalSyncTime:()=>-1,forceWebCodecsFallback:!1,enableFrameMonitoring:!0},t,{forceWebCodecsFallback:n});for(const e in this._config.events)Object.prototype.hasOwnProperty.call(this._config.events,e)&&this.on(e,this._config.events[e]);this._aCtx=new AudioContext({latencyHint:"interactive"}),this._setAudioRenderState(this._aCtx.state),this._aCtx.onstatechange=()=>this._setAudioRenderState(this._aCtx.state),this._gainNode=this._aCtx.createGain(),this.setVolume(this._config.volume),this.setMute(this._config.muted),this._gainNode.connect(this._aCtx.destination),this._config.forceWebCodecsFallback?(this.trace("AudioWorklet disabled via configuration, using WebCodecs fallback"),this._initializeWebCodecsFallback()):this._initializeAudioWorklet()}async _initializeAudioWorklet(){try{if(!this._aCtx.audioWorklet)throw new Error("AudioWorklet not supported, falling back to WebCodecs mode");try{let e="/**\n * AudioWorklet Processor for low-latency audio rendering.\n *\n * This processor handles audio data buffering, timing control, and synchronization\n * for real-time audio playback in WebAudio contexts. It provides:\n *\n * Features:\n * - Low-latency audio buffer management and playback\n * - Frame timing and synchronization with external clocks\n * - Buffer optimization with caching for continuous playback\n * - Frame monitoring and performance metrics\n * - Sync time deviation tracking and automatic adjustment\n * - Delayed rendering support for adaptive playback\n * - Volume control and muting capabilities\n * - Frame lifecycle management with event notifications\n */\n\n/**\n * Fallback for performance.now() in AudioWorklet contexts where performance is undefined.\n *\n * @returns {number} Current timestamp in milliseconds\n */\nconst now = () => {\n    if (typeof performance !== 'undefined' && performance.now) {\n        return performance.now();\n    }\n    // Fallback to Date.now() when performance is not available\n    return Date.now();\n};\n\nclass AudioWorkletRendererProcessor extends AudioWorkletProcessor {\n    // ############################################################################\n    // STATIC PROPERTIES & CONSTRUCTOR\n    // ############################################################################\n\n    // CRITICAL for Firefox: Prevents garbage collection when no input connection\n    // Firefox requires this to keep the processor alive\n    static get parameterDescriptors () {\n        return [];\n    }\n\n    /**\n     * Creates an AudioWorkletRendererProcessor instance.\n     *\n     * @param {Object} [options] - Optional initialization options\n     * @param {Object} [options.processorOptions] - Processor-specific options\n     * @param {number} [options.processorOptions.sampleRate=48000] - Audio sample rate in Hz\n     * @param {number} [options.processorOptions.schedulingLatencySecs=0.05] - Scheduling latency in seconds\n     * @param {boolean} [options.processorOptions.enableFrameMonitoring=true] - Enable frame monitoring\n     * @param {boolean} [options.processorOptions.allowDelayedRendering=false] - Allow delayed rendering for adaptive playback\n     */\n    constructor (options) {\n        super();\n\n        // Audio buffer management\n        this.audioBuffers = new Map(); // Map<timestamp, AudioBuffer>\n        this.sampleRate = (options.processorOptions && options.processorOptions.sampleRate) || 48000;\n        this.schedulingLatencySecs = (options.processorOptions && options.processorOptions.schedulingLatencySecs) || 0.05;\n        this.enableFrameMonitoring = !(options.processorOptions && options.processorOptions.enableFrameMonitoring === false); // Default true\n        \n        // Buffer search optimization\n        this.lastActiveBuffer = null;\n        this.bufferCacheInvalidTime = 0;\n        \n        // Pre-computed constants for performance\n        this.CLEANUP_THRESHOLD_US = 3000000; // 3 seconds\n        this.BUFFER_OVERFLOW_THRESHOLD = 50;\n        this.MAX_BUFFER_CAPACITY = 100;\n\n        // Time synchronization\n        this.audioContextTimeOffset = 0; // Offset between processor time and AudioContext time\n        this.lastKnownAudioContextTime = 0;\n\n        // Timing and synchronization\n        this.clockRefUs = NaN;\n        this.dtsOffsetUs = NaN;\n        this.deltaInternalExternalTimeUs = NaN;\n        this.timeLag = 0;\n        this.nextTimestamp = NaN;\n        \n        // Frame drop management for timeLag reduction\n        this.DROP_FRAME_DISTANCE_NORMAL = 8;\n        this.framesRenderedSinceDrop = 0;\n        \n        // Trace timeLag changes\n        this.lastTracedTimeLag = 0;\n\n        // Sync deviation tracking\n        this.syncTimeDeviationUsArr = [];\n        this.syncTimeDeviationUsMean = NaN;\n        this.SYNC_TIME_DEVIATION_THRESHOLD_US = 500000;\n        this.SYNC_TIME_DEVIATION_TO_HIGH_US = 50000;\n        this.SYNC_TIME_DEVIATION_NORMALIZE_US = 100000;\n        \n        // Bulletproof every-second tracking\n        this.lastSampleSecond = -1;\n\n        // Audio processing state\n        this.isRunning = true;\n        this.allowDelayedRendering = (options.processorOptions && options.processorOptions.allowDelayedRendering) || false;\n        this.volume = 1.0;\n        this.muted = false;\n        \n        // Frame rendering tracking\n        this.currentlyPlayingFrames = new Set(); // Track frames currently being played\n        this.lastCheckedFrameTime = 0; // Avoid redundant checks\n        \n        // Simple delivery monitoring\n        this.deliveryMonitoring = {\n            'gapTolerance' : 3, // Allow 3 missing chunks before emergency action\n            'lastGapTime'  : 0\n        };\n        \n        // Debug logging counter (replaces Math.random for performance)\n        this.debugLogCounter = 0;\n        \n        // Cache frequently computed values\n        this.cachedMicrosPerFrame = 1000000 / this.sampleRate;\n        this.cachedSampleRateRatio = {}; // Cache sample rate conversions\n\n        // Frame monitoring\n        this.frameMonitoring = {\n            'maxBufferSize'          : 0,\n            'currentBufferSize'      : 0,\n            'underrunCount'          : 0,\n            'overflowCount'          : 0,\n            'lastBufferCheck'        : now(),\n            'bufferFillHistory'      : [],\n            'HISTORY_SIZE'           : 100,\n            'MONITORING_INTERVAL_MS' : 1000,\n            // Optimizations\n            'historyIndex'           : 0, // Circular buffer index\n            'cachedFillPercentage'   : 0\n        };\n\n        // Setup message port communication\n        this.port.onmessage = (event) => {\n            this.handleMessage(event.data);\n        };\n\n        this.trace('AudioWorkletRendererProcessor initialized');\n    }\n\n    // ############################################################################\n    // MESSAGE HANDLING\n    // ############################################################################\n\n    /**\n     * Handle messages from main thread.\n     * Processes various message types for audio rendering control.\n     *\n     * @param {Object} data - Message data object\n     * @param {string} data.type - Message type\n     * @param {Object} [data.payload] - Optional message payload\n     */\n    handleMessage (data) {\n        const type = data.type;\n        const payload = data.payload;\n\n        switch (type) {\n            case 'renderAudioData':\n                this.renderAudioData(payload);\n                break;\n            case 'setVolume':\n                this.volume = payload.volume;\n                break;\n            case 'setMute':\n                this.muted = payload.muted;\n                break;\n            case 'resetTiming':\n                // Reset all timing references when unmuting after starting muted\n                this.clockRefUs = NaN;\n                this.dtsOffsetUs = NaN;\n                this.deltaInternalExternalTimeUs = NaN;\n                this.nextTimestamp = NaN;\n                this.syncTimeDeviationUsArr = [];\n                this.syncTimeDeviationUsMean = NaN;\n                this.timeLag = 0;\n                this.framesRenderedSinceDrop = 0;\n                this.lastSampleSecond = -1;\n                this.trace('Timing references reset');\n                break;\n            case 'adjustClockRef':\n                this.adjustClockRef(payload.deviation);\n                break;\n            case 'close':\n                this.close();\n                break;\n            default:\n                this.trace(`Unknown message type: ${type}`);\n        }\n    }\n\n    // ############################################################################\n    // CORE AUDIO PROCESSING\n    // ############################################################################\n\n    /**\n     * Main audio processing function called by AudioWorklet.\n     * Processes audio data in 128-sample blocks at the current sample rate.\n     *\n     * This function:\n     * - Retrieves audio samples for the current time from internal buffers\n     * - Applies volume control and muting\n     * - Optimizes buffer access with caching for continuous playback\n     * - Handles buffer transitions and cleanup\n     * - Tracks frame rendering events for monitoring\n     *\n     * @param {Float32Array[][]} inputs - Input audio buffers (not used, we generate from internal buffers)\n     * @param {Float32Array[][]} outputs - Output audio buffers to fill with processed audio\n     * @returns {boolean} Always true to keep processor alive (required for Firefox)\n     */\n    process (inputs, outputs) {\n        // CRITICAL for Firefox: Always return true to keep processor alive\n        // Firefox will garbage collect the processor if we return false\n        if (!this.isRunning) {\n            // Still return true to prevent Firefox from stopping the processor\n            return true;\n        }\n\n        const output = outputs[0];\n        if (!output || output.length === 0) return true;\n\n        const frameCount = output[0].length;\n        const channelCount = output.length;\n\n        // Use internal volume and mute state (controlled via messages)\n        // We don't use AudioParam since we're not defining them in parameterDescriptors\n        const finalVolume = this.muted ? 0 : this.volume;\n\n        // Simple AudioWorklet timing - just use currentFrame\n        // eslint-disable-next-line no-undef\n        const currentFrameUs = currentFrame * 1000000 / this.sampleRate;\n        const microsPerFrame = 1000000 / this.sampleRate; // Direct calculation, no cache needed\n        \n        // BUFFER OPTIMIZATION: Check if we can process the entire block from one buffer\n        // This avoids per-sample buffer lookups when audio spans multiple buffers\n        const blockStartUs = currentFrameUs;\n        const blockEndUs = currentFrameUs + (frameCount * microsPerFrame);\n        \n        // Fast path check: cached buffer covers the entire block\n        if (this.lastActiveBuffer &&\n            blockStartUs >= this.lastActiveBuffer.startTime &&\n            blockEndUs <= this.lastActiveBuffer.endTime) {\n            // Entire audio block can be filled from single cached buffer\n            this.fillOutputFromBuffer(output, this.lastActiveBuffer, blockStartUs, frameCount, channelCount, finalVolume, microsPerFrame);\n        }\n        else {\n            // Slow path: per-frame lookup (handles buffer transitions)\n            for (let frame = 0; frame < frameCount; frame++) {\n                const frameTimeUs = currentFrameUs + (frame * microsPerFrame);\n                const audioSample = this.getAudioSampleForTime(frameTimeUs);\n                \n                for (let channel = 0; channel < channelCount; channel++) {\n                    const sampleValue = audioSample[channel] || 0;\n                    output[channel][frame] = sampleValue * finalVolume;\n                }\n            }\n        }\n\n        this.cleanupOldBuffers(currentFrameUs);\n        \n        // Check for frame rendering events (started and completed)\n        this.checkFrameRenderingEvents(currentFrameUs);\n\n        return true;\n    }\n\n    /**\n     * Render audio data into internal buffers.\n     * Processes decoded audio data and schedules it for playback.\n     *\n     * @param {Object} payload - Audio data payload\n     * @param {Float32Array[]} payload.audioBuffers - Array of audio channel buffers\n     * @param {number} payload.numberOfChannels - Number of audio channels\n     * @param {number} payload.numberOfFrames - Number of audio frames\n     * @param {number} payload.sampleRate - Audio sample rate in Hz\n     * @param {string} payload.format - Audio format\n     * @param {number} payload.timestamp - Audio timestamp in microseconds\n     * @param {number} payload.duration - Audio duration in microseconds\n     * @param {number} payload.dtsUs - Decode timestamp in microseconds\n     * @param {number} payload.currentTime - Current audio context time in seconds\n     * @param {number} payload.externalSyncTime - External synchronization time in seconds\n     * @param {string|number} [payload.frameId] - Optional frame identifier\n     */\n    renderAudioData (payload) {\n        try {\n            const audioBuffers = payload.audioBuffers;\n            const numberOfChannels = payload.numberOfChannels;\n            const numberOfFrames = payload.numberOfFrames;\n            const sampleRate = payload.sampleRate;\n            const format = payload.format;\n            const timestamp = payload.timestamp;\n            const duration = payload.duration;\n            const dtsUs = payload.dtsUs;\n            const currentTime = payload.currentTime;\n            const externalSyncTime = payload.externalSyncTime;\n            const frameId = payload.frameId;\n            const byteSize = payload.byteSize;\n            // Removed trace call for performance - this method is called for every audio chunk\n\n            // Sync AudioContext time from main thread\n            this.lastKnownAudioContextTime = currentTime;\n            this.audioContextTimeOffset = 0; // Reset offset when we get new sync time\n\n            // Create a fake audioData object for parseTimestamp compatibility\n            const audioDataCompat = {\n                'numberOfFrames'   : numberOfFrames,\n                'numberOfChannels' : numberOfChannels,\n                'sampleRate'       : sampleRate,\n                'format'           : format,\n                'timestamp'        : timestamp,\n                'duration'         : duration\n            };\n            const correctedDtsUs = this.parseTimestamp(audioDataCompat, dtsUs);\n\n            if (correctedDtsUs === null || correctedDtsUs === undefined) {\n                this.trace('parseTimestamp returned null/undefined, skipping audio data');\n                return;\n            }\n\n            // Initialize timing references if needed\n            if (Number.isNaN(this.dtsOffsetUs)) {\n                this.dtsOffsetUs = correctedDtsUs;\n                this.deltaInternalExternalTimeUs = Math.round((currentTime - externalSyncTime) * 1000000);\n                this.syncTimeDeviationUsArr = [];\n                this.syncTimeDeviationUsMean = NaN;\n\n                const refSec = currentTime + this.schedulingLatencySecs;\n                this.clockRefUs = Math.round(refSec * 1000000);\n\n                this.trace(`Clock ref set to ${this.clockRefUs}, dts offset ${this.dtsOffsetUs}`);\n            }\n\n            // Handle sync time deviation\n            if (currentTime > 0 && externalSyncTime > 0 && !Number.isNaN(this.deltaInternalExternalTimeUs)) {\n                this.handleSyncTimeDeviation(currentTime, externalSyncTime);\n            }\n\n            // Calculate start time and duration\n            const startTimeUs = this.clockRefUs + correctedDtsUs - this.dtsOffsetUs;\n            let startTimeSecs = startTimeUs / 1000000 + this.timeLag;\n            const durationSecs = duration / 1000000; // Convert to seconds\n\n            // Handle delayed rendering\n            if (this.allowDelayedRendering) {\n                if (startTimeSecs <= currentTime) {\n                    // Audio is late - increase lag to push future audio later\n                    const lagIncrease = currentTime - startTimeSecs;\n                    this.timeLag += lagIncrease;\n                    startTimeSecs = startTimeUs / 1000000 + this.timeLag;\n                    \n                    this.postMessage({ 'type'    : 'audioLag',\n                        'payload' : { 'message'  : 'increase',\n                            'lag'      : this.timeLag,\n                            'increase' : lagIncrease } });\n                    this.framesRenderedSinceDrop = 0;\n                }\n                else if (this.framesRenderedSinceDrop > this.DROP_FRAME_DISTANCE_NORMAL &&\n                         this.timeLag > durationSecs &&\n                         (startTimeSecs - durationSecs > currentTime + this.schedulingLatencySecs)) {\n                    // Conditions met to reduce lag: drop this frame and decrease lag\n                    this.timeLag -= durationSecs;\n                    this.postMessage({ 'type'    : 'audioLag',\n                        'payload' : { 'message'  : 'decrease',\n                            'lag'      : this.timeLag,\n                            'decrease' : durationSecs } });\n                    this.framesRenderedSinceDrop = 0;\n                    return; // Skip storing this frame\n                }\n                this.framesRenderedSinceDrop++;\n            }\n            else if (startTimeSecs <= currentTime) {\n                this.frameMonitoring.underrunCount++;\n                // Removed trace call for performance - underruns can be frequent during startup\n                this.postMessage({ 'type'    : 'underrun',\n                    'payload' : {} });\n                return;\n            }\n\n            // Store audio buffer using the calculated start time\n            this.storeAudioBuffer(startTimeUs, {\n                'audioBuffers'   : audioBuffers,\n                'numberOfFrames' : numberOfFrames,\n                'sampleRate'     : sampleRate,\n                'frameId'        : frameId,\n                'byteSize'       : byteSize\n            });\n\n            this.postMessage({\n                'type'    : 'frameScheduled',\n                'payload' : {\n                    'startTimeS'        : startTimeSecs,\n                    'currentTimeS'      : currentTime,\n                    'externalSyncTimeS' : externalSyncTime,\n                    'deviationS'        : this.deltaInternalExternalTimeUs / 1000000,\n                    'timeLagS'          : this.timeLag\n                }\n            });\n        }\n        catch (err) {\n            this.postMessage({\n                'type'    : 'audioError',\n                'payload' : { 'error': err.message }\n            });\n        }\n    }\n\n    // ############################################################################\n    // BUFFER MANAGEMENT\n    // ############################################################################\n\n    /**\n     * Store audio data in internal buffer.\n     * Creates a buffer entry with timing information and cached calculations.\n     *\n     * @param {number} timestampUs - Buffer start timestamp in microseconds\n     * @param {Object} audioDataTransfer - Audio data transfer object\n     * @param {Float32Array[]} audioDataTransfer.audioBuffers - Array of channel buffers\n     * @param {number} audioDataTransfer.numberOfFrames - Number of frames in buffer\n     * @param {number} audioDataTransfer.sampleRate - Sample rate of audio data\n     * @param {string|number} [audioDataTransfer.frameId] - Optional frame identifier\n     * @param {number} [audioDataTransfer.byteSize] - Optional byte size of audio data\n     */\n    storeAudioBuffer (timestampUs, audioDataTransfer) {\n        // Use the transferred audio buffers directly\n        const { audioBuffers, numberOfFrames, sampleRate, frameId, byteSize } = audioDataTransfer;\n        \n        // Pre-calculate buffer duration to avoid repeated computation\n        const durationUs = (numberOfFrames * 1000000) / sampleRate;\n        const endTimeUs = timestampUs + durationUs;\n\n        this.audioBuffers.set(timestampUs, {\n            'data'              : audioBuffers, // Use the transferred Float32Array buffers directly\n            'numberOfFrames'    : numberOfFrames,\n            'sampleRate'        : sampleRate,\n            'startTime'         : timestampUs,\n            'endTime'           : endTimeUs,\n            'frameId'           : frameId,\n            'byteSize'          : byteSize,\n            // Cache frequently used calculations\n            'durationUs'        : durationUs,\n            'timeToSampleRatio' : sampleRate / 1000000 // For quick time-to-sample conversions\n        });\n        \n        // Invalidate buffer cache when new buffer is added\n        this.lastActiveBuffer = null;\n\n        // Monitor buffer fill only if monitoring is enabled\n        if (this.enableFrameMonitoring) {\n            this.monitorBufferFill();\n        }\n    }\n\n    /**\n     * Fast path: Fill output directly from a single buffer (avoids per-frame lookups).\n     * Optimizes audio rendering when the entire audio block can be filled from one buffer.\n     *\n     * @param {Float32Array[]} output - Output audio buffer channels\n     * @param {Object} buffer - Source audio buffer object\n     * @param {number} startTimeUs - Start time in microseconds\n     * @param {number} frameCount - Number of frames to process\n     * @param {number} channelCount - Number of output channels\n     * @param {number} finalVolume - Final volume multiplier (0.0-1.0)\n     * @param {number} microsPerFrame - Microseconds per audio frame\n     */\n    fillOutputFromBuffer (output, buffer, startTimeUs, frameCount, channelCount, finalVolume, microsPerFrame) {\n        const relativeStartUs = startTimeUs - buffer.startTime;\n        const timeToSampleRatio = buffer.timeToSampleRatio || buffer.sampleRate / 1000000;\n        const baseSampleIndex = relativeStartUs * timeToSampleRatio;\n        const sampleStep = microsPerFrame * timeToSampleRatio;\n        \n        for (let frame = 0; frame < frameCount; frame++) {\n            const exactSampleIndex = baseSampleIndex + frame * sampleStep;\n            const sampleIndex = Math.floor(exactSampleIndex);\n            \n            // Bounds check\n            if (sampleIndex < 0 || sampleIndex >= buffer.numberOfFrames) {\n                // Fill with silence\n                for (let channel = 0; channel < channelCount; channel++) {\n                    output[channel][frame] = 0;\n                }\n                continue;\n            }\n            \n            const fraction = exactSampleIndex - sampleIndex;\n            \n            for (let channel = 0; channel < channelCount && channel < buffer.data.length; channel++) {\n                const channelData = buffer.data[channel];\n                let sampleValue = channelData[sampleIndex] || 0;\n                \n                // Linear interpolation if we have next sample and significant fraction\n                if (fraction > 0.001 && sampleIndex + 1 < buffer.numberOfFrames) {\n                    const nextSample = channelData[sampleIndex + 1] || 0;\n                    sampleValue += (nextSample - sampleValue) * fraction;\n                }\n                \n                output[channel][frame] = sampleValue * finalVolume;\n            }\n            \n            // Fill remaining channels with silence if buffer has fewer channels\n            for (let channel = buffer.data.length; channel < channelCount; channel++) {\n                output[channel][frame] = 0;\n            }\n        }\n    }\n\n    /**\n     * Get audio sample for specific time.\n     * Uses buffer caching and linear interpolation for smooth playback.\n     *\n     * @param {number} timeUs - Time in microseconds to get sample for\n     * @returns {number[]} Array of channel samples (0 if no data found)\n     */\n    getAudioSampleForTime (timeUs) {\n        // Optimized buffer search with caching\n        // Check if last used buffer is still valid\n        if (this.lastActiveBuffer &&\n            timeUs >= this.lastActiveBuffer.startTime &&\n            timeUs < this.lastActiveBuffer.endTime) {\n            // Use cached buffer\n            const buffer = this.lastActiveBuffer;\n            \n            // Calculate sample index within buffer using cached ratio\n            const relativeTimeUs = timeUs - buffer.startTime;\n            const exactSampleIndex = relativeTimeUs * (buffer.timeToSampleRatio || buffer.sampleRate / 1000000);\n            const sampleIndex = Math.floor(exactSampleIndex);\n\n            // Check bounds\n            if (sampleIndex < 0 || sampleIndex >= buffer.numberOfFrames) {\n                return [0, 0];\n            }\n\n            const sample = [];\n\n            // Linear interpolation between samples for smoother playback\n            const fraction = exactSampleIndex - sampleIndex;\n            const nextSampleIndex = sampleIndex + 1;\n\n            for (let channel = 0; channel < buffer.data.length; channel++) {\n                const currentSample = buffer.data[channel][sampleIndex] || 0;\n\n                if (fraction > 0 && nextSampleIndex < buffer.numberOfFrames) {\n                    // Interpolate with next sample\n                    const nextSample = buffer.data[channel][nextSampleIndex] || 0;\n                    sample[channel] = currentSample + (nextSample - currentSample) * fraction;\n                }\n                else {\n                    sample[channel] = currentSample;\n                }\n            }\n            return sample;\n        }\n        \n        // Find the audio buffer that contains this time\n        for (const [, buffer] of this.audioBuffers) {\n            if (timeUs >= buffer.startTime && timeUs < buffer.endTime) {\n                // Cache this buffer for next lookup\n                this.lastActiveBuffer = buffer;\n                // Calculate sample index within buffer using cached ratio\n                const relativeTimeUs = timeUs - buffer.startTime;\n                const exactSampleIndex = relativeTimeUs * (buffer.timeToSampleRatio || buffer.sampleRate / 1000000);\n                const sampleIndex = Math.floor(exactSampleIndex);\n\n                // Check bounds\n                if (sampleIndex < 0 || sampleIndex >= buffer.numberOfFrames) {\n                    return [0, 0];\n                }\n\n                const sample = [];\n\n                // Linear interpolation between samples for smoother playback\n                const fraction = exactSampleIndex - sampleIndex;\n                const nextSampleIndex = sampleIndex + 1;\n\n                for (let channel = 0; channel < buffer.data.length; channel++) {\n                    const currentSample = buffer.data[channel][sampleIndex] || 0;\n\n                    if (fraction > 0.001 && nextSampleIndex < buffer.numberOfFrames) {\n                        // Interpolate with next sample only if fraction is significant\n                        const nextSample = buffer.data[channel][nextSampleIndex] || 0;\n                        sample[channel] = currentSample + (nextSample - currentSample) * fraction;\n                    }\n                    else {\n                        sample[channel] = currentSample;\n                    }\n                }\n                return sample;\n            }\n        }\n        \n        // Clear cache if no buffer found\n        this.lastActiveBuffer = null;\n\n        // Try to find the closest buffer for smoother transitions\n        let closestBuffer = null;\n        let closestDistance = Infinity;\n\n        for (const [, buffer] of this.audioBuffers) {\n            const distanceStart = Math.abs(timeUs - buffer.startTime);\n            const distanceEnd = Math.abs(timeUs - buffer.endTime);\n            const minDistance = Math.min(distanceStart, distanceEnd);\n\n            if (minDistance < closestDistance) {\n                closestDistance = minDistance;\n                closestBuffer = buffer;\n            }\n        }\n\n        // If we're very close to a buffer boundary, fade to/from silence\n        if (closestBuffer && closestDistance < 10000) {\n            // Within 10ms\n            const fadeDistance = 5000; // 5ms fade\n            const fadeAmount = Math.max(0, 1 - closestDistance / fadeDistance);\n\n            let sampleIndex;\n            if (timeUs < closestBuffer.startTime) {\n                // Before buffer start - fade from silence to first sample\n                sampleIndex = 0;\n            }\n            else {\n                // After buffer end - fade from last sample to silence\n                sampleIndex = closestBuffer.numberOfFrames - 1;\n            }\n\n            const sample = [];\n            for (let channel = 0; channel < closestBuffer.data.length; channel++) {\n                const bufferSample = closestBuffer.data[channel][sampleIndex] || 0;\n                sample[channel] = bufferSample * fadeAmount;\n            }\n            return sample;\n        }\n\n        // Debug: Log when no buffer is found occasionally (throttle to avoid spam)\n        this.debugLogCounter++;\n        if (this.debugLogCounter % 1000 === 0) {\n            // Log ~0.1% of misses (every 1000th call)\n            this.trace(`No audio buffer found for time ${timeUs}us, have ${this.audioBuffers.size} buffers`);\n        }\n\n        // Return silence if no buffer found\n        return [0, 0];\n    }\n\n    // ############################################################################\n    // TIMING & SYNCHRONIZATION\n    // ############################################################################\n\n    /**\n     * Parse and validate timestamp.\n     * Handles timestamp gaps and ensures continuous playback timing.\n     *\n     * @param {Object} audioData - Audio data object containing duration\n     * @param {number} dtsUs - Decode timestamp in microseconds\n     * @returns {number|null} Corrected timestamp in microseconds, or null if invalid\n     */\n    parseTimestamp (audioData, dtsUs) {\n        const durationUs = audioData.duration;\n        let correctedDtsUs = 0;\n\n        if (isNaN(this.nextTimestamp)) {\n            if (dtsUs !== audioData.timestamp) {\n                this.postMessage({\n                    'type'    : 'audioError',\n                    'payload' : { 'error': 'Initial timestamp mismatch' }\n                });\n                return null;\n            }\n            correctedDtsUs = dtsUs;\n            this.trace(`Initial timestamp ${correctedDtsUs}`);\n        }\n        else if (dtsUs >= this.nextTimestamp + durationUs) {\n            const gapCount = Math.floor((dtsUs - this.nextTimestamp) / durationUs);\n            correctedDtsUs = this.nextTimestamp + durationUs * gapCount;\n            this.trace(`Gap detected: ${gapCount} missing chunks, corrected timestamp: ${correctedDtsUs}`);\n            \n            // If delayed rendering is enabled, try to compensate for gaps by reducing lag\n            if (this.allowDelayedRendering) {\n                // Calculate how much lag we can reduce based on the gap\n                const lagCount = Math.floor((this.timeLag * 1000000) / durationUs);\n                const lagAdjustCount = Math.min(gapCount, lagCount);\n\n                if (lagAdjustCount) {\n                    // Reduce time lag by the gap duration (or available lag, whichever is smaller)\n                    this.timeLag -= lagAdjustCount * durationUs / 1000000;\n                    this.postMessage({ 'type'    : 'audioLag',\n                        'payload' : { 'message'  : 'decrease',\n                            'lag'      : this.timeLag,\n                            'decrease' : lagAdjustCount * durationUs / 1000000 } });\n                }\n            }\n            \n            // Track delivery gaps\n            if (gapCount > this.deliveryMonitoring.gapTolerance) {\n                this.handleDeliveryGap(gapCount);\n            }\n        }\n        else {\n            correctedDtsUs = this.nextTimestamp;\n        }\n\n        this.nextTimestamp = correctedDtsUs + durationUs;\n        return correctedDtsUs;\n    }\n\n    /**\n     * Handle sync time deviation\n     */\n    handleSyncTimeDeviation (currentTime, externalSyncTime) {\n        // Bulletproof every-second sampling\n        if (this.shouldSampleThisSecond(externalSyncTime)) {\n            this.syncTimeDeviationUsArr.push(this.getSyncTimeDeviationUs(currentTime, externalSyncTime));\n        }\n\n        if (this.syncTimeDeviationUsArr.length === 10) {\n            this.checkSyncTimeDeviationAfterNormalization();\n            this.syncTimeDeviationUsArr = [];\n        }\n\n        this.checkSyncTimeDeviationThresholdReached(currentTime, externalSyncTime);\n    }\n\n    /**\n     * Bulletproof every-second detection\n     * Avoids floating point precision issues with modulo operator\n     */\n    shouldSampleThisSecond (externalSyncTime) {\n        if (externalSyncTime <= 0) return false;\n        \n        // Get current second (floor to integer)\n        const currentSecond = Math.floor(externalSyncTime);\n        \n        // Sample once per second when the second changes\n        if (currentSecond !== this.lastSampleSecond) {\n            this.lastSampleSecond = currentSecond;\n            return true;\n        }\n        \n        return false;\n    }\n\n    /**\n     * Get sync time deviation\n     */\n    getSyncTimeDeviationUs (currentTime, externalSyncTime) {\n        const currentDeltaInternalExternalTimeUs = Math.round((currentTime - externalSyncTime) * 1000000);\n        return !Number.isNaN(this.deltaInternalExternalTimeUs) && externalSyncTime > 0\n            ? currentDeltaInternalExternalTimeUs - this.deltaInternalExternalTimeUs\n            : 0;\n    }\n\n    /**\n     * Check sync time deviation threshold\n     */\n    checkSyncTimeDeviationThresholdReached (currentTime, externalSyncTime) {\n        const deviation = this.getSyncTimeDeviationUs(currentTime, externalSyncTime);\n        if (Math.abs(deviation) >= this.SYNC_TIME_DEVIATION_THRESHOLD_US) {\n            this.trace(`Sync time deviation threshold reached: ${deviation}`);\n            this.adjustClockRef(deviation);\n        }\n    }\n\n    /**\n     * Check sync deviation after normalization\n     */\n    checkSyncTimeDeviationAfterNormalization () {\n        const deviationArithmeticMean =\n            this.syncTimeDeviationUsArr.reduce((a, b) => a + b, 0) / this.syncTimeDeviationUsArr.length;\n\n        if (Number.isNaN(this.syncTimeDeviationUsMean)) {\n            this.syncTimeDeviationUsMean = deviationArithmeticMean;\n            return;\n        }\n\n        const deltaMean = deviationArithmeticMean - this.syncTimeDeviationUsMean;\n        const deviation = this.syncTimeDeviationUsArr[this.syncTimeDeviationUsArr.length - 1];\n\n        if (Math.abs(deviation) >= this.SYNC_TIME_DEVIATION_NORMALIZE_US && Math.abs(deltaMean) <= 10000) {\n            this.trace(`Sync time deviation after normalization: ${deviation}, delta mean: ${deltaMean}`);\n            this.adjustClockRef(deviation);\n        }\n\n        this.syncTimeDeviationUsMean = deviationArithmeticMean;\n    }\n\n    /**\n     * Adjust clock reference.\n     * Updates the clock reference to compensate for sync time deviations.\n     *\n     * @param {number} deviation - Deviation amount in microseconds\n     */\n    adjustClockRef (deviation) {\n        this.trace(`Adjusting clock ref with deviation: ${deviation}`);\n        this.syncTimeDeviationUsArr = [];\n        this.clockRefUs += deviation;\n        this.trace(`Clock ref set to: ${this.clockRefUs}`);\n    }\n\n\n    \n    /**\n     * Handle delivery gaps - simple notification only\n     */\n    handleDeliveryGap (gapCount) {\n        const currentTime = now();\n        \n        // Throttle gap notifications to avoid spam\n        if (currentTime - this.deliveryMonitoring.lastGapTime > 1000) {\n            this.trace(`Delivery gap detected: ${gapCount} missing chunks`);\n            \n            this.postMessage({\n                'type'    : 'deliveryGap',\n                'payload' : {\n                    'gapCount' : gapCount,\n                    'allowed'  : this.allowDelayedRendering\n                }\n            });\n            \n            this.deliveryMonitoring.lastGapTime = currentTime;\n        }\n    }\n\n    // ############################################################################\n    // FRAME LIFECYCLE MANAGEMENT\n    // ############################################################################\n\n    /**\n     * Check for frame rendering events (started and completed)\n     * This uses an event-driven approach similar to the WebCodecs onended callback\n     */\n    checkFrameRenderingEvents (currentTimeUs) {\n        // Only check if enough time has passed to avoid excessive checking\n        const timeDelta = currentTimeUs - this.lastCheckedFrameTime;\n        if (timeDelta < 10000) return; // Check at most every 10ms\n        \n        this.lastCheckedFrameTime = currentTimeUs;\n        \n        // Check all buffers for completed frames only\n        const completedFrames = [];\n        \n        for (const [timestamp, buffer] of this.audioBuffers) {\n            const frameId = buffer.frameId || timestamp; // Use actual frameId, fallback to timestamp\n            const isCurrentlyPlaying = this.currentlyPlayingFrames.has(frameId);\n            const hasStarted = currentTimeUs >= buffer.startTime;\n            const hasCompleted = currentTimeUs >= buffer.endTime;\n            \n            if (hasStarted && !isCurrentlyPlaying) {\n                // Track that frame has started (no event emission)\n                this.currentlyPlayingFrames.add(frameId);\n            }\n            \n            if (hasCompleted && isCurrentlyPlaying) {\n                // Frame has completed playing\n                this.currentlyPlayingFrames.delete(frameId);\n                this.audioBuffers.delete(timestamp); // Remove buffer immediately to prevent duplicates\n                completedFrames.push({ 'frameId' : frameId,\n                    'buffer'  : buffer });\n            }\n        }\n        \n        // Emit completed events only\n        for (const { buffer } of completedFrames) {\n            this.postMessage({\n                'type'    : 'frameRendered',\n                'payload' : {\n                    'timestamp'      : buffer.startTime / 1000000, // Convert to seconds\n                    'duration'       : buffer.durationUs / 1000000, // Convert to seconds\n                    'numberOfFrames' : buffer.numberOfFrames,\n                    'currentTime'    : currentTimeUs / 1000000,\n                    'frameId'        : buffer.frameId,\n                    'byteSize'       : buffer.byteSize\n                }\n            });\n        }\n    }\n    \n\n    /**\n     * Clean up old audio buffers\n     */\n    cleanupOldBuffers (currentTimeUs) {\n        const cleanupThresholdUs = this.CLEANUP_THRESHOLD_US;\n        \n        for (const [timestamp, buffer] of this.audioBuffers) {\n            if (buffer.endTime < currentTimeUs - cleanupThresholdUs) {\n                // Check if we're removing the cached buffer\n                if (this.lastActiveBuffer === buffer) {\n                    this.lastActiveBuffer = null;\n                }\n                \n                // Clean up frame tracking when buffer is removed\n                this.currentlyPlayingFrames.delete(timestamp);\n                \n                this.audioBuffers.delete(timestamp);\n                this.postMessage({\n                    'type'    : 'frameRemoved',\n                    'payload' : {\n                        'timestamp'   : timestamp / 1000000,\n                        'currentTime' : currentTimeUs / 1000000,\n                        'reason'      : 'cleanup old buffer'\n                    }\n                });\n            }\n        }\n    }\n\n    // ############################################################################\n    // PROCESSOR LIFECYCLE\n    // ############################################################################\n\n    /**\n     * Close processor.\n     * Cleanly shuts down the audio processor and releases resources.\n     */\n    close () {\n        this.isRunning = false;\n        this.audioBuffers.clear();\n        this.currentlyPlayingFrames.clear();\n        this.postMessage({ 'type'    : 'closed',\n            'payload' : {} });\n    }\n\n    // ############################################################################\n    // UTILITY & MONITORING\n    // ############################################################################\n\n    /**\n     * Send message to main thread.\n     *\n     * @param {Object} message - Message object to send\n     */\n    postMessage (message) {\n        this.port.postMessage(message);\n    }\n\n    /**\n     * Monitor buffer fill status.\n     * Tracks buffer utilization and sends periodic monitoring reports.\n     */\n    monitorBufferFill () {\n        // Early exit if monitoring is disabled\n        if (!this.enableFrameMonitoring) {\n            return;\n        }\n        \n        const currentTime = now();\n        this.frameMonitoring.currentBufferSize = this.audioBuffers.size;\n\n        if (this.frameMonitoring.currentBufferSize > this.frameMonitoring.maxBufferSize) {\n            this.frameMonitoring.maxBufferSize = this.frameMonitoring.currentBufferSize;\n        }\n\n        // Check for buffer overflow (simple threshold)\n        if (this.frameMonitoring.currentBufferSize > this.BUFFER_OVERFLOW_THRESHOLD) {\n            this.frameMonitoring.overflowCount++;\n        }\n\n        // Periodic monitoring report\n        if (currentTime - this.frameMonitoring.lastBufferCheck >= this.frameMonitoring.MONITORING_INTERVAL_MS) {\n            // Calculate buffer fill percentage using cached max capacity\n            // Cache calculation to avoid redundant Math.min calls\n            const currentSize = this.frameMonitoring.currentBufferSize;\n            const fillPercentage = currentSize >= this.MAX_BUFFER_CAPACITY ? 100 : currentSize; // Simplified calculation\n            this.frameMonitoring.cachedFillPercentage = fillPercentage;\n\n            // Use circular buffer instead of push/shift operations\n            const historyEntry = {\n                'timestamp'      : currentTime,\n                'fillPercentage' : fillPercentage,\n                'bufferCount'    : currentSize\n            };\n            \n            const history = this.frameMonitoring.bufferFillHistory;\n            if (history.length < this.frameMonitoring.HISTORY_SIZE) {\n                // Still growing the array\n                history.push(historyEntry);\n            }\n            else {\n                // Use circular buffer - overwrite oldest entry\n                history[this.frameMonitoring.historyIndex] = historyEntry;\n                this.frameMonitoring.historyIndex = (this.frameMonitoring.historyIndex + 1) % this.frameMonitoring.HISTORY_SIZE;\n            }\n\n            // Send monitoring report\n            // Optimize history sending - avoid expensive slice operation\n            const historyToSend = history.length <= 10\n                ? history // Small array, send as-is\n                : history.slice(-10); // Only slice if necessary\n            \n            this.postMessage({\n                'type'    : 'frameMonitoring',\n                'payload' : {\n                    'type'           : 'audioworklet',\n                    'currentSize'    : currentSize,\n                    'maxSize'        : this.frameMonitoring.maxBufferSize,\n                    'fillPercentage' : fillPercentage,\n                    'underrunCount'  : this.frameMonitoring.underrunCount,\n                    'overflowCount'  : this.frameMonitoring.overflowCount,\n                    'history'        : historyToSend\n                }\n            });\n\n            this.frameMonitoring.lastBufferCheck = currentTime;\n        }\n    }\n\n    /**\n     * Trace logging.\n     * Sends debug messages to the main thread with AUDIOWORKLET prefix.\n     *\n     * @param {string} message - Debug message to log\n     */\n    trace (message) {\n        this.postMessage({ 'type'    : 'trace',\n            'payload' : { 'message': '[AUDIOWORKLET] ' + message } });\n    }\n}\n\nregisterProcessor('audio-worklet-renderer', AudioWorkletRendererProcessor);\n\n// Processor registration complete\n";e.includes("typeof AudioWorkletProcessor !== 'undefined'")||(e="// AudioWorklet context check\nif (typeof AudioWorkletProcessor !== 'undefined') {\n"+e+"\n}");const t=new Blob([e],{type:"application/javascript"}),n=URL.createObjectURL(t);await this._aCtx.audioWorklet.addModule(n),URL.revokeObjectURL(n),this.trace("AudioWorklet processor loaded from embedded code (sanitized)")}catch(e){throw this.trace(`Failed to load embedded processor: ${e.message}`),e}this._audioWorkletNode=new AudioWorkletNode(this._aCtx,"audio-worklet-renderer",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[2],channelCountMode:"explicit",channelInterpretation:"speakers",processorOptions:{sampleRate:this._aCtx.sampleRate,schedulingLatencySecs:this._config.schedulingLatencySecs,allowDelayedRendering:this._config.allowDelayedRendering,enableFrameMonitoring:this._config.enableFrameMonitoring}}),this._audioWorkletNode.port.onmessage=e=>{this._handleWorkletMessage(e.data)},this._audioWorkletNode.connect(this._gainNode),this.trace("AudioWorklet initialized successfully")}catch(e){this.trace(`AudioWorklet initialization failed: ${e.message}, falling back to WebCodecs mode`),this._initializeWebCodecsFallback()}}_initializeWebCodecsFallback(){this._useWebCodecsFallback=!0,this._clockRefUs=NaN,this._dtsOffsetUs=NaN,this._deltaInternalExternalTimeUs=NaN,this._syncTimeDeviationUsArr=[],this._syncTimeDeviationUsMean=NaN,this._nextTimestamp=NaN,this._sourceNodesPending=[],this._timeLag=0,this._framesRenderedSinceDrop=0,this._lastSampleSecond=-1,this._sourceNodePendingCleanTimer=void 0,this._config.enableFrameMonitoring&&(this._webCodecsBufferMonitoring.lastBufferCheck=Date.now());const e=this._config.forceWebCodecsFallback?"disabled via configuration/query parameter":"AudioWorklet initialization failed";this.trace(`WebCodecs fallback initialized successfully (${e})`)}_handleWorkletMessage(e){const{type:t,payload:n}=e;switch(t){case"frameScheduled":{const e=Math.floor(n.currentTimeS);this._lastFrameScheduledSecond!==e&&(this._lastFrameScheduledSecond=e,this.emit("frameScheduled",n.startTimeS,n.currentTimeS,n.externalSyncTimeS,n.deviationS,n.timeLagS));break}case"audioError":this.emit("audioError",new Error(n.error));break;case"audioLag":this.emit("audioLag",n.message,n.lag);break;case"underrun":this.emit("underrun");break;case"frameRemoved":this.emit("frameRemoved",n.timestamp,n.currentTime,n.reason);break;case"trace":this.emit("trace",n.message);break;case"closed":this.emit("closed");break;case"frameMonitoring":this.emit("frameMonitoring",n);break;case"frameRendered":this.emit("frameRendered",n.timestamp,n.duration,n.numberOfFrames,"audioworklet",n.currentTime,n.frameId,n.byteSize);break;default:this.trace(`Unknown worklet message type: ${t}`)}}renderAudioData(e,t,n){if(this._useWebCodecsFallback)this._renderAudioDataWebCodecs(e,t,n);else{if(!this._audioWorkletNode)return this._initializeWebCodecsFallback(),void this._renderAudioDataWebCodecs(e,t,n);try{const i=this._aCtx.currentTime,a=this._config.getExternalSyncTime(),{numberOfChannels:o,numberOfFrames:s,sampleRate:d,format:u,timestamp:c,duration:l}=e,f=[],m=o*s*4;if("f32-planar"===u)for(let t=0;t<o;t++){const n=this._getFloat32Array(s);e.copyTo(n,{planeIndex:t});const r=new Array(s);for(let e=0;e<s;e++)r[e]=n[e];f.push(r),this._returnFloat32Array(n)}else if("f32"===u){const t=this._getFloat32Array(s*o);e.copyTo(t,{planeIndex:0});for(let e=0;e<o;e++)f.push(new Array(s));for(let e=0;e<s;e++){const n=e*o;for(let r=0;r<o;r++)f[r][e]=t[n+r]}this._returnFloat32Array(t)}e.close(),this._audioWorkletNode.port.postMessage({type:"renderAudioData",payload:{audioBuffers:f,numberOfChannels:o,numberOfFrames:s,sampleRate:d,format:u,timestamp:c,duration:l,dtsUs:t,currentTime:i,externalSyncTime:a,frameId:n,byteSize:m}}),void 0===this._allowed&&(this._muted?this._startedWhileMuted=!0:(this._checkContextStateAfterStart(),"suspended"===this._aCtx.state&&this._aCtx.resume().then((()=>{this._allowed=!0,this.emit("startSuccess"),this._allowedTimer&&(clearTimeout(this._allowedTimer),this._allowedTimer=void 0)})).catch((()=>{this._allowed=!1,this.trace("AudioContext resume failed, likely due to autoplay policy"),this.emit("startError",new r("NotAllowedError","The AudioContext was not allowed to start. It must be resumed (or created) after a user gesture on the page.",1005)),this._allowedTimer&&(clearTimeout(this._allowedTimer),this._allowedTimer=void 0)}))))}catch(t){this.emit("audioError",t),e.close()}}}_setAudioRenderState(e){this.trace("state changed to "+e),this._state=e,this.emit("stateChanged",this._state)}_checkContextStateAfterStart(){this._allowedTimer||(this._allowedTimer=window.setTimeout((()=>{switch(this._aCtx.state){case"running":this._allowed=!0,this.emit("startSuccess");break;case"suspended":void 0===this._allowed&&(this._allowed=!1,this.trace(`AudioContext suspended, likely due to autoplay policy. Current time: ${this._aCtx.currentTime}`),this.emit("startError",new r("NotAllowedError","The AudioContext was not allowed to start. It must be resumed (or created) after a user gesture on the page.",1005)))}this._allowedTimer=void 0}),this._config.startTimeoutMs))}setVolume(e){e<=0?e=1e-4:e>1&&(e=1),this._volume!==e&&(this._volume=Math.floor(100*e)/100,this._gainNode.gain.value=this._volume,this._audioWorkletNode&&!this._useWebCodecsFallback&&this._audioWorkletNode.port.postMessage({type:"setVolume",payload:{volume:this._volume}}),this.emit("volumeChanged",this._volume,this._muted),this.trace(`volume changed to ${this._volume}`))}setTimingAdjustment(e){const t=e/1e3;this._timeLag+=t,this.trace(`Applied timing adjustment: +${e.toFixed(1)}ms (total lag: ${(1e3*this._timeLag).toFixed(1)}ms)`),this.emit("audioLag","avsync_adjustment",this._timeLag)}getTimeLag(){return this._timeLag}setTimeLag(e){this._timeLag=e,this.trace(`Set absolute timing lag: ${(1e3*e).toFixed(1)}ms`),this.emit("audioLag","avsync_set",this._timeLag)}setMute(e){e!==this._muted&&(this._muted=e,this._useWebCodecsFallback?this._setMuteWebCodecs(e):(this._audioWorkletNode&&(!this._muted&&this._startedWhileMuted&&(this._audioWorkletNode.port.postMessage({type:"resetTiming",payload:{}}),this._startedWhileMuted=!1,this.trace("Resetting AudioWorklet timing after unmuting (audio started while muted)")),this._audioWorkletNode.port.postMessage({type:"setMute",payload:{muted:this._muted}})),!1===e?(this._allowed=void 0,this._allowedTimer&&(clearTimeout(this._allowedTimer),this._allowedTimer=void 0)):this._allowedTimer&&(clearTimeout(this._allowedTimer),this._allowedTimer=void 0),this.emit("volumeChanged",this._volume,this._muted),this.trace("mute state changed to "+(e?"muted":"unmuted"))))}async resume(){if("suspended"===this._aCtx.state)try{await this._aCtx.resume(),this.trace("AudioContext resumed"),this.emit("startSuccess")}catch(e){this.emit("audioError",new r("ResumeError",`Failed to resume AudioContext: ${e.message}`,1004))}}close(){this._allowedTimer&&(clearTimeout(this._allowedTimer),this._allowedTimer=void 0),this._sourceNodePendingCleanTimer&&(clearTimeout(this._sourceNodePendingCleanTimer),this._sourceNodePendingCleanTimer=void 0),this._audioWorkletNode&&(this._audioWorkletNode.port.postMessage({type:"close",payload:{}}),this._audioWorkletNode.disconnect(),this._audioWorkletNode=null),this._useWebCodecsFallback&&(this._removeAllSourceNodesPending("close"),this._clockRefUs=NaN,this._dtsOffsetUs=NaN),this._gainNode.disconnect(),"closed"===this._aCtx.state?(this.trace("AudioContext already closed, skip"),this.emit("closed")):this._aCtx.close().then((()=>{this.emit("closed")})).catch((e=>{this.trace(e.message||"closing AudioContext failed")})),this.removeAllListeners()}get state(){return this._state}get volume(){return this._volume}get muted(){return this._muted}get audioContext(){return this._aCtx}_renderAudioDataWebCodecs(e,t,n){try{const r=this._aCtx.currentTime,i=this._config.getExternalSyncTime(),a=this._parseTimestamp(e,t),o=e.duration/1e6;if(!a)return void e.close();if(Number.isNaN(this._dtsOffsetUs)){this._dtsOffsetUs=a,this._deltaInternalExternalTimeUs=Math.round(1e6*(r-i)),this._syncTimeDeviationUsArr=[],this._syncTimeDeviationUsMean=NaN,this.trace("delta internal external time us "+this._deltaInternalExternalTimeUs);const e=r+this._config.schedulingLatencySecs;this._clockRefUs=Math.round(1e6*e),this.trace("clock ref set to "+this._clockRefUs+", dts offset "+this._dtsOffsetUs)}r>0&&i>0&&!Number.isNaN(this._deltaInternalExternalTimeUs)&&(this._shouldSampleThisSecond(i)&&this._syncTimeDeviationUsArr.push(this._getSyncTimeDeviationUs()),10===this._syncTimeDeviationUsArr.length&&(this._checkSyncTimeDeviationAfterNormalization(),this._syncTimeDeviationUsArr.length=0),this._checkSyncTimeDeviationThresholdReached());const s=e.numberOfChannels*e.numberOfFrames*4,d=this._clockRefUs+a-this._dtsOffsetUs;let u=d/1e6+this._timeLag;if(this._config.allowDelayedRendering){if(u<=r)this._timeLag+=r-u,u=d/1e6+this._timeLag,this.emit("audioLag","increase",this._timeLag),this._framesRenderedSinceDrop=0;else if(this._framesRenderedSinceDrop>this.DROP_FRAME_DISTANCE_NORMAL&&this._timeLag>o&&u-o>r+this._config.startBufferMs/1e3)return this._timeLag-=o,this.emit("audioLag","decrease",this._timeLag),e.close(),void(this._framesRenderedSinceDrop=0);this._framesRenderedSinceDrop++}else if(u<=r)return this._incrementWebCodecsUnderrun(),this.emit("underrun"),void e.close();const c={timestamp:u,sourceNode:this._createBufferSource(e),started:!1,rendered:!1,duration:o,numberOfFrames:e.numberOfFrames,frameId:n,byteSize:s},l=this._sourceNodesPending.length;this._sourceNodesPending.push(c),this._sourceNodeIndexMap.set(c,l),this._config.enableFrameMonitoring&&this._monitorWebCodecsBuffer(),this._sourceNodePendingCleanTimer||(this._sourceNodePendingCleanTimer=window.setTimeout((()=>{this._sourceNodePendingCleanTimer=void 0,this._checkSourceNodeQueue()}),this.SOURCE_NODE_PENDING_CLEAN_TIMEOUT_MS));const f=e=>{const t=this._aCtx.currentTime;e.started&&!e.rendered&&(e.rendered=!0,this.emit("frameRendered",e.timestamp,e.duration||0,e.numberOfFrames||0,"webcodecs",t,e.frameId,e.byteSize)),this._removeSourceNodePending(e,e.started?"ended after played":"ended before played")};if(c.sourceNode.onended=f.bind(this,c),!this._muted){c.sourceNode.start(c.timestamp),c.started=!0;const e=Math.floor(r);this._lastFrameScheduledSecond!==e&&(this._lastFrameScheduledSecond=e,this.emit("frameScheduled",u,r,i,this._deltaInternalExternalTimeUs/1e6,this._timeLag)),this._checkContextStateAfterSourceNodeStart(c)}}catch(t){this.emit("audioError",t),e.close()}}_parseTimestamp(e,t){const n=e.duration;let r=0;if(isNaN(this._nextTimestamp)){if(t!==e.timestamp)return this.emit("audioError",new Error("Initial audio decoder output timestamp should match dequeued one")),0;r=t,this.trace("initial timestamp "+r)}else if(t>=this._nextTimestamp+n){const e=Math.floor((t-this._nextTimestamp)/n);if(r=this._nextTimestamp+n*e,this._config.allowDelayedRendering){const t=Math.floor(1e6*this._timeLag/n),r=Math.min(e,t);r&&(this._timeLag-=r*n/1e6,this.emit("audioLag","decrease",this._timeLag))}this.trace("gap of "+n*e+" detected, corrected timestamp is expected next timestamp incl. gap "+r)}else r=this._nextTimestamp;return this._nextTimestamp=r+n,r}_createBufferSource(e){const{numberOfChannels:t,numberOfFrames:n,sampleRate:r,format:i}=e,a=this._aCtx.createBuffer(t,n,r);if("f32-planar"===i)for(let r=0;r<t;r++){const t=this._getFloat32Array(n);e.copyTo(t,{planeIndex:r}),a.copyToChannel(t,r),this._returnFloat32Array(t)}else if("f32"===i){const r=this._getFloat32Array(n*t);e.copyTo(r,{planeIndex:0});const i=[];for(let e=0;e<t;e++)i[e]=a.getChannelData(e);for(let e=0;e<n;e++){const n=e*t;for(let a=0;a<t;a++)i[a][e]=r[n+a]}this._returnFloat32Array(r)}else this.emit("audioError",new Error(`Unsupported AudioData format: ${i}`));e.close();const o=this._aCtx.createBufferSource();return o.buffer=a,o.connect(this._gainNode),o}_setMuteWebCodecs(e){const t=this._aCtx.currentTime,n=this._config.getExternalSyncTime();if(!1===e){if(this._allowed=void 0,this._allowedTimer=void 0,0===t){let e=0;for(let t=this._sourceNodesPending.length-1;t>=0;t--)this._sourceNodesPending[t].timestamp>e&&(this.trace("lastTimestamp updated to "+this._sourceNodesPending[t].timestamp),e=this._sourceNodesPending[t].timestamp);for(let t=this._sourceNodesPending.length-1;t>=0;t--){const n=this._sourceNodesPending[t];n.timestamp=n.timestamp-e+this._config.startBufferMs/1e3,n.timestamp<0&&this._removeSourceNodePending(n,"negative at unmute")}this._dtsOffsetUs=1e6*e-1e3*this._config.startBufferMs,this._deltaInternalExternalTimeUs=Math.round(1e6*(t-n)),this._syncTimeDeviationUsArr=[],this._syncTimeDeviationUsMean=NaN,this.trace("delta internal external time us "+this._deltaInternalExternalTimeUs),this.trace("dts offset updated to "+this._dtsOffsetUs)}const e=this._sourceNodesPending,r=this._deltaInternalExternalTimeUs;for(let i=e.length-1;i>=0;i--){const a=e[i],o=a.timestamp;if(o>=t&&!a.started){a.sourceNode.start(o),a.started=!0;const e=Math.floor(t);this._lastFrameScheduledSecond!==e&&(this._lastFrameScheduledSecond=e,this.emit("frameScheduled",o,t,n,r/1e6,this._timeLag)),this._checkContextStateAfterSourceNodeStart(a)}else o<t&&this._removeSourceNodePending(a,"too late at unmute")}}else{clearTimeout(this._allowedTimer);const e=this._sourceNodesPending;for(let t=e.length-1;t>=0;t--){const n=e[t];n.started&&(n.sourceNode.stop(0),n.started=!1)}}this.emit("volumeChanged",this._volume,this._muted),this.trace("mute state changed to "+(e?"muted":"unmuted"))}_shouldSampleThisSecond(e){if(e<=0)return!1;const t=Math.floor(e);return t!==this._lastSampleSecond&&(this._lastSampleSecond=t,!0)}_getSyncTimeDeviationUs(){const e=this._config.getExternalSyncTime(),t=this._aCtx.currentTime,n=Math.round(1e6*(t-e));return!Number.isNaN(this._deltaInternalExternalTimeUs)&&e>0?n-this._deltaInternalExternalTimeUs:0}_checkSyncTimeDeviationThresholdReached(){const e=this._getSyncTimeDeviationUs();Math.abs(e)>=this.SYNC_TIME_DEVIATION_THRESHOLD_US&&(this.trace("sync time deviation threshold reached "+e),this._adjustClockRef(e),this._checkSourceNodeQueue())}_checkSyncTimeDeviationAfterNormalization(){const e=this._syncTimeDeviationUsArr;let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n];const n=t/e.length;if(Number.isNaN(this._syncTimeDeviationUsMean))return void(this._syncTimeDeviationUsMean=n);const r=n-this._syncTimeDeviationUsMean,i=this._getSyncTimeDeviationUs();Math.abs(i)>=this.SYNC_TIME_DEVIATION_NORMALIZE_US&&Math.abs(n-this._syncTimeDeviationUsMean)<=1e4&&(this.trace("sync time deviation after normalization "+i+", delta mean deviation "+r),this._adjustClockRef(i),this._checkSourceNodeQueue()),this._syncTimeDeviationUsMean=n}_adjustClockRef(e){this.trace("adjusting clock ref with deviation "+e);const t=this._aCtx.currentTime,n=this._config.getExternalSyncTime();this._deltaInternalExternalTimeUs=Math.round(1e6*(t-n)),this.trace("new delta internal external time us "+this._deltaInternalExternalTimeUs),this._syncTimeDeviationUsArr=[],this._syncTimeDeviationUsArr.push(this._getSyncTimeDeviationUs()),this.trace("old clock ref "+this._clockRefUs),this._clockRefUs+=e,this.trace("clock ref set to "+this._clockRefUs)}_checkContextStateAfterSourceNodeStart(e){!this._allowed&&!this._allowedTimer&&(this._allowedTimer=setTimeout((()=>{switch(e.sourceNode.context.state){case"running":this._allowed=!0,this.emit("startSuccess");break;case"suspended":void 0===this._allowed&&(this._allowed=!1,this.trace("ctx state suspended after start node scheduled, disabled by autopolicy, currentTime: "+e.sourceNode.context.currentTime),this.emit("startError",new r("NotAllowedError","The AudioContext was not allowed to start. It must be resumed (or created) after a user gesture on the page.",1005))),this._allowedTimer=void 0}}),this._config.startTimeoutMs))}_checkSourceNodeQueue(){const e=this._aCtx.currentTime,t=this._sourceNodesPending;for(let n=t.length-1;n>=0;n--){const r=t[n];r.timestamp+3<=e&&this._removeSourceNodePending(r,"too late at check")}}_removeSourceNodePending(e,t=""){const n=this._sourceNodeIndexMap.get(e);if(void 0!==n&&n<this._sourceNodesPending.length){const r=e,i=this._sourceNodesPending.length-1,a=this._sourceNodesPending[i];n!==i&&(this._sourceNodesPending[n]=a,this._sourceNodeIndexMap.set(a,n)),this._sourceNodesPending.length=i,this._sourceNodeIndexMap.delete(e),r.sourceNode.onended=null,r.started&&r.sourceNode.stop(),r.sourceNode.disconnect();const o=this._aCtx.currentTime;"ended after played"!==t&&this.emit("frameRemoved",r.timestamp,o,t),this._config.enableFrameMonitoring&&this._monitorWebCodecsBuffer()}}_removeAllSourceNodesPending(e=""){this._sourceNodePendingCleanTimer&&clearTimeout(this._sourceNodePendingCleanTimer);const t=this._sourceNodesPending,n=this._aCtx.currentTime;for(let r=t.length-1;r>=0;r--){const i=t[r];i.sourceNode.onended=null,i.started&&i.sourceNode.stop(),i.sourceNode.disconnect(),"ended after played"!==e&&this.emit("frameRemoved",i.timestamp,n,e)}this._sourceNodesPending.length=0,this._sourceNodeIndexMap.clear(),this._config.enableFrameMonitoring&&this._monitorWebCodecsBuffer()}_getFloat32Array(e){for(let t=0;t<this._float32ArrayPool.length;t++){const n=this._float32ArrayPool[t];if(n.length===e)return this._float32ArrayPool.splice(t,1),n}return new Float32Array(new ArrayBuffer(4*e))}_returnFloat32Array(e){this._float32ArrayPool.length<this.MAX_POOL_SIZE&&(e.fill(0),this._float32ArrayPool.push(e))}_getNumberArray(e){for(let t=0;t<this._arrayPool.length;t++){const n=this._arrayPool[t];if(n.length===e)return this._arrayPool.splice(t,1),n}return new Array(e)}_returnNumberArray(e){this._arrayPool.length<this.MAX_POOL_SIZE&&(e.length=0,this._arrayPool.push(e))}_monitorWebCodecsBuffer(){if(!this._config.enableFrameMonitoring)return;const e=Date.now(),t=this._sourceNodesPending.length;if(this._webCodecsBufferMonitoring.currentBufferSize=t,t>this._webCodecsBufferMonitoring.maxBufferSize&&(this._webCodecsBufferMonitoring.maxBufferSize=t),t>this._webCodecsBufferMonitoring.MAX_BUFFER_THRESHOLD&&this._webCodecsBufferMonitoring.overflowCount++,e-this._webCodecsBufferMonitoring.lastBufferCheck>=this._webCodecsBufferMonitoring.MONITORING_INTERVAL_MS){const n=t>=this._webCodecsBufferMonitoring.MAX_BUFFER_THRESHOLD?100:t,r={timestamp:e,fillPercentage:n,bufferCount:t},i=this._webCodecsBufferMonitoring.bufferFillHistory;i.length<this._webCodecsBufferMonitoring.HISTORY_SIZE||i.shift(),i.push(r),this.emit("frameMonitoring",{type:"webcodecs",currentSize:t,maxSize:this._webCodecsBufferMonitoring.maxBufferSize,fillPercentage:n,underrunCount:this._webCodecsBufferMonitoring.underrunCount,overflowCount:this._webCodecsBufferMonitoring.overflowCount,history:i.slice(-10)}),this._webCodecsBufferMonitoring.lastBufferCheck=e}}_incrementWebCodecsUnderrun(){this._config.enableFrameMonitoring&&this._webCodecsBufferMonitoring.underrunCount++}trace(e){let t="";this._audioWorkletNode?t="[AUDIOWORKLET-MAIN] ":this._useWebCodecsFallback&&(t="[WEBCODECS] "),this.emit("trace",t+e)}}return n})(),e.exports=t()},4283:function(e){var t;self,t=()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{VideoDecoderModule:()=>n});class n extends class{constructor(){this.listeners=new Map}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){const n=this.listeners.get(e);if(n){const r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&this.listeners.delete(e)}}emit(e,...t){const n=this.listeners.get(e)||[];for(const e of n)e(...t)}}{constructor(){super(),this._pendingDecoder=null,this._isConfigured=!1,this._isBeingConfigured=!1,this._decConfig=null,this._gotFirstKeyFrame=!1,this.prerollFramesVideo=0,this.prerollFramesRemaining=0,this._decoder=new VideoDecoder({...this._getVideoDecoderConstructorOptions()})}setPrerollInfo(e){this.prerollFramesVideo=e,this.prerollFramesRemaining=e}isConfigured(){return this._isConfigured}isBeingConfigured(){return this._isBeingConfigured}configureDecoder(e){if(this._isBeingConfigured)return;if(null===e&&null===this._decConfig)return void this.emit("decodeError",new Error("No chunk or config."));this._isBeingConfigured=!0;const t=null!==e?this._getAvcDecoderConfig(e.payloadUnit):this._decConfig;this._pendingDecoder=new VideoDecoder({...this._getVideoDecoderConstructorOptions()}),VideoDecoder.isConfigSupported(t).then((e=>e.supported?(this._pendingDecoder.configure(t),"configured"!==this._pendingDecoder.state?(this._pendingDecoder=null,void this.emit("decodeError",new Error("VideoDecoder configure failed."))):("closed"!==this._decoder.state&&this._decoder.close(),this._decoder=this._pendingDecoder,this._gotFirstKeyFrame=!1,this._isBeingConfigured=!1,this._pendingDecoder=null,this._isConfigured=!0,this._decConfig=t,void this.emit("configured",t))):(this._pendingDecoder=null,void this.emit("decodeError",new Error("VideoDecoder config not supported."))))).catch((e=>{this._pendingDecoder=null,this.emit("decodeError",e)}))}decodeChunk(e){const{payloadUnit:t,isCodecConfig:n,isKeyframe:r,dtsUs:i}=e;if(!this._decoder)return;if(n&&!this._isBeingConfigured){const e=this._getAvcDecoderConfig(t);return this._isBeingConfigured=!0,this._pendingDecoder=new VideoDecoder({...this._getVideoDecoderConstructorOptions()}),void VideoDecoder.isConfigSupported(e).then((t=>t.supported?(this._pendingDecoder.configure(e),"configured"!==this._pendingDecoder.state?(this._pendingDecoder=null,void this.emit("decodeError",new Error("VideoDecoder configure failed."))):(this._decoder&&this._decoder.close(),this._decoder=this._pendingDecoder,this._gotFirstKeyFrame=!1,this._isBeingConfigured=!1,this._pendingDecoder=null,this._isConfigured=!0,this._decConfig=e,void this.emit("configured",e))):(this._pendingDecoder=null,void this.emit("decodeError",new Error("VideoDecoder config not supported."))))).catch((e=>{this._pendingDecoder=null,this.emit("decodeError",e)}))}if(!this._isConfigured||this.prerollFramesRemaining>0)return void(this.prerollFramesRemaining>0&&(console.log("Skipping video preroll frame"),this.prerollFramesRemaining--));if(!this._gotFirstKeyFrame&&!r)return;if(this._isBeingConfigured)return void console.log("Skipping video frame because it is after the configuration frame while being configured");this._gotFirstKeyFrame=!0;const a=new EncodedVideoChunk({type:r?"key":"delta",timestamp:i,data:t});"configured"===this._decoder.state?this._decoder.decode(a):"closed"===this._decoder.state&&this._isConfigured?this.emit("decodeError",new Error("VideoDecoder closed.")):this.emit("decodeError",new Error("VideoDecoder not configured or configuration changed after startup."))}_onFrameDecoded(e){this.emit("frameDecoded",e)}_getAvcDecoderConfig(e){return{codec:"avc1."+(e[1]<<16|e[2]<<8|e[3]|16777216).toString(16).substring(1),description:e,optimizeForLatency:!0}}_getVideoDecoderConstructorOptions(){return{output:e=>this._onFrameDecoded(e),error:e=>this.emit("decodeError",e)}}get config(){return this._isConfigured?this._decConfig:null}close(){this._pendingDecoder&&"closed"!==this._pendingDecoder.state&&(this._pendingDecoder.close(),this._pendingDecoder=null),this._decoder&&"closed"!==this._decoder.state&&this._decoder.close(),this.emit("closed")}}return t})(),e.exports=t()},6660:function(e){var t;self,t=()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{VideoRenderer:()=>n});class n extends class{constructor(){this.listeners=new Map}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}emit(e,...t){const n=this.listeners.get(e)||[];for(const e of n)e(...t)}}{constructor(e,t={}){super(),this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.config=Object.assign({autoResize:!1},t)}renderFrame(e){if(!this.ctx)return console.warn("VideoRenderer: no 2D context available."),void e.close();this.config.autoResize&&e.displayWidth&&e.displayHeight&&(this.canvas.width===e.displayWidth&&this.canvas.height===e.displayHeight||(this.canvas.width=e.displayWidth,this.canvas.height=e.displayHeight)),this.ctx.drawImage(e,0,0,this.canvas.width,this.canvas.height),e.close()}clear(){this.ctx&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}resize(e,t){this.canvas.width=e,this.canvas.height=t}close(){this.emit("closed")}}return t})(),e.exports=t()},711:function(e,t,n){var r,i;r=[n(8333),n(6627),n(9658),n(1933),n(6637),n(5055),n(8250),n(9437),n(1520),n(3038),n(907),n(3242),n(3701),n(738),n(6273),n(5082),n(4545),n(6636)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l,f,m,E,p,h,g){"use strict";return{create:function(e){var t,r,b=new n,_=[],T=[{type:d.CONFIG,listener:function(){}}],A=[{from:c.LOAD_START,to:l.LOAD_START},{from:c.PROGRESS,to:l.PROGRESS},{from:c.SUSPEND,to:l.SUSPEND},{from:c.ABORT,to:l.ABORT},{from:c.EMPTIED,to:l.EMPTIED},{from:c.STALLED,to:l.STALLED},{from:c.PLAY,to:l.PLAY},{from:c.PAUSE,to:l.PAUSE},{from:c.LOADED_META_DATA,to:l.LOADED_META_DATA},{from:c.LOADED_DATA,to:l.LOADED_DATA},{from:c.WAITING,to:l.WAITING},{from:c.PLAYING,to:l.PLAYING},{from:c.CAN_PLAY,to:l.CAN_PLAY},{from:c.CAN_PLAY_THROUGH,to:l.CAN_PLAY_THROUGH},{from:c.SEEKING,to:l.SEEKING},{from:c.SEEKED,to:l.SEEKED},{from:c.TIME_UPDATE,to:l.TIME_UPDATE},{from:c.ENDED,to:l.ENDED},{from:c.RATE_CHANGE,to:l.RATE_CHANGE},{from:c.DURATION_CHANGE,to:l.DURATION_CHANGE},{from:c.VOLUME_CHANGE,to:l.VOLUME_CHANGE},{from:c.ELEMENT_CREATED,to:l.ELEMENT_CREATED},{from:c.PLAY_START_SUCCESS,to:l.PLAY_START_SUCCESS},{from:c.PLAY_START_ABORT_ERROR,to:l.PLAY_START_ABORT_ERROR},{from:c.PLAY_START_NOT_ALLOWED_ERROR,to:l.PLAY_START_NOT_ALLOWED_ERROR},{from:c.VIEWPORT_VISIBLE,to:l.VIEWPORT_VISIBLE},{from:c.VIEWPORT_HIDDEN,to:l.VIEWPORT_HIDDEN},{from:c.UPDATE_SOURCE_ABORT,to:l.UPDATE_SOURCE_ABORT},{from:c.UPDATE_SOURCE_FAIL,to:l.UPDATE_SOURCE_FAIL},{from:c.UPDATE_SOURCE_TIMEOUT,to:l.UPDATE_SOURCE_TIMEOUT},{from:c.ACTIVE_VIDEO_ELEMENT_CHANGE,to:l.ACTIVE_VIDEO_ELEMENT_CHANGE},{from:c.VIDEO_DECODE_ERROR,to:l.MEDIA_ERROR},{from:c.AUDIO_DECODE_ERROR,to:l.MEDIA_ERROR},{from:c.VIDEO_DECODER_STARTUP_ERROR,to:l.MEDIA_ERROR},{from:c.AUDIO_DECODER_STARTUP_ERROR,to:l.MEDIA_ERROR},{from:c.MEDIA_ERROR_RECOVERED,to:l.MEDIA_ERROR_RECOVERED},{from:c.SWITCH_STREAM,to:l.SWITCH_STREAM},{from:m.PUBLIC_MEDIA_STATS,to:l.PLAY_STATS},{from:m.MEDIA_ERROR_RECOVER_STATS,to:l.MEDIA_ERROR_RECOVER_STATS},{from:f.PLAYBACK_STARTED,to:l.PLAYBACK_STARTED},{from:f.BUFFERING,to:l.BUFFERING},{from:c.TIME_OFFSET,to:l.TIME_OFFSET},{from:c.ADJUSTED_META_DATA,to:l.ADJUSTED_META_DATA}],S=[{from:o.CREATE_VIDEO,to:u.CREATE_VIDEO},{from:o.DESTROY_VIDEO,to:u.DESTROY_VIDEO},{from:o.VIDEO_SOURCE,to:u.VIDEO_SOURCE},{from:o.PLAY,to:u.PLAY},{from:o.PAUSE,to:u.PAUSE},{from:o.SEEK,to:u.SEEK},{from:o.MUTE,to:u.MUTE},{from:o.UNMUTE,to:u.UNMUTE},{from:o.SET_VOLUME,to:u.SET_VOLUME},{from:o.SET_RATE,to:u.SET_RATE},{from:o.UPDATE_SOURCE,to:u.UPDATE_SOURCE},{from:E.ERROR,to:d.MEDIA_ERROR},{from:E.RECOVER,to:d.MEDIA_ERROR_RECOVER},{from:E.RECOVERED,to:d.MEDIA_ERROR_RECOVERED},{from:E.QUEUED,to:d.MEDIA_ERROR_QUEUED},{from:E.UNQUEUED,to:d.MEDIA_ERROR_UNQUEUED},{from:s.CONFIG,to:d.CONFIG},{from:s.SERVER_INFO,to:d.SERVER_INFO},{from:s.STREAM_FRAGMENT,to:d.STREAM_FRAGMENT},{from:s.RANDOM_ACCESS_POINT,to:d.RANDOM_ACCESS_POINT},{from:s.NETWORK_ONLINE,to:d.NETWORK_ONLINE},{from:s.NETWORK_OFFLINE,to:d.NETWORK_OFFLINE},{from:s.WEB_TRANSPORT_META_DATA,to:d.WEB_TRANSPORT_META_DATA},{from:s.APPLICATION_STATE_CHANGE,to:d.APPLICATION_STATE_CHANGE},{from:s.STARTUP_STATS_ADDED,to:d.STARTUP_STATS_ADDED},{from:s.STARTUP_STATS_COMPLETED,to:d.STARTUP_STATS_COMPLETED},{from:s.DOCUMENT_VISIBLE,to:d.DOCUMENT_VISIBLE},{from:s.DOCUMENT_HIDDEN,to:d.DOCUMENT_HIDDEN},{from:s.STREAM_INFO,to:d.STREAM_INFO},{from:s.STREAM_INFO_UPDATE,to:d.STREAM_INFO_UPDATE},{from:s.SWITCH_STREAM_INIT,to:d.SWITCH_STREAM_INIT},{from:s.SWITCH_STREAM_SUCCESS,to:d.SWITCH_STREAM_SUCCESS},{from:s.SWITCH_STREAM_ABORT,to:d.SWITCH_STREAM_ABORT},{from:s.SWITCH_STREAM_FAIL,to:d.SWITCH_STREAM_FAIL},{from:s.UPDATE_SOURCE_INIT,to:d.UPDATE_SOURCE_INIT},{from:s.UPDATE_SOURCE_SUCCESS,to:d.UPDATE_SOURCE_SUCCESS},{from:s.BUFFER_TWEAKS_CREATED,to:d.BUFFER_TWEAKS_CREATED},{from:s.BUFFER_GOAL_STATS,to:d.BUFFER_GOAL_STATS}];return i.add({target:b,listeners:T}),t=a.create(e,b,S),r=a.create(b,e,A),_.push(g.create(b)),_.push(p.create(b)),_.push(h.create(b)),{destroy:function(){for(;_.length;)_.pop().destroy();t.destroy(),t=null,r.destroy(),r=null}}}}}.apply(t,r))||(e.exports=i)},4856:function(e,t,n){var r,i;r=[n(4556),n(6637),n(8333),n(6627),n(5337),n(492),n(9437),n(1667),n(5075),n(3242)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u){return{create:function(c){var l,f,m,E,p,h,g,b,_,T,A,S,y,v=n.create("StatsCollector"),R=0,O=[{type:o.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case a.PAUSED:v.debugEnabled()&&v.debug("remove stats listener"),t.remove({target:c,listeners:I});break;case a.PLAYING:break;case a.LOADING:w(),m&&(v.debugEnabled()&&v.debug("hls: add stats listener"),t.add({target:c,listeners:I}))}}},{type:o.CONFIG,listener:function(e){m=r.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&r.canUseHLS}}],I=[{type:d.PLAY_STATS,listener:N},{type:u.PLAY_STATS,listener:N}],C=[{type:o.STREAM_FRAGMENT,listener:function(e){"mp4"===e.data.type?(S+=1,y+=e.data.fragment.byteLength):"avc"===e.data.type&&(S+=1,y+=e.data.fragment.payload.length)}},{type:o.STREAM_INFO,listener:function(e){m||(v.debugEnabled()&&v.debug("wss: add stats listener"),t.add({target:c,listeners:I})),E=e.data.streamInfo.haveVideo}},{type:o.STREAM_INFO_UPDATE,listener:function(e){E=e.data.streamInfo.haveVideo}}];function N(t){if(l=t.data.mediaStats,p=l.currentTime,h=l.playbackRate,f.playout.start=l.playedStart,f.playout.end=l.playedEnd,f.buffer.update.current=l.bufferUpdate,f.buffer.start=l.bufferStart,f.buffer.end=l.bufferEnd,f.buffer.delay.current=l.bufferDelay?l.bufferDelay:0,f.buffer.durationDelta=l.durationDelta,g.add(f.buffer.delay.current),D(g,f.buffer.delay),b.add(f.buffer.update.current),D(b,f.buffer.update),f.duration.current=l.duration,e&&!m){var n=Math.floor(e.now()/1e3);R!==n&&(R=n,f.bitrate.current=8*y,T.add(f.bitrate.current),D(T,f.bitrate),E&&(f.framerate.current=S,A.add(f.framerate.current),D(A,f.framerate)),S=0,y=0)}f.currentTime=p,f.playbackrate.current=h,_.add(f.playbackrate.current),D(_,f.playbackrate),c.emit(s.PLAY_STATS,{stats:f})}function D(e,t){t.avg=e.arithmetic,t.min=e.minimum,t.max=e.maximum,t.deviation=e.deviation}function w(){f={currentTime:0,playout:{start:0,end:0},duration:{current:0},buffer:{start:0,end:0,delay:{before:0,current:0,avg:0,min:0,max:0,deviation:0},update:{current:0,avg:0,min:0,max:0,deviation:0},durationDelta:0},buffergoal:{real:0,base:0,min:0,max:0},playbackrate:{current:0,avg:0,min:0,max:0,deviation:0},quality:{droppedVideoFrames:0,droppedVideoFramesCurrent:0,droppedVideoFramesLevel:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0},bitrate:{current:0,avg:0,min:0,max:0,deviation:0},framerate:{current:0,avg:0,min:0,max:0,deviation:0}},g=i.create(10),b=i.create(10),_=i.create(10),T=i.create(10),A=i.create(10),S=0,y=0}return w(),t.add({target:c,listeners:O}),t.add({target:c,listeners:I}),t.add({target:c,listeners:C}),{destroy:function(){t.remove({target:c,listeners:I}),t.remove({target:c,listeners:O}),t.remove({target:c,listeners:C})}}}}}.apply(t,r))||(e.exports=i)},7732:function(e,t){var n;void 0===(n=function(){var e="networkAdapter.";return{BASE:e,CONNECTING:e+"connecting",CONNECTED:e+"connected",CONNECTION_OPEN:e+"connectionOpen",DISCONNECTED:e+"disconnected",RESUMING:e+"resuming",MESSAGE:e+"message",RECONNECTION_IMMINENT:e+"reconnectionImminent",RECONNECTING:e+"reconnecting",RECONNECTION_CONFIG_INVALID:e+"reconnectionConfigInvalid",CONNECTION_ERROR:e+"connectionError",INITIALIZATION_ERROR:e+"initializationError",DESTROYED:e+"destroyed",ERROR:e+"error",STATE_CHANGE:e+"stateChange",META_DATA:e+"metaData",WEB_TRANSPORT_META_DATA:e+"wtMetaData",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",RAW_PACKET:e+"raw",STREAM_STATUS:e+"streamStatus",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_ERROR:e+"updateSourceError",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",STREAM_QUALITY:e+"streamQuality"}}.apply(t,[]))||(e.exports=n)},5212:function(e,t){var n;void 0===(n=function(){var e="networkHandler.";return{BASE:e,CONNECTING:e+"connecting",CONNECTED:e+"connected",CONNECTION_OPEN:e+"connectionOpen",DISCONNECTED:e+"disconnected",RESUMING:e+"resuming",MESSAGE:e+"message",RECONNECTION_IMMINENT:e+"reconnectionImminent",RECONNECTING:e+"reconnecting",RECONNECTION_CONFIG_INVALID:e+"reconnectionConfigInvalid",CONNECTION_ERROR:e+"connectionError",INITIALIZATION_ERROR:e+"initializationError",DESTROYED:e+"destroyed",ERROR:e+"error",WARNING:e+"warning",STATE_CHANGE:e+"stateChange",META_DATA:e+"metaData",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",RAW_PACKET:e+"raw",STREAM_STATUS:e+"streamStatus",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",STREAM_QUALITY:e+"streamQuality",WEB_TRANSPORT_META_DATA:e+"wtMetaData"}}.apply(t,[]))||(e.exports=n)},312:function(e,t){var n;void 0===(n=function(){var e="networkmanager.";return{BASE:e,CONNECT:e+"connect",DISCONNECT:e+"disconnect",PLAY:e+"play",PAUSE:e+"pause",CONFIG:e+"config",UPDATE_SOURCE:e+"updateSource",STATE_CHANGE:e+"stateChange",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_FAIL:e+"switchStreamFail",SWITCH_STREAM_ABORT:e+"switchStreamAbort"}}.apply(t,[]))||(e.exports=n)},1852:function(e,t){var n;void 0===(n=function(){var e="networkstatus";return{BASE:e,ONLINE:e+"online",OFFLINE:e+"offline"}}.apply(t,[]))||(e.exports=n)},279:function(e,t,n){var r,i;r=[n(9658),n(5055),n(9673),n(680),n(1376),n(312),n(5212),n(1852),n(9452),n(5356)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u){"use strict";return{create:function(c){var l,f,m=new e,E=[],p=[{from:o.CONNECTING,to:i.CONNECTING},{from:o.CONNECTED,to:i.CONNECTED},{from:o.CONNECTION_OPEN,to:i.CONNECTION_OPEN},{from:o.RESUMING,to:i.RESUMING},{from:o.DESTROYED,to:i.DESTROYED},{from:o.RECONNECTING,to:i.RECONNECTING},{from:o.RECONNECTION_IMMINENT,to:i.RECONNECTION_IMMINENT},{from:o.RECONNECTION_CONFIG_INVALID,to:i.RECONNECTION_CONFIG_INVALID},{from:o.DISCONNECTED,to:i.DISCONNECTED},{from:o.INITIALIZATION_ERROR,to:i.INITIALIZATION_ERROR},{from:o.CONNECTION_ERROR,to:i.CONNECTION_ERROR},{from:o.ERROR,to:i.ERROR},{from:o.WARNING,to:i.WARNING},{from:o.STATE_CHANGE,to:i.STATE_CHANGE},{from:o.UPDATE_SOURCE_SUCCESS,to:i.UPDATE_SOURCE_SUCCESS},{from:o.UPDATE_SOURCE_FAIL,to:i.UPDATE_SOURCE_FAIL},{from:o.UPDATE_SOURCE_ABORT,to:i.UPDATE_SOURCE_ABORT},{from:o.META_DATA,to:i.META_DATA},{from:o.RANDOM_ACCESS_POINT,to:i.RANDOM_ACCESS_POINT},{from:o.SERVER_INFO,to:i.SERVER_INFO},{from:o.STREAM_INFO,to:i.STREAM_INFO},{from:o.STREAM_INFO_UPDATE,to:i.STREAM_INFO_UPDATE},{from:o.RAW_PACKET,to:i.RAW_PACKET},{from:o.STREAM_FRAGMENT,to:i.STREAM_FRAGMENT},{from:o.STREAM_STATUS,to:i.STREAM_STATUS},{from:o.STREAM_QUALITY,to:i.STREAM_QUALITY},{from:o.WEB_TRANSPORT_META_DATA,to:i.WEB_TRANSPORT_META_DATA},{from:s.ONLINE,to:i.ONLINE},{from:s.OFFLINE,to:i.OFFLINE}],h=[{from:n.CONNECT,to:a.CONNECT},{from:n.DISCONNECT,to:a.DISCONNECT},{from:n.NETWORK_PLAY,to:a.PLAY},{from:n.PAUSE,to:a.PAUSE},{from:n.CONFIG,to:a.CONFIG},{from:n.NETWORK_UPDATE_SOURCE,to:a.UPDATE_SOURCE},{from:r.STATE_CHANGE,to:a.STATE_CHANGE},{from:r.UPDATE_SOURCE_SUCCESS,to:a.UPDATE_SOURCE_SUCCESS},{from:r.UPDATE_SOURCE_FAIL,to:a.UPDATE_SOURCE_FAIL},{from:r.UPDATE_SOURCE_ABORT,to:a.UPDATE_SOURCE_ABORT},{from:r.SWITCH_STREAM_SUCCESS,to:a.SWITCH_STREAM_SUCCESS},{from:r.SWITCH_STREAM_FAIL,to:a.SWITCH_STREAM_FAIL},{from:r.SWITCH_STREAM_ABORT,to:a.SWITCH_STREAM_ABORT}];return l=t.create(c,m,h),f=t.create(m,c,p),E.push(d.create(m)),E.push(u.create(m)),{destroy:function(){for(l.destroy(),l=null,f.destroy(),f=null;E.length;)E.pop().destroy()}}}}}.apply(t,r))||(e.exports=i)},6143:function(e,t,n){var r,i;r=[n(9658),n(8333),n(6627),n(8197),n(6637),n(8405),n(3778),n(3890),n(728),n(4046),n(7402),n(4677),n(7732),n(9134),n(7903)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l,f,m,E){var p=5e3;return{create:function(h,g){var b,_,T,A,S,y,v,R=(new Date).getTime().toString(),O=t.create("NetworkAdapter "+R),I=new e,C=[4102,4103,4105,4106,4107,4108,4109,4111,4115,4201,4500,4503],N=[{type:m.META_DATA,listener:Q},{type:m.WEB_TRANSPORT_META_DATA,listener:Q},{type:m.SERVER_INFO,listener:function(e){v=e.data.onServerInfo,re(e)}},{type:m.STREAM_INFO,listener:function(e){if(W()&&-1===v.events.indexOf("onUpdateSourceSuccess")){var t=y.update.options.tag,n=y.update.options.count;h.emit(f.UPDATE_SOURCE_SUCCESS,ne({tag:t,count:n,type:y.update.type,id:y.update.id})),x[n]?(S=r.copy(x[n]),y===x[n]&&(y=void 0),delete x[n]):(S=y,y=void 0)}re(e)}},{type:m.STREAM_INFO_UPDATE,listener:function(e){re(e)}},{type:m.STREAM_FRAGMENT,listener:function(e){re(e,!0)}},{type:m.RANDOM_ACCESS_POINT,listener:function(e){re(e)}},{type:m.RAW_PACKET,listener:function(e){re(e,!0)}},{type:m.STREAM_STATUS,listener:function(e){W()&&"client"===y.update.options.method&&"stopped"===e.data.onStreamStatus.status&&h.emit(f.UPDATE_SOURCE_ERROR,ne({tag:y.update.options.tag,count:y.update.options.count,code:o.NETWORK.SOURCE_STREAM_STOPPED,message:s.NETWORK.SOURCE_STREAM_STOPPED,type:y.update.type,id:y.update.id})),re(e)}},{type:m.STREAM_QUALITY,listener:function(e){re(e)}},{type:m.UPDATE_SOURCE_SUCCESS,listener:function(e){if(W()&&F.requestId>=e.data.onUpdateSourceSuccess.requestId||A&&-1!==e.data[e.data.eventType].tag.indexOf(A.update.id)){A&&-1!==e.data[e.data.eventType].tag.indexOf(A.update.id)&&(y=A,A=null);var t=e.data[e.data.eventType].tag,n=e.data[e.data.eventType].count,i=x[n]?x[n].update.type:y.update.type,a=x[n]?x[n].update.id:y.update.id;0===n&&(t=y.update.options.tag,n=y.update.options.count),h.emit(f.UPDATE_SOURCE_SUCCESS,ne({tag:t,count:n,type:i,id:a})),x[n]?(S=r.copy(x[n]),y===x[n]&&(y=void 0),delete x[n]):(S=y,y=void 0)}}},{type:m.UPDATE_SOURCE_ERROR,listener:function(e){if(W()&&F.requestId>=e.data.onUpdateSourceError.requestId){var t=e.data.onUpdateSourceError.code,n="Unknown reason.";Object.prototype.hasOwnProperty.call(d,+t)&&(n=d[+t]),t>1e3&&t<4e3&&(t+=3100);var r=e.data[e.data.eventType].tag,i=e.data[e.data.eventType].count,a=x[i]?x[i].update.type:y.update.type,o=x[i]?x[i].update.id:y.update.id;0===i&&(r=y.update.options.tag,i=y.update.options.count),h.emit(f.UPDATE_SOURCE_ERROR,ne({tag:r,count:i,code:t,message:n,type:a,id:o})),y===x[i]&&(y=void 0),delete x[i]}}},{type:m.UPDATE_SOURCE_ABORT,listener:function(e){if(W()&&F.requestId>=e.data.onUpdateSourceAbort.requestId){var t=e.data[e.data.eventType].tag,n=e.data[e.data.eventType].count,r=x[n]?x[n].update.type:y.update.type,i=x[n]?x[n].update.id:y.update.id;0===n&&(t=y.update.options.tag,n=y.update.options.count);var a=e.data[e.data.eventType].reason;h.emit(f.UPDATE_SOURCE_ABORT,ne({tag:t,count:n,reason:a,type:r,id:i})),y===x[n]&&(y=void 0),delete x[n]}}}],D=null,w=a.UNINITIALIZED,U=0,M=!1,P=!1,L={minDelay:2,maxDelay:10,delaySteps:10,maxRetries:10,delays:[],retryCount:0,randomFactor:1.5},F={requestId:0},x={},k=!1;function B(e){if(O.debugEnabled()&&O.debug("on connect"),ie(!1),P=!1,clearTimeout(b),(S=e.data).count=L.retryCount,S.reconnect){var t=u.validate(S.reconnect);if(t.success)for(var n in S.reconnect)Object.prototype.hasOwnProperty.call(S.reconnect,n)&&(L[n]=S.reconnect[n]);else h.emit(f.RECONNECTION_CONFIG_INVALID,ne({code:o.NETWORK.RECONNECTION_CONFIG_INVALID,message:t.reason}))}if(S.timeouts){var r=1e3*S.timeouts.connecting;p=Math.max(Math.min(r,3e4),5e3)}try{y=e.data.update?e.data:void 0,s=S.url,O.debugEnabled()&&O.debug("create connection"),Z(),D.open(s),-1===S.config.query.flags.indexOf("metastreamonly")&&(D.addEventListener("open",j),D.addEventListener("close",K),D.addEventListener("error",z)),U=setTimeout(q,p),h.emit(e.name?f.CONNECTING:f.RECONNECTING,ne(S)),W()&&(clearTimeout(T),T=setTimeout(J,1e3*e.data.update.options.timeout))}catch(e){var i="Connection initialization error.",a=e?te(e):void 0;a&&a.message&&(i=a.message),a&&a.code&&(i+=" (code:"+a.code+")"),a&&a.name&&(i=a.name+": "+i),h.emit(f.INITIALIZATION_ERROR,ne({code:o.NETWORK.COULD_NOT_ESTABLISH_CONNECTION,message:i}))}var s}function H(){var e=w;return(w=null!==D?D.readyState()+2:a.UNINITIALIZED)!==e&&h.emit(f.STATE_CHANGE,ne({connectionState:w})),w}function V(){return S}function G(){return M}function W(){return y||!1}function Y(){return V().config.query.cid}function j(){O.debugEnabled()&&O.debug("connection open"),setTimeout((function(){h.emit(f.CONNECTION_OPEN,ne())}),0),setTimeout((function(){!P&&D&&D.isReady()&&(clearTimeout(U),h.emit(f.CONNECTED,ne({count:L.retryCount})),L.retryCount=0)}),200)}function K(e){O.debugEnabled()&&O.debug("connection close"),clearTimeout(U);var t=e;if(n.isTridentBrowser&&1005===e.code&&((t=r.copy(e)).code=parseInt(e.reason.split(" ")[1],10)),4200===t.code&&$(!0),4403===t.code)h.emit(f.ERROR,ne({code:o.STREAM.SOURCE_STOPPED,message:s.STREAM.SOURCE_STOPPED}));else if(4404===t.code)h.emit(f.ERROR,ne({code:o.STREAM.NOT_FOUND,message:s.STREAM.NOT_FOUND}));else if(4424===t.code)h.emit(f.ERROR,ne({code:o.STREAM.SOURCE_NOT_RETRIEVED,message:s.STREAM.SOURCE_NOT_RETRIEVED}));else if(4401===t.code)h.emit(f.ERROR,ne({code:o.NETWORK.PLAYBACK_ACCESS_REJECTED,message:s.NETWORK.PLAYBACK_ACCESS_REJECTED}));else{var i=t.code,a="Unknown reason.";1111===i?(i=4201,a="Maybe no network, wrong url or server down. Reconnect possible."):(Object.prototype.hasOwnProperty.call(d,+i)&&(a=d[+i]),i>1e3&&i<4e3&&(i+=3100)),X(t,f.DISCONNECTED,ne({code:i,message:a}))}}function z(e){O.debugEnabled()&&O.debug("connection error"),clearTimeout(_),_=setTimeout((function(){if(!P&&D.isReady()){clearTimeout(U);var t="Connection error.",n=e||void 0;n&&n.message&&(t=n.message),n&&n.code&&(t+=" (code:"+n.code+")"),n&&n.name&&(t=n.name+": "+t),X(e,f.CONNECTION_ERROR,ne({code:o.NETWORK.CONNECTION_ERROR,message:t}))}}),200)}function q(){O.debugEnabled()&&O.debug("connection timeout"),P||!D.isReady()||S&&-1!==S.config.query.flags.indexOf("metastreamonly")||X(null,f.INITIALIZATION_ERROR,ne({code:o.NETWORK.COULD_NOT_ESTABLISH_CONNECTION,message:"Could not open connection. Timeout reached."}))}function Q(e){re(e)}function J(){if(W())for(h.emit(f.UPDATE_SOURCE_ERROR,ne({tag:y.update.options.tag,count:y.update.options.count,code:o.NETWORK.SOURCE_TIMEOUT,message:s.NETWORK.SOURCE_TIMEOUT,type:y.update.type,id:y.update.id})),A=y,y=void 0;Object.keys(x).length;)delete x[Object.keys(x)[0]]}function X(e,t,n){if(!P)if(clearTimeout(b),b=0,G()&&(e&&e.data&&-1!==C.indexOf(e.data.code)||n&&n.data&&-1!==C.indexOf(n.data.code))&&L.retryCount<L.maxRetries){if(P=!0,!L.retryCount){for(;L.delays.length;)L.delays.pop();L.delays=c.calculate(L.minDelay,L.maxDelay,L.delaySteps,L.maxRetries,L.randomFactor)}var r=L.delays[L.retryCount];L.retryCount++,S.count=L.retryCount;var i=e&&e.data&&e.data.code?e.data.code:e&&e.code?e.code:0;i&&(i=n&&n.data&&n.data.code?n.data.code:n&&n.code?n.code:0),h.emit(f.RECONNECTION_IMMINENT,ne({delay:r,count:L.retryCount,code:i}))}else h.emit(t,n&&n.data?n:ne(n))}function $(e){O.debugEnabled()&&O.debug("destroy connection"+(e?" silent":"")),y=void 0,Z(),h.emit(f.DESTROYED,ne({silent:!!e}))}function Z(){clearTimeout(U),clearTimeout(b),clearTimeout(_),clearTimeout(T),D.isReady()&&(D.removeEventListener("open",j),D.removeEventListener("close",K),D.removeEventListener("error",z),D.close())}function ee(e,t){if(O.debugEnabled()&&O.debug("send "+e),t)try{t=JSON.stringify(t)}catch(e){t="{}"}else t="{}";var n=F.requestId+1;(F={}).eventType=e,F[e]=JSON.parse(t),F.requestId=n;var r=JSON.stringify(F);try{H()===a.OPEN&&D.send(r)}catch(e){}}function te(e){return{code:e.code,name:e.name,message:e.message}}function ne(e){return{data:e||void 0,connectionState:H(),connectionId:S.config.query.cid,active:G(),update:W()}}function re(e,t){var n=e.name.replace(m.BASE,f.BASE);t?O.detailEnabled()&&O.detail("fired "+n):O.debugEnabled()&&O.debug("fired "+n),k?O.debugEnabled()&&O.debug("passthrough blocked of message type '"+e.name.replace(m.BASE,"")+"'"):h.emit(n,ne(e.data))}function ie(e){k=!!e,O.debugEnabled()&&O.debug("set blockMessagePassthrough to "+k)}return O.debugEnabled()&&O.debug("init"),D=new E(I,g,R),i.add({target:I,listeners:N}),{connect:B,disconnect:function(e){$(e.data.silent)},play:function(){O.debugEnabled()&&O.debug("on play");try{ie(!1),S=l.parse(S,!1),!D.isReady()||D.isClosed()?B({data:S}):(O.debugEnabled()&&O.debug("sending play to server"),ee("onPlay"),h.emit(f.RESUMING,ne()))}catch(e){h.emit(f.ERROR,ne(te(e)))}},pause:function(){O.debugEnabled()&&O.debug("on pause");try{D.isReady()&&!D.isClosed()&&(O.debugEnabled()&&O.debug("sending pause to server"),S=l.parse(S,!0),ee("onPause"),ie(!0))}catch(e){h.emit(f.ERROR,ne(te(e)))}},updateSource:function(e){if(O.debugEnabled()&&O.debug("on update source"),v&&-1!==v.capabilities.indexOf("onUpdateSource")&&"server"===e.data.update.options.method&&null!==D){clearTimeout(T),T=setTimeout(J,1e3*e.data.update.options.timeout),x[e.data.update.options.count]=e.data,(y=e.data).count=L.retryCount;var t=y.update,n={options:{faststart:!1},tag:t.options.tag,count:t.options.count};if(t.entry.h5live.rtmp&&t.entry.h5live.rtmp.url&&t.entry.h5live.rtmp.streamname&&(n.rtmp={url:t.entry.h5live.rtmp.url,stream:t.entry.h5live.rtmp.streamname}),t.entry.h5live.token&&(n.token=t.entry.h5live.token),t.entry.h5live.params&&(n.params=t.entry.h5live.params),t.entry.h5live.security&&"object"==typeof t.entry.h5live.security)for(var r in n.security={},t.entry.h5live.security)Object.prototype.hasOwnProperty.call(t.entry.h5live.security,r)&&(n.security[r]=t.entry.h5live.security[r]);ee("onUpdateSource",n)}},reset:function(){P=!1,L.retryCount=0},getState:H,getConnectData:V,getServerInfo:function(){return v},getConnection:function(){return D},setActive:function(e){M=!!e},isActive:G,isUpdate:W,isWaitForReconnect:function(){return P},getConnectionId:Y,isConnectionId:function(e){return Y()===e},shouldPauseOnError:function(){return V().update&&V().update.options.pauseOnError||y&&y.update.options.pauseOnError},destroy:function(){O.debugEnabled()&&O.debug("destroy"),Z(),D=null,i.remove({target:I,listeners:N})}}}}}.apply(t,r))||(e.exports=i)},9134:function(e,t){var n;void 0===(n=function(){var e="networkMessage.";return{BASE:e,META_DATA:e+"metaData",WEB_TRANSPORT_META_DATA:e+"wtMetaData",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",RAW_PACKET:e+"raw",STREAM_STATUS:e+"streamStatus",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_ERROR:e+"updateSourceError",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",STREAM_QUALITY:e+"streamQuality"}}.apply(t,[]))||(e.exports=n)},7903:function(e,t,n){var r,i;r=[n(6627),n(2846),n(7361)],void 0===(i=function(e,t,n){return function(e,r,i){return"webtransport"===r?n.create(e,i):t.create(e,i)}}.apply(t,r))||(e.exports=i)},2846:function(e,t,n){var r,i;r=[n(8333),n(5169)],void 0===(i=function(e,t){"use strict";return{create:function(n,r){var i=e.create("WebSocketAdapter "+r),a=null,o=null;function s(){i.debugEnabled()&&i.debug("close connection"),a&&(a.removeEventListener("open",u),a.removeEventListener("close",c),a.removeEventListener("error",l),a.removeEventListener("message",f),a.close(),o.destroy()),o=null,a=null}function d(){var e=0;return a&&(e=a.readyState),e}function u(){i.debugEnabled()&&i.debug("connection opened")}function c(){i.debugEnabled()&&i.debug("connection closed")}function l(){i.debugEnabled()&&i.debug("connection error")}function f(e){e&&o.parseMessage(e.data)}return{open:function(e){i.debugEnabled()&&i.debug("open connection"),o=t.create(n,r),(a=new WebSocket(e)).binaryType="arraybuffer",a.addEventListener("open",u),a.addEventListener("close",c),a.addEventListener("error",l),a.addEventListener("message",f)},send:function(e){a&&a.send(e)},close:s,destroy:function(){i.debugEnabled()&&i.debug("destroy connection"),s()},readyState:d,addEventListener:function(e,t){a&&-1!==["open","close","error"].indexOf(e)&&a.addEventListener(e,t)},removeEventListener:function(e,t){a&&-1!==["open","close","error"].indexOf(e)&&a.removeEventListener(e,t)},isOpening:function(){return 0===d()},isOpen:function(){return 1===d()},isClosing:function(){return 2===d()},isClosed:function(){return 3===d()},isReady:function(){return null!==a}}}}}.apply(t,r))||(e.exports=i)},5169:function(e,t,n){var r,i;r=[n(8333),n(9134)],void 0===(i=function(e,t){"use strict";return{create:function(n,r){var i=e.create("WebSocketMessageHandler "+r),a=1718909296,o=1836019558,s=1835295092,d=[],u=0,c=0;function l(e){if(0<u){e&&i.debugEnabled()&&i.debug("output existing buffer & reset from "+e);var r=new Uint8Array(u),a=0;for(var o of d)r.set(o,a),a+=o.length;f(),n.emit(t.STREAM_FRAGMENT,{type:"mp4",fragment:r})}else e&&i.debugEnabled()&&i.debug("reset from "+e),f()}function f(){for(;d.length;)d.pop();u=0,c=0}return i.debugEnabled()&&i.debug("init websocket message handler"),{parseMessage:function(e){if(e)if(e instanceof ArrayBuffer){var r=new Uint8Array(e);if(n.emit(t.RAW_PACKET),r.length>=8){var f=r[4]<<24|r[5]<<16|r[6]<<8|r[7];if(f===o||f===a){var m=r[0]<<24|r[1]<<16|r[2]<<8|r[3];if(r.length>=m+8){var E=r[m+4]<<24|r[m+5]<<16|r[m+6]<<8|r[m+7];if((f===o&&E===s||f===a&&1836019574===E)&&(u&&i.debugEnabled()&&i.debug("previous buffer found"),l()),f===o&&E===s){var p=r[m+0]<<24|r[m+1]<<16|r[m+2]<<8|r[m+3];c=m+p}}}}d.push(r),u+=r.length,c&&c===u&&l()}else{var h=JSON.parse(e);if(h&&h.eventType){var g=h.eventType.substr(2,h.eventType.length-2),b=t.BASE+g[0].toLowerCase()+g.slice(1);-1!==b.indexOf(t.STREAM_INFO)&&l(b),-1!==b.indexOf(t.SERVER_INFO)&&void 0===h.onServerInfo.hostname&&(h.onServerInfo.hostname=""),n.emit(b,h)}}},destroy:function(){i.debugEnabled()&&i.debug("destroy websocket message handler"),f()}}}}}.apply(t,r))||(e.exports=i)},3346:function(e){var t;self,t=()=>(()=>{"use strict";var e={228:e=>{var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,a||e,o),d=n?n+t:t;return e._events[d]?e._events[d].fn?e._events[d]=[e._events[d],s]:e._events[d].push(s):(e._events[d]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,a,o){var s=n?n+e:e;if(!this._events[s])return!1;var d,u,c=this._events[s],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,a),!0;case 6:return c.fn.call(c.context,t,r,i,a,o),!0}for(u=1,d=new Array(l-1);u<l;u++)d[u-1]=arguments[u];c.fn.apply(c.context,d)}else{var f,m=c.length;for(u=0;u<m;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),l){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,i);break;default:if(!d)for(f=1,d=new Array(l-1);f<l;f++)d[f-1]=arguments[f];c[u].fn.apply(c[u].context,d)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var d=0,u=[],c=s.length;d<c;d++)(s[d].fn!==t||i&&!s[d].once||r&&s[d].context!==r)&&u.push(s[d]);u.length?this._events[a]=1===u.length?u[0]:u:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{MessagePayloadType:()=>d,Transport:()=>f,getMessageJsonPayload:()=>u});var i=n(228);class a extends i{}const o=()=>{};function s(e){const{buffer:t,byteOffset:n,byteLength:r}=e;return new DataView(t,n,r)}var d;function u(e){const t=new TextDecoder;return JSON.parse(t.decode(e.payload))}window.performance,function(e){e[e.IsoBox=0]="IsoBox",e[e.Json=1]="Json",e[e.Avc=2]="Avc",e[e.Aac=3]="Aac"}(d||(d={}));class c{constructor(e,t){this._streamIndex=e,this._incomingStream=t,this._rxDataBuf=null,this._rxDataOffset=0,this._isClosed=!1,this._reader=null,this._consumePromise=null,this._shouldClose=!1,this._closing=!1,this.onClose=null,this.onMessage=o,this.onError=o,this.onDescription=o,this.onEos=o,this.onVideoCodecInfo=o,this.onAudioCodecInfo=o}async consume(){this._incomingStream?this._reader?console.warn(`StreamReader ${this._streamIndex}: Already consuming.`):(this._reader=this._incomingStream.readable.getReader(),this._consumePromise=(async()=>{try{for(;!this._shouldClose&&this._reader;){let e;try{e=await this._reader.read()}catch(e){this._closing&&"WebTransportError"===e?.name||console.warn(`StreamReader ${this._streamIndex} read error:`,e);break}const{value:t,done:n}=e;if(n){console.log(`StreamReader.consume done: idx=${this._streamIndex}`);break}t&&this._handleReadBuffer(t)}}catch(e){console.error(`StreamReader.consume error on stream ${this._streamIndex}:`,e)}finally{await this._cleanup(),this.onClose&&this.onClose()}})()):console.log(`StreamReader ${this._streamIndex}: No incoming stream to consume.`)}async _cleanup(){if(!this._isClosed){if(this._isClosed=!0,this._reader){try{await this._reader.cancel()}catch{}this._reader.releaseLock(),this._reader=null}this._incomingStream=null,this.onMessage=o,this.onClose=null,this._shouldClose=!1,this._closing=!1}}async close(){this._closing=!0,this._shouldClose=!0,this._consumePromise&&await this._consumePromise}_handleReadBuffer(e){if(!this._isClosed){for(this._appendBuffer(e);;){const e=s(this._rxDataBuf),t=e.byteLength-this._rxDataOffset;if(t<20)break;const n=e.getUint32(this._rxDataOffset,!0);if(t<n)break;if(this._popCurrentMessage(n),this._rxDataOffset>=e.byteLength)break}this._pruneBufferHead()}}_appendBuffer(e){if(this._rxDataBuf){const t=new Uint8Array(this._rxDataBuf.byteLength-this._rxDataOffset+e.byteLength);t.set(this._rxDataBuf.subarray(this._rxDataOffset)),t.set(e,this._rxDataBuf.byteLength-this._rxDataOffset),this._rxDataBuf=t}else this._rxDataBuf=e;this._rxDataOffset=0}_popCurrentMessage(e){if(!this._rxDataBuf)return;const t=this._rxDataOffset+e,n=this._rxDataBuf.subarray(this._rxDataOffset,t);this._rxDataOffset=t;const r=function(e){const t=s(e),n=t.getUint32(0,!0);if(n!==e.byteLength)throw new Error(`Assertion failed: msg.size=${n} != data.byteLength=${e.byteLength}`);const r=t.getUint32(4,!0);return{size:n,flags:r,time:t.getBigUint64(8,!0),pto:t.getInt32(16,!0),payload:e.subarray(20),flagsParsed:function(e){return{PayloadType:255&e,IsSyncpoint:(256&e)>0,IsKeyframe:(512&e)>0,IsCodecConfig:(1024&e)>0,IsTimingMarker:(4096&e)>0,IsGopCache:(8192&e)>0}}(r)}}(n);this._processMessage(r)}_processMessage(e){switch(e.flagsParsed.PayloadType){case d.Json:const t=u(e);"Description"===t.Type||"Eos"===t.Type||"Error"===t.Type&&this.onError(t);case d.Avc:case d.Aac:}this.onMessage(e,-1,"")}_pruneBufferHead(){this._rxDataBuf&&this._rxDataOffset>0&&(this._rxDataBuf=this._rxDataBuf.subarray(this._rxDataOffset),this._rxDataOffset=0)}get groupId(){return-1}}class l extends Error{constructor(e,t){super(e),this.code=t,this.code=t}}class f extends class{constructor(){this._events=new a}on(e,t){return this._events.on(e,t)}off(e,t){return this._events.off(e,t)}emit(e,...t){return this._events.emit(e,...t)}}{constructor(){super(),this._transportConnection=null,this._nextStreamIdx=0,this._streamReaders={},this._groupIdToStreamReader=new Map,this._videoCodecInfo={},this._audioCodecInfo={}}isConnectionReady(){return!!this._transportConnection}async connect(e){if(this._transportConnection)throw new Error("Transport already connected");let t;try{t=new WebTransport(e),this.emit("log",`Transport connecting to ${e}`)}catch(e){return void this.emit("error",new Error(`Failed to create WebTransport: ${e}`),e)}this.emit("log","Transport created, waiting for connection to be ready");try{await t.ready,this._transportConnection=t}catch(e){return void this.emit("error",new Error(`Failed to connect: ${e}`),e)}this.emit("log","Transport connection ready"),this.emit("ready"),t.closed.catch((e=>{this.emit("error",new Error(`Exception on closing WT connection: ${e}`),e)})).finally((()=>{this.emit("closed")}))}async disconnect(){if(this._transportConnection){for(const e in this._streamReaders)this._streamReaders[e].close();await this._transportConnection.close(),this._transportConnection=null,this.emit("closed")}}async accept(){if(!this._transportConnection)throw new Error("Transport not connected");const e=this._transportConnection.incomingBidirectionalStreams.getReader();for(;;){let t;this.emit("log","Waiting to accept new incoming transport streams");let n=!1;try{const r=await e.read();t=r.value,n=r.done}catch(e){return void this.emit("error",new Error(`Exception on incoming stream read: ${e}`),e)}if(t&&await this._addIncomingStream(t),n){this.emit("log","Incoming stream reader done");break}}}async _addIncomingStream(e){const t=this._nextStreamIdx++,n=new c(t,e);this._streamReaders[t]=n,n.onError=e=>{this.emit("serverError",new l(e.Message,e.Code))},n.onMessage=(e,n,r)=>{this.emit("message",e,n,r,t)},n.onDescription=(e,t)=>{this._groupIdToStreamReader.set(t.GroupId,n),this.emit("streamAdded",n)},n.onVideoCodecInfo=e=>{this._videoCodecInfo=e},n.onAudioCodecInfo=e=>{this._audioCodecInfo=e},n.onClose=()=>{delete this._streamReaders[t],n.groupId>=0&&this._groupIdToStreamReader.delete(n.groupId),this.emit("streamRemoved",n)},n.consume()}getConnectionStats(){return Promise.resolve({bytesSent:0,bytesReceived:0})}getStatusInfo(){return{streamReaders:[],activeStreamReaders:[]}}getStreamReaderByGroupId(e){return this._groupIdToStreamReader.get(e)}getVideoCodecInfo(){return this._videoCodecInfo}getAudioCodecInfo(){return this._audioCodecInfo}}return r})(),e.exports=t()},7361:function(e,t,n){var r,i;r=[n(8333),n(3346),n(4034)],void 0===(i=function(e,t,n){"use strict";var r=t.Transport;return{create:function(t,i){var a=e.create("WebTransportAdapter "+i),o=n.create(t,i),s={},d=null;function u(){if(a.debugEnabled()&&a.debug("Closing adapter..."),d){d.off("ready",c),d.off("error",l),d.off("serverError",f),d.off("message",m),d.off("log",E);var e=d;d=null,o.reset(),e.disconnect().then((function(){a.debugEnabled()&&a.debug("Transport disconnected successfully")})).catch((function(e){a.debugEnabled()&&a.debug("Transport disconnect error:",e)}))}p("close")}function c(){o.reset(),a.debugEnabled()&&a.debug("Transport ready"),p("open")}function l(e){a.debugEnabled()&&a.debug("Transport error:"+JSON.stringify(e)),p("close",{message:e.message,code:e.code||1111})}function f(e){a.debugEnabled()&&a.debug("Server error:"+JSON.stringify(e)),p("close",{message:e.message,code:e.code})}function m(e){o.parseMessage(e)}function E(e){a.debugEnabled()&&a.debug("Transport log:"+e)}function p(e,t){s[e]&&s[e].forEach((function(e){e(t)}))}function h(){return d&&d.isConnected?"connected":"disconnected"}return{open:function(e){a.debugEnabled()&&a.debug("WebTransportAdapter open, url="+e),(d=new r).on("ready",c),d.on("error",l),d.on("serverError",f),d.on("message",m),d.on("log",E),d.connect(e).then((function(){return a.debugEnabled()&&a.debug("Transport connected, now accepting streams"),d.accept()})).catch((function(e){a.debugEnabled()&&a.debug("Transport connect/accept error:"+JSON.stringify(e)),p("error",{message:e.message,code:1111})}))},close:u,destroy:function(){u()},send:function(e){d&&d.isConnected&&"function"==typeof d.send&&d.send(e)},readyState:h,isReady:function(){return null!==d},isOpening:function(){return"connecting"===h()},isOpen:function(){return"connected"===h()},isClosing:function(){return!1},isClosed:function(){return"disconnected"===h()},addEventListener:function(e,t){s[e]||(s[e]=[]),s[e].push(t)},removeEventListener:function(e,t){s[e]&&(s[e]=s[e].filter((function(e){return e!==t})))}}}}}.apply(t,r))||(e.exports=i)},4034:function(e,t,n){var r,i;r=[n(8333),n(9134),n(3346)],void 0===(i=function(e,t,n){"use strict";var r=n.MessagePayloadType,i=n.getMessageJsonPayload;return{create:function(n,a){var o=e.create("WebTransportMessageHandler "+a),s=0,d=void 0,u=void 0,c=void 0,l=void 0,f=void 0,m=!1,E=!1,p=NaN,h=NaN,g=0;function b(e){var r;!function(e){if(Object.hasOwnProperty.call(e,"Server")){var r={eventType:"onServerInfo",onServerInfo:{serverName:e.Server.split(" ")[0]||"Unknown",serverVersion:e.Server.split(" ")[1]||"5.0.0-moq-preview-6.x.0",interfaceVersion:"1.5.0.0-moq-preview-6.x",events:["Description","Eos","onMetaData"],capabilities:[],hostname:""}};n.emit(t.SERVER_INFO,r)}}(e),r={eventType:"onStreamStatus",onStreamStatus:{status:"started",requestId:0,count:0,tag:""}},n.emit(t.STREAM_STATUS,r),n.emit(t.UPDATE_SOURCE_SUCCESS,{eventType:"onUpdateSourceSuccess",onUpdateSourceSuccess:{requestId:0,count:0,tag:""}}),function(e){var r="video/mp4; codecs='"+(u?"avc1.42E01E":"")+(c&&u?", ":"")+(c?"mp4a.40.2":"")+"'",i=e.width,a=e.height,o=e.framerate,s={eventType:"onStreamInfo",onStreamInfo:{haveAudio:c,haveVideo:u,mimeType:r,prerollDuration:0,audioInfo:c?{sampleRate:44100,channels:2,bitsPerSample:16}:null,videoInfo:u?{width:i,height:a,frameRate:o}:null}};n.emit(t.STREAM_INFO,s)}(e)}function _(e){0===s&&e>0&&(s=Number(e),o.debugEnabled()&&o.debug("referenceTime: ",s))}return o.debugEnabled()&&o.debug("init webtransport message handler"),{parseMessage:function(e){var a=e.flagsParsed.PayloadType;if(a===r.Json)!function(e){var r,a=i(e);if(a&&"object"==typeof a)if("onMetaData"===a.eventType&&a.onMetaData){if("onGopCache"===a.onMetaData.handlerName){var l=a.onMetaData.message;o.debugEnabled()&&o.debug("onGopCache data:"+JSON.stringify(l))}else if(e.flagsParsed.IsCodecConfig)o.debugEnabled()&&o.debug("onMetaData streaminfo data:"+JSON.stringify(a)),(r=a.onMetaData.message)?(c=!!(d=r).audiocodecid,u=!!d.videocodecid):o.debugEnabled()&&o.debug("onMetaData streaminfo invalid");else if(o.debugEnabled()&&o.debug("onMetaData data:"+JSON.stringify(a)),s>0){var f=Number(e.time),m=f-s;a.onMetaData.streamTime=m>=0?m/1e6:0,a.onMetaData.originalMetadaTime=f,a.onMetaData.chunkIndex=1,a.onMetaData.chunkCount=1,a.onMetaData.message=JSON.stringify(a.onMetaData.message),n.emit(t.WEB_TRANSPORT_META_DATA,a)}}else if("timingmarker"===a.type)p=a.keyFrameTimestamp,h=performance.now(),isNaN(a.keyFrameDelay)||(g=Math.max(0,a.keyFrameDelay));else{if("Description"===a.Type)return;o.debugEnabled()&&o.debug("Unhandled JSON message:"+JSON.stringify(a))}else o.debugEnabled()&&o.debug("Ignoring unexpected JSON data:"+a)}(e);else if(a===r.Avc){if(e.flagsParsed.IsCodecConfig&&(l=e),!m&&l&&d&&e.flagsParsed.IsKeyframe&&(b(d),l.time=e.time,n.emit(t.RAW_PACKET),n.emit(t.STREAM_FRAGMENT,{type:"avc",fragment:l}),m=!0,_(e.time||1),!isNaN(p)&&!isNaN(h)&&p==e.time)){var T=1e3*Math.floor(performance.now()-h)+g;o.debugEnabled()&&o.debug("startDelay: "+(T/1e6).toFixed(3)+" ("+(g/1e6).toFixed(3)+")"),e.startDelay=T}m?(n.emit(t.RAW_PACKET),n.emit(t.STREAM_FRAGMENT,{type:"avc",fragment:e})):e.flagsParsed.IsKeyframe&&o.debugEnabled()&&o.debug("Dropped video key frame")}else a===r.Aac?(e.flagsParsed.IsCodecConfig&&(f=e),E||f&&d&&!e.flagsParsed.IsCodecConfig&&(m||!1===u)&&(!1===u&&(b(d),_(e.time||1)),f.time=e.time,n.emit(t.RAW_PACKET),n.emit(t.STREAM_FRAGMENT,{type:"aac",fragment:f}),E=!0),E&&(n.emit(t.RAW_PACKET),n.emit(t.STREAM_FRAGMENT,{type:"aac",fragment:e}))):o.debugEnabled()&&o.debug("Other message type:"+e)},reset:function(){s=0,d=void 0,u=void 0,c=void 0,l=void 0,f=void 0,m=!1,E=!1,p=NaN,h=NaN,g=0},destroy:function(){o.debugEnabled()&&o.debug("destroy webtransport message handler")}}}}}.apply(t,r))||(e.exports=i)},9452:function(e,t,n){var r,i;r=[n(8333),n(6627),n(8197),n(6637),n(8405),n(492),n(5493),n(312),n(5212),n(7732),n(6143)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c){var l=e.create("NetworkHandler");return{create:function(e){var n,i,o=[{type:s.CONNECT,listener:p},{type:s.DISCONNECT,listener:function(){if(l.debugEnabled()&&l.debug("on disconnect"),1!==E.length||!b().isWaitForReconnect())for(l.debugEnabled()&&l.debug("not waiting for reconnect");E.length;)E.pop().destroy()}},{type:s.PLAY,listener:function(){l.debugEnabled()&&l.debug("on play"),1===E.length&&E[0].play()}},{type:s.PAUSE,listener:function(){l.debugEnabled()&&l.debug("on pause"),1===E.length&&E[0].pause()}},{type:s.UPDATE_SOURCE,listener:function(t){if(l.debugEnabled()&&l.debug("on update source"),0===E.length)t.data.update.options.method="client",p(t);else{for(;E.length>1;){var n=_().getConnectData().update.options;e.emit(u.UPDATE_SOURCE_ABORT,{reason:"superseded",tag:n.tag,count:n.count}),S()}var r=E[0].getConnectData(),i=E[0].getServerInfo(),a=r.config.server.websocket!==t.data.config.server.websocket,o=!i,s=!o&&-1===i.capabilities.indexOf("onUpdateSource"),d="client"===t.data.update.options.method;a||o||s||d?(t.data.update.options.method="client",p(t)):(t.data.update.options.method="server",E[0].updateSource(t))}}},{type:s.STATE_CHANGE,listener:function(e){e.data.state===a.PAUSING&&n!==a.RECONNECTION_IMMINENT&&E.length&&b().reset(),n=e.data.state}},{type:s.CONFIG,listener:function(n){(t.mustUseHLS||n.data.config.playback.allowSafariHlsFallback&&t.canUseHLS)&&(m=m.filter((function(e){return e.type===u.META_DATA}))),i=t.isMediaOverQuicSupported&&n.data.config.playback.enableMediaOverQuic?"webtransport":"websocket",r.add({target:e,listeners:m})}},{type:s.UPDATE_SOURCE_SUCCESS,listener:function(){l.debugEnabled()&&l.debug("onExternalUpdateSourceSuccess"),E.length>1&&(A(),_().setActive(!0))}},{type:s.UPDATE_SOURCE_FAIL,listener:function(){l.debugEnabled()&&l.debug("onExternalUpdateSourceFail"),S()}},{type:s.SWITCH_STREAM_SUCCESS,listener:function(){l.debugEnabled()&&l.debug("onExternalSwitchStreamSuccess"),E.length>1&&(A(),_().setActive(!0))}},{type:s.SWITCH_STREAM_FAIL,listener:function(){l.debugEnabled()&&l.debug("onExternalSwitchStreamFail"),S()}}],f=[{type:u.CONNECTING,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&g(e)}},{type:u.CONNECTED,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&g(e)}},{type:u.CONNECTION_OPEN,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&g(e)}},{type:u.DISCONNECTED,listener:function(t){l.debugEnabled()&&l.debug("fired "+t.name),t.update&&e.emit(d.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id}),(T()||t.active)&&g(t),S()}},{type:u.RESUMING,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&g(e)}},{type:u.MESSAGE,listener:function(e){l.detailEnabled()&&l.detail("fired "+e.name),e.active&&g(e)}},{type:u.RECONNECTION_IMMINENT,listener:function(e){if(l.debugEnabled()&&l.debug("fired "+e.name),e.active){if(-1===[a.LOADING,a.PLAYING,a.BUFFERING].indexOf(n))return void b().reset();g(e)}}},{type:u.RECONNECTING,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&g(e)}},{type:u.RECONNECTION_CONFIG_INVALID,listener:function(t){l.debugEnabled()&&l.debug("fired "+t.name),t.update&&e.emit(d.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id}),t.active&&g(t)}},{type:u.CONNECTION_ERROR,listener:function(e){if(l.debugEnabled()&&l.debug("fired "+e.name),T()||e.active){if(-1===[a.LOADING,a.PLAYING,a.BUFFERING].indexOf(n))return void b().reset();g(e)}S()}},{type:u.INITIALIZATION_ERROR,listener:function(t){l.debugEnabled()&&l.debug("fired "+t.name),t.update&&e.emit(d.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id}),(T()||t.active)&&g(t),S()}},{type:u.DESTROYED,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&g(e)}},{type:u.ERROR,listener:function(t){l.debugEnabled()&&l.debug("fired "+t.name),t.update&&e.emit(d.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id}),(T()||t.active)&&g(t),S()}},{type:u.STATE_CHANGE,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&g(e)}}],m=[{type:u.SERVER_INFO,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&g(e)}},{type:u.STREAM_INFO,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&g(e)}},{type:u.STREAM_INFO_UPDATE,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&g(e)}},{type:u.STREAM_FRAGMENT,listener:function(e){e.active&&g(e)}},{type:u.RANDOM_ACCESS_POINT,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&g(e)}},{type:u.RAW_PACKET,listener:function(e){e.active&&g(e)}},{type:u.STREAM_STATUS,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&!e.update&&g(e),e.update&&-1!==e.update.config.query.flags.indexOf("paused")&&A()}},{type:u.STREAM_QUALITY,listener:function(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&g(e)}},{type:u.UPDATE_SOURCE_SUCCESS,listener:function(t){l.debugEnabled()&&l.debug("fired "+t.name),t.active||(A(),t.active=!0,_().setActive(!0)),l.debugEnabled()&&l.debug("trigger update source success"),e.emit(d.UPDATE_SOURCE_SUCCESS,{tag:t.data.tag,count:t.data.count,type:t.data.type,id:t.data.id})}},{type:u.UPDATE_SOURCE_ERROR,listener:function(t){l.debugEnabled()&&l.debug("fired "+t.name),l.debugEnabled()&&l.debug("trigger update source fail"),e.emit(d.UPDATE_SOURCE_FAIL,{tag:t.data.tag,count:t.data.count,code:t.data.code,message:t.data.message,type:t.data.type,id:t.data.id}),T()&&(l.debugEnabled()&&l.debug("trigger disconnected"),e.emit(d.DISCONNECTED,{code:t.data.code,message:t.data.message})),S()}},{type:u.UPDATE_SOURCE_ABORT,listener:function(t){l.debugEnabled()&&l.debug("fired "+t.name),l.debugEnabled()&&l.debug("trigger update source abort"),e.emit(d.UPDATE_SOURCE_ABORT,{tag:t.data.tag,count:t.data.count,reason:t.data.reason,type:t.data.type,id:t.data.id})}},{type:u.META_DATA,listener:h},{type:u.WEB_TRANSPORT_META_DATA,listener:h}],E=[];function p(t){l.debugEnabled()&&l.debug("on connect"),1===E.length&&b().isWaitForReconnect()?b().connect(t):1===E.length?(E.push(c.create(e,i)),_().connect(t)):E.length||(E[0]=c.create(e,i),E[0].setActive(!0),b().connect(t))}function h(e){l.debugEnabled()&&l.debug("fired "+e.name),e.active&&g(e)}function g(t){t.name=t.name.replace(u.BASE,d.BASE),e.emit(t.name,t)}function b(){l.debugEnabled()&&l.debug("get active connection");for(var e=!1,t=0;t<E.length;t+=1)if(E[t].isActive()){l.debugEnabled()&&l.debug("found active connection"),e=E[t];break}return e}function _(){var e=!1;return E.length&&(e=E[E.length-1]),e}function T(){var e=!!_()&&_().shouldPauseOnError();return l.debugEnabled()&&l.debug("should pause on error: "+e),e}function A(){l.debugEnabled()&&l.debug("drop active connection?"),E.length>1&&(l.debugEnabled()&&l.debug("drop active connection!"),E.shift().destroy())}function S(){l.debugEnabled()&&l.debug("drop inactive connection?"),E.length>1&&(l.debugEnabled()&&l.debug("drop inactive connection!"),E.pop().destroy())}return r.add({target:e,listeners:o}),r.add({target:e,listeners:f}),{destroy:function(){for(var t in l.debugEnabled()&&l.debug("destroy"),E)Object.prototype.hasOwnProperty.call(E,t)&&(E[t].destroy(),delete E[t]);r.remove({target:e,listeners:o}),r.remove({target:e,listeners:f}),r.remove({target:e,listeners:m})}}}}}.apply(t,r))||(e.exports=i)},5356:function(e,t,n){var r,i;r=[n(6637),n(8333),n(312),n(1852)],void 0===(i=function(e,t,n,r){return{create:function(i){var a,o=t.create("NetworkStatusProxy"),s=["online","offline"],d=!1,u=[{type:n.STATE_CHANGE,listener:function(e){a||(o.debugEnabled()&&o.debug("initial player state"),l()),a=e.data.state}}];function c(){l()}function l(){d=navigator.onLine,o.debug(d?"online":"offline"),i.emit(d?r.ONLINE:r.OFFLINE)}return o.debugEnabled()&&o.debug("initialize"),e.add({target:i,listeners:u}),s.forEach((function(e){window.addEventListener(e,c)})),{destroy:function(){e.remove({target:i,listeners:u}),s.forEach((function(e){window.addEventListener(e,c)}))}}}}}.apply(t,r))||(e.exports=i)},4046:function(e,t){var n;void 0===(n=function(){return{validate:function(e){for(var t=["minDelay","maxDelay","delaySteps","maxRetries"],n=0;n<t.length;++n){if(!Object.prototype.hasOwnProperty.call(e,t[n]))return{success:!1,reason:"The reconnect config is invalid, it must contain 'minDelay', 'maxDelay', 'delaySteps', and 'maxRetries'. Reset to default."};if("number"!=typeof e[t[n]])return{success:!1,reason:"The reconnect config is invalid, the value '"+t[n]+"' have to be a number. Reset to default."}}return e[t[0]]>e[t[1]]?{success:!1,reason:"The reconnect config is invalid, the value '"+t[0]+"' have to be lower then '"+t[1]+"'. Reset to default."}:e[t[0]]<1?{success:!1,reason:"The reconnect config is invalid, the value '"+t[0]+"' have to be greater or equal then 1 sec. Reset to default."}:{success:!0}}}}.apply(t,[]))||(e.exports=n)},7402:function(e,t){var n;void 0===(n=function(){return{calculate:function(e,t,n,r,i){var a=[],o=Math.sqrt(e);n>r&&(n=r);for(var s=(Math.sqrt(t)-o)/(n-1),d=0;d<r;d+=1){var u=i*(Math.random()-.5),c=o+s*Math.min(n-1,d)+(!d&&o-Math.abs(u)<=.5?Math.abs(u)+i*Math.random():u),l=Math.round(c*c*1e3);a.push(l)}return a}}}.apply(t,[]))||(e.exports=n)},4677:function(e,t){var n;void 0===(n=function(){return{parse:function(e,t){for(var n,r=e.url.split("?"),i=r[1].split("&"),a={},o=0;o<i.length;o+=1){var s=i[o].split("=");a[s[0]]=decodeURIComponent(s[1])}for(;i.length;)i.pop();for(n in a)if(Object.prototype.hasOwnProperty.call(a,n)){if("flags"===n){var d=a[n].split(","),u=d.indexOf("paused");t||-1===u?t&&-1===u&&d.push("paused"):d.splice(u,1),a[n]=d.join(",")}i.push(n+"="+encodeURIComponent(a[n]))}return r[1]=i.join("&"),e.url=r.join("?"),e}}}.apply(t,[]))||(e.exports=n)},9336:function(e,t){var n;void 0===(n=function(){return{PLAY:"api.play",PAUSE:"api.pause"}}.apply(t,[]))||(e.exports=n)},9673:function(e,t){var n;void 0===(n=function(){return{BASE:"control.",CONNECT:"control.connect",DISCONNECT:"control.disconnect",NETWORK_PLAY:"control.networkPlay",NETWORK_PAUSE:"control.networkPause",PLAY:"control.play",PAUSE:"control.pause",MUTE:"control.mute",UNMUTE:"control.unmute",SET_VOLUME:"control.setVolume",SEEK:"control.seek",SET_RATE:"control.playbackRate",CONFIG:"control.config",CREATE_VIDEO:"control.createVideo",DESTROY_VIDEO:"control.destroyVideo",VIDEO_SOURCE:"control.videoSource",UPDATE_SOURCE:"control.updateSource",NETWORK_UPDATE_SOURCE:"control.networkUpdateSource",SWITCH_STREAM:"control.switchStream",SET_ADAPTION:"control.setAdaption"}}.apply(t,[]))||(e.exports=n)},680:function(e,t){var n;void 0===(n=function(){return{BASE:"logic.",STATE_CHANGE:"logic.stateChange",LOADING_TIMEOUT:"logic.loadingTimeout",BUFFERING_TIMEOUT:"logic.bufferingTimeout",STREAM_INFO:"logic.streamInfo",STREAM_INFO_UPDATE:"logic.streamInfoUpdate",SERVER_INFO:"logic.serverInfo",STREAM_URL:"logic.streamUrl",NO_KEEP_CONNECTION:"logic.noKeepConnection",MIME_TYPE_UNSUPPORTED:"logic.mimeTypeUnsupported",META_DATA_RECEIVED:"logic.metaDataReceived",META_DATA_ERROR:"logic.metaDataError",NO_SERVER_ERROR:"logic.noServerError",MISSING_RTMP_ERROR:"logic.missingRtmpError",STARTUP_STATS_ADDED:"logic.startupStatsAdded",STARTUP_STATS_COMPLETED:"logic.startupStatsCompleted",DOCUMENT_VISIBLE:"logic.documentVisible",DOCUMENT_HIDDEN:"logic.documentHidden",ERROR:"logic.error",UPDATE_SOURCE_INIT:"logic.updateSourceInit",UPDATE_SOURCE_SUCCESS:"logic.updateSourceSuccess",UPDATE_SOURCE_FAIL:"logic.updateSourceFail",UPDATE_SOURCE_ABORT:"logic.updateSourceAbort",SWITCH_STREAM_INIT:"logic.switchStreamInit",SWITCH_STREAM_SUCCESS:"logic.switchStreamSuccess",SWITCH_STREAM_FAIL:"logic.switchStreamFail",SWITCH_STREAM_ABORT:"logic.switchStreamAbort",ADAPTIVE_STATS:"logic.adaptiveStats",STREAM_SWITCH:"logic.streamSwitch",BUFFER_GOAL_STATS:"logic.bufferGoalStats",LATENCY_CONTROL_MODE_SET:"logic.latencyControlModeSet",SOURCE_STREAM_STOPPED:"logic.sourceStreamStopped",NOT_CONFIGURED:"logic.notConfigured",UPDATE_SOURCE_INVALID:"logic.updateSourceInvalid",INVALID_ENTRY_INDEX:"logic.invalidEntryIndex",BUFFER_TWEAKS_CREATED:"logic.bufferTweaksCreated",BUFFER_TWEAKS_ERROR:"logic.bufferTweaksError"}}.apply(t,[]))||(e.exports=n)},594:function(e,t){var n;void 0===(n=function(){return{BASE:"media.",LOAD_START:"media.loadstart",PROGRESS:"media.progress",SUSPEND:"media.suspend",ABORT:"media.abort",EMPTIED:"media.emptied",STALLED:"media.stalled",PLAY:"media.play",PAUSE:"media.pause",LOADED_META_DATA:"media.loadedmetadata",LOADED_DATA:"media.loadeddata",WAITING:"media.waiting",MEDIA_ERROR:"media.mediaerror",MEDIA_ERROR_RECOVER:"media.mediaerrorrecover",MEDIA_ERROR_RECOVERED:"media.mediaerrorrecovered",PLAYING:"media.playing",CAN_PLAY:"media.canplay",CAN_PLAY_THROUGH:"media.canplaythrough",SEEKING:"media.seeking",SEEKED:"media.seeked",TIME_UPDATE:"media.timeupdate",ENDED:"media.ended",RATE_CHANGE:"media.ratechange",DURATION_CHANGE:"media.durationchange",VOLUME_CHANGE:"media.volumechange",ELEMENT_CREATED:"media.elementCreated",QUALITY_STATS:"media.qualitystats",PLAY_STATS:"media.playStats",MEDIA_ERROR_RECOVER_STATS:"media.mediaErrorRecoverStats",FRAME_DROP:"media.framedrop",PLAYBACK_FINISHED:"media.playbackFinished",PLAYBACK_ERROR:"media.playbackError",PLAYBACK_STARTED:"media.playbackStarted",PLAYBACK_SUSPENDED:"media.playbackSuspended",BUFFERING:"media.buffering",PLAY_START_SUCCESS:"media.playStartSuccess",PLAY_START_NOT_ALLOWED_ERROR:"media.playStartNotAllowedError",PLAY_START_ABORT_ERROR:"media.playStartAbortError",VIEWPORT_VISIBLE:"media.viewportvisible",VIEWPORT_HIDDEN:"media.viewporthidden",ELEMENTS_UPDATED:"media.elementsUpdated",TIME_OFFSET:"media.timeOffset",UPDATE_SOURCE_ABORT:"media.updateSourceAbort",UPDATE_SOURCE_FAIL:"media.updateSourceFail",UPDATE_SOURCE_TIMEOUT:"media.updateSourceTimeout",ACTIVE_VIDEO_ELEMENT_CHANGE:"media.activeVideoElementChange",OFFLINE_BUFFER_UNDERRUN:"media.offlinebufferunderrun",ADJUSTED_META_DATA:"media.adjustedMetaData"}}.apply(t,[]))||(e.exports=n)},1376:function(e,t){var n;void 0===(n=function(){return{BASE:"network.",CONNECTING:"network.connecting",CONNECTED:"network.connected",CONNECTION_OPEN:"network.connectionOpen",DISCONNECTED:"network.disconnected",RESUMING:"network.resuming",RECONNECTION_IMMINENT:"network.reconnectionImminent",RECONNECTING:"network.reconnecting",RECONNECTION_CONFIG_INVALID:"network.reconnectionConfigInvalid",CONNECTION_ERROR:"network.connectionError",INITIALIZATION_ERROR:"network.initializationError",ERROR:"network.error",WARNING:"network.warning",DESTROYED:"network.destroyed",STATE_CHANGE:"network.stateChange",META_DATA:"network.metaData",WEB_TRANSPORT_META_DATA:"network.wtMetaData",SERVER_INFO:"network.serverInfo",STREAM_INFO:"network.streamInfo",STREAM_INFO_UPDATE:"network.streamInfoUpdate",STREAM_FRAGMENT:"network.streamFragment",RANDOM_ACCESS_POINT:"network.randomAccessPoint",RAW_PACKET:"network.raw",STREAM_STATUS:"network.streamStatus",UPDATE_SOURCE_SUCCESS:"network.updateSourceSuccess",UPDATE_SOURCE_FAIL:"network.updateSourceFail",UPDATE_SOURCE_ABORT:"network.updateSourceAbort",STREAM_QUALITY:"network.streamQuality",ONLINE:"network.online",OFFLINE:"network.offline"}}.apply(t,[]))||(e.exports=n)},7354:function(e,t){var n;void 0===(n=function(){return{BASE:"public.",READY:"public.ready",ERROR:"public.error",PAUSE:"public.pause",LOADING:"public.loading",START_BUFFERING:"public.startBuffering",STOP_BUFFERING:"public.stopBuffering",PLAY:"public.play",METADATA:"public.metaData",STATS:"public.stats",PLAYBACK_FINISHED:"public.playbackFinished",MEDIA:"public.media",STREAM_INFO:"public.streamInfo",STREAM_INFO_UPDATE:"public.streamInfoUpdate",MUTE:"public.mute",UNMUTE:"public.unmute",VOLUME_CHANGE:"public.volumeChange",STATE_CHANGE:"public.stateChange",WARNING:"public.warning",DESTROY:"public.destroy",UPDATE_SOURCE_INIT:"public.updateSourceInit",UPDATE_SOURCE_SUCCESS:"public.updateSourceSuccess",UPDATE_SOURCE_FAIL:"public.updateSourceFail",UPDATE_SOURCE_ABORT:"public.updateSourceAbort",SWITCH_STREAM_INIT:"public.switchStreamInit",SWITCH_STREAM_SUCCESS:"public.switchStreamSuccess",SWITCH_STREAM_FAIL:"public.switchStreamFail",SWITCH_STREAM_ABORT:"public.switchStreamAbort",SERVER_INFO:"public.serverInfo",ACTIVE_VIDEO_ELEMENT_CHANGE:"public.activeVideoElementChange"}}.apply(t,[]))||(e.exports=n)},1128:function(e,t,n){var r,i;r=[n(1969),n(6637),n(5055),n(2682),n(1933),n(8333),n(1473),n(9658),n(8197),n(6725),n(6627),n(8478),n(8877),n(6965),n(5810),n(1493),n(828),n(492),n(8405),n(9583),n(3284),n(5493),n(6704),n(1797),n(651),n(2909),n(279),n(1358),n(9673),n(680),n(594),n(1376),n(9336),n(7354)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l,f,m,E,p,h,g,b,_,T,A,S,y,v,R,O,I,C,N,D,w,U,M){"use strict";var P=a.create("H5Live");function L(e){u.validatePlayerDivId(e),this._setBaseValues(e)}L.getSupportedTechniques=function(){var e=[];return c.isH5LiveKnownUnsupported||(c.canUseMediaSource&&e.push(T.H5LIVE_WSS),(c.mustUseHLS||c.canUseHLS)&&e.push(T.H5LIVE_HLS)),e},L.supportedTechniques=L.getSupportedTechniques(),L.isSupported=function(){return L.supportedTechniques.length>0};var F=L.prototype=Object.create(e.prototype);return F._setBaseValues=function(e){this.version=r.CORE,this.type="h5live",this.mediaplaybackapi="default",this.networkState=this.NETWORK_STATE.UNINITIALIZED,this._info=i,this.config=m.create(),this._playerDivId="",this._playing=!1,this._updating=!1,this._serverInfo=null,this._useHLS=!1,this._pauseReason="",this._playerDivId=e,this._mediaElementIds=[],this._componentEmitter=new s,this._componentListeners={logic:[{type:N.SERVER_INFO,listener:this._onServerInfo.bind(this)},{type:N.NO_KEEP_CONNECTION,listener:this._onNoKeepConnection.bind(this)},{type:N.ERROR,listener:this._onLogicError.bind(this)},{type:N.UPDATE_SOURCE_INIT,listener:this._onUpdateSourceInit.bind(this)},{type:N.SWITCH_STREAM_INIT,listener:this._onSwitchStreamInit.bind(this)},{type:N.LATENCY_CONTROL_MODE_SET,listener:this._onLatencyControlModeSet.bind(this)},{type:N.BUFFER_TWEAKS_CREATED,listener:this._onBufferTweaksCreated.bind(this)},{type:N.BUFFER_TWEAKS_ERROR,listener:this._onBufferTweaksError.bind(this)}],network:[{type:w.CONNECTING,listener:this._onConnectionConnecting.bind(this)},{type:w.CONNECTED,listener:this._onConnectionOpen.bind(this)},{type:w.DISCONNECTED,listener:this._onConnectionClosed.bind(this)},{type:w.RECONNECTING,listener:this._onConnectionReconnecting.bind(this)},{type:w.RECONNECTION_IMMINENT,listener:this._onConnectionReconnectionImminent.bind(this)},{type:w.DESTROYED,listener:this._onConnectionDestroyed.bind(this)},{type:w.WARNING,listener:this._onConnectionWarning.bind(this)},{type:w.STATE_CHANGE,listener:this._onConnectionStateChange.bind(this)}],media:[{type:D.MEDIA_ERROR_RECOVER,listener:this._onMediaErrorRecover.bind(this)},{type:D.PLAYBACK_STARTED,listener:this._onMediaPlaying.bind(this)},{type:D.BUFFERING,listener:this._onMediaBuffering.bind(this)},{type:D.PLAY_START_ABORT_ERROR,listener:this._onPlayStartAbortError.bind(this)},{type:D.PLAY_START_NOT_ALLOWED_ERROR,listener:this._onPlayStartNotAllowedError.bind(this)},{type:D.OFFLINE_BUFFER_UNDERRUN,listener:this._onOfflineBufferUnderrun.bind(this)}]},this._setState(g.IDLE)},F._baseSetup=function(e,r){this._useHLS=c.mustUseHLS||r.playback.allowSafariHlsFallback&&c.canUseHLS,c.isMediaOverQuicSupported&&r.playback.enableMediaOverQuic?this.mediaplaybackapi="moq":this.mediaplaybackapi=this._useHLS?"hls":"mse";var i=this._checkSource(r.source);r.source=i;var a,s=o.check(r,E.create());if(o.merge(r,this.config),o.clean(this.config),a=u.validateConfig(e,this.config))return a;this._setListeners(this.config.events,this),s.forEach(function(e){this._emitWarning(e)}.bind(this));var d=document.getElementById(this._playerDivId);this._metaDataEnabled=this.config.playback.metadata;var l=this.config.source.entries[this.config.source.startIndex].h5live.params,f=this.config.source.entries[this.config.source.startIndex].h5live.rtmp,m=l&&l.url?l.url:f&&f.url?f.url:null,p=l&&l.stream?l.stream:f&&f.streamname?f.streamname:null;for(var h in this.config.url=m&&p?m+"/"+p:"",this.config.type=this.type,this.config.mediaplaybackapi=this.mediaplaybackapi,this.config.latencyControlMode=this.config.playback.latencyControlMode,this.config.id=this.id,this._components={error:v.create(this._componentEmitter),state:S.create(this._componentEmitter),network:O.create(this._componentEmitter),media:I.create(this._componentEmitter,this.config),logic:R.create(this._componentEmitter),propagator:y.create(this._componentEmitter)},this._components)Object.prototype.hasOwnProperty.call(this._componentListeners,h)&&this._componentListeners[h].length&&t.add({target:this._componentEmitter,listeners:this._componentListeners[h]});for(var g in _)(this._outwardEvents||(this._outwardEvents=[]))&&this._outwardEvents.push({from:_[g],to:_[g]}),(this._inwardEvents||(this._inwardEvents=[]))&&this._inwardEvents.push({from:_[g],to:M[g]});return this._outwardTranslator=n.create(this._componentEmitter,this,this._outwardEvents),this._inwardTranslator=n.create(this,this._componentEmitter,this._inwardEvents),this._emitConfig(),this._setupVideoElement(d),a},F.setup=function(e){return new Promise(function(t,n){var r,i,a=this._emitWarning.bind(this),o=function(r){r&&P.debugEnabled()&&P.debug("connection test result: "+JSON.stringify(r));try{var i=this._baseSetup(L.supportedTechniques[0],e);if(i)return void n(i);if(!this||"function"!=typeof this._setState)return void n(new l("Player instance not properly initialized"));setTimeout(function(){try{if(this._setState(g.READY),this.emit(_.READY,{config:this.config}),(!this._pauseReason.length||"destroy"===this._pauseReason)&&this.config.playback.autoplay){var r=e.source.entries[this.config.source.startIndex];(e.source.group&&e.source.group.state&&"live"!==e.source.group.state||r.bintu&&r.bintu.state&&"live"!==r.bintu.state)&&e.playback.autoplay?this._componentEmitter.emit(N.SOURCE_STREAM_STOPPED):this.play()}t(this.config)}catch(e){n(e)}}.bind(this),20)}catch(e){n(e)}}.bind(this);if(e.playback.enableMediaOverQuic&&f.shouldPerformConnectionTest())r=e.source.entries[0].h5live.rtmp.streamname,i=e.source.entries[0].h5live.server,f.test(i,r).then((function(t){try{if(-1===t.webtransport.duration)return e.playback.enableMediaOverQuic=!1,a("Playback via Media Over Quic not available. Using Media Source Extension & WebSocket as fallback."),void o(t);if((t.error||"undefined"===t.error||t.webtransport.duration<10)&&t.websocket.duration>0)return e.playback.enableMediaOverQuic=!1,a("Playback via Media Over Quic not available. Using Media Source Extension & WebSocket as fallback."),void o(t);if(t.webtransport.duration>0&&-1===t.websocket.duration)return e.playback.enableMediaOverQuic=!0,this.mediaplaybackapi="moq",e.playback.faststart=!1,void o(t);e.playback.faststart=!1,o(t)}catch(t){e.playback.enableMediaOverQuic=!1,a("Error during connection test: "+t.message),n(t)}}),(function(){e.playback.enableMediaOverQuic=!0,a("Connection test failed for WebSocket"),o()})).catch((function(t){e.playback.enableMediaOverQuic=!1,a("Connection test failed: "+t.message),n(t)}));else try{o()}catch(e){n(e)}}.bind(this))},F._destroy=function(){for(var e in this._setState(g.DESTROYING),this._playing&&this.pause(this.state),this.emit(_.DESTROY),this._outwardTranslator&&this._outwardTranslator.destroy(),this._outwardTranslator=null,this._inwardTranslator&&this._inwardTranslator.destroy(),this._inwardTranslator=null,this._components)Object.prototype.hasOwnProperty.call(this._components,e)&&(this._components[e].destroy(),delete this._components[e]);for(var n in this._componentListeners)Object.prototype.hasOwnProperty.call(this._componentListeners,n)&&this._componentListeners[n].length&&t.remove({target:this._componentEmitter,listeners:this._componentListeners[n]});this.removeAllListeners()},F.destroy=F._destroy,F._emitConfig=function(){this._componentEmitter.emit(C.CONFIG,{config:d.copy(this.config)})},F._setState=function(e,t){P.debugEnabled()&&P.debug("set state");var n=arguments.length>1?arguments[1]:{};e!==this.state||t?(this.state=e,P.debugEnabled()&&P.debug("state changed to "+this._getState()+" ("+e+")"),n.state=e,this._componentEmitter.emit(N.STATE_CHANGE,n)):P.debugEnabled()&&P.debug("state already at "+this._getState()+" ("+e+")")},F._setListeners=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&"function"==typeof e[n]){var r=n.replace("on",""),i=e[n];t.on(r,i)}},F._setupVideoElement=function(e){var t="h5live-"+this._playerDivId;if(this.config.playback.videoId){if("string"==typeof this.config.playback.videoId)this._mediaElementIds.push(this.config.playback.videoId);else if(Array.isArray(this.config.playback.videoId))for(var n=0;n<this.config.playback.videoId.length&&(this._mediaElementIds.push("string"==typeof this.config.playback.videoId[n]?this.config.playback.videoId[n]:t+(n?"-"+n:"")),c.mustUseHLS||c.canUseHLS&&this.config.playback.allowSafariHlsFallback);n+=1);else this._mediaElementIds.push(t);(c.mustUseHLS||c.canUseHLS&&this.config.playback.allowSafariHlsFallback)&&2!==this._mediaElementIds.length&&(this._mediaElementIds.push(t+"-1"),this._emitWarning("Two external video elements should be used for hls playback with multi stream configuration. Please pass two element ids within a string array."))}else this._mediaElementIds.push(t),(c.mustUseHLS||c.canUseHLS&&this.config.playback.allowSafariHlsFallback)&&this._mediaElementIds.push(t+"-1");this._componentEmitter.emit(C.CREATE_VIDEO,{elementIds:this._mediaElementIds,container:e})},F._onLogicError=function(e){e.data.state&&this._setState(e.data.state),this.state>=g.READY&&this.pause(this.state)},F._onUpdateSourceInit=function(e){this._maybePlayOnUpdateOrSwitch(e)},F._onSwitchStreamInit=function(e){this._maybePlayOnUpdateOrSwitch(e)},F._onLatencyControlModeSet=function(e){this.config.latencyControlMode=e.data.latencyControlMode},F._maybePlayOnUpdateOrSwitch=function(e){e.data.options.forcePlay&&-1!==[g.READY,g.PAUSED].indexOf(this.state)&&setTimeout(this.play.bind(this),200)},F._onPlayStartAbortError=function(e){"background"===e.data.reason&&this._emitWarning("Muted playback in background failed. Wait for getting visible again during loading state to retry.")},F._onPlayStartNotAllowedError=function(e){e.data.automuted&&this._emitWarning("Unmuted autoplay failed by autoplay policy, but 'automute' is enabled. Try to play muted.")},F._onBufferTweaksCreated=function(e){this.config.tweaks=this.config.tweaks||{},this.config.tweaks.buffer=e.data.tweaks.buffer,this.config.playback.latencyControlMode=e.data.latencyControlMode},F._onBufferTweaksError=function(e){this._emitWarning(e.data.message)},F._onMediaErrorRecover=function(e){this._emitWarning("Recovering from media error "+e.data.code+", recovery "+e.data.count+"/"+e.data.max+" within the last 60 seconds ("+e.data.total+" total).")},F._onOfflineBufferUnderrun=function(){this._emitWarning("Network status is offline during buffering or loading. Wait for becoming online again to recover.")},F._preparePlay=function(e){this.state!==g.LOADING?(this._setState(g.LOADING,{connectDelay:e}),this.emit(_.LOADING,{connectDelay:e})):this._setState(g.LOADING,{connectDelay:e},!0),setTimeout(function(){this.state===g.LOADING&&(this._componentEmitter.emit(U.PLAY),this._componentEmitter.emit(C.PLAY,{external:!0}))}.bind(this),e)},F.play=function(){var e=arguments.length?arguments[0]:0;P.debugEnabled()&&P.debug("play in state "+this.state),this.state<g.READY?this._componentEmitter.emit(N.NOT_CONFIGURED):this.state===g.READY||this.state===g.PAUSED?(this._playing=!0,this._preparePlay(e)):this.state===g.PAUSING&&(P.debugEnabled()&&P.debug("play in PAUSING state, setting flag to resume"),this._resumeOnPause=!0)},F._onConnectionConnecting=function(){P.debugEnabled()&&P.debug("connecting")},F._onConnectionStateChange=function(e){this.networkState=e.data.connectionState},F._onConnectionWarning=function(e){var t="Connection warning!",n=e?e.data:void 0;n&&n.message&&(t+=" "+n.message),n&&n.code&&(t+=" (code:"+n.code+")"),this._emitWarning(t)},F._onConnectionOpen=function(e){e.data.count?P.debugEnabled()&&P.debug("connection open after "+e.data.count+" reconnect tries"):P.debugEnabled()&&P.debug("connection open")},F._onConnectionClosed=function(e){P.debugEnabled()&&P.debug("connection closed: "+e.data.code+" "+e.data.message),P.debugEnabled()&&P.debug('closed connection with state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"')},F._onConnectionDestroyed=function(e){P.debugEnabled()&&P.debug("connection destroyed"+(e.data.silent?", but silent":"")),this.state===g.READY||e.data.silent||this.pause(this.state)},F._onConnectionReconnecting=function(e){P.debugEnabled()&&P.debug("reconnect attempt "+e.data.count+" started")},F._onConnectionReconnectionImminent=function(e){var t=e.data.code;P.debugEnabled()&&P.debug("connection "+e.data.count+(e.data.count>1?" times":" time")+" unexpectedly closed with code "+t+", but a reconnect will be prepared"),P.debugEnabled()&&P.debug("reconnect attempt "+e.data.count+" starts in "+Math.round(e.data.delay)+" ms"),this._playing&&(!this._useHLS||"iOS"===i.os&&e.data.count>1)&&(c.isMediaOverQuicSupported&&this.config.playback.enableMediaOverQuic&&e.data.count>1?(this._emitWarning("Playback via Media Over Quic not available. Using Media Source Extension & WebSocket as fallback."),this.config.playback.enableMediaOverQuic=!1,this.mediaplaybackapi="mse",this.config.mediaplaybackapi=this.mediaplaybackapi,this._doFallback(),setTimeout(function(){this._preparePlay(0)}.bind(this),20)):(this._emitWarning("Connection error: closed "+e.data.count+(e.data.count>1?" times":" time")+" unexpectedly with code "+t+", but a reconnect will be prepared in "+(e.data.delay/1e3).toFixed(3)+" s"),this._setState(g.RECONNECTION_IMMINENT),this.pause(this.state),this.play(e.data.delay)))},F._onServerInfo=function(e){P.debugEnabled()&&P.debug("onServerInfo");try{this._serverInfo=e.data.onServerInfo;var t=JSON.stringify(e.data);P.debugEnabled()&&P.debug(t)}catch(e){}},F._onNoKeepConnection=function(e){P.debugEnabled()&&P.debug("onNoKeepConnection"),this._emitWarning(e.data.message)},F._emit=F.emit,F.emit=function(e,t){var n={};t&&t.name&&t.data?n=t:t?(n.data=t,n.name=e||"unknown"):(n.data={},n.name=e||"unknown"),n.player=this._playerDivId,n.id=this.id,n.version=this.version,n.state=this.state,"Error"===e&&n.data.code&&n.data.message&&P.debugEnabled()&&P.debug("error "+n.data.code+" "+n.data.message);var r=d.copy(n);r.name="public."+r.name.substr(0,1).toLowerCase()+r.name.substr(1),this._componentEmitter.emit(r.name,r),this._emit(n.name,n)},F._emitError=function(e,t){this.emit(_.ERROR,{code:e,message:t}),this.state>=g.READY&&this.pause(this.state)},F._emitWarning=function(e){this.emit(_.WARNING,{message:e})},F._doFallback=function(){t.remove({target:this._componentEmitter,listeners:this._componentListeners.media}),t.remove({target:this._componentEmitter,listeners:this._componentListeners.network}),this._components.media.destroy(),this._components.network.destroy(),this._components.media=I.create(this._componentEmitter,this.config),this._components.network=O.create(this._componentEmitter,this.config),t.add({target:this._componentEmitter,listeners:this._componentListeners.media}),t.add({target:this._componentEmitter,listeners:this._componentListeners.network}),this._emitConfig(),this._componentEmitter.emit(C.CREATE_VIDEO,{elementIds:this._mediaElementIds,container:document.getElementById(this._playerDivId)})},F._getPauseReason=function(e){var t="";if(e){var n=!this._useHLS&&this.networkState!==this.NETWORK_STATE.OPEN&&this.networkState!==this.NETWORK_STATE.UNINITIALIZED;switch(e){case g.READY:t=A.SERVER_NOT_FOUND;break;case g.LOADING:t=n?A.CONNECTION_CLOSE:A.STREAM_NOT_FOUND;break;case g.BUFFERING:t=n?A.CONNECTION_CLOSE:A.BUFFER;break;case g.UNKNOWN:t=n?A.CONNECTION_CLOSE:A.UNKNOWN;break;case g.PLAYING:t=n?A.CONNECTION_CLOSE:A.NORMAL;break;case g.PLAYBACK_NOT_STARTED:t=A.INTERACTION_REQUIRED;break;case g.PLAYBACK_SUSPENDED:t=A.PLAYBACK_SUSPENDED;break;case g.PLAYBACK_ERROR:t=A.PLAYBACK_ERROR;break;case g.RECONNECTION_IMMINENT:t=A.RECONNECTION_IMMINENT;break;case g.CONNECTION_ERROR:t=A.CONNECTION_CLOSE;break;case g.DESTROYING:t=A.DESTROY;break;case g.VISIBILITY_HIDDEN:t=A.VISIBILITY_HIDDEN;break;case g.NOT_ENOUGH_DATA:t=A.NOT_ENOUGH_DATA;break;case g.SOURCE_STREAM_STOPPED:t=A.SOURCE_STREAM_STOPPED;break;case g.MEDIA_NOT_AVAILABLE:t=A.MEDIA_NOT_AVAILABLE;break;default:t=A.NORMAL}}else t=A.NORMAL;return t},F._triggerPause=function(){this.state!==g.PAUSED?(P.debugEnabled()&&P.debug('trigger pause with reason "'+this._pauseReason+'", state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"'),this._setState(g.PAUSED,{reason:this._pauseReason}),this.emit(_.PAUSE,{reason:this._pauseReason}),this._resumeOnPause&&(this._resumeOnPause=!1,this.play())):P.debugEnabled()&&P.debug("trigger pause but already in state paused")},F.pause=function(){var e=arguments.length?arguments[0]:0;P.debugEnabled()&&P.debug("pause in state "+this.state),this.state<g.READY&&!e?this._emitWarning("A pause call has been ignored since the player has not been set up successfully."):this.state!==g.PAUSED&&this.state!==g.PAUSING&&(this._pauseReason=this._getPauseReason(e),this._setState(g.PAUSING),this._playing=!1,this._resumeOnPause=!1,this._componentEmitter.emit(U.PAUSE),this._componentEmitter.emit(C.PAUSE),this._triggerPause())},F.mute=function(){this._componentEmitter.emit(C.MUTE)},F.unmute=function(){this._componentEmitter.emit(C.UNMUTE)},F.setVolume=function(e){this._componentEmitter.emit(C.SET_VOLUME,{volume:e})},F.updateSource=function(e){return new Promise(function(t,n){if(this._updating)n(new l("Another 'updateSource' call is pending."));else{this._updating=!0;var r=function(e,t){this._updating=!1,e.apply(null,t)}.bind(this);try{var i,a=this._checkSource(e);if(this.config.source=a,o.clean(this.config.source),i=u.validateConfig(L.supportedTechniques[0],this.config))i.message.replace("create","update"),this._componentEmitter.emit(N.UPDATE_SOURCE_INVALID,{code:i.code,message:i.message}),r(n,[i]);else{var s=this.config.source.entries[this.config.source.startIndex].h5live.params,c=this.config.source.entries[this.config.source.startIndex].h5live.rtmp,f=s&&s.url?s.url:c&&c.url?c.url:null,m=s&&s.stream?s.stream:c&&c.streamname?c.streamname:null;this.config.url=f&&m?f+"/"+m:"",delete this.config.source.h5live,this._componentEmitter.emit(C.UPDATE_SOURCE,{source:d.copy(this.config.source),options:d.copy(this.config.source.options.switch)}),r(t,[this.config])}}catch(e){r(n,[new l(e.message,e.code)])}}}.bind(this))},F.switchStream=function(e){return new Promise(function(t,n){var r;(r=u.validateSwitchIndex(e,this.config))?(this._componentEmitter.emit(N.INVALID_ENTRY_INDEX,{code:r.code,message:r.message,pauseOnError:this.config.source.options.switch.pauseOnError}),n(r)):(this._componentEmitter.emit(C.SWITCH_STREAM,{index:e,type:"direct"}),t(d.copy(this.config)))}.bind(this))},F.setAdaption=function(e){var t=!0;if(e&&e.rule||(t=!1,this._emitWarning("The adaption object is invalid. The adaption will not be updated.")),-1!==["deviationOfMean","deviationOfMean2"].indexOf(e.rule)?this.config.source.entries.length<2&&(t=!1,this._emitWarning("Only one entry. The adaption will not be updated.")):-1===["none"].indexOf(e.rule)&&(t=!1,this._emitWarning("The adaption rule is not valid. Valid rules are 'deviationOfMean', 'deviationOfMean2' and 'none' (disable). The adaption will not be updated.")),t){var n=1;if(isNaN(e.downStep)?this._emitWarning("The adaption down step is not valid. The default down step '1' will be set."):(n=parseInt(e.downStep,10)||n,n=Math.max(1,Math.min(this.config.source.entries.length-1,n))),e.downStep=n,Array.isArray(e.omitRenditions)){for(var r=["high","medium-high","medium","medium-low","low"],i=!1,a=0;a<e.omitRenditions.length;a+=1){if(isNaN(e.omitRenditions[a])){if("string"==typeof e.omitRenditions[a]&&-1!==r.indexOf(e.omitRenditions[a]))continue;i=!0;break}var o=parseInt(e.omitRenditions[a],10);if(!(!isNaN(o)&&o>=0&&o<this.config.source.entries.length)){i=!0;break}}i&&(this._emitWarning("The adaption omit renditions ["+e.omitRenditions.join(",")+"] are not valid and will be ignored."),delete e.omitRenditions)}else void 0!==e.omitRenditions&&(this._emitWarning("The adaption omit renditions are not valid and will be ignored."),delete e.omitRenditions);this._componentEmitter.emit(C.SET_ADAPTION,{adaption:e})}},F._parseUrl=function(e){var t={url:"",streamname:""},n=e.lastIndexOf("/"),r=e.substr(0,n),i=e.substr(n,e-n);return t.url=r,t.streamname=i,t},F._getState=function(){return d.findPropertyByValue(g,this.state)},F._getNetworkState=function(){return d.findPropertyByValue(this.NETWORK_STATE,this.networkState)},F._onMediaPlaying=function(e){var t=this.state;this._setState(g.PLAYING),this.emit(t===g.BUFFERING?_.STOP_BUFFERING:_.PLAY,e.data),P.debugEnabled()&&P.debug("state is PLAYING")},F._onMediaBuffering=function(){this._setState(g.BUFFERING),this.emit(_.START_BUFFERING)},F._checkSource=function(e){var t,n,r,i={method:this._useHLS?"client":"server",pauseOnError:!1,forcePlay:!0,fastStart:!0,timeout:20,tag:""};function a(e){return e>2?{rule:"deviationOfMean2",downStep:2,omitRenditions:[]}:{rule:"none",downStep:1,omitRenditions:[]}}if(e&&e.entries&&e.entries.length>0){for(var s=0;s<e.entries.length;s+=1)if(n=e.entries[s],t=o.check(n,h.create()),n.index!==s){t.push("Configuration warning. The config entries property 'index' is not configured properly.");break}}else n=p.create(),o.merge(e,n),e.entries=[n],e.startIndex=0,e.options&&(e.options.adaption=d);if(void 0===e.startIndex&&(e.startIndex=e.entries.length-1),isNaN(e.startIndex)||"string"!=typeof e.startIndex||(e.startIndex=parseInt(e.startIndex,10)),(void 0===e.startIndex||isNaN(e.startIndex)||e.startIndex<0||e.startIndex>e.entries.length-1)&&(t.push("Configuration warning. The config property 'startIndex' is not configured properly."),e.startIndex=e.entries.length-1),e.options){if(e.options.switch){for(r in i)if(Object.prototype.hasOwnProperty.call(e.options.switch,r)&&typeof e.options.switch[r]==typeof i[r])switch(r){case"method":-1!==["server","client"].indexOf(e.options.switch[r])?"server"===e.options.switch[r]&&this._useHLS||(i[r]=e.options.switch[r]):this._emitWarning("The switch method is not valid. Valid methods are 'server' and 'client'. The default method 'server' will be set.");break;case"timeout":e.options.switch[r]>=5&&e.options.switch[r]<=30?i[r]=e.options.switch[r]:this._emitWarning("The switch timeout value is not in the valid range. the valid range is between 5 and 30. The default value 20 will be set.");break;default:i[r]=e.options.switch[r]}e.options.switch=i}else e.options.switch=i;if(e.options.adaption){var d=a(e.entries.length);for(r in d)if(Object.prototype.hasOwnProperty.call(e.options.adaption,r)&&typeof e.options.adaption[r]==typeof d[r])switch(r){case"rule":-1!==["deviationOfMean","none","deviationOfMean2"].indexOf(e.options.adaption[r])?e.entries.length>1&&(d[r]=e.options.adaption[r]):this._emitWarning("The adaption rule is not valid. Valid rules are 'deviationOfMean', 'deviationOfMean2' and 'none' (disable). The default rule 'none' will be set.");break;case"downStep":if(isNaN(e.options.adaption[r]))this._emitWarning("The adaption down step is not valid. The default down step '1' will be set.");else{var u=d[r];u=parseInt(e.options.adaption[r],10)||u,u=Math.max(1,Math.min(e.entries.length-1,u)),d[r]=u}break;case"omitRenditions":if(Array.isArray(e.options.adaption[r])){for(var c=["high","medium-high","medium","medium-low","low"],l=!1,f=0;f<e.options.adaption[r].length;f+=1){if(isNaN(e.options.adaption[r][f])){if("string"==typeof e.options.adaption[r][f]&&-1!==c.indexOf(e.options.adaption[r][f]))continue;l=!0;break}var m=parseInt(e.options.adaption[r][f],10);if(!(!isNaN(m)&&m>=0&&m<e.entries.length)){l=!0;break}}l?this._emitWarning("The adaption omit renditions ["+e.options.adaption[r].join(",")+"] are not valid and will be ignored."):d[r]=e.options.adaption[r]}else this._emitWarning("The adaption omit renditions are not valid and will be ignored.");break;default:d[r]=e.options.adaption[r]}e.options.adaption=d}else e.options.adaption=a(e.entries.length)}else e.options={switch:i,adaption:a(e.entries.length)};return e.bintu&&1===e.entries.length&&(e.h5live=e.entries[0].h5live),t&&t.length&&t.forEach(function(e){this._emitWarning(e)}.bind(this)),e},F._onUpdateSourceTimeout=function(){P.debugEnabled()&&P.debug("updateSource timeout")},F._reset=function(){this._setState(g.READY),this._setNetworkState(b.IDLE),this._setPauseReason(A.NONE)},F.STATE=g,F.NETWORK_STATE=b,F.PAUSE_REASON=A,L}.apply(t,r))||(e.exports=i)},8985:function(e,t,n){var r,i;r=[n(1969),n(3284),n(2682),n(3778),n(1313),n(1473),n(8197),n(1933)],void 0===(i=function(e,t,n,r,i,a,o,s){"use strict";function d(e){this.version=n.CORE,this.type="native",this.mediaplaybackapi="hls",this._playerDivId=e}d.isSupported=function(){return"iOS"===s.os||"Safari"===s.browser},d.supportedTechniques=[t.NATIVE];var u=d.prototype=Object.create(e.prototype);return u.setup=function(e){return new Promise((function(t,n){try{e.source.entries&&e.source.entries.length||(e.source.entries=[{hls:o.copy(e.source.hls)}]),e.source.startIndex=void 0!==e.source.startIndex?Math.min(e.source.startIndex,e.source.entries.length-1):0,e.source.entries&&e.source.entries.length&&e.source.entries[e.source.startIndex].hls&&e.source.entries[0].hls.length?(window.location=e.source.entries[0].hls,t(e)):n(new Error(i.CONFIG_SOURCE,r.SETUP.SOURCE_NOT_SUPPORTED))}catch(e){n(e)}}))},u.destroy=function(){},u.play=function(){},u.pause=function(){},u.mute=function(){},u.unmute=function(){},u.setVolume=function(){},u.updateSource=function(){},u.switchStream=function(){},u.setAdaption=function(){},d}.apply(t,r))||(e.exports=i)},1933:function(e,t,n){var r,i;r=[n(8333)],void 0===(i=function(e){"use strict";var t=e.create("BrowserInfo"),n="Unknown",r="";screen.width&&(r+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));var i,a,o,s=navigator.userAgent,d=n,u="0.0",c=n,l=navigator.plugins,f=navigator.maxTouchPoints>0,m=!!window.ManagedMediaSource,E=!!window.MediaSource,p=m&&window.ManagedMediaSource.isTypeSupported&&window.ManagedMediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'),h=E&&window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'),g=!1,b=!!window.WebTransport,_=!!window.VideoDecoder,T=!!window.AudioDecoder,A=b&&_&&T;try{if(m){var S=new window.ManagedMediaSource,y=window.URL.createObjectURL(S);"string"==typeof y&&0===y.indexOf("blob:http")&&(g=!0)}}catch(e){}var v=n,R=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 10",r:/(Windows 10|Windows NT 10.0)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var O in R){var I=R[O];if(I.r.test(s)){v=I.s;break}}var C=n,N=void 0;switch(v){case"Mac OS X":null!==(N=/Mac OS X (\d+)_(\d+)_?(\d+)?/.exec(s)||/Mac OS X ([._\d]+)/.exec(s))&&(C=N[1]+"."+(0|N[2])+"."+(0|N[3]));break;case"Android":null!==(N=/Android ([._\d]+)/.exec(s))&&(C=N[1]);break;case"iOS":null!==(N=/OS (\d+)_(\d+)_?(\d+)?/.exec(s))&&(C=N[1]+"."+N[2]+"."+(0|N[3]));break;default:/Windows/.test(v)&&(null!==(N=/Windows (.*)/.exec(v))&&(C=N[1]),v="Windows")}if(-1!==(a=s.indexOf("Opera")))d="Opera",u=s.substring(a+6),-1!==(a=s.indexOf("Version"))&&(u=s.substring(a+8)),c="Chromium";else if(-1!==(a=s.indexOf("SamsungBrowser")))d="Samsung Browser",u=s.substring(a+15),c="Chromium";else if(-1!==(a=s.indexOf("Edg/")))d="Microsoft Edge Chromium",u=s.substring(a+4),c="Chromium";else if(-1!==(a=s.indexOf("UCBrowser")))d="UC Browser",u=s.substring(a+10),c="Blink";else if(-1!==(a=s.indexOf("YaBrowser")))d="Yandex Browser",u=s.substring(a+10),c="Blink";else if(-1!==(a=s.indexOf("QIHU 360EE"))||-1!==(a=s.indexOf("360Browser")))d="Qihoo 360 Browser",u="0",c="Blink";else if(-1!==(a=s.indexOf("Iron")))d="Iron Browser",u=s.substring(a+5),c="Chromium";else if(-1!==(a=s.indexOf("Vivaldi")))d="Vivaldi Browser",u=s.substring(a+8),c="Chromium";else if(-1!==(a=s.indexOf("OPR/")))d="Opera",u=s.substring(a+4),c="Chromium";else if(-1!==(a=s.indexOf("MSIE")))d="Microsoft Internet Explorer",u=s.substring(a+5),c="Trident";else if(-1!==(a=s.indexOf("Trident/")))d="Microsoft Internet Explorer",u=s.substring(a+8),-1!==(a=s.indexOf("rv:"))&&(u=s.substring(a+3)),c="Trident";else if(-1!==(a=s.indexOf("Edge/")))d="Microsoft Edge Trident",u=s.substring(a+5),c="Trident";else if(-1!==(a=s.indexOf("Chrome"))){var D=["Chromium PDF Viewer","Native Client","Chromium PDF Plugin"];if(d="Chrome",u=s.substring(a+7),c="Chromium",E&&!h&&parseInt(u,10)>=54)d="Chromium";else for(var w=0;w<l.length;w++){D.includes(l[w].name)&&(d="Chromium");break}}else if(-1!==(a=s.indexOf("PhantomJS")))d="PhantomJS",u=s.substring(a+10),c="Webkit";else if(-1!==(a=s.indexOf("Safari"))||"iOS"===v&&(a=s.length)){d="Safari",u=s.substring(a+7),-1!==(a=s.indexOf("Version"))&&(u=s.substring(a+8)),-1!==(a=s.indexOf("CriOS"))&&(d="Chrome",u=s.substring(a+6)),-1!==(a=s.indexOf("FxiOS"))&&(d="Firefox",u=s.substring(a+6)),-1!==(a=s.indexOf("EdgiOS"))&&(d="Microsoft Edge",u=s.substring(a+7)),-1!==(o=u.indexOf(";"))&&(u=u.substring(0,o)),-1!==(o=u.indexOf(" "))&&(u=u.substring(0,o)),-1!==(o=u.indexOf(")"))&&(u=u.substring(0,o));var U=parseInt(u.split(".")[0],10);if(isNaN(U)||!U||U>500){for(var M=C.split(".");M.length>2;)M.pop();u=M.length>1?M.join("."):M[0]}c="Webkit"}else-1!==(a=s.indexOf("Firefox"))?(d="Firefox",u=s.substring(a+8),c="Firefox"):(i=s.lastIndexOf(" ")+1)<(a=s.lastIndexOf("/"))&&(d=s.substring(i,a),u=s.substring(a+1),d.toLowerCase()===d.toUpperCase()&&(d=n));-1!==(o=u.indexOf(";"))&&(u=u.substring(0,o)),-1!==(o=u.indexOf(" "))&&(u=u.substring(0,o)),-1!==(o=u.indexOf(")"))&&(u=u.substring(0,o));var P=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(s),L=!!navigator.cookieEnabled;void 0!==navigator.cookieEnabled||L||(document.cookie="testcookie",L=-1!==document.cookie.indexOf("testcookie"));var F={screen:r,browser:d,browserVersion:u,mobile:P,os:v,osVersion:C,cookies:L,browserEngine:c,hasManagedMediaSource:m,hasMediaSource:E,isManagedMediaSourceH264Supported:p,isMediaSourceH264Supported:h,isManagedMediaSourceValidBlobUrl:g,hasTouchPoints:f,hasWebTransport:b,hasVideoDecoder:_,hasAudioDecoder:T,isMediaOverQuicSupported:A};for(var x in F)Object.prototype.hasOwnProperty.call(F,x)&&t.debug(x+": "+F[x]);return F}.apply(t,r))||(e.exports=i)},8818:function(e,t,n){var r,i;r=[n(8333)],void 0===(i=function(e){"use strict";var t,n=e.create("CodecSupport");function r(){var e=Object.keys(i).map((function(e){return{codec:i[e],supported:!1}})),t=Object.keys(a).map((function(e){return{codec:a[e],supported:!1}}));return{video:{codecs:e,unsupported:e.length},audio:{codecs:t,unsupported:t.length},webcodecs_vc:!1,webcodecs_ac:!1}}var i={"avc1.420015":"h264_baseline","avc1.4D401E":"h264_main","avc1.640028":"h264_high","hvc1.1.6.L93.B0":"hevc_main","av01.0.08M.08":"av1_main"},a={"mp4a.40.2":"aac_lc","mp4a.40.5":"aac_hev1","mp4a.40.29":"aac_hev2",opus:"opus"},o=[{width:640,height:360},{width:854,height:480},{width:1280,height:720},{width:1920,height:1080},{width:3840,height:2160}],s=[{sampleRate:16e3,channels:2},{sampleRate:24e3,channels:2},{sampleRate:32e3,channels:2},{sampleRate:44100,channels:2},{sampleRate:48e3,channels:2}];return function(){var e=performance.now(),t={video:!(!window.VideoDecoder||!window.VideoDecoder.isConfigSupported),audio:!(!window.AudioDecoder||!window.AudioDecoder.isConfigSupported)};if(!t.video&&!t.audio){var d=performance.now()-e,u=r();return u.codecs_time={execution:Math.round(d)},Promise.resolve(u)}var c=[],l=[];return t.video&&Object.keys(i).forEach((function(e){c.push(function(e){for(var t=o.slice().reverse(),n=[],r=0;r<t.length;r++){var a=t[r],s={codec:e,codedWidth:a.width,codedHeight:a.height},d=function(e){return VideoDecoder.isConfigSupported(s).then((function(t){return{resolution:e,supported:t.supported}})).catch((function(){return{resolution:e,supported:!1}}))}(a);n.push(d)}return Promise.all(n).then((function(t){for(var n=null,r=0;r<t.length;r++)if(t[r].supported){n=t[r];break}return{codec:i[e],supported:!!n,maxResolution:n?n.resolution.width+"x"+n.resolution.height:void 0}}))}(e))})),t.audio&&Object.keys(a).forEach((function(e){l.push(function(e){for(var t=s.slice().reverse(),r=[],i=0;i<t.length;i++){var o=function(t){var r={codec:e,sampleRate:t.sampleRate,numberOfChannels:t.channels};return AudioDecoder.isConfigSupported(r).then((function(e){return n.debugEnabled()&&n.debug("support success "),{config:t,supported:e.supported}})).catch((function(){return n.debugEnabled()&&n.debug("support fail "),{config:t,supported:!1}}))}(t[i]);r.push(o)}return Promise.all(r).then((function(t){for(var n=null,r=0;r<t.length;r++)if(t[r].supported){n=t[r];break}return{codec:a[e],supported:!!n,maxConfig:n?n.config.sampleRate+"Hz/"+n.config.channels+"ch":void 0}}))}(e))})),Promise.all([Promise.all(c),Promise.all(l)]).then((function(n){for(var r=performance.now()-e,i=n[0],a=n[1],o=0,s=0;s<i.length;s++)i[s].supported||o++;for(var d=0,u=0;u<a.length;u++)a[u].supported||d++;return{video:{codecs:i,unsupported:o},audio:{codecs:a,unsupported:d},codecs_time:{execution:Math.round(r.toFixed(2))},webcodecs_vc:t.video,webcodecs_ac:t.audio}})).catch((function(e){return n.error("Error during codec support check:",e),r()}))}().then((function(e){e.moq_supported=function(e){for(var t=!1,n=0;n<e.video.codecs.length;n++)if("h264_baseline"===e.video.codecs[n].codec&&e.video.codecs[n].supported){t=!0;break}for(var r=!1,i=0;i<e.audio.codecs.length;i++)if("aac_lc"===e.audio.codecs[i].codec&&e.audio.codecs[i].supported){r=!0;break}return!!(window.WebTransport&&e.webcodecs_vc&&e.webcodecs_ac&&t&&r)}(e),t=e})).catch((function(e){n.error("Failed to initialize codec support:",e),t=r()})),{getCodecSupport:function(){return t}}}.apply(t,r))||(e.exports=i)},6627:function(e,t,n){var r,i;r=[n(1933),n(8333)],void 0===(i=function(e,t){var n=t.create("Conditions"),r=e.os,i=parseInt(e.osVersion.split(".")[0],10),a=e.browser,o=parseInt(e.browserVersion.split(".")[0],10),s=e.browserEngine,d="Microsoft Edge Trident"===a,u="Microsoft Internet Explorer"===a||d,c="Webkit"===s,l="Chromium"===s&&o>57,f="iOS"===r,m=f&&o>=11,E=f&&o>=15,p="Mac OS X"===r,h="Chrome"===a,g="Firefox"===a,b="Microsoft Edge"===a,_="Safari"===a,T=_&&12.1===parseFloat(e.browserVersion)&&"iOS"!==r,A=T,S=!!e.isManagedMediaSourceH264Supported,y=!!e.isManagedMediaSourceValidBlobUrl,v=!!e.hasMediaSource,R=!!e.isMediaSourceH264Supported,O=!(S&&y)&&f&&i>=10,I=e.hasTouchPoints,C=e.isMediaOverQuicSupported;O||R||S&&y||!p||(O=!0);var N=!f&&v&&(g&&o>=48||d||R)||S&&y,D=(I||!v)&&p&&(_&&o>=13||h&&o>=85||g||b),w=D&&v&&R,U=function(){var e=!1;try{(("Chrome"===a||"Chromium"===a)&&o<54||"Firefox"===a&&o<48||"Microsoft Internet Explorer"===a&&(o<11||11===o&&7===i)||(p||f)&&"Safari"===a&&o<10)&&(e=!0)}catch(e){}return e}(),M={mustUseHLS:O,canUseHLS:A,isTridentBrowser:u,isWebkitBrowser:c,useFakeAudio:l,canUseMediaSource:N,isIOS:f,isAboveIOS11:m,isAboveIOS15:E,isIOSDesktopMode:D,isIPadDesktopMode:w,isMacOS:p,isFirefox:g,isSafari:_,isChrome:h,isSafari121MacOSX:T,isH5LiveKnownUnsupported:U,isMediaOverQuicSupported:C};for(var P in M)Object.prototype.hasOwnProperty.call(M,P)&&n.debug(P+": "+M[P]);return M}.apply(t,r))||(e.exports=i)},1473:function(e,t){var n;void 0===(n=function(){function e(t,n){var r;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(!n[r]&&(n[r]={}),"object"!=typeof t[r]||Array.isArray(t[r])?n[r]=t[r]:e(t[r],n[r]))}return{merge:function t(n,r){var i;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&Object.prototype.hasOwnProperty.call(r,i)&&("object"!=typeof n[i]||null===n[i]||!Object.keys(n[i]).length||"object"==typeof r[i]&&Object.keys(r[i]).length||Array.isArray(n[i])?"object"!=typeof n[i]||Array.isArray(n[i])?r[i]=n[i]:t(n[i],r[i]):e(n[i],r[i]))},clean:function e(t){var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(void 0===t[n]||null===t[n]||"string"==typeof t[n]&&0===t[n].length)&&delete t[n],Object.prototype.hasOwnProperty.call(t,n)&&t[n]instanceof Object&&e(t[n]);for(n in t)(Object.prototype.hasOwnProperty.call(t,n)&&(void 0===t[n]||null===t[n]||"string"==typeof t[n]&&0===t[n].length)||"object"==typeof t[n]&&"function"!=typeof t[n]&&0===Object.keys(t[n]).length)&&delete t[n]},check:function e(t,n,r,i){var a;for(a in r=r||"",i=i||[],t)Object.prototype.hasOwnProperty.call(t,a)&&Object.prototype.hasOwnProperty.call(n,a)&&("object"==typeof t[a]&&"object"==typeof n[a]?i=e(t[a],n[a],r+a+".",i):typeof t[a]!==n[a]&&"*"!==n[a]&&void 0!==t[a]&&""!==t[a]&&i.push("Configuration warning. The config property '$property$' must be of type '$type$'.".replace("$property$",r+a).replace("$type$",n[a]))),Object.prototype.hasOwnProperty.call(t,a)&&!Object.prototype.hasOwnProperty.call(n,a)&&i.push("Configuration warning. The config property '$property$' is not a valid property. Please remove from config.".replace("$property$",r+a));return i},extend:e}}.apply(t,[]))||(e.exports=n)},6725:function(e,t,n){var r,i;r=[n(8478),n(1313),n(3284),n(3778),n(3890)],void 0===(i=function(e,t,n,r,i){return{validateConfig:function(i,a){for(var o,s=!1,d=a.source.entries,u=0;u<d.length;u+=1){if(!(o=d[u])||!o.h5live){s=new e(t.CONFIG_SOURCE,r.SETUP.SOURCE_NOT_SUPPORTED);break}if(!(o.h5live.rtmp&&o.h5live.rtmp.url&&o.h5live.rtmp.streamname||o.h5live.params)){s=new e(t.CONFIG_RTMP,r.SETUP.CONFIG_RTMP);break}if(i===n.H5LIVE_WSS&&(!o.h5live.server||o.h5live.server&&!o.h5live.server.websocket)){s=new e(t.CONFIG_WSS,r.SETUP.CONFIG_WSS);break}if(i===n.H5LIVE_HLS){if(!o.h5live.server||o.h5live.server&&!o.h5live.server.hls){s=new e(t.CONFIG_HLS,r.SETUP.CONFIG_HLS);break}if(a.playback&&a.playback.metadata&&!o.h5live.server.websocket){s=new e(t.CONFIG_METADATA,r.SETUP.CONFIG_METADATA);break}}if(!(o.h5live.server&&(o.h5live.server.websocket||o.h5live.server.hls)||o.h5live.token)){s=new e(t.CONFIG_TOKEN,r.SETUP.CONFIG_TOKEN);break}}return s},validatePlayerDivId:function(t){if(!("string"==typeof t||t instanceof String))throw new e('The param "playerDivId" must be of type "String".');var n=document.getElementById(t);if(!n)throw new e('The param "playerDivId" must be the id of an existing "div" element.');if("DIV"!==n.tagName)throw new e('The element with the id "'+t+'" is not a "div" element.');return!0},validateSwitchIndex:function(t,n){var a=!1;return(!("number"==typeof t||t instanceof Number)||t<0||t>=n.source.entries.length)&&(a=new e(i.PLAYER.INVALID_ENTRY_INDEX,r.PLAYER.INVALID_ENTRY_INDEX)),a}}}.apply(t,r))||(e.exports=i)},8877:function(e,t,n){var r,i;r=[n(8333)],void 0===(i=function(e){var t=e.create("ConnectionTest"),n=0,r=0,i=void 0,a=void 0,o=void 0,s={websocket:{start:0,end:0,duration:0},webtransport:{start:0,end:0,duration:0},server:void 0,error:void 0};function d(){return"undefined"!=typeof window&&"WebTransport"in window}return{test:function(e,u){return s.websocket.start=0,s.websocket.end=0,s.websocket.duration=0,s.webtransport.start=0,s.webtransport.end=0,s.webtransport.duration=0,s.server=void 0,s.error=void 0,a=e,o="?stream="+u+"&url=rtmp%3A%2F%2Flocalhost%2Fplay",t.debugEnabled()&&t.debug("Starting simultaneous connection test..."),t.debugEnabled()&&t.debug("WebTransport supported:"+d()),new Promise((function(e,u){var c,l=[],f=new Promise((function(e,d){s.websocket.start=Date.now();var u,c=a.websocket+o,l=!1;t.debugEnabled()&&t.debug("Connecting to WebSocket:"+c);try{(u=new WebSocket(c)).binaryType="arraybuffer"}catch(e){return t.debugEnabled()&&t.debug("WebSocket creation failed:"+e.message),void d("WebSocket creation failed: "+e.message)}var f=setTimeout((function(){t.debugEnabled()&&t.debug("WebSocket timeout - closing connection"),u&&u.readyState!==WebSocket.CLOSED&&u.close(),l||(l=!0,d("WebSocket timeout"))}),2e3);u.addEventListener("open",(function(){t.debugEnabled()&&t.debug("WebSocket opened successfully"),l||(clearTimeout(f),s.websocket.end=Date.now(),s.websocket.duration=s.websocket.end-s.websocket.start,n=1*s.websocket.duration/2>200?1*s.websocket.duration/2:200,r=setTimeout((function(){t.debugEnabled()&&t.debug("Waiting Timeout reached after "+n+"ms. WebTransport creation failed."),i&&"function"==typeof i&&i("Waiting Timeout reached after "+n+"ms. WebTransport creation failed.")}),n),u.readyState===WebSocket.OPEN&&u.close(),l=!0,e())})),u.addEventListener("message",(function(n){if(t.debugEnabled()&&t.debug("WebSocket message received"),!l){if(clearTimeout(f),s.websocket.end=Date.now(),s.websocket.duration=s.websocket.end-s.websocket.start,"string"==typeof n.data)try{var r=JSON.parse(n.data);r.onServerInfo&&(s.server=r.onServerInfo.hostname,t.debugEnabled()&&t.debug("Server info received:"+s.server))}catch(e){t.debugEnabled()&&t.debug("Failed to parse message JSON:"+e.message)}u.readyState===WebSocket.OPEN&&u.close(),l=!0,e()}})),u.addEventListener("error",(function(e){if(t.debugEnabled()&&t.debug("WebSocket error event fired"),!l){clearTimeout(f);var n="WebSocket error";e&&e.message?n+=": "+e.message:n+=e&&"string"==typeof e?": "+e:e?": "+String(e):": Unknown error",t.debugEnabled()&&t.debug("WebSocket error occurred:"+n),l=!0,d(n)}})),u.addEventListener("close",(function(e){t.debugEnabled()&&t.debug("WebSocket closed - code:"+e.code+"reason:"+e.reason),clearTimeout(f)}))})).catch((function(e){t.debugEnabled()&&t.debug("WebSocket failed, halting test: "+e),u(e)}));l.push(f),d()?(c=new Promise((function(e,n){if(i=n,d()){s.webtransport.start=Date.now();var u,c=a.webtransport.split("/h5live/"),l=c[0]+"/h5live/probe/"+c[1]+o;t.debugEnabled()&&t.debug("Connecting to WebTransport:"+l);try{u=new window.WebTransport(l)}catch(e){return t.debugEnabled()&&t.debug("WebTransport creation failed:"+e.message),void n("WebTransport creation failed: "+e.message)}var f=setTimeout((function(){if(t.debugEnabled()&&t.debug("WebTransport timeout - closing connection"),u)try{u.close()}catch(e){t.debugEnabled()&&t.debug("Error initiating WebTransport close on timeout:"+(e.message||e))}n("WebTransport timeout")}),2e3);u.ready.then((function(){clearTimeout(f),clearTimeout(r),s.webtransport.end=Date.now(),s.webtransport.duration=s.webtransport.end-s.webtransport.start,s.webtransport.duration<10&&(t.debugEnabled()&&t.debug("WebTransport duration below 10ms ("+s.webtransport.duration+"ms), marking as failed connection"),s.webtransport.duration=0);try{u.close(),u.closed.then((function(){t.debugEnabled()&&t.debug("WebTransport connection closed successfully after test")})).catch((function(e){t.debugEnabled()&&t.debug("Error closing WebTransport after test:"+(e.message||e))}))}catch(e){t.debugEnabled()&&t.debug("Error initiating WebTransport close after test:"+(e.message||e))}e()})).catch((function(e){clearTimeout(f);var r="WebTransport connection failed";e&&e.message?r+=": "+e.message:e&&"string"==typeof e?r+=": "+e:e&&(r+=": "+String(e)),t.debugEnabled()&&t.debug("WebTransport ready failed:"+r);try{u.close(),u.closed.then((function(){t.debugEnabled()&&t.debug("WebTransport connection closed successfully after error")})).catch((function(e){t.debugEnabled()&&t.debug("Error closing WebTransport on error:"+(e.message||e))}))}catch(e){t.debugEnabled()&&t.debug("Error initiating WebTransport close on error:"+(e.message||e))}n(r)}))}else n("WebTransport not supported")})).then((function(){return s.webtransport})).catch((function(e){return t.debugEnabled()&&t.debug("WebTransport failed, continuing test: "+e),s.webtransport.duration=-1,s.webtransport})),l.push(c)):(t.debugEnabled()&&t.debug("WebTransport not supported - testing WebSocket only"),s.webtransport.duration=-1,c=Promise.resolve(),l.push(c)),Promise.all(l).then((function(){t.debugEnabled()&&t.debug("All connection tests completed");var n=JSON.parse(JSON.stringify(s));e(n)})).catch((function(n){t.debugEnabled()&&t.debug("Test halted due to WebSocket failure: "+n),s.error=n;var r=JSON.parse(JSON.stringify(s));e(r)}))}))},isWebTransportSupported:d,shouldPerformConnectionTest:function(){try{var e=new URLSearchParams(window.location.search).get("performConnectionTest");return"false"!==e&&"0"!==e&&"disabled"!==e||(t.debugEnabled()&&t.debug("Connection test disabled via query parameter: performConnectionTest="+e),!1)}catch(e){return t.debugEnabled()&&t.debug(e.message),!0}}}}.apply(t,r))||(e.exports=i)},9088:function(e,t){var n;void 0===(n=function(){var e=o(),t=s(),n=d(),r=u(),i=0,a=void 0;function o(){var e=l("debug")||l("nanoDebug")||0,t=+c("nanoDebug");return Math.max(e,t)}function s(){var e=l("debugFilter")||l("nanoDebugFilter")||"*";return(c("nanoDebugFilter")||e).split("|")}function d(){var e=+l("debugClear")||+l("nanoDebugClear")||0,t=+c("nanoDebugClear");return Math.max(e,t)}function u(){var e=l("debugFunction")||l("nanoDebugFunction")||"";return(c("nanoDebugFunction")||e).split(".")}function c(e){return-1!==document.cookie.indexOf(e+"=")?document.cookie.split(e+"=")[1].split(";")[0]:null}function l(e){if(!a){a=[];var t=document.location.search.substr(1,document.location.search.length);if(""===t&&-1!==document.location.href.indexOf("?")){var n=document.location.href.indexOf("?")+1;t=document.location.href.slice(n)}if(""!==t)for(var r=t.split("&"),i=0;i<r.length;++i){var o="",s=r[i].split("="),d=s[0];s.length>1&&(o=s[1]),a[decodeURIComponent(d)]=decodeURIComponent(o)}}try{return a[e]}catch(e){return}}return setInterval((function(){e=o(),t=s(),n=d(),r=u()}),5e3),{log:function(a,o){try{if(e>=o&&("*"===t[0]||t.filter((function(e){return a.includes(e)})).length)){var s=(new Date).toISOString()+": "+a;console.debug(s);for(var d=0;d<r.length;d+=1){var u=u||window,c=r[d];0===d&&"window"===c||!("object"==typeof window[c]&&d<r.length-1||d===r.length-1&&"function"==typeof window[c])||(u=u[c],d===r.length-1&&u(s))}i++}n&&i>n&&(i=0,console.clear())}catch(e){}},getHTTPParam:l,enabled:function(t){return e>=t}}}.apply(t,[]))||(e.exports=n)},8478:function(e,t){var n;void 0===(n=function(){return function(e,t){var n=new window.Error(e||"");return n.code=t||0,n}}.apply(t,[]))||(e.exports=n)},9658:function(e,t){var n;void 0===(n=function(){"use strict";function e(){}var t=e.prototype;function n(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function r(e){return function(){return this[e].apply(this,arguments)}}return t.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)Object.prototype.hasOwnProperty.call(r,n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},t.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},t.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},t.addListener=function(e,t){var r,i=this.getListenersAsObject(e),a="object"==typeof t;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&-1===n(i[r],t)&&i[r].push(a?t:{listener:t,once:!1});return this},t.on=r("addListener"),t.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},t.once=r("addOnceListener"),t.defineEvent=function(e){return this.getListeners(e),this},t.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},t.removeListener=function(e,t){var r,i,a=this.getListenersAsObject(e);for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&-1!==(r=n(a[i],t))&&a[i].splice(r,1);return this},t.off=r("removeListener"),t.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},t.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},t.manipulateListeners=function(e,t,n){var r,i,a=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)a.call(this,t,n[r]);else for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i=t[r])&&("function"==typeof i?a.call(this,r,i):o.call(this,r,i));return this},t.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.test(t)&&delete r[t];else delete this._events;return this},t.removeAllListeners=r("removeEvent"),t.emitEvent=function(e,t){var n,r,i,a,o=this.getListenersAsObject(e);for(a in o)if(Object.prototype.hasOwnProperty.call(o,a))for(i=(n=o[a].slice(0)).length;i--;)!0===(r=n[i]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},t.trigger=r("emitEvent"),t.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return t.length?t.length&&"object"!=typeof t[0]||t.length&&!Object.prototype.hasOwnProperty.call(t[0],"data")?t[0]={name:e,data:t[0]}:t[0].name=e:t.push({name:e,data:{}}),this.emitEvent(e,t)},t.emitSimple=function(e,t,n){return this.emitEvent(e,[{name:e||"AnonymousEvent",target:n||this,data:t||{}}])},t.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},t._getOnceReturnValue=function(){return!Object.prototype.hasOwnProperty.call(this,"_onceReturnValue")||this._onceReturnValue},t._getEvents=function(){return this._events||(this._events={})},e}.apply(t,[]))||(e.exports=n)},8053:function(e,t){var n;void 0===(n=function(){var e=function(){var t,n,r,i,a,o,s="undefined",d="object",u="Shockwave Flash",c="application/x-shockwave-flash",l="SWFObjectExprInst",f="onreadystatechange",m=window,E=document,p=navigator,h=!1,g=[],b=[],_=[],T=[],A=!1,S=!1,y=!0,v=!1,R=function(){var e=typeof E.getElementById!==s&&typeof E.getElementsByTagName!==s&&typeof E.createElement!==s,t=p.userAgent.toLowerCase(),n=p.platform.toLowerCase(),r=/win/.test(n||t),i=/mac/.test(n||t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o="Microsoft Internet Explorer"===p.appName,l=[0,0,0],f=null;if(typeof p.plugins!==s&&typeof p.plugins[u]===d)(f=p.plugins[u].description)&&typeof p.mimeTypes!==s&&p.mimeTypes[c]&&p.mimeTypes[c].enabledPlugin&&(h=!0,o=!1,f=f.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),l[0]=H(f.replace(/^(.*)\..*$/,"$1")),l[1]=H(f.replace(/^.*\.(.*)\s.*$/,"$1")),l[2]=/[a-zA-Z]/.test(f)?H(f.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof m.ActiveXObject!==s)try{var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");g&&(f=g.GetVariable("$version"))&&(o=!0,l=[H((f=f.split(" ")[1].split(","))[0]),H(f[1]),H(f[2])])}catch(e){}return{w3:e,pv:l,wk:a,ie:o,win:r,mac:i}}();function O(){if(!A&&document.getElementsByTagName("body")[0]){try{var e,t=B("span");t.style.display="none",(e=E.getElementsByTagName("body")[0].appendChild(t)).parentNode.removeChild(e),e=null,t=null}catch(e){return}A=!0;for(var n=g.length,r=0;r<n;r++)g[r]()}}function I(e){A?e():g[g.length]=e}function C(e){var t=null,n=k(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=typeof n.SetVariable!==s?n:n.getElementsByTagName(d)[0]||n),t}function N(){return!S&&V("6.0.65")&&(R.win||R.mac)&&!(R.wk&&R.wk<312)}function D(e,a,o,d){var u=k(o);if(o=x(o),S=!0,r=d||null,i={success:!1,id:o},u){"OBJECT"===u.nodeName.toUpperCase()?(t=U(u),n=null):(t=u,n=o),e.id=l,(typeof e.width===s||!/%$/.test(e.width)&&H(e.width)<310)&&(e.width="310"),(typeof e.height===s||!/%$/.test(e.height)&&H(e.height)<137)&&(e.height="137");var c=R.ie?"ActiveX":"PlugIn",f="MMredirectURL="+encodeURIComponent(m.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+c+"&MMdoctitle="+encodeURIComponent(E.title.slice(0,47)+" - Flash Player Installation");if(typeof a.flashvars!==s?a.flashvars+="&"+f:a.flashvars=f,R.ie&&4!==u.readyState){var p=B("div");o+="SWFObjectNew",p.setAttribute("id",o),u.parentNode.insertBefore(p,u),u.style.display="none",L(u)}M(e,a,o)}}function w(e){if(R.ie&&4!==e.readyState){e.style.display="none";var t=B("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(U(e),t),L(e)}else e.parentNode.replaceChild(U(e),e)}function U(e){var t=B("div");if(R.win&&R.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(d)[0];if(n){var r=n.childNodes;if(r)for(var i=r.length,a=0;a<i;a++)1===r[a].nodeType&&"PARAM"===r[a].nodeName||8===r[a].nodeType||t.appendChild(r[a].cloneNode(!0))}}return t}function M(e,t,n){var r,i,a,o,u=k(n);if(n=x(n),R.wk&&R.wk<312)return r;if(u){var l,f,m,E=R.ie?B("div"):B(d);for(m in typeof e.id===s&&(e.id=n),t)Object.prototype.hasOwnProperty.call(t,m)&&"movie"!==m.toLowerCase()&&P(E,m,t[m]);for(l in R.ie&&(i=e.data,a=E.innerHTML,(o=B("div")).innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+i+"'>"+a+"</object>",E=o.firstChild),e)Object.prototype.hasOwnProperty.call(e,l)&&("styleclass"===(f=l.toLowerCase())?E.setAttribute("class",e[l]):"classid"!==f&&"data"!==f&&E.setAttribute(l,e[l]));R.ie?_[_.length]=e.id:(E.setAttribute("type",c),E.setAttribute("data",e.data)),u.parentNode.replaceChild(E,u),r=E}return r}function P(e,t,n){var r=B("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function L(e){var t=k(e);t&&"OBJECT"===t.nodeName.toUpperCase()&&(R.ie?(t.style.display="none",function e(){if(4===t.readyState){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}else setTimeout(e,10)}()):t.parentNode.removeChild(t))}function F(e){return e&&e.nodeType&&1===e.nodeType}function x(e){return F(e)?e.id:e}function k(e){if(F(e))return e;var t=null;try{t=E.getElementById(e)}catch(e){}return t}function B(e){return E.createElement(e)}function H(e){return parseInt(e,10)}function V(e){e+="";var t=R.pv,n=e.split(".");return n[0]=H(n[0]),n[1]=H(n[1])||0,n[2]=H(n[2])||0,!!(t[0]>n[0]||t[0]===n[0]&&t[1]>n[1]||t[0]===n[0]&&t[1]===n[1]&&t[2]>=n[2])}function G(e,t,n,r){var i=E.getElementsByTagName("head")[0];if(i){var d="string"==typeof n?n:"screen";if(r&&(a=null,o=null),!a||o!==d){var u=B("style");u.setAttribute("type","text/css"),u.setAttribute("media",d),a=i.appendChild(u),R.ie&&typeof E.styleSheets!==s&&E.styleSheets.length>0&&(a=E.styleSheets[E.styleSheets.length-1]),o=d}a&&(typeof a.addRule!==s?a.addRule(e,t):typeof E.createTextNode!==s&&a.appendChild(E.createTextNode(e+" {"+t+"}")))}}function W(e,t){if(y){var n=t?"visible":"hidden",r=k(e);A&&r?r.style.visibility=n:"string"==typeof e&&G("#"+e,"visibility:"+n)}}function Y(e){return null!==/[\\"<>.;]/.exec(e)&&typeof encodeURIComponent!==s?encodeURIComponent(e):e}return R.w3&&((typeof E.readyState!==s&&("complete"===E.readyState||"interactive"===E.readyState)||typeof E.readyState===s&&(E.getElementsByTagName("body")[0]||E.body))&&O(),A||(typeof E.addEventListener!==s&&E.addEventListener("DOMContentLoaded",O,!1),R.ie&&(E.attachEvent(f,(function e(){"complete"===E.readyState&&(E.detachEvent(f,e),O())})),m==top&&function e(){if(!A){try{E.documentElement.doScroll("left")}catch(t){return void setTimeout(e,0)}O()}}()),R.wk&&function e(){A||(/loaded|complete/.test(E.readyState)?O():setTimeout(e,0))}())),g[0]=function(){h&&function(){var e=b.length;if(e>0)for(var t=0;t<e;t++){var n=b[t].id,r=b[t].callbackFn,i={success:!1,id:n};if(R.pv[0]>0){var a=k(n);if(a)if(!V(b[t].swfVersion)||R.wk&&R.wk<312)if(b[t].expressInstall&&N()){var o={};o.data=b[t].expressInstall,o.width=a.getAttribute("width")||"0",o.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(o.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(o.align=a.getAttribute("align"));for(var d={},u=a.getElementsByTagName("param"),c=u.length,l=0;l<c;l++)"movie"!==u[l].getAttribute("name").toLowerCase()&&(d[u[l].getAttribute("name")]=u[l].getAttribute("value"));D(o,d,n,r)}else w(a),r&&r(i);else W(n,!0),r&&(i.success=!0,i.ref=C(n),i.id=n,r(i))}else if(W(n,!0),r){var f=C(n);f&&typeof f.SetVariable!==s&&(i.success=!0,i.ref=f,i.id=f.id),r(i)}}}()},R.ie&&window.attachEvent("onunload",(function(){for(var t=T.length,n=0;n<t;n++)T[n][0].detachEvent(T[n][1],T[n][2]);for(var r=_.length,i=0;i<r;i++)L(_[i]);for(var a in R)R[a]=null;for(var o in R=null,e)e[o]=null;e=null})),{registerObject:function(e,t,n,r){if(R.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,b[b.length]=i,W(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(R.w3)return C(e)},embedSWF:function(e,t,n,r,i,a,o,u,c,l){var f=x(t),m={success:!1,id:f};R.w3&&!(R.wk&&R.wk<312)&&e&&t&&n&&r&&i?(W(f,!1),I((function(){n+="",r+="";var E={};if(c&&typeof c===d)for(var p in c)E[p]=c[p];E.data=e,E.width=n,E.height=r;var h={};if(u&&typeof u===d)for(var g in u)h[g]=u[g];if(o&&typeof o===d)for(var b in o)if(Object.prototype.hasOwnProperty.call(o,b)){var _=v?encodeURIComponent(b):b,T=v?encodeURIComponent(o[b]):o[b];typeof h.flashvars!==s?h.flashvars+="&"+_+"="+T:h.flashvars=_+"="+T}if(V(i)){var A=M(E,h,t);E.id===f&&W(f,!0),m.success=!0,m.ref=A,m.id=A.id}else{if(a&&N())return E.data=a,void D(E,h,t,l);W(f,!0)}l&&l(m)}))):l&&l(m)},switchOffAutoHideShow:function(){y=!1},enableUriEncoding:function(e){v=typeof e===s||e},ua:R,getFlashPlayerVersion:function(){return{major:R.pv[0],minor:R.pv[1],release:R.pv[2]}},hasFlashPlayerVersion:V,createSWF:function(e,t,n){return R.w3?M(e,t,n):void 0},showExpressInstall:function(e,t,n,r){R.w3&&N()&&D(e,t,n,r)},removeSWF:function(e){R.w3&&L(e)},createCSS:function(e,t,n,r){R.w3&&G(e,t,n,r)},addDomLoadEvent:I,addLoadEvent:function(e){if(typeof m.addEventListener!==s)m.addEventListener("load",e,!1);else if(typeof E.addEventListener!==s)E.addEventListener("load",e,!1);else if(typeof m.attachEvent!==s)!function(e,t,n){e.attachEvent(t,n),T[T.length]=[e,t,n]}(m,"onload",e);else if("function"==typeof m.onload){var t=m.onload;m.onload=function(){t(),e()}}else m.onload=e},getQueryParamValue:function(e){var t=E.location.search||E.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),!e)return Y(t);for(var n=t.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))===e)return Y(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(S){var e=k(l);e&&t&&(e.parentNode.replaceChild(t,e),n&&(W(n,!0),R.ie&&(t.style.display="block")),r&&r(i)),S=!1}},version:"2.3"}}();return e}.apply(t,[]))||(e.exports=n)},8333:function(e,t,n){var r,i;r=[n(9088)],void 0===(i=function(e){function t(t,n,r){e.log("["+n+"] "+r,t)}function n(t){return e.enabled(t)}return{create:function(e){return{debug:t.bind(this,3,e),info:t.bind(this,2,e),warn:t.bind(this,1,e),error:t.bind(this,0,e),detail:t.bind(this,4,e),debugEnabled:n.bind(this,3),infoEnabled:n.bind(this,2),warnEnabled:n.bind(this,1),errorEnabled:n.bind(this,0),detailEnabled:n.bind(this,4)}}}}.apply(t,r))||(e.exports=i)},803:function(e,t){var n;void 0===(n=function(){var e,t;return{play:function(n){return new Promise((function(r,i){var a=n.play();Promise.all([a]).then((function(){r({media:n})})).catch((function(r){e=r&&r.name?r.name:"Unknown",t=r&&r.message?r.message:"Message not available.",i({media:n,error:{name:e,message:t}})}))}))}}}.apply(t,[]))||(e.exports=n)},8197:function(e,t){var n;void 0===(n=function(){var e=Object.prototype.toString;return{copy:function t(n){var r;switch(typeof n){case"object":if(null===n)r=null;else if(n&&n.tagName&&n.nodeName&&n instanceof Element)r=n;else switch(e.call(n)){case"[object Array]":r=n.map(t);break;case"[object Date]":r=new Date(n);break;case"[object RegExp]":r=new RegExp(n);break;default:r=Object.keys(n).reduce((function(e,r){return e[r]=t(n[r]),e}),{})}break;case"undefined":r=n;break;default:r=n.valueOf()}return r},findPropertyByValue:function(e,t){if("object"==typeof e)for(var n in e)if(e[n]===t)return n;return!1}}}.apply(t,[]))||(e.exports=n)},6028:function(e,t){var n;void 0===(n=function(){return{create:function(e,t,n){function r(e){n.emit(e.name,e)}return function(){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.on(t[n],r)}(),{destroy:function(){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.off(t[n],r)}}}}}.apply(t,[]))||(e.exports=n)},7176:function(e,t){var n;void 0===(n=function(){return{normalize:function(e,t,n){for(var r=function(e){var t=e.length-1,n=e.substr(0,1).toUpperCase()+e.substr(1,t);return["webkit"+n,"moz"+n,"ms"+n,e]}(t),i="",a=0;a<r.length;a+=1)if((i=r[a])in e.style){e.style[i]=n;break}}}}.apply(t,[]))||(e.exports=n)},6835:function(e,t){var n;void 0===(n=function(){return{performInSyncedUIBehavior:function(e,t,n){return new Promise((function(r,i){var a=null,o=null;function s(){window.cancelAnimationFrame(o),a=null,o=null}o=window.requestAnimationFrame((function d(u){null===a&&(a=u);var c=u-a;c>n?(i(),s()):c<n&&!t()?(0===c&&e(),o=window.requestAnimationFrame(d)):(r(),s())}))}))}}}.apply(t,[]))||(e.exports=n)},5337:function(e,t){var n;void 0===(n=function(){function e(e){return e.reduce((function(e,t){return e+t}),0)/e.length}return{create:function(t,n){var r=[],i={};function a(e){return{minimum:o(i.minimum,e),maximum:o(i.maximum,e),arithmetic:o(i.arithmetic,e),geometric:o(i.geometric,e),harmonic:o(i.harmonic,e),deviation:o(i.deviation,e),count:o(i.count,e)}}function o(e,t){return isNaN(t)?e:Math.round(e*Math.pow(10,t))/Math.pow(10,t)}return i={add:function(o){for(r.push(o);r.length>t;)r.shift();var s,d;return i.count++,i.changed=!1,(!n||n&&0%n==0)&&(s=JSON.parse(JSON.stringify(r)).sort((function(e,t){return e-t}),0),i.arithmetic=e(s),i.geometric=(d=s,Math.pow(d.reduce((function(e,t){return e?t?e*t:e:t}),0),1/d.length)),i.harmonic=function(e){var t=e.reduce((function(e,t,n){return t?n-1?e+1/t:(e?1/e:0)+1/t:e}),0);return t?e.length/t:0}(s),i.minimum=s[0],i.maximum=s[s.length-1],i.deviation=function(t,n){var r=n||e(t);return t.length>1?Math.sqrt(t.reduce((function(e,t){return e+Math.pow(t-r,2)}),0)/(t.length-1)):0}(s,i.arithmetic),i.changed=!0),a()},get:a,minimum:0,maximum:0,first:0,last:0,arithmetic:0,geometric:0,harmonic:0,deviation:0,count:0,values:r,changed:!1}}}}.apply(t,[]))||(e.exports=n)},4556:function(e,t){var n;void 0===(n=function(){var e=Date.now?Date.now():+new Date,t=window.performance||{},n=[],r={},i=function(e,t){for(var r=0,i=n.length,a=[];r<i;r++)n[r][e]===t&&a.push(n[r]);return a},a=function(e,t){for(var r,i=n.length;i--;)(r=n[i]).entryType!==e||void 0!==t&&r.name!==t||n.splice(i,1)};return t.now||(t.now=t.webkitNow||t.mozNow||t.msNow||function(){return(Date.now?Date.now():+new Date)-e}),t.mark||(t.mark=t.webkitMark||function(e){var i={name:e,entryType:"mark",startTime:t.now(),duration:0};n.push(i),r[e]=i}),t.measure||(t.measure=t.webkitMeasure||function(e,t,i){t=r[t].startTime,i=r[i].startTime,n.push({name:e,entryType:"measure",startTime:t,duration:i-t})}),t.getEntriesByType||(t.getEntriesByType=t.webkitGetEntriesByType||function(e){return i("entryType",e)}),t.getEntriesByName||(t.getEntriesByName=t.webkitGetEntriesByName||function(e){return i("name",e)}),t.clearMarks||(t.clearMarks=t.webkitClearMarks||function(e){a("mark",e)}),t.clearMeasures||(t.clearMeasures=t.webkitClearMeasures||function(e){a("measure",e)}),void 0===window.performance&&(window.performance=t),window.performance}.apply(t,[]))||(e.exports=n)},2874:function(e,t){var n;void 0===(n=function(){var e=setTimeout;function t(){}function n(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function r(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,n._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void a(t.promise,e)}i(t.promise,r)}else(1===e._state?i:a)(t.promise,e._value)}))):e._deferreds.push(t)}function i(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if(t instanceof n)return e._state=3,e._value=t,void o(e);if("function"==typeof r)return void d((i=r,s=t,function(){i.apply(s,arguments)}),e)}e._state=1,e._value=t,o(e)}catch(t){a(e,t)}var i,s}function a(e,t){e._state=2,e._value=t,o(e)}function o(e){2===e._state&&0===e._deferreds.length&&n._immediateFn((function(){e._handled||n._unhandledRejectionFn(e._value)}));for(var t=0,i=e._deferreds.length;t<i;t++)r(e,e._deferreds[t]);e._deferreds=null}function s(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e((function(e){n||(n=!0,i(t,e))}),(function(e){n||(n=!0,a(t,e))}))}catch(e){if(n)return;n=!0,a(t,e)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,n){var i=new this.constructor(t);return r(this,new s(e,n,i)),i},n.all=function(e){var t=Array.prototype.slice.call(e);return new n((function(e,n){if(0===t.length)return e([]);var r=t.length;function i(a,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,(function(e){i(a,e)}),n)}t[a]=o,0==--r&&e(t)}catch(e){n(e)}}for(var a=0;a<t.length;a++)i(a,t[a])}))},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n((function(t){t(e)}))},n.reject=function(e){return new n((function(t,n){n(e)}))},n.race=function(e){return new n((function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)}))},n._immediateFn="function"==typeof window.setImmediate&&function(e){window.setImmediate(e)}||function(t){e(t,0)},n._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},n._setImmediateFn=function(e){n._immediateFn=e},n._setUnhandledRejectionFn=function(e){n._unhandledRejectionFn=e},void 0===window.Promise&&(window.Promise=n),window.Promise}.apply(t,[]))||(e.exports=n)},130:function(e,t){var n;void 0===(n=function(){return{NANOPLAYER:"5.0.0-moq-preview-6.x"}}.apply(t,[]))||(e.exports=n)},2058:function(e,t){var n;void 0===(n=function(){return{create:function(){return{style:{width:void 0,height:void 0,aspectratio:void 0,controls:!0,interactive:!0,view:!0,scaling:"letterbox",keepFrame:!0,displayAudioOnly:!0,audioPlayer:!1,displayMutedAutoplay:!0,backgroundColor:"black",fullScreenControl:!0,centerView:!0,symbolColor:"rgba(244,233,233,1)",controlBarColor:"rgba(0,0,0,0.5)",buttonAnimation:!0,buttonHighlighting:!0,buttonCursor:"pointer",poster:void 0,fullScreenBackgroundColor:"inherit"},events:{onFullscreenChange:void 0}}}}}.apply(t,[]))||(e.exports=n)},8564:function(e,t,n){var r,i;r=[n(6182)],void 0===(i=function(e){"use strict";return{create:function(t,n){var r=document.getElementById(t),i=null;return window.MutationObserver&&(i=new MutationObserver((function(t){t.forEach((function(t){t.addedNodes.forEach((function(t){"VIDEO"!==t.tagName&&"CANVAS"!==t.tagName&&"IFRAME"!==t.tagName||n.emit(e.PLAYER_MEDIA_ELEMENT_ADDED,{element:t,tagName:t.tagName})}))}))}))).observe(r,{subtree:!1,childList:!0}),{destroy:function(){i&&(i.disconnect(),i=null),r=null}}}}}.apply(t,r))||(e.exports=i)},4355:function(e,t,n){var r,i;r=[n(6182)],void 0===(i=function(e){"use strict";return{create:function(t,n){var r=document.getElementById(t),i=0,a=0,o=null,s=null;function d(t,r){void 0===t||void 0===r||t===i&&r===a||(i=t,a=r,n.emit(e.PLAYER_RESIZE,{width:i,height:a,aspectratio:i/a}))}return window.ResizeObserver?(o=new ResizeObserver((function(e){for(var t=0;t<e.length;t++){var n=e[t];n&&n.target&&n.target===r&&d(n.target.clientWidth,n.target.clientHeight)}}))).observe(r):s=setInterval((function(){r&&d(r.clientWidth,r.clientHeight)}),100),{destroy:function(){o&&(o.disconnect(),o=null),s&&(clearInterval(s),s=null),r=null}}}}}.apply(t,r))||(e.exports=i)},5109:function(e,t){var n;void 0===(n=function(){return{create:function(){return{style:{width:"string",height:"string",aspectratio:"string",controls:"boolean",interactive:"boolean",view:"boolean",scaling:"string",keepFrame:"boolean",displayAudioOnly:"boolean",audioPlayer:"boolean",displayMutedAutoplay:"boolean",backgroundColor:"string",fullScreenControl:"boolean",centerView:"boolean",symbolColor:"string",controlBarColor:"string",buttonAnimation:"boolean",buttonHighlighting:"boolean",buttonCursor:"string",poster:"string",fullScreenBackgroundColor:"string"},events:{onFullscreenChange:"function"}}}}}.apply(t,[]))||(e.exports=n)},4869:function(e,t){var n;void 0===(n=function(){return Object.freeze({NONE:"none",LOADING:"loading",PLAYBUTTON:"playbutton",ERROR:"error",AUDIO:"audio"})}.apply(t,[]))||(e.exports=n)},5403:function(e,t){var n;void 0===(n=function(){var e="view.controls.";return{PLAY:e+"play",PAUSE:e+"pause",MUTE:e+"mute",UNMUTE:e+"unmute",VOLUME_CHANGE:e+"volumeChange",FULLSCREEN_CHANGE:e+"fullscreenChange",OPTIONS_OPEN:e+"optionsOpen",OPTIONS_CLOSE:e+"optionsClose"}}.apply(t,[]))||(e.exports=n)},2833:function(e,t){var n;void 0===(n=function(){return{CLICK:"click",DOUBLE_CLICK:"dblclick",TOUCH_START:"touchstart",TOUCH_END:"touchend",TOUCH_MOVE:"touchmove",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_MOVE:"mousemove"}}.apply(t,[]))||(e.exports=n)},8718:function(e,t){var n;void 0===(n=function(){return{FULLSCREEN_CHANGE:"fullscreenchange",WEBKIT_FULLSCREEN_CHANGE:"webkitfullscreenchange",MOZ_FULLSCREEN_CHANGE:"mozfullscreenchange",MS_FULLSCREEN_CHANGE:"MSFullscreenChange",MS_FULLSCREEN_CHANGE_LOWERCASE:"msfullscreenchange"}}.apply(t,[]))||(e.exports=n)},5833:function(e,t){var n;void 0===(n=function(){return{FULLSCREEN_ERROR:"fullscreenerror",WEBKIT_FULLSCREEN_ERROR:"webkitfullscreenerror",MOZ_FULLSCREEN_ERROR:"mozfullscreenerror",MS_FULLSCREEN_ERROR:"MSFullscreenError",MS_FULLSCREEN_ERROR_LOWERCASE:"msfullscreenerror"}}.apply(t,[]))||(e.exports=n)},9087:function(e,t){var n;void 0===(n=function(){var e="view.fullscreen.";return{FULLSCREEN_CHANGE:e+"change",FULLSCREEN_ERROR:e+"error"}}.apply(t,[]))||(e.exports=n)},4124:function(e,t){var n;void 0===(n=function(){return Object.freeze({ENTERED:"entered",EXITED:"exited"})}.apply(t,[]))||(e.exports=n)},1117:function(e,t){var n;void 0===(n=function(){var e="view.interaction.";return{PLAYER_SINGLE_CLICK:e+"playerSingleClick",PLAYER_DOUBLE_CLICK:e+"playerDoubleClick",PLAYBUTTON_SINGLE_CLICK:e+"playbuttonSingleClick",AUDIO_SINGLE_CLICK:e+"audioSingleClick"}}.apply(t,[]))||(e.exports=n)},426:function(e,t){var n;void 0===(n=function(){return Object.freeze({MUTED:"muted",UNMUTED:"unmuted"})}.apply(t,[]))||(e.exports=n)},1710:function(e,t){var n;void 0===(n=function(){return Object.freeze({OPEN:"open",CLOSED:"closed"})}.apply(t,[]))||(e.exports=n)},5459:function(e,t){var n;void 0===(n=function(){return Object.freeze({UNINITIALIZED:1,IDLE:2,READY:3,LOADING:4,PLAYING:5,PAUSED:6,BUFFERING:7,UNKNOWN:8,PLAYBACK_NOT_STARTED:9,PLAYBACK_SUSPENDED:10,PAUSING:11,PLAYBACK_ERROR:12,RECONNECTION_IMMINENT:13,CONNECTION_ERROR:14,DESTROYING:15,MEDIA_NOT_AVAILABLE:16,VISIBILITY_HIDDEN:17,NOT_ENOUGH_DATA:18,SOURCE_STREAM_STOPPED:19})}.apply(t,[]))||(e.exports=n)},7245:function(e,t){var n;void 0===(n=function(){return Object.freeze({PLAY:"play",PAUSE:"pause"})}.apply(t,[]))||(e.exports=n)},8741:function(e,t){var n;void 0===(n=function(){return Object.freeze({FULLSCREEN_CHANGE:"FullscreenChange"})}.apply(t,[]))||(e.exports=n)},505:function(e,t){var n;void 0===(n=function(){return Object.freeze({NONE:"none",LETTERBOX:"letterbox",CROP:"crop",FILL:"fill"})}.apply(t,[]))||(e.exports=n)},8812:function(e,t){var n;void 0===(n=function(){return{controls:{fullscreen:{viewBox:[0,0,24,24],paths:{exited:"M6 14c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1H7v-2c0-.55-.45-1-1-1Zm0-4c.55 0 1-.45 1-1V7h2c.55 0 1-.45 1-1s-.45-1-1-1H6c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1Zm11 7h-2c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1s-1 .45-1 1v2ZM14 6c0 .55.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V6c0-.55-.45-1-1-1h-3c-.55 0-1 .45-1 1Z",entered:"M6 16h2v2c0 .55.45 1 1 1s1-.45 1-1v-3c0-.55-.45-1-1-1H6c-.55 0-1 .45-1 1s.45 1 1 1Zm2-8H6c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1s-1 .45-1 1v2Zm7 11c.55 0 1-.45 1-1v-2h2c.55 0 1-.45 1-1s-.45-1-1-1h-3c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1Zm1-11V6c0-.55-.45-1-1-1s-1 .45-1 1v3c0 .55.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1h-2Z"}},time:{viewBox:[0,0,72,24],paths:{}},mute:{viewBox:[0,0,24,24],paths:{muted:"M7 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L11 9H8c-.55 0-1 .45-1 1z",up:"M3 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L7 9H4c-.55 0-1 .45-1 1zm13.5 2c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 4.45v.2c0 .38.25.71.6.85C17.18 6.53 19 9.06 19 12s-1.82 5.47-4.4 6.5c-.36.14-.6.47-.6.85v.2c0 .63.63 1.07 1.21.85C18.6 19.11 21 15.84 21 12s-2.4-7.11-5.79-8.4c-.58-.23-1.21.22-1.21.85z",down:"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L9 9H6c-.55 0-1 .45-1 1z",off:"M3.63 3.63c-.39.39-.39 1.02 0 1.41L7.29 8.7 7 9H4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71v-4.17l4.18 4.18c-.49.37-1.02.68-1.6.91-.36.15-.58.53-.58.92 0 .72.73 1.18 1.39.91.8-.33 1.55-.77 2.22-1.31l1.34 1.34c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L5.05 3.63c-.39-.39-1.02-.39-1.42 0zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-3.83-2.4-7.11-5.78-8.4-.59-.23-1.22.23-1.22.86v.19c0 .38.25.71.61.85C17.18 6.54 19 9.06 19 12zm-8.71-6.29l-.17.17L12 7.76V6.41c0-.89-1.08-1.33-1.71-.7zM16.5 12c0-1.77-1.02-3.29-2.5-4.03v1.79l2.48 2.48c.01-.08.02-.16.02-.24z"}},playpause:{viewBox:[0,0,24,24],paths:{play:"M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z",pause:"M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z"}},volume:{viewBox:[0,0,72,24],paths:{line:"M13 11c-.55 0-1 .45-1 1s.45 1 1 1h46c.55 0 1-.45 1-1s-.45-1-1-1z",right:"",knob:""}},options:{viewBox:[0,0,24,24],paths:{settings:"M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z",tune:"M3 18c0 .55.45 1 1 1h5v-2H4c-.55 0-1 .45-1 1zM3 6c0 .55.45 1 1 1h9V5H4c-.55 0-1 .45-1 1zm10 14v-1h7c.55 0 1-.45 1-1s-.45-1-1-1h-7v-1c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1zM7 10v1H4c-.55 0-1 .45-1 1s.45 1 1 1h3v1c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1zm14 2c0-.55-.45-1-1-1h-9v2h9c.55 0 1-.45 1-1zm-5-3c.55 0 1-.45 1-1V7h3c.55 0 1-.45 1-1s-.45-1-1-1h-3V4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .55.45 1 1 1z"}}},centerView:{playButton:{viewBox:[0,0,24,24],paths:{play:"M10.8 15.9l4.67-3.5c.27-.2.27-.6 0-.8L10.8 8.1c-.33-.25-.8-.01-.8.4v7c0 .41.47.65.8.4zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}},loading:{viewBox:[0,0,24,24],paths:{circleFull:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8z",circleHalf:"M22 12c0 4.73-3.3 8.71-7.73 9.74c-.62.15-1.22-.34-1.22-.98c0-.46.31-.86.75-.97c3.55-.82 6.2-4 6.2-7.79s-2.65-6.97-6.2-7.79c-.44-.1-.75-.51-.75-.97c0-.64.6-1.13 1.22-.98C18.7 3.29 22 7.27 22 12z",circleQuarter:"M20 12c0-3.79-2.65-6.97-6.2-7.79c-.44-.1-.75-.51-.75-.97c0-.64.6-1.13 1.22-.98c4.43 1.03 7.73 5.01 7.73 9.74c0 .55-.45 1-1 1c-.55 0-1-.45-1-1z"}},error:{viewBox:[0,0,24,24],paths:{error:"M12 7c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1zm-.01-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm1-3h-2v-2h2v2z",warning:"M4.47 21h15.06c1.54 0 2.5-1.67 1.73-3L13.73 4.99c-.77-1.33-2.69-1.33-3.46 0L2.74 18c-.77 1.33.19 3 1.73 3zM12 14c-.55 0-1-.45-1-1v-2c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"}},audio:{viewBox:[0,0,24,24],paths:{muted:"M7 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L11 9H8c-.55 0-1 .45-1 1z",up:"M3 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L7 9H4c-.55 0-1 .45-1 1zm13.5 2c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 4.45v.2c0 .38.25.71.6.85C17.18 6.53 19 9.06 19 12s-1.82 5.47-4.4 6.5c-.36.14-.6.47-.6.85v.2c0 .63.63 1.07 1.21.85C18.6 19.11 21 15.84 21 12s-2.4-7.11-5.79-8.4c-.58-.23-1.21.22-1.21.85z",down:"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L9 9H6c-.55 0-1 .45-1 1z",off:"M3.63 3.63c-.39.39-.39 1.02 0 1.41L7.29 8.7 7 9H4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71v-4.17l4.18 4.18c-.49.37-1.02.68-1.6.91-.36.15-.58.53-.58.92 0 .72.73 1.18 1.39.91.8-.33 1.55-.77 2.22-1.31l1.34 1.34c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L5.05 3.63c-.39-.39-1.02-.39-1.42 0zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-3.83-2.4-7.11-5.78-8.4-.59-.23-1.22.23-1.22.86v.19c0 .38.25.71.61.85C17.18 6.54 19 9.06 19 12zm-8.71-6.29l-.17.17L12 7.76V6.41c0-.89-1.08-1.33-1.71-.7zM16.5 12c0-1.77-1.02-3.29-2.5-4.03v1.79l2.48 2.48c.01-.08.02-.16.02-.24z"}}}}}.apply(t,[]))||(e.exports=n)},6182:function(e,t){var n;void 0===(n=function(){return{PAUSE:"view.pause",PLAY:"view.play",FULLSCREEN_CHANGE:"view.fullscreenChange",PLAYER_RESIZE:"view.playerResize",PLAYER_MEDIA_ELEMENT_ADDED:"view.playerMediaElementAdded",MUTE:"view.mute",UNMUTE:"view.unmute",VOLUME_CHANGE:"view.volumeChange"}}.apply(t,[]))||(e.exports=n)},6643:function(e,t,n){var r,i;r=[n(1933),n(2833),n(7245),n(426),n(4124),n(5559),n(4586),n(7615),n(3703),n(2103),n(5770)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c){"use strict";return{create:function(l,f,m){var E=document.getElementById(l),p="controls-"+l,h=document.createElement("div"),g=0,b=m.style.audioPlayer,_=m.style.fullScreenControl,T=m.style.optionsControl,A=m.style.controlBarColor,S={symbolColor:m.style.symbolColor,buttonAnimation:m.style.buttonAnimation,buttonHighlighting:m.style.buttonHighlighting,buttonCursor:m.style.buttonCursor},y={playPauseControl:void 0,muteControl:void 0,volumeControl:void 0,fullscreenControl:void 0,timeControl:void 0,optionsControl:void 0};function v(){h&&(h.style.visibility="visible")}function R(){h&&(h.style.visibility="hidden")}function O(e){e.button&&0!==e.button||e.target.id&&-1!==e.target.id.indexOf("playButton-")||I()}function I(){g&&clearTimeout(g),g=0,g=setTimeout(R,5e3),v()}return!document.getElementById(p)&&E&&(h.id=p,h.style.width="100%",h.style.height=(b?"100":Math.round(e.mobile?100/6:100/12))+"%",h.style.maxHeight=Math.floor(E.clientWidth/9)+"px",h.style.position="absolute",h.style.left="0",h.style.bottom="0",h.style.zIndex=1001,h.style.backgroundColor=A,!b&&R(),E.appendChild(h),y.playPauseControl=a.create(h,f,S),y.muteControl=o.create(h,f,S,b),y.volumeControl=s.create(h,f,S,b),y.timeControl=u.create(h,S),!b&&_&&(y.fullscreenControl=d.create(h,f,S)),T&&(y.optionsControl=c.create(h,f,S)),!b&&E.addEventListener(t.MOUSE_MOVE,O,!0)),{size:function(){if(h){h.style.width="100%";var t=Math.round(e.mobile?E.clientHeight/6:E.clientHeight/12),n=Math.round(e.mobile?h.clientWidth/8:h.clientWidth/12);for(var r in h.style.height=(b?"100":Math.min(t,n))+"px",h.style.maxHeight=Math.floor(E.clientWidth/9)+"px",y)y[r]&&y[r].update()}},appear:I,show:v,hide:R,play:function(){y.playPauseControl.update(n.PLAY)},pause:function(){y.playPauseControl.update(n.PAUSE)},fullscreen:function(e){!b&&_&&(h.style.zIndex=1001,e?y.fullscreenControl.update(i.ENTERED):y.fullscreenControl.update(i.EXITED))},mute:function(e){y.muteControl.update(r.MUTED,e)},unmute:function(e){y.muteControl.update(r.UNMUTED,e)},volume:function(e){y.volumeControl.update(e)},time:function(e){y.timeControl.update(e)},destroy:function(){for(var e in g&&clearTimeout(g),y)void 0!==y[e]&&y[e].destroy(),delete y[e];E&&b&&E.removeEventListener(t.MOUSE_MOVE,O),E&&h&&h.parentNode===E&&E.removeChild(h),h=null,E=null}}}}}.apply(t,r))||(e.exports=i)},3703:function(e,t,n){var r,i;r=[n(1933),n(7251),n(3740),n(2833),n(5403),n(4124),n(8812)],void 0===(i=function(e,t,n,r,i,a,o){"use strict";return{create:function(s,d,u){var c,l,f,m="http://www.w3.org/2000/svg",E=t.create(u.symbolColor),p=E.get(),h=document.createElement("div"),g=a.EXITED,b="fullscreen-"+s.id,_=document.createElementNS(m,"path"),T=s.clientHeight,A=o.controls.fullscreen.paths,S=o.controls.fullscreen.viewBox;u.buttonHighlighting&&(f="rect",l=1,c=document.createElementNS(m,f));var y=0;return u.buttonHighlighting&&("rect"===f?(n.setAttribute(c,"x",l),n.setAttribute(c,"y",l),n.setAttribute(c,"width",S[2]-2*l),n.setAttribute(c,"height",S[3]-2*l),n.setAttribute(c,"rx",4),n.setAttribute(c,"ry",4),n.setAttribute(c,"fill",E.getGradientUrl("vertical"))):(n.setAttribute(c,"cx",S[2]/2),n.setAttribute(c,"cy",S[3]/2),n.setAttribute(c,"r",Math.min(S[2],S[3])-l),n.setAttribute(c,"fill",E.getGradientUrl("radial"))),n.setAttribute(c,"opacity","0"),p.appendChild(c)),n.setAttribute(p,"style","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),n.setAttribute(p,"transform","scale(0.9)"),n.setAttribute(p,"viewBox",S.join(" ")),n.setAttribute(p,"fill",u.symbolColor),h.id=b,h.style.float="right",h.style.display="inline-block",h.style.width=T+"px",h.style.height=T+"px",h.style.cursor=u.buttonCursor,h.addEventListener(e.mobile?r.TOUCH_START:r.MOUSE_DOWN,(function(){u.buttonAnimation&&n.setAttribute(p,"transform","scale(0.8)")})),h.addEventListener(e.mobile?r.TOUCH_END:r.MOUSE_UP,(function(e){e&&void 0!==e.button&&0!==e.button||(y&&clearTimeout(y)&&(y=0),y=setTimeout((function(){p&&-1!==n.getAttribute(p,"transform").indexOf("0.8")&&n.setAttribute(p,"transform","scale(1.0)")}),50),d.emit(i.FULLSCREEN_CHANGE))})),h.addEventListener(r.MOUSE_ENTER,(function(){u.buttonHighlighting&&n.setAttribute(c,"opacity","0.15"),u.buttonAnimation&&n.setAttribute(p,"transform","scale(1.0)")})),h.addEventListener(r.MOUSE_LEAVE,(function(){u.buttonHighlighting&&n.setAttribute(c,"opacity","0"),u.buttonAnimation&&n.setAttribute(p,"transform","scale(0.9)")})),p.appendChild(_),h.appendChild(p),s.appendChild(h),{update:function(e){e&&(g=e),T=s.clientHeight,h.style.width=T+"px",h.style.height=T+"px",g===a.ENTERED?n.setAttribute(_,"d",A.entered):g===a.EXITED&&n.setAttribute(_,"d",A.exited)},destroy:function(){y&&clearTimeout(y)&&(y=0),null!==s&&null!==p&&null!==p.parentNode&&p.parentNode===s&&s.removeChild(p),p=null}}}}}.apply(t,r))||(e.exports=i)},4586:function(e,t,n){var r,i;r=[n(1933),n(7251),n(3740),n(2833),n(5403),n(426),n(8812)],void 0===(i=function(e,t,n,r,i,a,o){"use strict";return{create:function(s,d,u){var c,l,f,m="http://www.w3.org/2000/svg",E=t.create(u.symbolColor),p=E.get(),h=document.createElement("div"),g=a.UNMUTED,b=1,_="mute-"+s.id,T=document.createElementNS(m,"path"),A=s.clientHeight,S=o.controls.mute.paths,y=o.controls.mute.viewBox;u.buttonHighlighting&&(f="rect",l=1,c=document.createElementNS(m,f));var v=0;return u.buttonHighlighting&&("rect"===f?(n.setAttribute(c,"x",l),n.setAttribute(c,"y",l),n.setAttribute(c,"width",y[2]-2*l),n.setAttribute(c,"height",y[3]-2*l),n.setAttribute(c,"rx",4),n.setAttribute(c,"ry",4),n.setAttribute(c,"fill",E.getGradientUrl("vertical"))):(n.setAttribute(c,"cx",y[2]/2),n.setAttribute(c,"cy",y[3]/2),n.setAttribute(c,"r",Math.min(y[2],y[3])-l),n.setAttribute(c,"fill",E.getGradientUrl("radial"))),n.setAttribute(c,"opacity","0"),p.appendChild(c)),n.setAttribute(p,"style","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),n.setAttribute(p,"transform","scale(0.9)"),n.setAttribute(p,"viewBox",y.join(" ")),n.setAttribute(p,"fill",u.symbolColor),h.id=_,h.style.float="left",h.style.display="inline-block",h.style.width=A+"px",h.style.height=A+"px",h.style.cursor=u.buttonCursor,h.addEventListener(e.mobile?r.TOUCH_START:r.MOUSE_DOWN,(function(){u.buttonAnimation&&n.setAttribute(p,"transform","scale(0.8)")})),h.addEventListener(e.mobile?r.TOUCH_END:r.MOUSE_UP,(function(e){e&&void 0!==e.button&&0!==e.button||(v&&clearTimeout(v)&&(v=0),v=setTimeout((function(){p&&-1!==n.getAttribute(p,"transform").indexOf("0.8")&&n.setAttribute(p,"transform","scale(1.0)"),g===a.MUTED?d.emit(i.UNMUTE):g===a.UNMUTED&&d.emit(i.MUTE)}),50))})),h.addEventListener(r.MOUSE_ENTER,(function(){u.buttonHighlighting&&n.setAttribute(c,"opacity","0.15"),u.buttonAnimation&&n.setAttribute(p,"transform","scale(1.0)")})),h.addEventListener(r.MOUSE_LEAVE,(function(){u.buttonHighlighting&&n.setAttribute(c,"opacity","0"),u.buttonAnimation&&n.setAttribute(p,"transform","scale(0.9)")})),p.appendChild(T),h.appendChild(p),s.appendChild(h),{update:function(e,t){e&&(g=e),void 0!==t&&(b=t),A=s.clientHeight,h.style.width=A+"px",h.style.height=A+"px",g===a.MUTED?n.setAttribute(T,"d",S.off):g===a.UNMUTED&&(b>=.5?n.setAttribute(T,"d",S.up):b>0?n.setAttribute(T,"d",S.down):n.setAttribute(T,"d",S.muted))},destroy:function(){v&&clearTimeout(v)&&(v=0),null!==s&&null!==p&&null!==p.parentNode&&p.parentNode===s&&s.removeChild(p),p=null}}}}}.apply(t,r))||(e.exports=i)},5770:function(e,t,n){var r,i;r=[n(1933),n(7251),n(3740),n(2833),n(5403),n(1710),n(8812)],void 0===(i=function(e,t,n,r,i,a,o){"use strict";return{create:function(s,d,u){var c,l,f,m="http://www.w3.org/2000/svg",E=t.create(u.symbolColor),p=E.get(),h=document.createElement("div"),g="options-"+s.id,b=a.CLOSED,_=document.createElementNS(m,"path"),T=s.clientHeight,A=o.controls.options.paths,S=o.controls.options.viewBox;u.buttonHighlighting&&(f="rect",l=1,c=document.createElementNS(m,f));var y=0;return u.buttonHighlighting&&("rect"===f?(n.setAttribute(c,"x",l),n.setAttribute(c,"y",l),n.setAttribute(c,"width",S[2]-2*l),n.setAttribute(c,"height",S[3]-2*l),n.setAttribute(c,"rx",4),n.setAttribute(c,"ry",4),n.setAttribute(c,"fill",E.getGradientUrl("vertical"))):(n.setAttribute(c,"cx",S[2]/2),n.setAttribute(c,"cy",S[3]/2),n.setAttribute(c,"r",Math.min(S[2],S[3])-l),n.setAttribute(c,"fill",E.getGradientUrl("radial"))),n.setAttribute(c,"opacity","0"),p.appendChild(c)),n.setAttribute(p,"style","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),n.setAttribute(p,"transform","scale(0.9)"),n.setAttribute(p,"viewBox",S.join(" ")),n.setAttribute(p,"fill",u.symbolColor),h.id=g,h.style.float="right",h.style.display="inline-block",h.style.width=T+"px",h.style.height=T+"px",h.style.cursor=u.buttonCursor,h.addEventListener(e.mobile?r.TOUCH_START:r.MOUSE_DOWN,(function(){u.buttonAnimation&&n.setAttribute(p,"transform","scale(0.8)")})),h.addEventListener(e.mobile?r.TOUCH_END:r.MOUSE_UP,(function(e){e&&void 0!==e.button&&0!==e.button||(y&&clearTimeout(y)&&(y=0),y=setTimeout((function(){p&&-1!==n.getAttribute(p,"transform").indexOf("0.8")&&n.setAttribute(p,"transform","scale(1.0)"),b===a.CLOSED?d.emit(i.OPTIONS_OPEN):d.emit(i.OPTIONS_CLOSE)}),50))})),h.addEventListener(r.MOUSE_ENTER,(function(){u.buttonHighlighting&&n.setAttribute(c,"opacity","0.15"),u.buttonAnimation&&n.setAttribute(p,"transform","scale(1.0)")})),h.addEventListener(r.MOUSE_LEAVE,(function(){u.buttonHighlighting&&n.setAttribute(c,"opacity","0"),u.buttonAnimation&&n.setAttribute(p,"transform","scale(0.9)")})),p.appendChild(_),h.appendChild(p),s.appendChild(h),{update:function(e){e&&(b=e),T=s.clientHeight,h.style.width=T+"px",h.style.height=T+"px",n.setAttribute(_,"d",Math.random()>.5?A.settings:A.tune)},destroy:function(){y&&clearTimeout(y)&&(y=0),null!==s&&null!==p&&null!==p.parentNode&&p.parentNode===s&&s.removeChild(p),p=null}}}}}.apply(t,r))||(e.exports=i)},5559:function(e,t,n){var r,i;r=[n(1933),n(7251),n(3740),n(2833),n(5403),n(7245),n(8812)],void 0===(i=function(e,t,n,r,i,a,o){"use strict";return{create:function(s,d,u){var c,l,f,m="http://www.w3.org/2000/svg",E=t.create(u.symbolColor),p=E.get(),h=document.createElement("div"),g=a.PLAY,b="playpause-"+s.id,_=document.createElementNS(m,"path"),T=s.clientHeight,A=o.controls.playpause.paths,S=o.controls.playpause.viewBox;u.buttonHighlighting&&(f="rect",l=1,c=document.createElementNS(m,f));var y=0;return u.buttonHighlighting&&("rect"===f?(n.setAttribute(c,"x",l),n.setAttribute(c,"y",l),n.setAttribute(c,"width",S[2]-2*l),n.setAttribute(c,"height",S[3]-2*l),n.setAttribute(c,"rx",4),n.setAttribute(c,"ry",4),n.setAttribute(c,"fill",E.getGradientUrl("vertical"))):(n.setAttribute(c,"cx",S[2]/2),n.setAttribute(c,"cy",S[3]/2),n.setAttribute(c,"r",Math.min(S[2],S[3])-l),n.setAttribute(c,"fill",E.getGradientUrl("radial"))),n.setAttribute(c,"opacity","0"),p.appendChild(c)),n.setAttribute(p,"style","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),n.setAttribute(p,"transform","scale(0.9)"),n.setAttribute(p,"viewBox",S.join(" ")),n.setAttribute(p,"fill",u.symbolColor),h.id=b,h.style.float="left",h.style.display="inline-block",h.style.width=T+"px",h.style.height=T+"px",h.style.cursor=u.buttonCursor,h.addEventListener(e.mobile?r.TOUCH_START:r.MOUSE_DOWN,(function(){u.buttonAnimation&&n.setAttribute(p,"transform","scale(0.8)")})),h.addEventListener(e.mobile?r.TOUCH_END:r.MOUSE_UP,(function(e){e&&void 0!==e.button&&0!==e.button||(y&&clearTimeout(y)&&(y=0),y=setTimeout((function(){p&&-1!==n.getAttribute(p,"transform").indexOf("0.8")&&n.setAttribute(p,"transform","scale(1.0)"),g===a.PLAY?d.emit(i.PLAY):g===a.PAUSE&&d.emit(i.PAUSE)}),50))})),h.addEventListener(r.MOUSE_ENTER,(function(){u.buttonHighlighting&&n.setAttribute(c,"opacity","0.15"),u.buttonAnimation&&n.setAttribute(p,"transform","scale(1.0)")})),h.addEventListener(r.MOUSE_LEAVE,(function(){u.buttonHighlighting&&n.setAttribute(c,"opacity","0"),u.buttonAnimation&&n.setAttribute(p,"transform","scale(0.9)")})),p.appendChild(_),h.appendChild(p),s.appendChild(h),{update:function(e){e&&(g=e),T=s.clientHeight,h.style.width=T+"px",h.style.height=T+"px",g===a.PLAY?n.setAttribute(_,"d",A.play):g===a.PAUSE&&n.setAttribute(_,"d",A.pause)},destroy:function(){y&&clearTimeout(y)&&(y=0),null!==s&&null!==p&&null!==p.parentNode&&p.parentNode===s&&s.removeChild(p),p=null}}}}}.apply(t,r))||(e.exports=i)},2103:function(e,t,n){var r,i;r=[n(7251),n(3740),n(8143),n(8812)],void 0===(i=function(e,t,n,r){"use strict";return{create:function(i,a){var o=e.create(a.symbolColor).get(),s=document.createElement("div"),d="time-"+i.id,u=document.createElementNS("http://www.w3.org/2000/svg","text"),c=i.clientHeight,l="0:00",f=r.controls.time.viewBox,m=(Math.min(f[2],f[3])-12)/2,E=Math.min(f[2],f[3])-m;return t.setAttribute(u,"x",m),t.setAttribute(u,"y",E),t.setAttribute(u,"font-size","12pt"),t.setAttribute(u,"font-weight","100"),t.setAttribute(u,"font-family","Arial, Helvetica, sans-serif;"),t.setAttribute(u,"style","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),t.setAttribute(o,"style","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),t.setAttribute(o,"transform","scale(0.9)"),t.setAttribute(o,"viewBox",f.join(" ")),t.setAttribute(o,"fill",a.symbolColor),s.id=d,s.style.float="left",s.style.display="inline-block",s.style.cursor="default",o.appendChild(u),s.appendChild(o),i.appendChild(s),{update:function(e){e&&(l=n.format(e)),c=i.clientHeight,s.style.width=f[2]/f[3]*c+"px",s.style.height=c+"px",u.textContent=l},destroy:function(){null!==i&&null!==o&&null!==o.parentNode&&o.parentNode===i&&i.removeChild(o),o=null}}}}}.apply(t,r))||(e.exports=i)},7615:function(e,t,n){var r,i;r=[n(1933),n(7251),n(3740),n(2833),n(5403),n(8812)],void 0===(i=function(e,t,n,r,i,a){"use strict";return{create:function(o,s,d){var u,c,l,f="http://www.w3.org/2000/svg",m=t.create(d.symbolColor),E=m.get(),p=document.createElement("div"),h=1,g="volume-"+o.id,b=document.createElementNS(f,"path"),_=document.createElementNS(f,"path"),T=document.createElementNS(f,"circle"),A=o.clientHeight,S=a.controls.volume.paths,y=a.controls.volume.viewBox,v=12,R=y[2]-24,O=R+v,I=!1;d.buttonHighlighting&&(l="circle",c=1,u=document.createElementNS(f,l));var C=0;function N(t){t&&void 0!==t.button&&0!==t.button||(M(t)?(d.buttonAnimation&&d.buttonHighlighting&&"rect"!==l&&n.setAttribute(u,"r",.8*(v-c)),document.addEventListener(e.mobile?r.TOUCH_MOVE:r.MOUSE_MOVE,w),document.addEventListener(e.mobile?r.TOUCH_END:r.MOUSE_UP,D),I=!0):D({button:0}))}function D(t){if(!t||void 0===t.button||0===t.button){C&&clearTimeout(C)&&(C=0),C=setTimeout((function(){d.buttonAnimation&&d.buttonHighlighting&&"rect"!==l&&n.setAttribute(u,"r",v-c)}),50),document.removeEventListener(e.mobile?r.TOUCH_MOVE:r.MOUSE_MOVE,w),I=!1;var i=L(t),a=E.getBoundingClientRect();(i.clientX<=a.left||i.clientX>=a.right||i.clientY<=a.top||i.clientY>=a.bottom)&&U()}}function w(e){e&&void 0!==e.button&&0!==e.button||I&&(M(e)||D({button:0}))}function U(){I||(d.buttonHighlighting&&n.setAttribute(u,"opacity","0"),d.buttonAnimation&&n.setAttribute(E,"transform","scale(0.9)"))}function M(e){var t=L(e),n=E.getBoundingClientRect();t.clientX<=n.left||t.clientX>=n.right||t.clientY<=n.top||(t.clientY,n.bottom);var r=n.right-n.left,a=(R+24)/r,o=(t.clientX-n.left)*a;o>=O?o=O:o<=12&&(o=12),P(o);var d=(o-12)/(O-12);return d=Math.round(100*d)/100,s.emit(i.VOLUME_CHANGE,{volume:d}),!0}function P(e){T.setAttribute("cx",e),d.buttonHighlighting&&("rect"===l?n.setAttribute(u,"x",e-(v-c)):n.setAttribute(u,"cx",e)),F(_,S.line,e-v,v)}function L(e,t,n){var r={clientX:t||0,clientY:n||0};return void 0!==e.clientX&&void 0!==e.clientY?(r.clientX=e.clientX,r.clientY=e.clientY):e.changedTouches&&e.changedTouches.length?(r.clientX=e.changedTouches[0].clientX,r.clientY=e.changedTouches[0].clientY):e.touches&&e.touches.length&&(r.clientX=e.touches[0].clientX,r.clientY=e.touches[0].clientY),r}function F(e,t,n,r){var i=t.split("h"),a=i[0].split("c"),o=a[0].split(" ");o[0]="M"+(r+1),a[0]=o.join(" "),i[0]=a.join("c");var s=i[1].split("c");s[0]=n-2,i[1]=s.join("c");var d=i.join("h");e.setAttribute("d",d)}return F(b,S.line,O-v,v),b.setAttribute("opacity","0.5"),F(_,S.line,O-v,v),_.setAttribute("opacity","1"),T.setAttribute("r",4),T.setAttribute("cx",O),T.setAttribute("cy",y[3]/2),T.addEventListener(e.mobile?r.TOUCH_START:r.MOUSE_DOWN,N),T.addEventListener(e.mobile?r.TOUCH_END:r.MOUSE_UP,D),d.buttonHighlighting&&("rect"===l?(n.setAttribute(u,"x",O-(v-c)),n.setAttribute(u,"y",c),n.setAttribute(u,"width",2*(v-c)),n.setAttribute(u,"height",2*(v-c)),n.setAttribute(u,"rx",4),n.setAttribute(u,"ry",4),n.setAttribute(u,"fill",m.getGradientUrl("vertical"))):(n.setAttribute(u,"cx",O),n.setAttribute(u,"cy",y[3]/2),n.setAttribute(u,"r",v-c),n.setAttribute(u,"fill",m.getGradientUrl("vertical"))),n.setAttribute(u,"opacity","0"),E.appendChild(u)),n.setAttribute(E,"style","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),n.setAttribute(E,"transform","scale(0.9)"),n.setAttribute(E,"viewBox",y.join(" ")),n.setAttribute(E,"fill",d.symbolColor),p.id=g,p.style.float="left",p.style.display="inline-block",p.style.width=y[2]/y[3]*A+"px",p.style.height=A+"px",p.style.cursor=d.buttonCursor,p.addEventListener(e.mobile?r.TOUCH_START:r.MOUSE_DOWN,N),p.addEventListener(r.MOUSE_ENTER,(function(){d.buttonHighlighting&&n.setAttribute(u,"opacity","0.15"),d.buttonAnimation&&n.setAttribute(E,"transform","scale(1.0)")})),p.addEventListener(r.MOUSE_LEAVE,U),E.appendChild(b),E.appendChild(_),E.appendChild(T),p.appendChild(E),o.appendChild(p),{update:function(e){void 0!==e&&(h=e),A=o.clientHeight,p.style.width=y[2]/y[3]*A+"px",p.style.height=A+"px",P(R*h+v)},destroy:function(){C&&clearTimeout(C)&&(C=0),null!==o&&null!==E&&null!==E.parentNode&&E.parentNode===o&&o.removeChild(E),E=null}}}}}.apply(t,r))||(e.exports=i)},6444:function(e,t,n){var r,i;r=[n(6627),n(7176),n(4124),n(9087)],void 0===(i=function(e,t,n,r){"use strict";return{create:function(t,i,a){var o,s,d,u=document.getElementById(t),c=n.EXITED,l=!1,f={},m="",E="",p="",h=a.style.backgroundColor,g=a.style.fullScreenBackgroundColor,b=0,_=[],T=1,A=0,S=null,y="",v={width:"10000px",height:"10000px",left:"-4000px",top:"-4000px",padding:"0px",margin:"0px",position:"fixed","background-color":g,"z-index":"0"},R=void 0;function O(e){e?(document.body.style.setProperty("border-width",E),document.body.style.setProperty("background-color",m),u.style.setProperty("border-width",p),u.style.setProperty("background-color",h)):(E=document.body.style.borderWidth,document.body.style.setProperty("border-width","0px","important"),m=document.body.style.backgroundColor,document.body.style.setProperty("background-color",g,"important"),p=u.style.borderWidth,u.style.setProperty("border-width","0px","important"),u.style.setProperty("background-color",g,"important"))}function I(){return c===n.ENTERED}function C(){try{var e,t;if(I()){for(U();_.length;)(t=_.shift()).element.style.cssText=t.cssText,t.border&&(t.element.frameBorder=t.border);S=null,c=n.EXITED,O(!0),document.body.removeChild(s),function(){if(l&&o&&f){var e,t="";for(e in f)t.length?t+=", "+e+"="+f[e]:t+=e+"="+f[e];o.content=t}}(),u.removeChild(d),i.emit(r.FULLSCREEN_CHANGE,{entered:!1}),R&&Object.prototype.hasOwnProperty.call(R,"x")&&Object.prototype.hasOwnProperty.call(R,"y")&&window.scroll(R.x,R.y),R=void 0}else{for(R||(R={y:window.pageYOffset,x:window.pageXOffset}),_.unshift({window:window,document:window.document,element:u,cssText:u.style.cssText,border:null}),M(window),U(),b=setInterval(w,300),e=0;e<_.length;e+=1)(t=_[e]).element.style.setProperty("position","fixed","important"),t.element.style.setProperty("left","0px","important"),t.element.style.setProperty("top","0px","important"),t.element.style.setProperty("right","0px","important"),t.element.style.setProperty("bottom","0px","important"),t.element.style.setProperty("z-index","1000","important"),t.border&&(t.element.frameBorder="0");N(),c=n.ENTERED,u.appendChild(d),document.body.appendChild(s),O(),i.emit(r.FULLSCREEN_CHANGE,{entered:!0})}}catch(e){i.emit(r.FULLSCREEN_ERROR,{reason:"denied"})}}function N(){_.forEach(D)}function D(t){!S&&(S=_[0]),T=S.document.documentElement.clientWidth/S.window.innerWidth,A=(A=(0===S.window.orientation?S.window.screen.height:S.window.screen.width)-S.window.innerWidth*T)>1&&!l?A:0,0===S.window.orientation?t.element.style.paddingTop="env(safe-area-inset-top)":t.element.style.paddingTop=0,(window.pageXOffset<0||window.pageYOffset<0)&&window.scroll(0,0),t.element.style.width=S.window.innerWidth*T+"px",t.element.style.height=(e.isChrome?Math.max(S.document.documentElement.clientHeight,S.window.innerHeight*T):S.window.innerHeight*T)-A+"px"}function w(){try{I()&&N()}catch(e){i.emit(r.FULLSCREEN_ERROR,{reason:"denied"})}}function U(){clearInterval(b),b=0}function M(e){if(e.parent!==e.self)for(var t=e.parent.frames,n=0;n<t.length;n++){var r=t[n];if(e.self===r&&r.frameElement&&r.frameElement.tagName&&"IFRAME"===r.frameElement.tagName){for(var i=r.frameElement.attributes,a=!1,o=0;o<i.length;o+=1)if(i[o].nodeName&&-1!==i[o].nodeName.indexOf("allowfullscreen")&&"false"!==i[o].nodeValue){a=!0;break}a&&(_.unshift({window:e.parent,document:e.parent.document,element:r.frameElement,cssText:r.frameElement.style.cssText,border:r.frameElement.frameBorder}),M(e.parent))}}}return function(){var e,t,n,r,i,a=document.querySelectorAll("meta");for(e=0;e<a.length;++e){var u=a[e].getAttribute("name"),c=a[e].getAttribute("content");if(u&&"viewport"===u.toLowerCase()){if(l=!0,c)for(c=c.split(","),t=0;t<c.length;t++)c[t]&&c[t].length&&-1!==(n=c[t].trim().indexOf("="))&&n!==c[t].trim().length-1&&(r=c[t].trim().substring(0,n),i=c[t].trim().substring(n+1),r&&i&&(f[r]=i));o=a[e]}}!function(){for(var e in(s=document.createElement("meta")).name="viewport",f["initial-scale"]&&(y+=(y.length?", ":"")+"initial-scale=1.0"),f["maximum-scale"]&&(y+=(y.length?", ":"")+"maximum-scale=1.0"),s.content=y,d=document.createElement("div"),v)Object.prototype.hasOwnProperty.call(v,e)&&d.style.setProperty(e,v[e],"position"===e?"important":"")}()}(),{change:function(){C()},entered:I,enabled:function(){return!0},destroy:function(){I()&&C(),u=null}}}}}.apply(t,r))||(e.exports=i)},4103:function(e,t,n){var r,i;r=[n(5533),n(6444)],void 0===(i=function(e,t){"use strict";return{create:function(n,r,i){return document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen?e.create(n,r,i):t.create(n,r,i)}}}.apply(t,r))||(e.exports=i)},5533:function(e,t,n){var r,i;r=[n(8718),n(5833),n(9087)],void 0===(i=function(e,t,n){"use strict";return{create:function(r,i,a){var o=document.getElementById(r);o.requestFullScreen=o.requestFullscreen||o.mozRequestFullScreen||o.webkitRequestFullscreen||o.msRequestFullscreen,document.exitFullScreen=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen;var s=o.style.cssText,d="",u=a.style.backgroundColor,c=a.style.fullScreenBackgroundColor,l="",f="",m="",E="",p="",h=!1,g=!1;function b(){T()?(h=!0,g||y(!0),i.emit(n.FULLSCREEN_CHANGE,{entered:!0})):(g&&y(!1),h&&!A()&&i.emit(n.FULLSCREEN_CHANGE,{entered:!1}),S()&&!A()||(h=!1))}function _(){i.emit(n.FULLSCREEN_ERROR,{reason:"denied"})}function T(){return S()===o}function A(){var e=S();return!!e&&e!==o}function S(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}function y(e){e?(s=o.style.cssText,o.style.width="100vw",o.style.height="100vh",d=o.style.borderWidth,o.style.setProperty("border-width","0px","important"),o.style.setProperty("background-color",c,"important"),l=o.style.padding,f=o.style.paddingTop,m=o.style.paddingBottom,E=o.style.paddingLeft,p=o.style.paddingRight,o.style.setProperty("padding","0","important"),g=!0):(o.style.cssText=s,o.style.setProperty("border-width",d),o.style.setProperty("background-color",u,"important"),o.style.setProperty("padding",l),o.style.setProperty("padding-top",f),o.style.setProperty("padding-bottom",m),o.style.setProperty("padding-left",E),o.style.setProperty("padding-right",p),g=!1)}function v(){}function R(){}return function(){var n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&document.addEventListener(e[n],b);for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&document.addEventListener(t[n],_)}(),{change:function(){!function(){try{T()?document.exitFullScreen&&document.exitFullScreen():o.requestFullScreen&&o.requestFullScreen().then(v).catch(R)}catch(e){}}()},entered:T,enabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled},destroy:function(){!function(){var n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&document.removeEventListener(e[n],b);for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&document.removeEventListener(t[n],_)}(),T()&&(document.exitFullScreen&&document.exitFullScreen(),i.emit(n.FULLSCREEN_EXIT)),o=null}}}}}.apply(t,r))||(e.exports=i)},6471:function(e,t,n){var r,i;r=[n(1933),n(6627),n(1117),n(2833)],void 0===(i=function(e,t,n,r){"use strict";return{create:function(e,i){var a,o=document.getElementById(e),s={timeout:0,touchInProgress:!1},d=0;function u(){var e,n;if(o)if(o.addEventListener(r.CLICK,l),t.isAboveIOS11&&t.mustUseHLS||!t.isIOS&&t.mustUseHLS)a.addEventListener(r.CLICK,l),a.addEventListener("contextmenu",f);else{var i=o.querySelectorAll("video");for(n=0;n<i.length;n+=1)(e=i[n])instanceof Element&&(e.addEventListener(r.CLICK,l),e.addEventListener("contextmenu",f))}}function c(){var e,n;if(clearTimeout(d),d=0,o)if(o.removeEventListener(r.CLICK,l),t.isAboveIOS11&&t.mustUseHLS||!t.isIOS&&t.mustUseHLS)a.removeEventListener(r.CLICK,l),a.removeEventListener("contextmenu",f);else{var i=o.querySelectorAll("video");for(n=0;n<i.length;n+=1)(e=i[n])instanceof Element&&(e.removeEventListener(r.CLICK,l),e.removeEventListener("contextmenu",f))}}function l(e){e.preventDefault(),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.currentTarget.id&&-1!==e.currentTarget.id.indexOf("controls-")||e.button&&0!==e.button||s.touchInProgress||(s.touchInProgress=!0,e.currentTarget.id&&-1!==e.currentTarget.id.indexOf("playButton-")?i.emit(n.PLAYBUTTON_SINGLE_CLICK):e.currentTarget.id&&-1!==e.currentTarget.id.indexOf("audio-")?i.emit(n.AUDIO_SINGLE_CLICK):i.emit(n.PLAYER_SINGLE_CLICK),s.timeout=setTimeout((function(){s.touchInProgress=!1,clearTimeout(s.timeout),s.timeout=0}),300))}function f(e){return e.preventDefault(),!1}return(t.isAboveIOS11&&t.mustUseHLS||!t.isIOS&&t.mustUseHLS)&&((a=document.createElement("div")).style.width="100%",a.style.height="100%",a.style.position="absolute",a.style.left=0,a.style.top=0,a.style.backgroundColor="transparent",a.style.border=0,a.style.display="block",a.style.visibility="visible",a.style.zIndex=2,a.id="clickWrapper-"+e,o.appendChild(a)),{update:function(){var t=document.getElementById("middleView-"+e);t&&t.firstChild&&t.firstChild.addEventListener(r.CLICK,l),c(),d=setTimeout(u,200)},destroy:function(){c(),s.timeout&&clearTimeout(s.timeout),s.timeout=0,a&&o.removeChild(a),a=null,o=null}}}}}.apply(t,r))||(e.exports=i)},1890:function(e,t,n){var r,i;r=[n(7176),n(6627),n(505)],void 0===(i=function(e,t,n){"use strict";return{create:function(r,i,a,o){a=a||n.LETTERBOX;var s,d,u=document.getElementById(r),c=[],l=0,f=i.width/i.height,m=t.isMediaOverQuicSupported&&o.playback.enableMediaOverQuic;function E(){var n=((u=document.getElementById(r))&&(s=u.clientWidth,d=u.clientHeight),{width:s,height:d}),o=["100%","100%"],E=n.width/n.height,h=f,g=p(E-h,8),b=p(E/h,8),_=1,T=1;if(u){var A,S=m&&u.querySelector("canvas");switch(a){case"letterbox":S?l%180?(b>1&&(_/=h,T/=E),b<=1&&(_*=E,T*=h)):(b>1&&(_/=b),b<=1&&(T*=b)):l%180&&(g<0?(_*=h,T*=h):g>=0&&(_/=h,T/=h));break;case"crop":S?l%180?(b>1&&(_=_*h*b,T*=h),b<=1&&(_*=h,T=T*h/b)):(b>1&&(T*=b),b<=1&&(_/=b)):l%180?g<0?(_/=E,T/=E):g>=0&&(_*=E,T*=E):g<0?(_/=E/h,T/=E/h):g>=0&&(_*=E/h,T*=E/h);break;case"fill":S?l%180&&(_*=E,T/=E):l%180?g<0?(_*=h,T/=E):g>=0&&(_*=E,T/=h):g<0?T=n.height/(n.width/h):g>=0&&(_=n.width/(n.height*h));break;case"original":o[0]=i.width+"px",o[1]=i.height+"px";break;case"resize":"fixed"!==u.style.position&&(o[0]=i.width+"px",o[1]=i.height+"px",u.style.width=o[0],u.style.height=o[1])}for(;c.length;)c.pop();if(_=p(_,5),T=p(T,5),t.isAboveIOS11&&t.mustUseHLS||!t.isIOS&&t.mustUseHLS){var y=u.querySelectorAll("iframe");for(A=0;A<y.length;A+=1)y[A].contentDocument&&y[A].contentDocument.body&&y[A].contentDocument.body.firstChild&&c.push(y[A].contentDocument.body.firstChild)}else{var v=S?u.querySelectorAll("canvas"):u.querySelectorAll("video");for(A=0;A<v.length;A+=1)c.push(v[A])}for(A=0;A<c.length;A+=1){var R=c[A];R instanceof Element&&(e.normalize(R,"transform","translate(-50%, -50%) scaleX("+_.toFixed(5)+") scaleY("+T.toFixed(5)+") rotate("+l.toFixed(0)+"deg)"),R.style.width=o[0],R.style.height=o[1])}}}function p(e,t){t=t||2;var n=Math.pow(10,t);return Math.ceil(e*n)/n}return E(),{update:function(e,t){a="string"==typeof e?e:a,l="number"==typeof t?t:l,E()},destroy:function(){for(;c.length;)c.pop();u=null},getState:function(){return{scalingMode:a,rotationMode:l}}}}}}.apply(t,r))||(e.exports=i)},383:function(e,t,n){var r,i;r=[n(1933),n(7251),n(3740),n(2833),n(5403),n(8812)],void 0===(i=function(e,t,n,r,i,a){"use strict";return{create:function(o,s,d,u,c,l){var f,m,E,p="http://www.w3.org/2000/svg",h=t.create(c.symbolColor),g=h.get(),b=document.createElementNS(p,"path"),_=a.centerView.audio.paths,T=a.centerView.audio.viewBox,A=u(),S=l[0],y=l[1];c.buttonHighlighting&&(E="rect",m=1,f=document.createElementNS(p,E));var v=0;return S?n.setAttribute(b,"d",_.off):y>=.5?n.setAttribute(b,"d",_.up):y>0?n.setAttribute(b,"d",_.down):n.setAttribute(b,"d",_.muted),c.buttonHighlighting&&("rect"===E?(n.setAttribute(f,"x",m),n.setAttribute(f,"y",m),n.setAttribute(f,"width",T[2]-2*m),n.setAttribute(f,"height",T[3]-2*m),n.setAttribute(f,"rx",4),n.setAttribute(f,"ry",4),n.setAttribute(f,"fill",h.getGradientUrl("vertical"))):(n.setAttribute(f,"cx",T[2]/2),n.setAttribute(f,"cy",T[3]/2),n.setAttribute(f,"r",Math.min(T[2],T[3])-m),n.setAttribute(f,"fill",h.getGradientUrl("radial"))),n.setAttribute(f,"opacity","0"),g.appendChild(f)),n.setAttribute(g,"style","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),n.setAttribute(g,"transform","scale(0.9)"),n.setAttribute(g,"viewBox",T.join(" ")),n.setAttribute(g,"fill",c.symbolColor),g.style.zIndex=1001,g.id="audio-"+o,g.addEventListener(r.MOUSE_ENTER,(function(){c.buttonHighlighting&&n.setAttribute(f,"opacity","0.15"),c.buttonAnimation&&n.setAttribute(g,"transform","scale(1.0)")})),g.addEventListener(r.MOUSE_LEAVE,(function(){c.buttonHighlighting&&n.setAttribute(f,"opacity","0"),c.buttonAnimation&&n.setAttribute(g,"transform","scale(0.9)")})),g.appendChild(b),g.addEventListener(e.mobile?r.TOUCH_START:r.MOUSE_DOWN,(function(){c.buttonAnimation&&n.setAttribute(g,"transform","scale(0.8)")})),g.addEventListener(e.mobile?r.TOUCH_END:r.MOUSE_UP,(function(e){e&&void 0!==e.button&&0!==e.button||(v&&clearTimeout(v)&&(v=0),v=setTimeout((function(){g&&g&&-1!==n.getAttribute(g,"transform").indexOf("0.8")&&n.setAttribute(g,"transform","scale(1.0)"),S?s.emit(i.UNMUTE):s.emit(i.MUTE)}),50))})),d.appendChild(g),d.style.width=A.width+"px",d.style.height=A.height+"px",d.style.cursor=c.buttonCursor,{destroy:function(){v&&clearTimeout(v)&&(v=0),null!==d&&null!==g&&null!==g.parentNode&&g.parentNode===d&&d.removeChild(g),g=null}}}}}.apply(t,r))||(e.exports=i)},2911:function(e,t,n){var r,i;r=[n(7251),n(3740),n(8812)],void 0===(i=function(e,t,n){"use strict";return{create:function(r,i,a,o,s){var d=e.create(s.symbolColor).get(),u=document.createElementNS("http://www.w3.org/2000/svg","path"),c=n.centerView.error.paths,l=n.centerView.error.viewBox,f=o();return t.setAttribute(u,"d",c.error),t.setAttribute(d,"style","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),t.setAttribute(d,"transform","scale(0.9)"),t.setAttribute(d,"viewBox",l.join(" ")),t.setAttribute(d,"fill",s.symbolColor),d.style.zIndex=1001,d.id="error-"+r,d.appendChild(u),a.appendChild(d),a.style.width=f.width+"px",a.style.height=f.height+"px",a.style.cursor="default",{destroy:function(){null!==a&&null!==d&&null!==d.parentNode&&d.parentNode===a&&a.removeChild(d),d=null}}}}}.apply(t,r))||(e.exports=i)},79:function(e,t,n){var r,i;r=[n(6627),n(7251),n(3740),n(8812)],void 0===(i=function(e,t,n,r){"use strict";return{create:function(i,a,o,s,d){var u,c="http://www.w3.org/2000/svg",l=t.create(d.symbolColor).get(),f=document.createElementNS(c,"path"),m=document.createElementNS(c,"path"),E=document.createElementNS(c,"path"),p=document.createElementNS(c,"animate"),h=document.createElementNS(c,"animateTransform"),g=document.createElementNS(c,"animateTransform"),b=r.centerView.loading.paths,_=r.centerView.loading.viewBox,T=s(),A=e.isTridentBrowser,S="quarter";function y(){clearInterval(u),u=null}return A||(p.setAttribute("attributeName","opacity"),p.setAttribute("dur","1s"),p.setAttribute("values","0;0.5;0"),p.setAttribute("repeatCount","indefinite"),f.appendChild(p)),f.setAttribute("opacity","0"),f.setAttribute("d",b.circleFull),l.appendChild(f),-1!==S.indexOf("half")&&(A||(h.setAttribute("id","first"),h.setAttribute("attributeName","transform"),h.setAttribute("attributeType","XML"),h.setAttribute("type","rotate"),h.setAttribute("dur",.66),h.setAttribute("from","0 12 12"),h.setAttribute("to","360 12 12"),h.setAttribute("begin","0s"),h.setAttribute("repeatCount","indefinite"),m.appendChild(h)),m.setAttribute("opacity","1.0"),m.setAttribute("d",b.circleHalf),l.appendChild(m)),-1!==S.indexOf("quarter")&&(A||(h.setAttribute("id","first"),h.setAttribute("attributeName","transform"),h.setAttribute("attributeType","XML"),h.setAttribute("type","rotate"),h.setAttribute("dur",.66),h.setAttribute("from","0 12 12"),h.setAttribute("to","360 12 12"),h.setAttribute("begin","0s;second.end"),E.appendChild(h),g.setAttribute("id","second"),g.setAttribute("attributeName","transform"),g.setAttribute("attributeType","XML"),g.setAttribute("type","rotate"),g.setAttribute("dur",.33),g.setAttribute("from","360 12 12"),g.setAttribute("to","720 12 12"),g.setAttribute("begin","first.end"),E.appendChild(g)),E.setAttribute("opacity","1.0"),E.setAttribute("d",b.circleQuarter),l.appendChild(E)),n.setAttribute(l,"style","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),n.setAttribute(l,"transform","scale(0.9)"),n.setAttribute(l,"viewBox",_.join(" ")),n.setAttribute(l,"fill",d.symbolColor),l.style.zIndex=1001,l.id="loading-"+i,o.appendChild(l),o.style.width=T.width+"px",o.style.height=T.height+"px",o.style.cursor="default",A&&function(){y();var e=0,t=0,r=1,i=0,a=function(){(e+=9.090909090909092*(i%2+1))>=360&&(i++,e=0),t>=.5&&1===r?r=-1:t<=0&&-1===r&&(r=1),t+=.016666666666666666*r,n.setAttribute(l,"style","transform: rotate("+e+"deg)"),f.setAttribute("opacity",t)};u=setInterval(a,1e3/60),a()}(),{destroy:function(){A&&y(),l.parentNode===o&&o.removeChild(l),l=null}}}}}.apply(t,r))||(e.exports=i)},729:function(e,t,n){var r,i;r=[n(7176),n(4869),n(79),n(862),n(2911),n(383)],void 0===(i=function(e,t,n,r,i,a){"use strict";return{create:function(o,s,d){var u={loading:n,playbutton:r,error:i,audio:a},c=null,l=document.getElementById(o),f="middleView-"+o,m=document.createElement("div"),E={symbolColor:d.style.symbolColor,buttonAnimation:d.style.buttonAnimation,buttonHighlighting:d.style.buttonHighlighting,buttonCursor:d.style.buttonCursor},p=0;function h(){m&&m.parentNode===l&&l.removeChild(m)}function g(){return(l=document.getElementById(o))&&(p=Math.round(.2*Math.min(l.clientWidth,l.clientHeight))),{width:p,height:p}}return{update:function(n,r){c&&c.destroy&&(c.destroy(),c=null),n&&n!==t.NONE?(function(){if(!document.getElementById(f)){var t=g();m.id=f,m.style.width=t.width+"px",m.style.height=t.height+"px",m.style.position="absolute",m.style.left="50%",m.style.top="50%",m.style.marginRight="-50%",e.normalize(m,"transform","translate(-50%, -50%)"),m.style.zIndex=1e3,l&&l.appendChild(m)}}(),c=u[n].create(o,s,m,g,E,r)):h()},destroy:function(){c&&c.destroy&&(c.destroy(),c=null),h(),m=null,l=null}}}}}.apply(t,r))||(e.exports=i)},862:function(e,t,n){var r,i;r=[n(1933),n(7251),n(3740),n(2833),n(5403),n(8812)],void 0===(i=function(e,t,n,r,i,a){"use strict";return{create:function(o,s,d,u,c){var l,f,m,E="http://www.w3.org/2000/svg",p=t.create(c.symbolColor),h=p.get(),g=document.createElementNS(E,"path"),b=a.centerView.playButton.paths,_=a.centerView.playButton.viewBox,T=u();c.buttonHighlighting&&(m="rect",f=1,l=document.createElementNS(E,m));var A=0;return n.setAttribute(g,"d",b.play),c.buttonHighlighting&&("rect"===m?(n.setAttribute(l,"x",f),n.setAttribute(l,"y",f),n.setAttribute(l,"width",_[2]-2*f),n.setAttribute(l,"height",_[3]-2*f),n.setAttribute(l,"rx",4),n.setAttribute(l,"ry",4),n.setAttribute(l,"fill",p.getGradientUrl("vertical"))):(n.setAttribute(l,"cx",_[2]/2),n.setAttribute(l,"cy",_[3]/2),n.setAttribute(l,"r",Math.min(_[2],_[3])-f),n.setAttribute(l,"fill",p.getGradientUrl("radial"))),n.setAttribute(l,"opacity","0"),h.appendChild(l)),n.setAttribute(h,"style","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"),n.setAttribute(h,"transform","scale(0.9)"),n.setAttribute(h,"viewBox",_.join(" ")),n.setAttribute(h,"fill",c.symbolColor),h.style.zIndex=1001,h.id="playButton-"+o,h.addEventListener(r.MOUSE_ENTER,(function(){c.buttonHighlighting&&n.setAttribute(l,"opacity","0.15"),c.buttonAnimation&&n.setAttribute(h,"transform","scale(1.0)")})),h.addEventListener(r.MOUSE_LEAVE,(function(){c.buttonHighlighting&&n.setAttribute(l,"opacity","0"),c.buttonAnimation&&n.setAttribute(h,"transform","scale(0.9)")})),h.appendChild(g),h.addEventListener(e.mobile?r.TOUCH_START:r.MOUSE_DOWN,(function(){c.buttonAnimation&&n.setAttribute(h,"transform","scale(0.8)")})),h.addEventListener(e.mobile?r.TOUCH_END:r.MOUSE_UP,(function(e){e&&void 0!==e.button&&0!==e.button||(A&&clearTimeout(A)&&(A=0),A=setTimeout((function(){h&&-1!==n.getAttribute(h,"transform").indexOf("0.8")&&n.setAttribute(h,"transform","scale(1.0)"),s.emit(i.PLAY)}),50))})),d.appendChild(h),d.style.width=T.width+"px",d.style.height=T.height+"px",d.style.cursor=c.buttonCursor,{destroy:function(){A&&clearTimeout(A)&&(A=0),null!==d&&null!==h&&null!==h.parentNode&&h.parentNode===d&&d.removeChild(h),h=null}}}}}.apply(t,r))||(e.exports=i)},995:function(e,t,n){var r,i;r=[n(1933),n(6627),n(7176),n(9583),n(492),n(6637)],void 0===(i=function(e,t,n,r,i,a){"use strict";return{create:function(e,t,o){var s,d,u,c=[{type:r.STATE_CHANGE,listener:function(e){switch(e.state){case i.BUFFERING:case i.PLAYING:u&&(u.style.visibility="hidden");break;case i.READY:u&&(u.style.visibility="visible");break;case i.LOADING:s===i.READY&&u&&(u.style.visibility="visible");break;case i.PAUSED:!E&&u&&(u.style.visibility="visible")}s=e.state}}],l=o.style,f=l.poster,m="string"==typeof f&&f.length,E=l.keepFrame,p=o.playback.crossOrigin,h=16,g=9,b=I(),_=["100%","100%"],T=b.width/b.height,A=h/g,S=(T-A).toFixed(2),y=1,v=1,R=0,O=0;function I(){return t&&(R=t.clientWidth,O=t.clientHeight),{width:R,height:O}}function C(){m&&d&&(b=I(),T=b.width/b.height,S=Math.round(100*(T-A))/100,v=y=1,S<0?v=Math.round(T/A*100)/100:S>=0&&(y=Math.round(A/T*100)/100),n.normalize(d,"transform","translate(-50%, -50%) scaleX("+y+") scaleY("+v+") rotate(0deg)"))}function N(){d&&(d.parentNode.removeChild(d),d=null),u&&(u.parentNode.removeChild(u),u=null),m=!1}function D(){N()}function w(){d&&d.naturalWidth&&d.naturalHeight&&(h=d.naturalWidth,g=d.naturalHeight,A=h/g,C())}return a.add({target:e,listeners:c}),function(){if(m){switch((u=document.createElement("div")).style.width=_[0],u.style.height=_[1],u.style.top=0,u.style.left=0,u.style.position="absolute",u.style.zIndex=999,u.style.visibility="visible",u.style.backgroundColor=l.backgroundColor,(d=document.createElement("img")).style.width=_[0],d.style.height=_[1],d.style.position="absolute",d.style.left="50%",d.style.top="50%",d.style.marginRight="-50%",d.style.backgroundColor=l.backgroundColor,n.normalize(d,"transform","translate(-50%, -50%)"),d.style.zIndex=999,p){case"anonymous":case"use-credentials":d.setAttribute("crossOrigin",p)}d.onerror=D,d.onload=w,d.src=f,u.appendChild(d),t.appendChild(u),C()}}(),{update:function(){m&&C()},destroy:function(){N(),a.remove({target:e,listeners:c})}}}}}.apply(t,r))||(e.exports=i)},7661:function(e,t,n){var r,i;r=[n(1933),n(6627),n(7176),n(9583),n(492),n(6637),n(6182),n(995)],void 0===(i=function(e,t,n,r,i,a,o,s){"use strict";return{create:function(d,u,c){var l,f,m,E=[],p=c.style,h=t.isMediaOverQuicSupported&&c.playback.enableMediaOverQuic,g=!1,b=[{type:r.STATE_CHANGE,listener:function(e){f=e.state;for(var t=0;t<E.length;t+=1){var n=E[t];n instanceof Element&&(p.audioPlayer?n.style.visibility="hidden":f===i.READY||f===i.PAUSED?!p.keepFrame&&(n.style.visibility="hidden"):f===i.PLAYING&&!p.keepFrame&&(n.style.visibility="visible"))}}},{type:r.STREAM_INFO,listener:function(){for(var e=0;e<E.length;e+=1){var t=E[e];t instanceof Element&&p.audioPlayer&&(t.style.visibility="hidden")}}},{type:o.FULLSCREEN_CHANGE,listener:function(e){g=e.data.entered;for(var t=0;t<E.length;t+=1){var n=E[t];n instanceof Element&&(g?n.style.setProperty("background-color",p.fullScreenBackgroundColor):n.style.setProperty("background-color",p.backgroundColor))}}}],_=!1;return function(t){var n,r,i,a,o,f=["width","height"],E=0;(l=document.getElementById(u))&&("auto"!==t.width&&"auto"!==t.height?t.audioPlayer?t.width&&t.height?(l.style.width=t.width,l.style.height=t.height):t.width?(l.style.width=t.width,l.style.height=Math.round(e.mobile?100/9:100/12)/100*l.clientWidth+"px"):l.clientWidth||l.clientHeight?l.clientWidth&&(l.style.height=Math.round(e.mobile?100/9:100/12)/100*l.clientWidth+"px"):(l.style.width="640px",l.style.height=Math.round(e.mobile?100/9:100/12)/100*l.clientWidth+"px"):t.width&&t.height?(l.style.width=t.width,l.style.height=t.height):(t.width||t.height)&&t.aspectratio?(i=-1!==t[f[E=+!!t.height]].indexOf("%"),a=-1!==t[f[E]].indexOf("px"),l.style[f[E]]=t[f[E]],(o=t.aspectratio.split("/"))[0]=parseInt(o[0],10),o[1]=parseInt(o[1],10),(i||a)&&(n=parseInt(t[f[E]].replace(i?"%":"px",""),10),r=Math.round(n*o[+!E]/o[E]).toString()+(i?"%":"px"),l.style[f[+!E]]=r)):(t.width||t.height)&&(t.width||t.aspectratio)&&(t.aspectratio||t.height)||l.clientWidth&&l.clientHeight||(l.style.width="640px",l.style.height="360px"):l.clientWidth||l.clientHeight?l.clientWidth||"auto"!==t.width?l.clientHeight||(t.aspectratio&&!t.audioPlayer?((o=t.aspectratio.split("/"))[0]=parseInt(o[0],10),o[1]=parseInt(o[1],10),l.style.height=Math.round(l.clientWidth/o[0]*o[1]).toString()+"px"):l.style.height=t.audioPlayer?Math.round(e.mobile?100/6:100/12)/100*l.clientWidth+"px":Math.round(l.clientWidth/16*9).toString()+"px"):t.aspectratio?((o=t.aspectratio.split("/"))[0]=parseInt(o[0],10),o[1]=parseInt(o[1],10),l.style.width=Math.round(l.clientHeight*o[0]/o[1]).toString()+"px"):l.style.width=Math.round(16*l.clientHeight/9).toString()+"px":(l.style.width="640px",l.style.height=t.audioPlayer?Math.round(e.mobile?100/6:100/12)/100*l.clientWidth+"px":"360px"),l.style.overflow="hidden",l.style.position="relative",l.style.backgroundColor=t.audioPlayer?"transparent":t.backgroundColor?t.backgroundColor:"black",m=s.create(d,l,c))}(p),{update:function(){for(_||(a.add({target:d,listeners:b}),_=!0);E.length;)E.pop();var e;if(l){if(t.isAboveIOS11&&t.mustUseHLS||!t.isIOS&&t.mustUseHLS){var r=l.querySelectorAll("iframe");for(e=0;e<r.length;e+=1)r[e].contentDocument&&r[e].contentDocument.body&&r[e].contentDocument.body&&E.push(r[e].contentDocument.body.firstChild)}else{var i=h&&l.querySelector("canvas")?l.querySelectorAll("canvas"):l.querySelectorAll("video");for(i.length||(i=l.querySelectorAll("video")),e=0;e<i.length;e+=1)E.push(i[e])}for(e=0;e<E.length;e+=1){var o=E[e];o instanceof Element&&(o.style.width="100%",o.style.height="100%",o.style.position="absolute",o.style.left="50%",o.style.top="50%",o.style.marginRight="-50%",o.style.backgroundColor=p.audioPlayer?"transparent":g?p.fullScreenBackgroundColor:p.backgroundColor,n.normalize(o,"transform","translate(-50%, -50%)"))}m.update()}},destroy:function(){for(m.destroy(),m=null,a.remove({target:d,listeners:b}),l=null;E.length;)E.pop()}}}}}.apply(t,r))||(e.exports=i)},3740:function(e,t,n){var r,i;r=[n(6627),n(8333)],void 0===(i=function(e,t){"use strict";var n=t.create("Attribute");function r(e,t){var r=!!(e&&1===e.nodeType&&t&&"string"==typeof t&&t.length);return!r&&n.debugEnabled()&&n.debug("element not existing or invalid property"),r}return{setAttribute:function(t,n,i){if(r(t,n))try{e.isTridentBrowser&&"transform"===n?t.style.transform=i:t.setAttribute(n,i)}catch(e){}},getAttribute:function(t,n){var i=void 0;if(r(t,n))try{i=e.isTridentBrowser&&"transform"===n?t.style.transform:t.getAttribute(n)}catch(e){}return i}}}.apply(t,r))||(e.exports=i)},7251:function(e,t,n){var r,i;r=[n(3740)],void 0===(i=function(e){"use strict";return{create:function(t){var n="http://www.w3.org/2000/svg",r=document.createElementNS(n,"svg"),i=document.createElementNS(n,"defs"),a=document.createElementNS(n,"radialGradient"),o=document.createElementNS(n,"linearGradient"),s=document.createElementNS(n,"linearGradient"),d=document.createElementNS(n,"stop"),u=document.createElementNS(n,"stop"),c=document.createElementNS(n,"stop"),l=document.createElementNS(n,"stop"),f=document.createElementNS(n,"stop"),m=document.createElementNS(n,"stop"),E=document.createElementNS(n,"stop"),p=document.createElementNS(n,"stop"),h=document.createElementNS(n,"stop"),g=document.createElementNS(n,"stop"),b=document.createElementNS(n,"stop"),_=document.createElementNS(n,"stop");return d.setAttribute("offset","0%"),d.setAttribute("stop-color",t),u.setAttribute("offset","30%"),u.setAttribute("stop-color",t),c.setAttribute("stop-opacity","1"),c.setAttribute("offset","70%"),c.setAttribute("stop-color",t),c.setAttribute("stop-opacity","1"),l.setAttribute("offset","100%"),l.setAttribute("stop-color",t),l.setAttribute("stop-opacity","0"),f.setAttribute("offset","0%"),f.setAttribute("stop-color",t),m.setAttribute("offset","80%"),m.setAttribute("stop-color",t),E.setAttribute("offset","90%"),E.setAttribute("stop-color",t),E.setAttribute("stop-opacity","0.1"),p.setAttribute("offset","100%"),p.setAttribute("stop-color",t),p.setAttribute("stop-opacity","0"),h.setAttribute("offset","0%"),h.setAttribute("stop-color",t),b.setAttribute("stop-opacity","0"),g.setAttribute("offset","10%"),g.setAttribute("stop-color",t),b.setAttribute("stop-opacity","0.15"),b.setAttribute("offset","90%"),b.setAttribute("stop-color",t),b.setAttribute("stop-opacity","0.15"),_.setAttribute("offset","100%"),_.setAttribute("stop-color",t),_.setAttribute("stop-opacity","0"),a.setAttribute("id","hoverTransparencyRadial"),o.setAttribute("id","hoverTransparencyHorizontal"),s.setAttribute("id","hoverTransparencyVertical"),s.setAttribute("x1","0"),s.setAttribute("y1","0"),s.setAttribute("x2","0"),s.setAttribute("y2","1"),a.appendChild(d),a.appendChild(u),a.appendChild(c),a.appendChild(l),o.appendChild(f),o.appendChild(m),o.appendChild(E),o.appendChild(p),s.appendChild(h),s.appendChild(g),s.appendChild(b),s.appendChild(_),i.appendChild(a),i.appendChild(o),i.appendChild(s),e.setAttribute(r,"version","1.1"),e.setAttribute(r,"xmlns",n),e.setAttribute(r,"xmlns:xlink","http://www.w3.org/1999/xlink"),e.setAttribute(r,"enable-background","new 0 0 0 0"),e.setAttribute(r,"xml:space","preserve"),e.setAttribute(r,"x","0px"),e.setAttribute(r,"y","0px"),r.appendChild(i),{get:function(){return r},getGradientUrl:function(e){var t="";switch(e=e||"radial"){case"horizontal":t=o.getAttribute("id");break;case"vertical":t=s.getAttribute("id");break;case"radial":t=a.getAttribute("id")}return"url(#"+t+")"}}}}}.apply(t,r))||(e.exports=i)},8143:function(e,t){var n;void 0===(n=function(){"use strict";return{format:function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60);e=Math.floor(e-3600*t-60*n);var r="";return 0!==t&&(r=t+":"),(r+=(n=n<10&&""!==r?"0"+n:String(n))+":")+(e<10?"0"+e:String(e))}}}.apply(t,[]))||(e.exports=n)},5623:function(e,t){var n;void 0===(n=function(){"use strict";return{isColor:function(e){var t=/^[a-zA-Z]*$/.test(e)&&1===["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","Darkorange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"].filter((function(t){return t.toLowerCase()===e.toLowerCase()})).length,n=/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3}|[a-fA-F0-9]{8}|[a-fA-F0-9]{4})$/.test(e),r=/^[Rr][Gg][Bb]\(\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*\)$/.test(e),i=/^[Rr][Gg][Bb][Aa]\(\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*,\s*((0.[1-9])|[01])\s*\)$/.test(e),a=/^[Hh][Ss][Ll]\(\s*(0|[1-9]\d?|[12]\d\d|3[0-5]\d)\s*,\s*((0|[1-9]\d?|100)%)\s*,\s*((0|[1-9]\d?|100)%)\s*\)$/.test(e),o=/^[Hh][Ss][Ll][Aa]\(\s*(0|[1-9]\d?|[12]\d\d|3[0-5]\d)\s*,\s*((0|[1-9]\d?|100)%)\s*,\s*((0|[1-9]\d?|100)%)\s*,\s*((0.[1-9])|[01])\s*\)$/.test(e);return t||n||r||i||a||o}}}.apply(t,[]))||(e.exports=n)},1583:function(e,t,n){var r,i;r=[n(1933),n(1473),n(9088),n(9658),n(6627),n(9583),n(5623),n(2058),n(5109),n(4355),n(8564),n(5459),n(2833),n(6182),n(8741),n(9087),n(1117),n(5403),n(4869),n(6471),n(7661),n(729),n(1890),n(4103),n(6643)],void 0===(i=function(e,t,n,r,i,a,o,s,d,u,c,l,f,m,E,p,h,g,b,_,T,A,S,y,v){"use strict";function R(){this.version=""}var O=R.prototype=Object.create(r.prototype);return O.setBaseValues=function(e){this.config=s.create(),this._playerDivId=e,this._emitter=new r,this._muted=!1,this._volume=100,this._handleAutoplay=!1,this.state=l.IDLE},O.baseSetup=function(e){this._validate(e.style),t.extend(e,this.config),t.merge(e,this.config),t.clean(this.config),this.registerExternalEventHandler(),(i.mustUseHLS||i.canUseHLS&&this.config.playback.allowSafariHlsFallback)&&(this.config.style.keepFrame=!1),this.config.style.view?(this._style=T.create(this._emitter,this._playerDivId,this.config),this.config.style.audioPlayer||(this.config.style.centerView&&(this._middleView=A.create(this._playerDivId,this._emitter,this.config)),this._resizeListener=u.create(this._playerDivId,this._emitter),this._mutationListener=c.create(this._playerDivId,this._emitter),this.config.style.interactive&&(this._interactive=_.create(this._playerDivId,this._emitter))),this.config.style.controls&&(this._controls=v.create(this._playerDivId,this._emitter,this.config)),this.config.style.audioPlayer||(this._fullscreen=y.create(this._playerDivId,this._emitter,this.config))):this._fullscreen=y.create(this._playerDivId,this._emitter,this.config),this.registerInternalEventHandler()},O.postSetup=function(){this.config.style.view&&(this._style.update(),this.config.style.interactive&&!this.config.style.audioPlayer?this._interactive.update():this.config.style.controls&&this._controls.show())},O.registerExternalEventHandler=function(){for(var e in m)Object.prototype.hasOwnProperty.call(m,e)&&this._emitter.on(m[e],this._emit.bind(this,m[e]))},O.registerInternalEventHandler=function(){var e,t;if(this._interactive&&(this._emitter.on(h.PLAYBUTTON_SINGLE_CLICK,function(){this.state!==l.READY&&this.state!==l.PAUSED?this._emitter.emit(m.PAUSE):this._emitter.emit(m.PLAY)}.bind(this)),this._emitter.on(h.AUDIO_SINGLE_CLICK,function(){this._muted?this._emitter.emit(m.UNMUTE):this._emitter.emit(m.MUTE)}.bind(this)),this._emitter.on(h.PLAYER_SINGLE_CLICK,function(){this._controls&&this._controls.appear()}.bind(this))),this._controls)for(e in t=[g.FULLSCREEN_CHANGE],g)Object.prototype.hasOwnProperty.call(g,e)&&Object.prototype.hasOwnProperty.call(m,e)&&(-1===t.indexOf(g[e])?this._emitter.on(g[e],this._emitter.emit.bind(this._emitter,m[e])):this._fullscreen&&this._emitter.on(g[e],function(){this._fullscreen&&this._fullscreen.change()}.bind(this)));if(this._fullscreen)for(e in t=[p.FULLSCREEN_ERROR],p)Object.prototype.hasOwnProperty.call(p,e)&&-1===t.indexOf(p[e])&&(this._emitter.on(p[e],this._emitter.emit.bind(this._emitter,m[e])),this._emitter.on(p[e],this.handleFullscreen.bind(this)));this._resizeListener&&(this._emitter.on(m.PLAYER_RESIZE,this._onPlayerResize.bind(this)),this._onPlayerResize(null)),this._mutationListener&&this._emitter.on(m.PLAYER_MEDIA_ELEMENT_ADDED,this._onPlayerMediaElementAdded.bind(this))},O.removeExternalEventHandler=function(){if(this._emitter)for(var e in m)Object.prototype.hasOwnProperty.call(m,e)&&this._emitter.removeAllListeners(m[e])},O.removeInternalEventHandler=function(){if(this._emitter){var e;if(this._interactive&&(this._emitter.removeAllListeners(h.PLAYER_SINGLE_CLICK),this._emitter.removeAllListeners(h.PLAYBUTTON_SINGLE_CLICK),this._emitter.removeAllListeners(h.AUDIO_SINGLE_CLICK)),this._controls)for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&Object.prototype.hasOwnProperty.call(m,e)&&this._emitter.removeAllListeners(g[e]);if(this._fullscreen)for(e in p)Object.prototype.hasOwnProperty.call(p,e)&&this._emitter.removeAllListeners(p[e]);this._resizeListener&&this._emitter.removeAllListeners(m.PLAYER_RESIZE),this._mutationListener&&this._emitter.removeAllListeners(m.PLAYER_MEDIA_ELEMENT_ADDED)}},O.destroy=function(){this.removeExternalEventHandler(),this.removeInternalEventHandler(),this._emitter=null,this._resizeListener&&this._resizeListener.destroy(),this._resizeListener=null,this._mutationListener&&this._mutationListener.destroy(),this._mutationListener=null,this._style&&this._style.destroy(),this._style=null,this._interactive&&this._interactive.destroy(),this._interactive=null,this._scaling&&this._scaling.destroy(),this._scaling=null,this._middleView&&this._middleView.destroy(),this._middleView=null,this._controls&&this._controls.destroy(),this._controls=null,this._fullscreen&&this._fullscreen.destroy(),this._fullscreen=null},O.update=function(e){this.state=e.state,this._emitter.emit(a.STATE_CHANGE,e),this.handleView(e.state),this._interactive&&this._interactive.update()},O.handleView=function(e){switch(this._viewTimeout&&clearTimeout(this._viewTimeout),e){case l.UNINITIALIZED:this._middleView&&this._middleView.update(b.ERROR),this._controls&&this._controls.destroy();break;case l.IDLE:this._middleView&&this._middleView.update(b.NONE);break;case l.READY:this._middleView&&this._middleView.update(b.PLAYBUTTON),this._controls&&this._controls.play();break;case l.LOADING:this._middleView&&this._middleView.update(b.LOADING),this._controls&&this._controls.pause();break;case l.PLAYING:this.handleAudio(),this._controls&&this._controls.pause();break;case l.PAUSED:this._middleView&&this._middleView.update(b.PLAYBUTTON),this._controls&&this._controls.play();break;case l.BUFFERING:this._viewTimeout=setTimeout(function(){this._middleView&&this._middleView.update(b.LOADING),this._controls&&this._controls.pause()}.bind(this),1e3);break;case l.UNKNOWN:this._middleView&&this._middleView.update(b.NONE)}this.state=e},O.handleConfig=function(e){this._handleAutoplay=e.playback.autoplay},O.handleStreamInfo=function(e){this._emitter.emit(a.STREAM_INFO,e),this.progressStreamInfo(e)},O.handleStreamInfoUpdate=function(e){this._emitter.emit(a.STREAM_INFO_UPDATE,e),this.progressStreamInfo(e)},O.progressStreamInfo=function(e){this.streamInfo=e.data.streamInfo,this._style&&this._style.update(),this._interactive&&this._interactive.update(),this._scaling&&this._scaling.destroy()&&(this._scaling=null),this.streamInfo.haveVideo&&(this._scaling=S.create(this._playerDivId,this.streamInfo.videoInfo,this.config.style.scaling,this.config))},O.handleAudio=function(){var e=this.state===l.PLAYING,t=this.streamInfo&&this.streamInfo.haveAudio;e&&!this._muted&&t&&(this._handleAutoplay=!1);var n=this.config.style.displayMutedAutoplay&&this._muted&&this._handleAutoplay,r=this.config.style.displayAudioOnly&&this.streamInfo&&!this.streamInfo.haveVideo;e&&(t&&n||r?this._middleView&&this._middleView.update(b.AUDIO,[this._muted,this._volume]):this._middleView&&this._middleView.update(b.NONE))},O.handleMute=function(e,t){this._controls&&(e?this._controls.mute(t):this._controls.unmute(t)),this._muted=e,this.handleAudio()},O.handleVolume=function(e){this._controls&&this._controls.volume(e),this._volume=e,this.handleMute(this._muted,this._volume)},O.handleFullscreen=function(e){this._controls&&this._controls.fullscreen(e.data.entered)},O.handleStats=function(e){this._controls&&this._controls.time(e.currentTime)},O.handleMetaData=function(e){if(this._scaling&&"object"==typeof e.data.message&&Object.prototype.hasOwnProperty.call(e.data.message,"nanoStreamStatus")){var t="object"==typeof e.data.message.nanoStreamStatus&&Object.prototype.hasOwnProperty.call(e.data.message.nanoStreamStatus,"VideoRotation")?e.data.message.nanoStreamStatus.VideoRotation:0,n=this._scaling.getState();n.scalingMode===this.config.style.scaling&&n.rotationMode===t||this._scaling.update(this.config.style.scaling,t)}},O.handleActiveVideoElementChange=function(){this._style&&this._style.update(),this._scaling&&this._scaling.update()},O.requestFullscreen=function(){return new Promise(function(e,t){function n(){this._emitter.off(p.FULLSCREEN_ERROR,r),e()}function r(e){this._emitter.off(p.FULLSCREEN_CHANGE,n),t({reason:e.data.reason})}this._fullscreen&&this._fullscreen.enabled()?this._fullscreen.entered()?n.call(this):(this._emitter.once(p.FULLSCREEN_CHANGE,n.bind(this)),this._emitter.once(p.FULLSCREEN_ERROR,r.bind(this)),this._fullscreen.change()):r.call(this,{data:{reason:"disabled"}})}.bind(this))},O.exitFullscreen=function(){return new Promise(function(e,t){function n(){this._emitter.off(p.FULLSCREEN_ERROR,r),e()}function r(e){this._emitter.off(p.FULLSCREEN_CHANGE,n),t({reason:e.data.reason})}this._fullscreen&&this._fullscreen.enabled()?this._fullscreen.entered()?(this._emitter.once(p.FULLSCREEN_CHANGE,n.bind(this)),this._emitter.once(p.FULLSCREEN_ERROR,r.bind(this)),this._fullscreen.change()):n.call(this):r.call(this,{data:{reason:"disabled"}})}.bind(this))},O._emit=function(e,t){var n={};t&&t.name&&t.data?n=t:t?(n.data=t,n.name=e||"unknown"):(n.data={},n.name=e||"unknown"),n.player=this._playerDivId,n.state=this.state,this.emit(n.name,n)},O._validate=function(e){e.symbolColor&&!o.isColor(e.symbolColor)&&delete e.symbolColor,e.controlBarColor&&!o.isColor(e.controlBarColor)&&delete e.controlBarColor,"inherit"===e.fullScreenBackgroundColor&&(e.fullScreenBackgroundColor=e.backgroundColor)},O._onPlayerResize=function(){this.handleView(this.state),this._interactive&&this._interactive.update(),this._style&&this._style.update(),this._scaling&&this._scaling.update(),this._controls&&this._controls.size()},O._onPlayerMediaElementAdded=function(){this._style&&this._style.update(),this._scaling&&this._scaling.update()},R.events=m,R.publicEvents=E,R.emptyConfig=s,R.validConfig=d,R}.apply(t,r))||(e.exports=i)}},t={};!function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}(9921)}();